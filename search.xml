<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Sky-User-Centeré¡¹ç›®ä»‹ç»</title>
      <link href="//posts/c43bf339.html"/>
      <url>//posts/c43bf339.html</url>
      
        <content type="html"><![CDATA[<h1 id="Sky-User-Centeré¡¹ç›®ä»‹ç»"><a href="#Sky-User-Centeré¡¹ç›®ä»‹ç»" class="headerlink" title="Sky-User-Centeré¡¹ç›®ä»‹ç»"></a>Sky-User-Centeré¡¹ç›®ä»‹ç»</h1><h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><p>ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå®ç°äº†ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æŸ¥è¯¢ç­‰åŸºç¡€åŠŸèƒ½ã€‚</p><blockquote><p> æœ¬é¡¹ç›®å‰åç«¯å‡ä½¿ç”¨Dockerå®¹å™¨éƒ¨ç½²</p></blockquote><p><strong>é¡¹ç›®åœ¨çº¿è®¿é—®é“¾æ¥ï¼š</strong> <a href="http://skyuc.twintea.top/">Sky-User-Center</a></p><p>[ç™»å½•]</p><p>ï¼ˆç®¡ç†å‘˜ï¼šè´¦å·ï¼šonlineadminï¼›å¯†ç ï¼š12345678ï¼‰</p><p><img src="https://img.twintea.top/Projects_Notes/sky-user-center-readme/202303121800164.png" alt="image-20230312171048928"></p><p>[æ³¨å†Œ] ï¼ˆæ³¨å†Œç ä¸ºåç»­ä¼˜åŒ–éƒ¨åˆ†ï¼Œç›®å‰åœ¨æ³¨å†Œæ—¶å¯ä»¥éšä¾¿å¡«ï¼‰</p><p>é»˜è®¤æ³¨å†ŒæˆåŠŸä¹‹åä¸ºæ™®é€šç”¨æˆ·</p><p><img src="https://img.twintea.top/Projects_Notes/sky-user-center-readme/202303121800165.png" alt="image-20230312171306695"></p><p>æ™®é€šç”¨æˆ·çš„ç™»å½•æˆåŠŸåçš„å±•ç¤ºé¡µé¢ï¼š</p><p>ï¼ˆæ²¡æœ‰ç®¡ç†é¡µé¢ï¼‰</p><p><img src="https://img.twintea.top/Projects_Notes/sky-user-center-readme/202303121800166.png" alt="image-20230312171834233"></p><p>å½“æ™®é€šç”¨æˆ·å°è¯•è®¿é—®ç®¡ç†é¡µé¢æ—¶å€™ï¼š</p><p><img src="https://img.twintea.top/Projects_Notes/sky-user-center-readme/202303121800167.png" alt="image-20230312171940333"></p><p>å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·ç™»å½•ï¼š</p><p><img src="https://img.twintea.top/Projects_Notes/sky-user-center-readme/202303121800168.png" alt="image-20230312172121805"></p><h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h2><h3 id="å‰ç«¯ğŸœ"><a href="#å‰ç«¯ğŸœ" class="headerlink" title="å‰ç«¯ğŸœ"></a>å‰ç«¯ğŸœ</h3><p>ä¸»è¦è¿ç”¨é˜¿é‡Œ Ant Design ç”Ÿæ€ï¼š</p><ul><li>HTML + CSS + JavaScript ä¸‰ä»¶å¥—</li><li>React å¼€å‘æ¡†æ¶</li><li>Ant Design Pro é¡¹ç›®æ¨¡æ¿</li><li>Ant Design ç«¯ç»„ä»¶åº“</li><li>Umi å¼€å‘æ¡†æ¶</li><li>Umi Request è¯·æ±‚åº“</li></ul><h3 id="åç«¯ğŸƒ"><a href="#åç«¯ğŸƒ" class="headerlink" title="åç«¯ğŸƒ"></a>åç«¯ğŸƒ</h3><ul><li>Java ç¼–ç¨‹è¯­è¨€</li><li>Spring + SpringMVC + SpringBoot æ¡†æ¶</li><li>MyBatis + MyBatis Plus æ•°æ®è®¿é—®æ¡†æ¶</li><li>MySQL æ•°æ®åº“</li><li>jUnit å•å…ƒæµ‹è¯•åº“</li></ul><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>è¯¦è§<br><a href="https://blog.twintea.top/posts/6e6359df.html">é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿</a></p><ul><li><p>å•æœºéƒ¨ç½²</p><ul><li><p>å‰ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å®‰è£…ä¾èµ–</span><br><span class="line">yarn</span><br><span class="line">//é¡¹ç›®å¯åŠ¨</span><br><span class="line">npm run start:no-mock</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åç«¯</p><p>ä¿®æ”¹application.ymlçš„æ•°æ®åº“é…ç½®</p><p>ç„¶ååœ¨ideaé‡Œé¢æ‰¾åˆ°å¯åŠ¨ç±»å¯åŠ¨å°±è¡Œäº†</p></li><li><p>Nginx</p></li><li><p>å®¹å™¨</p></li></ul><h3 id="å¼€å‘ç¬”è®°ğŸ¤”"><a href="#å¼€å‘ç¬”è®°ğŸ¤”" class="headerlink" title="å¼€å‘ç¬”è®°ğŸ¤”"></a>å¼€å‘ç¬”è®°ğŸ¤”</h3><p><a href="https://blog.twintea.top/posts/8036cfa7.html">Sky-User-Centerå¼€å‘ç¬”è®°</a></p><h3 id="åç»­ä¼˜åŒ–ğŸ¤­"><a href="#åç»­ä¼˜åŒ–ğŸ¤­" class="headerlink" title="åç»­ä¼˜åŒ–ğŸ¤­"></a>åç»­ä¼˜åŒ–ğŸ¤­</h3><p>(<del>çœ‹æƒ…å†µï¼Œå½“åç»­é¡¹ç›®ç”¨åˆ°ç®¡ç†ç³»ç»Ÿå†ä»¥æ­¤ä¸ºæ¨¡æ¿æ›´æ–°</del>)</p><ol><li>åŠŸèƒ½æ‰©å……<ol><li>ç®¡ç†å‘˜åˆ›å»ºç”¨æˆ·ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ã€åˆ é™¤ç”¨æˆ·</li><li>ä¸Šä¼ å¤´åƒ</li><li>æŒ‰ç…§æ›´å¤šçš„æ¡ä»¶å»æŸ¥è¯¢ç”¨æˆ·</li><li>æ›´æ”¹æƒé™</li></ol></li><li>ä¿®æ”¹ Bug</li><li>é¡¹ç›®ç™»å½•æ”¹ä¸ºåˆ†å¸ƒå¼ sessionï¼ˆå•ç‚¹ç™»å½• - redisï¼‰</li><li>é€šç”¨æ€§<ol><li>set-cookie domain åŸŸåæ›´é€šç”¨ï¼Œæ¯”å¦‚æ”¹ä¸º *.xxx.com</li><li>æŠŠç”¨æˆ·ç®¡ç†ç³»ç»Ÿ &#x3D;&gt; ç”¨æˆ·ä¸­å¿ƒï¼ˆä¹‹åæ‰€æœ‰çš„æœåŠ¡éƒ½è¯·æ±‚è¿™ä¸ªåç«¯ï¼‰</li></ol></li><li>åå°æ·»åŠ å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€å»åˆ¤æ–­ç”¨æˆ·æƒé™ã€ç»Ÿä¸€è®°å½•è¯·æ±‚æ—¥å¿—ï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sky-User-Center </tag>
            
            <tag> ç”¨æˆ·ä¸­å¿ƒ </tag>
            
            <tag> é¡¹ç›®ä»‹ç» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sky-User-Centerå¼€å‘ç¬”è®°</title>
      <link href="//posts/8036cfa7.html"/>
      <url>//posts/8036cfa7.html</url>
      
        <content type="html"><![CDATA[<h1 id="Sky-User-Centerå¼€å‘ç¬”è®°"><a href="#Sky-User-Centerå¼€å‘ç¬”è®°" class="headerlink" title="Sky-User-Centerå¼€å‘ç¬”è®°"></a>Sky-User-Centerå¼€å‘ç¬”è®°</h1><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><h3 id="1ã€å‰ç«¯åˆå§‹åŒ–"><a href="#1ã€å‰ç«¯åˆå§‹åŒ–" class="headerlink" title="1ã€å‰ç«¯åˆå§‹åŒ–"></a>1ã€å‰ç«¯åˆå§‹åŒ–</h3><ol><li><p>ä¸‹è½½nodejs</p></li><li><p>ä¸‹è½½npmå’Œyarn</p></li><li><p><a href="https://pro.ant.design/zh-CN/">å¼€ç®±å³ç”¨çš„ä¸­å°å‰ç«¯&#x2F;è®¾è®¡è§£å†³æ–¹æ¡ˆ - Ant Design Pro</a>ï¼Œæ ¹æ®æ–‡æ¡£å¿«é€Ÿåˆå§‹åŒ–ï¼Œæ³¨æ„é€‰æ‹©ç®€å•è„šæ‰‹æ¶ï¼ˆsimple)</p></li><li><p>è¿è¡Œé¡¹ç›®</p><p>ç™»å½•ç•Œé¢å¦‚å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230302190745831.png" alt="image-20230302190745831" style="zoom: 67%;" /><p>ç™»å½•æˆåŠŸå¦‚å›¾ï¼š</p></li></ol><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230302191010574.png" alt="image-20230302191010574" style="zoom: 50%;" /><ol start="5"><li><p>å®‰è£…Umi UI</p><p>è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆé¡µé¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å®‰è£…æˆåŠŸé‡å¯é¡¹ç›®ï¼Œå‘ç°é¡µé¢å³ä¸‹è§’å¤šäº†è¿™ä¸ªå›¾æ ‡</p></li></ol><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230302192605487.png" alt="image-20230302192605487" style="zoom:50%;" /><p>â€‹</p><ol start="6"><li><p>ç‚¹å‡»è¿™ä¸ªå›¾æ ‡ï¼Œç”Ÿæˆåˆ†æé¡µé¢</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230302193042687.png" alt="image-20230302193042687" style="zoom:50%;" /></li></ol><p>â€‹ç­‰å¾…ç¼–è¯‘ä¸‹è½½å®Œæˆï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸€ä¸ªåˆ†æé¡µé¢</p>   <img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230302194212642.png" alt="image-20230302194212642" style="zoom:50%;" /><ol start="7"><li><p>é¡¹ç›®ç®€åŒ–ï¼ˆå»é™¤ä¸éœ€è¦çš„éƒ¨åˆ†ï¼‰</p><ul><li><p>å»é™¤å›½é™…åŒ–</p><p>è¿è¡Œâ€i18n-removeâ€è„šæœ¬</p></li><li><p>å…¶ä»–æ ¹æ®è‡ªèº«éœ€æ±‚åˆ é™¤</p></li></ul></li></ol><p>â€‹</p><h3 id="2ã€åç«¯åˆå§‹åŒ–"><a href="#2ã€åç«¯åˆå§‹åŒ–" class="headerlink" title="2ã€åç«¯åˆå§‹åŒ–"></a>2ã€åç«¯åˆå§‹åŒ–</h3><p>springbootåˆå§‹åŒ–ã€mavenå¼•å…¥pomä¾èµ–ã€ç¼–å†™ymlæ–‡ä»¶ï¼›</p><p>pom.xml:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.7.9&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;groupId&gt;com.twintea&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;user-center&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;name&gt;user-center&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;user-center&lt;/description&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.3.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">            &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;</span><br><span class="line">            &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">            &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.5.1&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;4.13&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;excludes&gt;</span><br><span class="line">                        &lt;exclude&gt;</span><br><span class="line">                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">                        &lt;/exclude&gt;</span><br><span class="line">                    &lt;/excludes&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><p>æ ¹æ®å®é™…éœ€æ±‚ï¼Œ</p><ul><li>è®¾è®¡è¡¨</li><li>è¡¨çš„å­—æ®µ</li><li>å­—æ®µçš„ç±»å‹</li><li>æ˜¯å¦éœ€è¦ç»™å­—æ®µæ·»åŠ ç´¢å¼•</li><li>æ˜¯å¦éœ€è¦è®¾è®¡è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”</li></ul><p>å»ºè¡¨è¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    id            <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;ä¸»é”®&#x27;</span></span><br><span class="line">        <span class="keyword">primary</span> key,</span><br><span class="line">    user_name     <span class="type">varchar</span>(<span class="number">256</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">    user_account  <span class="type">varchar</span>(<span class="number">256</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·è´¦å·&#x27;</span>,</span><br><span class="line">    avatar_url    <span class="type">varchar</span>(<span class="number">1024</span>)                      <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·å¤´åƒåœ°å€&#x27;</span>,</span><br><span class="line">    gender        tinyint                            <span class="keyword">null</span> comment <span class="string">&#x27;æ€§åˆ«&#x27;</span>,</span><br><span class="line">    user_password <span class="type">varchar</span>(<span class="number">512</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·å¯†ç &#x27;</span>,</span><br><span class="line">    email         <span class="type">varchar</span>(<span class="number">512</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">    user_status   <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·çŠ¶æ€ 0-æ­£å¸¸&#x27;</span>,</span><br><span class="line">    phone         <span class="type">varchar</span>(<span class="number">128</span>)                       <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·æ‰‹æœºå·ç &#x27;</span>,</span><br><span class="line">    create_time   datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    update_time   datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    is_delete     tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦è¢«åˆ é™¤ 0-æ­£å¸¸&#x27;</span></span><br><span class="line">    user_role     <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·è§’è‰² 0-é»˜è®¤ 1-ç®¡ç†å‘˜&#x27;</span></span><br><span class="line">)</span><br><span class="line">    comment <span class="string">&#x27;ç”¨æˆ·&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç™»å½•ã€æ³¨å†Œçš„é€»è¾‘"><a href="#ç™»å½•ã€æ³¨å†Œçš„é€»è¾‘" class="headerlink" title="ç™»å½•ã€æ³¨å†Œçš„é€»è¾‘"></a>ç™»å½•ã€æ³¨å†Œçš„é€»è¾‘</h2><h3 id="æ³¨å†Œé€»è¾‘"><a href="#æ³¨å†Œé€»è¾‘" class="headerlink" title="æ³¨å†Œé€»è¾‘"></a>æ³¨å†Œé€»è¾‘</h3><ol><li>ç”¨æˆ·åœ¨å‰ç«¯ç•Œé¢è¾“å…¥è´¦æˆ·å’Œå¯†ç ã€æ ¡éªŒç ï¼ˆå¯èƒ½æ˜¯æ‰‹æœºéªŒè¯ç TODO)</li><li>æ ¡éªŒç”¨æˆ·çš„è´¦æˆ·ã€è¾“å…¥çš„å¯†ç å’ŒäºŒæ¬¡è¾“å…¥çš„å¯†ç æ˜¯å¦ç¬¦åˆè¦æ±‚<ol><li>éç©º</li><li>è´¦æˆ·é•¿åº¦<strong>ä¸å°äº</strong>4ä½</li><li>å¯†ç <strong>ä¸å°äº</strong>8ä½å¹¶ä¸”ä¸èƒ½è¾“å…¥ç©ºæ ¼</li><li>è´¦æˆ·ä¸èƒ½é‡å¤</li><li>è´¦æˆ·ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦</li><li>å¯†ç å’ŒäºŒæ¬¡è¾“å…¥å¯†ç ä¿æŒä¸€è‡´</li></ol></li><li>å¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼ˆæ•°æ®åº“ä¿å­˜åŠ å¯†åçš„å¯†ç ï¼Œè€Œä¸æ˜¯æ˜æ–‡å¯†ç </li><li>å‘æ•°æ®åº“æ’å…¥ç”¨æˆ·æ•°æ®</li></ol><h3 id="ç™»å½•é€»è¾‘"><a href="#ç™»å½•é€»è¾‘" class="headerlink" title="ç™»å½•é€»è¾‘"></a>ç™»å½•é€»è¾‘</h3><ol><li><p>æ ¡éªŒ</p><ol><li>éç©º</li><li>è´¦æˆ·é•¿åº¦<strong>ä¸å°äº</strong>4ä½</li><li>å¯†ç <strong>ä¸å°äº</strong>8ä½å¹¶ä¸”ä¸èƒ½è¾“å…¥ç©ºæ ¼</li><li>è´¦æˆ·ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦</li></ol></li><li><p>æ ¡éªŒå¯†ç æ˜¯å¦è¾“å…¥æ­£ç¡®ï¼Œè¦å’Œæ•°æ®åº“ä¸­çš„å¯†æ–‡å¯†ç å»è¿›è¡Œå¯¹æ¯”</p></li><li><p>ç”¨æˆ·ä¿¡æ¯è„±æ•ï¼Œéšè—æ•æ„Ÿä¿¡æ¯ï¼Œé˜²æ­¢æ•°æ®åº“ä¸­çš„å­—æ®µæ³„éœ²</p></li><li><p>å°†ç”¨æˆ·çš„ç™»å½•æ€ï¼ˆä¸€èˆ¬ä½sessionï¼‰ï¼Œå°†å…¶å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">userLogin</span><span class="params">(String userAccount, String userPassword, HttpServletRequest request)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">              <span class="comment">//4.è®°å½•ç”¨æˆ·çš„ç™»å½•æ€</span></span><br><span class="line">        request.getSession().setAttribute(USER_LOGIN_STATE,safetyUser);</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›è„±æ•åçš„ç”¨æˆ·ä¿¡æ¯</p></li></ol><h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><p>ç”¨æˆ·ç®¡ç†ä»…å…è®¸ç®¡ç†å‘˜æ“ä½œï¼Œæ‰€ä»¥åŠ¡å¿…<strong>é‰´æƒï¼ï¼ï¼</strong></p><ol><li>ç”¨æˆ·æŸ¥è¯¢<ol><li>æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢</li></ol></li><li>ç”¨æˆ·åˆ é™¤</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ˜¯å¦ä¸ºç®¡ç†å‘˜</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> æ˜¯æˆ–è€…ä¸æ˜¯ç®¡ç†å‘˜</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> Boolean <span class="title function_">isAdmin</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">      <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) request.getSession().getAttribute(USER_LOGIN_STATE);</span><br><span class="line">      <span class="keyword">if</span> (user == <span class="literal">null</span> || user.getUserRole() != ADMIN_ROLE) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>application.ymlæŒ‡å®šæ¥å£å…¨å±€api</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/api</span></span><br></pre></td></tr></table></figure><h2 id="å‰åç«¯äº¤äº’"><a href="#å‰åç«¯äº¤äº’" class="headerlink" title="å‰åç«¯äº¤äº’"></a>å‰åç«¯äº¤äº’</h2><h3 id="ä¿®æ•´"><a href="#ä¿®æ•´" class="headerlink" title="ä¿®æ•´"></a>ä¿®æ•´</h3><p>æ ¹æ®è‡ªèº«éœ€æ±‚åˆ å‡å’Œä¿®æ”¹æ¨¡æ¿çš„ä»£ç </p><h3 id="å¯¹æ¥åå°çš„æ¥å£"><a href="#å¯¹æ¥åå°çš„æ¥å£" class="headerlink" title="å¯¹æ¥åå°çš„æ¥å£"></a>å¯¹æ¥åå°çš„æ¥å£</h3><p>æ‰¾åˆ°è¯¥æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308000151748.png" alt="image-20230308000151748"></p><p>å®šä½åˆ° handleSubmit æ–¹æ³•çš„ä»£ç </p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308000244451.png" alt="image-20230308000244451"></p><p>ç‚¹å‡»LoginParamsä¼šè·³è½¬åˆ°app.tsxçš„ä»¥ä¸‹ä»£ç ï¼š</p><p>æ ¹æ®åç«¯çš„å‚æ•°åç§°ä¿®æ”¹è¿™äº›å­—æ®µï¼ˆ<strong>æ³¨æ„è¦ä½¿ç”¨å…¨å±€ä¿®æ”¹ï¼ï¼ï¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">type</span> <span class="variable">LoginParams</span> <span class="operator">=</span> &#123;</span><br><span class="line">  userAccount?: string; </span><br><span class="line">  userPassword?: string;</span><br><span class="line">  autoLogin?: <span class="type">boolean</span>;</span><br><span class="line">  type?: string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¥ç€å›åˆ° handleSubmit æ–¹æ³•</p><p>æ‰¾åˆ°å¦‚å›¾ä½ç½®ï¼Œå¹¶æ ¹æ®åç«¯çš„å‚æ•°åç§°ä¿®æ”¹å­—æ®µï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦å¢åŠ æ ¡éªŒè§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308004235516.png" alt="image-20230308004235516" style="zoom: 67%;" /><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308004319099.png" alt="image-20230308004319099" style="zoom:67%;" /><p>å®šä½åˆ° login æ–¹æ³•,ä¿®æ”¹çº¢æ¡†å¤„çš„ url ä¸ºåç«¯æ¥å£çš„åœ°å€</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308000824801.png" alt="image-20230308000824801" style="zoom:67%;" /><p>AntDesign Proæä¾›äº†é…ç½®ä»£ç†çš„æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230308004500773.png" alt="image-20230308004500773" style="zoom:67%;" /><p>åœ¨å®Œæˆä¸Šè¿°ä¿®æ”¹åï¼Œè¯·æ±‚çš„åœ°å€å°±å˜æˆäº†<a href="http://localhost:8000/api/user/login%EF%BC%8C">http://localhost:8000/api/user/loginï¼Œ</a></p><p>è¯·æ±‚çš„åœ°å€é€šè¿‡AntDesign Proæä¾›çš„ä»£ç†è‡ªåŠ¨ä»£ç†åˆ° <a href="http://localhost:8080/api/user/login">http://localhost:8080/api/user/login</a></p><p>æ³¨å†Œé¡µé¢ä¹Ÿé‡‡ç”¨ç±»ä¼¼æ–¹æ³•å®Œæˆ</p><h2 id="è·å–å½“å‰ç”¨æˆ·ç™»å½•æ€ã€ä¿¡æ¯æ¥å£"><a href="#è·å–å½“å‰ç”¨æˆ·ç™»å½•æ€ã€ä¿¡æ¯æ¥å£" class="headerlink" title="è·å–å½“å‰ç”¨æˆ·ç™»å½•æ€ã€ä¿¡æ¯æ¥å£"></a>è·å–å½“å‰ç”¨æˆ·ç™»å½•æ€ã€ä¿¡æ¯æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/current&quot;)</span></span><br><span class="line"><span class="keyword">public</span> BaseResponse&lt;User&gt; <span class="title function_">getCurrentUser</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) request.getSession().getAttribute(USER_LOGIN_STATE);</span><br><span class="line">    <span class="comment">/*ç”¨æˆ·çš„æ•°æ®å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿”å›ä»sessionå–åˆ°çš„user</span></span><br><span class="line"><span class="comment">    1. å¯ä»¥åˆ©ç”¨ç¼“å­˜æ›´æ–°æ›´æ–°ç”¨æˆ·çš„æ•°æ®ï¼Œä»ç¼“å­˜ä¸­å»å–</span></span><br><span class="line"><span class="comment">    2.ç›´æ¥æŸ¥åº“ï¼ˆè¿™é‡Œé€‰ç”¨è¿™ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="comment">//ç”¨åˆ°äº†å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œåç«¯ä¼˜åŒ–éƒ¨åˆ†æœ‰ä»‹ç»</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.NO_LOGIN);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> userService.getById(user.getId());</span><br><span class="line">    <span class="keyword">if</span> (!Objects.equals(currentUser.getUserStatus(), VALID_STATUS))&#123;</span><br><span class="line">          <span class="comment">//ç”¨åˆ°äº†å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œåç«¯ä¼˜åŒ–æœ‰ä»‹ç»</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.INVALID_ACCOUNT_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">User</span> <span class="variable">currentSafetyUser</span> <span class="operator">=</span> userService.getSafetyUser(currentUser);</span><br><span class="line">    <span class="keyword">return</span> ResultUtils.success(currentSafetyUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç®¡ç†åå°çš„å‰ç«¯å¼€å‘"><a href="#ç”¨æˆ·ç®¡ç†åå°çš„å‰ç«¯å¼€å‘" class="headerlink" title="ç”¨æˆ·ç®¡ç†åå°çš„å‰ç«¯å¼€å‘"></a>ç”¨æˆ·ç®¡ç†åå°çš„å‰ç«¯å¼€å‘</h2><h3 id="æ–°å»ºç®¡ç†é¡µé¢"><a href="#æ–°å»ºç®¡ç†é¡µé¢" class="headerlink" title="æ–°å»ºç®¡ç†é¡µé¢"></a>æ–°å»ºç®¡ç†é¡µé¢</h3><p>åœ¨pageæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªAdminæ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªUserManageæ–‡ä»¶ï¼Œåˆ°route.tsæ–‡ä»¶æ·»åŠ ä¸€ä¸ªè·¯ç”±</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230310161520724.png" alt="image-20230310161520724" style="zoom:67%;" /><p>æ·»åŠ è·¯ç”±ä¹‹åå°è¯•è®¿é—®å‘ç°æ— æƒé™ï¼ŒåŸå› æ˜¯è¯¥åœ°å€è®¿é—®æœ‰æƒé™ç®¡ç†ï¼Œè§‚å¯Ÿå‘ç°æœ‰<code>access:&#39;canAdmin&#39;</code>ï¼Œå³ç®¡ç†å‘˜æ‰èƒ½è®¿é—®</p><p>æ‰¾åˆ°<code>access.ts</code>æ–‡ä»¶ï¼Œå°†åˆ¤æ–­ç®¡ç†å‘˜çš„é€»è¾‘æ”¹æˆæˆ‘ä»¬è®¾ç½®çš„é€»è¾‘</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230310161929226.png" alt="image-20230310161929226" style="zoom: 50%;" /><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨<code>UserManage</code>æ–‡ä»¶ç¼–å†™ä»£ç å‘ç°å‰ç«¯å¹¶ä¸èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œè€Œæ˜¯å›ºå®šæ˜¾ç¤ºæŸä¸ªé¡µé¢ï¼Œç»è¿‡æ’æŸ¥å‘ç°ï¼Œé—®é¢˜æ˜¯åœ¨<code>component:&#39;./Admin&#39;</code></p><p><code>Admin.tsx</code>å†…çš„æ–‡æœ¬å†…å®¹å°±æ˜¯é¡µé¢å±•ç¤ºçš„å†…å®¹ï¼Œè¿™è¯´æ˜è¿™ä¸ªé¡µé¢å†™æ­»äº†ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ï¼Œ</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230310162448822.png" alt="image-20230310162448822" style="zoom:67%;" /><p>ç»ˆäºï¼Œæˆ‘ä»¬åœ¨<code>UserManage</code>æ–‡ä»¶ç¼–å†™çš„ä»£ç èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œ</p><h3 id="ç¼–å†™ç®¡ç†é¡µé¢"><a href="#ç¼–å†™ç®¡ç†é¡µé¢" class="headerlink" title="ç¼–å†™ç®¡ç†é¡µé¢"></a>ç¼–å†™ç®¡ç†é¡µé¢</h3><p>åˆ°å®˜æ–¹æ–‡æ¡£ä½¿ç”¨ä½¿ç”¨ç°æœ‰çš„é«˜çº§è¡¨æ ¼<a href="https://procomponents.ant.design/components/table?current=1&pageSize=5">ProTable - é«˜çº§è¡¨æ ¼ - Pro Components (ant.design)</a></p><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ä¿®æ”¹ä»£ç ,æ•ˆæœå¦‚å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230310163150236.png" alt="image-20230310163150236" style="zoom: 50%;" /><h2 id="åç«¯ä¼˜åŒ–"><a href="#åç«¯ä¼˜åŒ–" class="headerlink" title="åç«¯ä¼˜åŒ–"></a>åç«¯ä¼˜åŒ–</h2><p>ï¼ˆtodo ç”¨æˆ·æ ¡éªŒï¼‰</p><h3 id="é€šç”¨è¿”å›å¯¹è±¡"><a href="#é€šç”¨è¿”å›å¯¹è±¡" class="headerlink" title="é€šç”¨è¿”å›å¯¹è±¡"></a>é€šç”¨è¿”å›å¯¹è±¡</h3><p>ç›®çš„ï¼šç»™å¯¹è±¡è¡¥å……ä¸€äº›ä¿¡æ¯ï¼Œå‘Šè¯‰å‰ç«¯è¿™ä¸ªè¯·æ±‚åœ¨ä¸šåŠ¡å±‚é¢ä¸Šæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥</p><p>200ã€404ã€500ã€502ã€503</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆåŠŸ</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span> <span class="comment">// ä¸šåŠ¡çŠ¶æ€ç </span></span><br><span class="line">   <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;twintea&quot;</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ok&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">50001</span> <span class="comment">// ä¸šåŠ¡çŠ¶æ€ç </span></span><br><span class="line">   <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">   <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç”¨æˆ·æ“ä½œå¼‚å¸¸ã€xxx&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨è¿”å›ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseResponse</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">27627570252259361L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(<span class="type">int</span> code, T data, String msg,String description)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(<span class="type">int</span> code, T data, String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(<span class="type">int</span> code, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(code, data, <span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(ErrorCode errorCode)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>(errorCode.getCode(),<span class="literal">null</span>,errorCode.getMsg(),errorCode.getDescription());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰é”™è¯¯ç ï¼Œè¿”å›ç±»æ”¯æŒè¿”å›æ­£å¸¸å’Œé”™è¯¯"><a href="#è‡ªå®šä¹‰é”™è¯¯ç ï¼Œè¿”å›ç±»æ”¯æŒè¿”å›æ­£å¸¸å’Œé”™è¯¯" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯ç ï¼Œè¿”å›ç±»æ”¯æŒè¿”å›æ­£å¸¸å’Œé”™è¯¯"></a>è‡ªå®šä¹‰é”™è¯¯ç ï¼Œè¿”å›ç±»æ”¯æŒè¿”å›æ­£å¸¸å’Œé”™è¯¯</h3><p>å‰ç«¯çš„HTTPçŠ¶æ€ç é»˜è®¤çš„å€¼æ¯”è¾ƒå°‘ï¼Œä¸å¤Ÿç²¾å‡†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ErrorCode</span> &#123;</span><br><span class="line">    SUCCESS(<span class="number">0</span>, <span class="string">&quot;ok&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">    PARAMS_ERROR(<span class="number">40000</span>, <span class="string">&quot;è¯·æ±‚å‚æ•°é”™è¯¯&quot;</span>, <span class="string">&quot;è¯·æ±‚å‚æ•°é”™è¯¯&quot;</span>),</span><br><span class="line">    NULL_ERROR(<span class="number">40001</span>, <span class="string">&quot;è¯·æ±‚æ•°æ®ä¸ºç©º&quot;</span>, <span class="string">&quot;è¯·æ±‚æ•°æ®ä¸ºç©º&quot;</span>),</span><br><span class="line">    NO_LOGIN(<span class="number">40100</span>, <span class="string">&quot;æœªç™»å½•&quot;</span>, <span class="string">&quot;æœªç™»å½•&quot;</span>),</span><br><span class="line">    NO_AUTH(<span class="number">40100</span>, <span class="string">&quot;æ— æƒé™&quot;</span>, <span class="string">&quot;æ— æƒé™&quot;</span>),</span><br><span class="line">    SYSTEM_ERROR(<span class="number">50000</span>, <span class="string">&quot;ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸&quot;</span>, <span class="string">&quot;ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸&quot;</span>),</span><br><span class="line">    INVALID_ACCOUNT_ERROR(<span class="number">40300</span>, <span class="string">&quot;è´¦å·å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜&quot;</span>, <span class="string">&quot;è´¦å·å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String description;</span><br><span class="line"></span><br><span class="line">    ErrorCode(<span class="type">int</span> code, String msg, String description) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰è¿”å›å·¥å…·ç±»"><a href="#è‡ªå®šä¹‰è¿”å›å·¥å…·ç±»" class="headerlink" title="è‡ªå®šä¹‰è¿”å›å·¥å…·ç±»"></a>è‡ªå®šä¹‰è¿”å›å·¥å…·ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ç»“æœå·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåŠŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; BaseResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(<span class="number">0</span>,data,<span class="string">&quot;ok&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤±è´¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> errorCode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>(errorCode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  BaseResponse <span class="title function_">error</span><span class="params">(<span class="type">int</span> code,String msg,String descpriton)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>(code,<span class="literal">null</span>,msg,descpriton);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode,String msg,String descpriton)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>(errorCode.getCode(),<span class="literal">null</span>,msg,descpriton);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode,String descpriton)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>(errorCode.getCode(),<span class="literal">null</span>,errorCode.getMsg(),descpriton);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°è£…å…¨å±€å¼‚å¸¸å¤„ç†å™¨"><a href="#å°è£…å…¨å±€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="å°è£…å…¨å±€å¼‚å¸¸å¤„ç†å™¨"></a>å°è£…å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h3><blockquote><ol><li><p>å®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»</p><ol><li>ç›¸å¯¹äº java çš„å¼‚å¸¸ç±»ï¼Œæ”¯æŒæ›´å¤šå­—æ®µ</li><li>è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œæ›´çµæ´» &#x2F; å¿«æ·çš„è®¾ç½®å­—æ®µ</li></ol></li><li><p>ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ˆåˆ©ç”¨ Spring AOPï¼Œåœ¨è°ƒç”¨æ–¹æ³•å‰åè¿›è¡Œé¢å¤–çš„å¤„ç†ï¼‰</p></li></ol></blockquote><h4 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><ol><li>æ•è·ä»£ç ä¸­æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå†…éƒ¨æ¶ˆåŒ–ï¼Œè®©å‰ç«¯å¾—åˆ°æ›´è¯¦ç»†çš„ä¸šåŠ¡æŠ¥é”™ &#x2F; ä¿¡æ¯</li><li>åŒæ—¶å±è”½æ‰é¡¹ç›®æ¡†æ¶æœ¬èº«çš„å¼‚å¸¸ï¼ˆä¸æš´éœ²æœåŠ¡å™¨å†…éƒ¨çŠ¶æ€ï¼‰</li><li>é›†ä¸­å¤„ç†ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String descriptionn;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(String message, <span class="type">int</span> code, String descriptionn)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.descriptionn = descriptionn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ErrorCode errorCode)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(errorCode.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = errorCode.getCode();</span><br><span class="line">        <span class="built_in">this</span>.descriptionn = errorCode.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ErrorCode errorCode,String descriptionn)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(errorCode.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = errorCode.getCode();</span><br><span class="line">        <span class="built_in">this</span>.descriptionn = descriptionn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse <span class="title function_">businessExceptionHandler</span><span class="params">(BusinessException e)</span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;businessException: &quot;</span>+e.getMessage(),e);</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.error(e.getCode(),e.getMessage(), e.getDescriptionn());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(RuntimeException.class)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse <span class="title function_">runtimeException</span><span class="params">(RuntimeException e)</span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;runtimeException&quot;</span>,e);</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.error(ErrorCode.SYSTEM_ERROR,e.getMessage(),<span class="string">&quot;ç³»ç»Ÿå†…éƒ¨é”™è¯¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯ä¼˜åŒ–"><a href="#å‰ç«¯ä¼˜åŒ–" class="headerlink" title="å‰ç«¯ä¼˜åŒ–"></a>å‰ç«¯ä¼˜åŒ–</h2><h3 id="å…¨å±€å“åº”å¤„ç†"><a href="#å…¨å±€å“åº”å¤„ç†" class="headerlink" title="å…¨å±€å“åº”å¤„ç†"></a>å…¨å±€å“åº”å¤„ç†</h3><p>åº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦å¯¹æ¥å£çš„ <strong>é€šç”¨å“åº”</strong> è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œæ¯”å¦‚ä» response ä¸­å–å‡º dataï¼›æˆ–è€…æ ¹æ® code å»é›†ä¸­å¤„ç†é”™è¯¯ï¼Œæ¯”å¦‚ç”¨æˆ·æœªç™»å½•ã€æ²¡æƒé™ä¹‹ç±»çš„ã€‚</p><p>ä¼˜åŠ¿ï¼šä¸ç”¨åœ¨æ¯ä¸ªæ¥å£è¯·æ±‚ä¸­éƒ½å»å†™ç›¸åŒçš„é€»è¾‘</p><p>å®ç°ï¼šå‚è€ƒä½ ç”¨çš„è¯·æ±‚å°è£…å·¥å…·çš„å®˜æ–¹æ–‡æ¡£ï¼Œæ¯”å¦‚ umi-requestï¼ˆ<a href="https://github.com/umijs/umi-request#interceptor%E3%80%81https://blog.csdn.net/huantai3334/article/details/116780020%EF%BC%89%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%94%A8">https://github.com/umijs/umi-request#interceptorã€https://blog.csdn.net/huantai3334/article/details/116780020ï¼‰ã€‚å¦‚æœä½ ç”¨</a> <strong>axios</strong>ï¼Œå‚è€ƒ axios çš„æ–‡æ¡£ã€‚</p><p>åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®ä¸€ä¸ªå…¨å±€è¯·æ±‚ç±»ã€‚åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å®šä¹‰çš„å…¨å±€è¯·æ±‚ç±»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sky-User-Center </tag>
            
            <tag> ç”¨æˆ·ä¸­å¿ƒ </tag>
            
            <tag> é¡¹ç›®å¼€å‘ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡ç½®æ•°æ®åº“</title>
      <link href="//posts/41803b43.html"/>
      <url>//posts/41803b43.html</url>
      
        <content type="html"><![CDATA[<h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>çº¿ä¸Šå±•ç¤ºçš„é¡¹ç›®ï¼Œåœ¨ç‰¹å®šæ—¶é—´æ®µé‡ç½®æ•°æ®åº“</p><p>å…¶å®å°±æ˜¯åœ¨spring bootä¸Šçš„ç‰¹å®šæ—¶é—´è¿è¡Œ<code>.sql</code>æ–‡ä»¶ã€‚</p><h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><p>ä½¿ç”¨å®šæ—¶æ³¨è§£ï¼Œè¯·è®°å¾—åœ¨å¯åŠ¨ç±»æ·»åŠ æ³¨è§£<code>@EnableScheduling</code></p><h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitDatabaseController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(InitDatabaseController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataService dataService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="comment">//å®šæ—¶ä»»åŠ¡ æ¯å¤©8ç‚¹å’Œ14ç‚¹é‡ç½®æ•°æ®åº“</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 8,14 * * ? &quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RespBean <span class="title function_">resetDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ã€å¼€å§‹ã€‘é‡ç½®æ•°æ®åº“vhrçš„æ•°æ®&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">if</span> (!dataService.resetDataBase(<span class="string">&quot;vhrbck.sql&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> RespBean.error(<span class="string">&quot;é‡ç½®æ•°æ®åº“å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">cost</span> <span class="operator">=</span> <span class="string">&quot;ç”¨æ—¶ï¼š&quot;</span> + (end - start) / <span class="number">1000.0</span> + <span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line">        logger.info(<span class="string">&quot;ã€ç»“æŸã€‘é‡ç½®æˆåŠŸï¼š&quot;</span> + cost);</span><br><span class="line">        <span class="keyword">return</span> RespBean.ok(<span class="string">&quot;é‡ç½®æ•°æ®åº“æˆåŠŸ!&quot;</span>, cost);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DataService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–‡ä»¶æ”¾åœ¨ resourcesç›®å½•ä¸‹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">resetDataBase</span><span class="params">(String sqlScriptName)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ä»Druidæ•°æ®æºï¼ˆæ•°æ®åº“è¿æ¥æ± ï¼‰ä¸­è·å–ä¸€ä¸ªæ•°æ®åº“è¿æ¥</span></span><br><span class="line">            conn = dataSource.getConnection();</span><br><span class="line">            <span class="type">ClassPathResource</span> <span class="variable">rc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(sqlScriptName);</span><br><span class="line">            <span class="type">EncodedResource</span> <span class="variable">er</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EncodedResource</span>(rc, StandardCharsets.UTF_8);</span><br><span class="line">            <span class="comment">// ScriptUtilsï¼šæ˜¯SpringBootæºç ä¸­ä½¿ç”¨çš„å·¥å…·ç±»ï¼Œèƒ½å¤Ÿæ‰§è¡ŒSqlè„šæœ¬</span></span><br><span class="line">            <span class="comment">// sqlè„šæœ¬æ‰§è¡Œä¸­é€”ï¼Œé‡åˆ°é”™è¯¯ï¼Œé»˜è®¤ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåœæ­¢æ‰§è¡Œ</span></span><br><span class="line">            <span class="comment">// å»ºè®®ä¼ å…¥å‚æ•°trueï¼Œå¿½ç•¥ä¸­é€”çš„é”™è¯¯ï¼Œä½†æ˜¯åé¢4ä¸ªå‚æ•°åˆæ˜¯å¿…éœ€çš„ï¼Œåªéœ€è¦å¡«å…¥æºç ä¸­çš„é»˜è®¤å€¼å³å¯</span></span><br><span class="line">            ScriptUtils.executeSqlScript(conn, er, <span class="literal">true</span>, <span class="literal">true</span>,</span><br><span class="line">                    <span class="string">&quot;--&quot;</span>, <span class="string">&quot;;&quot;</span>, <span class="string">&quot;/*&quot;</span>, <span class="string">&quot;*/&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸è¦å¿˜äº†é‡Šæ”¾è¿æ¥</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡ç½®æ•°æ®åº“çš„æ¥å£è¯·æ±‚ä¸èƒ½è¿‡äºé¢‘ç¹ï¼Œå› æ­¤å¯ä»¥æ­é… <code>é™åˆ¶æ¥å£è¯·æ±‚æ¬¡æ•°</code>æ–¹æ³•æ¥ä½¿ç”¨</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySql </tag>
            
            <tag> é¡¹ç›®ç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é™åˆ¶æ¥å£è®¿é—®</title>
      <link href="//posts/b0106d5d.html"/>
      <url>//posts/b0106d5d.html</url>
      
        <content type="html"><![CDATA[<h3 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h3><p>è®©ç”¨æˆ·è®¿é—®æŸä¸ªæ¥å£æ—¶ï¼Œé™åˆ¶ä¸€å®šæ—¶é—´åªèƒ½è®¿é—®Næ¬¡</p><p>ä¸‹é¢ä»‹ç»åç«¯çš„é™åˆ¶æ–¹æ³•ï¼š</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>æœåŠ¡å™¨é€šè¿‡redisè®°å½•è¯·æ±‚çš„æ¬¡æ•°ï¼Œå¦‚æœæ¬¡æ•°è¶…è¿‡é™åˆ¶å°±ä¸ç»™è®¿é—®ã€‚</p><p>è®¾ç½®redis çš„keyçš„æ—¶æ•ˆæ€§ï¼Œè¿‡æœŸè‡ªåŠ¨é”€æ¯</p><h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚é™åˆ¶çš„è‡ªå®šä¹‰æ³¨è§£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Target</span> æ³¨è§£å¯ä¿®é¥°çš„å¯¹è±¡èŒƒå›´ï¼ŒElementType.METHOD ä½œç”¨äºæ–¹æ³•ï¼ŒElementType.TYPE ä½œç”¨äºç±»</span></span><br><span class="line"><span class="comment"> * (ElementType)å–å€¼æœ‰ï¼š</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€1.CONSTRUCTOR:ç”¨äºæè¿°æ„é€ å™¨</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€2.FIELD:ç”¨äºæè¿°åŸŸ</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€3.LOCAL_VARIABLE:ç”¨äºæè¿°å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€4.METHOD:ç”¨äºæè¿°æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€5.PACKAGE:ç”¨äºæè¿°åŒ…</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€6.PARAMETER:ç”¨äºæè¿°å‚æ•°</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€7.TYPE:ç”¨äºæè¿°ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹) æˆ–enumå£°æ˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Retention</span>å®šä¹‰äº†è¯¥Annotationè¢«ä¿ç•™çš„æ—¶é—´é•¿çŸ­ï¼šæŸäº›Annotationä»…å‡ºç°åœ¨æºä»£ç ä¸­ï¼Œè€Œè¢«ç¼–è¯‘å™¨ä¸¢å¼ƒï¼›</span></span><br><span class="line"><span class="comment"> * è€Œå¦ä¸€äº›å´è¢«ç¼–è¯‘åœ¨classæ–‡ä»¶ä¸­ï¼›ç¼–è¯‘åœ¨classæ–‡ä»¶ä¸­çš„Annotationå¯èƒ½ä¼šè¢«è™šæ‹Ÿæœºå¿½ç•¥ï¼Œ</span></span><br><span class="line"><span class="comment"> * è€Œå¦ä¸€äº›åœ¨classè¢«è£…è½½æ—¶å°†è¢«è¯»å–ï¼ˆè¯·æ³¨æ„å¹¶ä¸å½±å“classçš„æ‰§è¡Œï¼Œå› ä¸ºAnnotationä¸classåœ¨ä½¿ç”¨ä¸Šæ˜¯è¢«åˆ†ç¦»çš„ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨è¿™ä¸ªmeta-Annotationå¯ä»¥å¯¹ Annotationçš„â€œç”Ÿå‘½å‘¨æœŸâ€é™åˆ¶ã€‚</span></span><br><span class="line"><span class="comment"> * ï¼ˆRetentionPoicyï¼‰å–å€¼æœ‰ï¼š</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€1.SOURCE:åœ¨æºæ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³æºæ–‡ä»¶ä¿ç•™ï¼‰</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€2.CLASS:åœ¨classæ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³classä¿ç•™ï¼‰</span></span><br><span class="line"><span class="comment"> * ã€€ã€€ã€€ã€€3.RUNTIME:åœ¨è¿è¡Œæ—¶æœ‰æ•ˆï¼ˆå³è¿è¡Œæ—¶ä¿ç•™ï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Inherited</span></span></span><br><span class="line"><span class="comment"> * å…ƒæ³¨è§£æ˜¯ä¸€ä¸ªæ ‡è®°æ³¨è§£ï¼Œ<span class="doctag">@Inherited</span>é˜è¿°äº†æŸä¸ªè¢«æ ‡æ³¨çš„ç±»å‹æ˜¯è¢«ç»§æ‰¿çš„ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœä¸€ä¸ªä½¿ç”¨äº†<span class="doctag">@Inherited</span>ä¿®é¥°çš„annotationç±»å‹è¢«ç”¨äºä¸€ä¸ªclassï¼Œåˆ™è¿™ä¸ªannotationå°†è¢«ç”¨äºè¯¥classçš„å­ç±»ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AccessLimit &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤±æ•ˆæ—¶é—´ å•ä½ï¼ˆç§’ï¼‰</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">seconds</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€å¤§è¯·æ±‚æ¬¡æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">maxCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ‹¦æˆªå™¨"><a href="#é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="é…ç½®æ‹¦æˆªå™¨"></a>é…ç½®æ‹¦æˆªå™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LimitInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(LimitInterceptor.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­è¯·æ±‚æ˜¯å¦å±äºæ–¹æ³•çš„è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> HandlerMethod) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">HandlerMethod</span> <span class="variable">hm</span> <span class="operator">=</span> (HandlerMethod) handler;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–æ–¹æ³•ä¸­çš„æ³¨è§£,çœ‹æ˜¯å¦æœ‰è¯¥æ³¨è§£</span></span><br><span class="line">            <span class="type">AccessLimit</span> <span class="variable">accessLimit</span> <span class="operator">=</span> hm.getMethodAnnotation(AccessLimit.class);</span><br><span class="line">            <span class="keyword">if</span> (accessLimit == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">seconds</span> <span class="operator">=</span> accessLimit.seconds(); <span class="comment">// å¤±æ•ˆæ—¶é—´ å•ä½ï¼ˆç§’ï¼‰</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">maxCount</span> <span class="operator">=</span> accessLimit.maxCount(); <span class="comment">// æœ€å¤§è¯·æ±‚æ¬¡æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> request.getServletPath()+request.getSession().getId();</span><br><span class="line"></span><br><span class="line">            <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//ä»redisä¸­è·å–ç”¨æˆ·è®¿é—®çš„æ¬¡æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (redisCache.getCacheObject(key) != <span class="literal">null</span>) &#123;</span><br><span class="line">                count = (Integer) redisCache.getCacheObject(key);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//ç¬¬ä¸€æ¬¡è®¿é—®</span></span><br><span class="line">                redisCache.setCacheObject(key, <span class="number">1</span>);</span><br><span class="line">                redisCache.expire(key, seconds, TimeUnit.SECONDS); <span class="comment">//ç½®ç¼“å­˜å¤±æ•ˆæ—¶é—´(å•ä½ï¼šç§’)</span></span><br><span class="line">                logger.info(<span class="string">&quot;&#123;&#125;ç¬¬ä¸€æ¬¡è®¿é—®&quot;</span>,key);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (count &lt; maxCount) &#123;</span><br><span class="line">                <span class="comment">//åŠ 1</span></span><br><span class="line">                redisCache.incr(key, <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//è¶…å‡ºè®¿é—®æ¬¡æ•°</span></span><br><span class="line">                logger.error(<span class="string">&quot;è¶…å‡ºè®¿é—®æ¬¡æ•°&quot;</span>);</span><br><span class="line">                render(response, <span class="string">&quot;è¯·æ±‚æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°è£…è¿”å›å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(HttpServletResponse response, String msg)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        out.print(<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(RespBean.error(msg)));</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨å†Œæ‹¦æˆªå™¨"><a href="#æ³¨å†Œæ‹¦æˆªå™¨" class="headerlink" title="æ³¨å†Œæ‹¦æˆªå™¨"></a>æ³¨å†Œæ‹¦æˆªå™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨æ„ä½¿ç”¨ bean æ³¨è§£æ·»åŠ </span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LimitInterceptor <span class="title function_">limitHandlerInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LimitInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(limitHandlerInterceptor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨Controllerçš„æ¥å£åŠ ä¸Šæ³¨è§£"><a href="#åœ¨Controllerçš„æ¥å£åŠ ä¸Šæ³¨è§£" class="headerlink" title="åœ¨Controllerçš„æ¥å£åŠ ä¸Šæ³¨è§£"></a>åœ¨Controllerçš„æ¥å£åŠ ä¸Šæ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºç”¨æˆ·æƒ³é‡å¤è®¿é—®è¯¥æ¥å£å¿…é¡»é—´éš”6såŠä»¥ä¸Š</span></span><br><span class="line">    <span class="meta">@AccessLimit(seconds = 6,maxCount = 1)</span></span><br><span class="line">    <span class="keyword">public</span> RespBean <span class="title function_">addEmp</span><span class="params">(<span class="meta">@RequestBody</span> Employee employee)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (employeeService.addEmp(employee)) &#123;</span><br><span class="line">            <span class="keyword">return</span> RespBean.ok(<span class="string">&quot;æ·»åŠ æˆåŠŸ!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> RespBean.error(<span class="string">&quot;æ·»åŠ å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç›¸å…³ </category>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿</title>
      <link href="//posts/6e6359df.html"/>
      <url>//posts/6e6359df.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿"><a href="#é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿" class="headerlink" title="é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿"></a>é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿</h1><h2 id="å¤šç¯å¢ƒ"><a href="#å¤šç¯å¢ƒ" class="headerlink" title="å¤šç¯å¢ƒ"></a>å¤šç¯å¢ƒ</h2><p>æœ¬åœ°å¼€å‘ï¼šlocalhostï¼ˆ127.0.0.1ï¼‰</p><p>å¤šç¯å¢ƒï¼šæŒ‡åŒä¸€å¥—é¡¹ç›®ä»£ç åœ¨ä¸åŒçš„é˜¶æ®µéœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥è°ƒæ•´é…ç½®å¹¶ä¸”éƒ¨ç½²åˆ°ä¸åŒçš„æœºå™¨ä¸Šã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦å¤šç¯å¢ƒï¼Ÿ</p><ol><li>æ¯ä¸ªç¯å¢ƒäº’ä¸å½±å“</li><li>åŒºåˆ†ä¸åŒçš„é˜¶æ®µï¼šå¼€å‘ &#x2F; æµ‹è¯• &#x2F; ç”Ÿäº§</li><li>å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼š<ol><li>æœ¬åœ°æ—¥å¿—çº§åˆ«</li><li>ç²¾ç®€ä¾èµ–ï¼ŒèŠ‚çœé¡¹ç›®ä½“ç§¯</li><li>é¡¹ç›®çš„ç¯å¢ƒ &#x2F; å‚æ•°å¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ JVM å‚æ•°</li></ol></li></ol><p>é’ˆå¯¹ä¸åŒç¯å¢ƒåšä¸åŒçš„äº‹æƒ…ã€‚</p><p>å¤šç¯å¢ƒåˆ†ç±»ï¼š</p><ol><li>æœ¬åœ°ç¯å¢ƒï¼ˆè‡ªå·±çš„ç”µè„‘ï¼‰localhost</li><li>å¼€å‘ç¯å¢ƒï¼ˆè¿œç¨‹å¼€å‘ï¼‰å¤§å®¶è¿åŒä¸€å°æœºå™¨ï¼Œä¸ºäº†å¤§å®¶å¼€å‘æ–¹ä¾¿</li><li>æµ‹è¯•ç¯å¢ƒï¼ˆæµ‹è¯•ï¼‰å¼€å‘ &#x2F; æµ‹è¯• &#x2F; äº§å“ï¼Œå•å…ƒæµ‹è¯• &#x2F; æ€§èƒ½æµ‹è¯• &#x2F; åŠŸèƒ½æµ‹è¯• &#x2F; ç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œç‹¬ç«‹çš„æ•°æ®åº“ã€ç‹¬ç«‹çš„æœåŠ¡å™¨</li><li>é¢„å‘å¸ƒç¯å¢ƒï¼ˆä½“éªŒæœï¼‰ï¼šå’Œæ­£å¼ç¯å¢ƒä¸€è‡´ï¼Œæ­£å¼æ•°æ®åº“ï¼Œæ›´ä¸¥è°¨ï¼ŒæŸ¥å‡ºæ›´å¤šé—®é¢˜</li><li>æ­£å¼ç¯å¢ƒï¼ˆçº¿ä¸Šï¼Œå…¬å¼€å¯¹å¤–è®¿é—®çš„é¡¹ç›®ï¼‰ï¼šå°½é‡ä¸è¦æ”¹åŠ¨ï¼Œä¿è¯ä¸Šçº¿å‰çš„ä»£ç æ˜¯ â€œå®Œç¾â€ è¿è¡Œ</li><li>æ²™ç®±ç¯å¢ƒï¼ˆå®éªŒç¯å¢ƒï¼‰ï¼šä¸ºäº†åšå®éªŒ</li></ol><h3 id="å‰ç«¯å¤šç¯å¢ƒ"><a href="#å‰ç«¯å¤šç¯å¢ƒ" class="headerlink" title="å‰ç«¯å¤šç¯å¢ƒ"></a>å‰ç«¯å¤šç¯å¢ƒ</h3><blockquote><p> å¼€å‘å’Œä¸Šçº¿è¯·æ±‚çš„åœ°å€ä¸åŒï¼Œå¼€å‘æˆ‘ä»¬å¯ä»¥è¯·æ±‚localhostï¼Œä½†ä¸Šçº¿æ­£å¼ç¯å¢ƒä¸å¯èƒ½è®©å®ƒæ¥è¯·æ±‚æˆ‘ä»¬çš„æœ¬åœ°ç”µè„‘ï¼Œä¸€èˆ¬</p><p> æƒ…å†µï¼Œæˆ‘ä»¬æ˜¯æŠŠé¡¹ç›®æ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆå¦‚ä½•è®©å‰ç«¯çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯·æ±‚localhostï¼Œä»€ä¹ˆæ—¶å€™è¯·æ±‚è¿œç¨‹åœ°å€ï¼Ÿ</p></blockquote><p>ä»¥ <a href="https://blog.twintea.top/posts/c43bf339.html">Sky-User-Centeré¡¹ç›®</a> ä¸¾ä¾‹</p><ul><li>è¯·æ±‚åœ°å€</li></ul><p><a href="https://blog.twintea.top/posts/c43bf339.html">Sky-User-Centeré¡¹ç›®</a><br>é¡¹ç›®ç”¨äº† umi æ¡†æ¶ï¼Œ</p><p>  build æ—¶ä¼šè‡ªåŠ¨ä¼ å…¥ NODE_ENV &#x3D;&#x3D; production å‚æ•°ï¼Œstart NODE_ENV å‚æ•°ä¸º development</p><p>  æˆ‘ä»¬åœ¨å¯åŠ¨é¡¹ç›®æ—¶ï¼Œæ ¹æ®æˆ‘ä»¬çš„å¯åŠ¨å‘½ä»¤ï¼Œnpm run build å’Œ num start ï¼Œumiæ ¹æ®æˆ‘ä»¬çš„å¯åŠ¨å‘½ä»¤çš„ä¸</p><p>  åŒä¼ å…¥ä¸åŒçš„ NODE_ENV å‚æ•°ï¼Œä»¥æ­¤åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚</p><p>  <code>appp.tsx</code>æ–‡ä»¶:</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311161221192.png" alt="image-20230311161221192"></p><p>â€‹å› æ­¤ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°å…¨å±€è¯·æ±‚ç±»ï¼Œ<a href="https://blog.twintea.top/posts/c43bf339.html">Sky-User-Centeré¡¹ç›®</a> è‡ªå®šä¹‰äº†å…¨å±€è¯·æ±‚ç±»ï¼Œåä¸º<code>globalRequest</code></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230312142151424.png" alt="image-20230312142151424"></p><p>â€‹</p><ul><li><p>å¦‚ä½•éªŒè¯ï¼Ÿ</p><p>â€‹é¦–å…ˆæˆ‘ä»¬å°†é¡¹ç›®æ‰“åŒ…ï¼Œåœ¨ <code>pacage.json</code>ä¸­æ‰§è¡Œbuildè„šæœ¬</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311160154803.png" alt="image-20230311160154803"></p><p>â€‹</p><p>â€‹ç„¶åæˆ‘ä»¬å°±èƒ½çœ‹åˆ°é¡¹ç›®ç›®å½•å¤šäº†ä¸€ä¸ªdistæ–‡ä»¶ï¼Œä½¿ç”¨ç»ˆç«¯å‘½ä»¤è¡Œçš„æ–¹å¼ï¼Œè¿›åˆ°distæ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤<code>serve</code>(æ²¡æœ‰çš„è¯è£…ä¸€ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g serve</span><br></pre></td></tr></table></figure><p>â€‹å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„åœ°å€å‘ç”Ÿäº†æ”¹å˜</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230312141952671.png"></p><ul><li><p>é¡¹ç›®çš„é…ç½®</p><p>ä¸åŒçš„é¡¹ç›®ï¼ˆæ¡†æ¶ï¼‰éƒ½æœ‰ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œumi çš„é…ç½®æ–‡ä»¶æ˜¯ configï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶åæ·»åŠ å¯¹åº”çš„ç¯å¢ƒåç§°åç¼€æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚å‚è€ƒæ–‡æ¡£ï¼š<a href="https://umijs.org/zh-CN/docs/deployment">https://umijs.org/zh-CN/docs/deployment</a></p><ul><li>å¼€å‘ç¯å¢ƒï¼šconfig.dev.ts</li><li>ç”Ÿäº§ç¯å¢ƒï¼šconfig.prod.ts</li><li>å…¬å…±é…ç½®ï¼šconfig.ts ä¸å¸¦åç¼€</li></ul></li></ul><h3 id="åç«¯å¤šç¯å¢ƒ"><a href="#åç«¯å¤šç¯å¢ƒ" class="headerlink" title="åç«¯å¤šç¯å¢ƒ"></a>åç«¯å¤šç¯å¢ƒ</h3><p>SpringBoot é¡¹ç›®ï¼Œé€šè¿‡ application.yml æ·»åŠ ä¸åŒçš„åç¼€æ¥åŒºåˆ†é…ç½®æ–‡ä»¶</p><p>å¯ä»¥åœ¨å¯åŠ¨é¡¹ç›®æ—¶ä¼ å…¥ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar .\sky-user-center-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯æ”¹ï¼š</p><ul><li><p>ä¾èµ–çš„ç¯å¢ƒåœ°å€</p><ul><li><p>æ•°æ®åº“åœ°å€</p></li><li><p>ç¼“å­˜åœ°å€</p></li><li><p>æ¶ˆæ¯é˜Ÿåˆ—åœ°å€</p></li><li><p>é¡¹ç›®ç«¯å£å·</p></li></ul></li><li><p>æœåŠ¡å™¨é…ç½®</p></li></ul><h2 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h2><blockquote><p>éœ€è¦ä¸€å°LinuxæœåŠ¡å™¨</p></blockquote><h3 id="åŸå§‹éƒ¨ç½²"><a href="#åŸå§‹éƒ¨ç½²" class="headerlink" title="åŸå§‹éƒ¨ç½²"></a>åŸå§‹éƒ¨ç½²</h3><ul><li><p>å‰ç«¯ï¼š</p><p>ä¸»è¦å®‰è£…nginxæœåŠ¡å™¨ï¼Œå»å®˜ç½‘ä¸‹è½½å®‰è£…</p><p><a href="https://nginx.org/en/download.html">nginx: download</a></p><p>(<strong>æ³¨æ„nginxçš„æƒé™</strong>)</p></li><li><p>åç«¯ï¼š</p><p>ä¸»è¦æ˜¯é¡¹ç›®ä¾èµ–çš„æœåŠ¡ï¼šjavaã€mavenã€mysqlç­‰</p><p>åå°å¯åŠ¨javaé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> java -jar .\sky-user-center-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod &amp;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å®å¡”Linuxéƒ¨ç½²"><a href="#å®å¡”Linuxéƒ¨ç½²" class="headerlink" title="å®å¡”Linuxéƒ¨ç½²"></a>å®å¡”Linuxéƒ¨ç½²</h3><blockquote><p>åŸå§‹éƒ¨ç½²æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨å®‰è£…å®å¡”é¢æ¿ï¼Œé€šè¿‡å¯è§†åŒ–çš„æ–¹å¼éƒ¨ç½²é¡¹ç›®</p></blockquote><p><a href="https://www.bt.cn/new/index.html">å®å¡”é¢æ¿ - ç®€å•å¥½ç”¨çš„Linux&#x2F;WindowsæœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ (bt.cn)</a></p><p>ç•Œé¢å‹å¥½</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311195602394.png" alt="image-20230311195602394"></p><ul><li><p>å‰ç«¯éƒ¨ç½²</p><p>ç‚¹å‡»å·¦ä¾§çš„ç½‘ç«™ â€“&gt; æ·»åŠ ç«™ç‚¹ â€“&gt;åˆ›å»ºç«™ç‚¹ï¼ŒåŸŸåæ è¾“å…¥åŸŸåï¼ˆå¿…é¡»æ˜¯ç»è¿‡dnsè§£æçš„åŸŸåï¼‰æˆ–è€…æœåŠ¡å™¨ipï¼Œç„¶åç‚¹å‡»æäº¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311195845068.png" alt="image-20230311195845068"></p></li></ul><p>â€‹ç„¶åå»åˆ°ç«™ç‚¹æ ¹ç›®å½•ï¼Œå°†å‰ç«¯çš„disté‡Œé¢çš„æ–‡ä»¶å…¨éƒ¨ä¸Šä¼ ä¸Šå»</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311200344329.png" alt="image-20230311200344329" style="zoom:67%;" /><p>â€‹ä¸Šä¼ å®Œæˆåï¼Œé€šè¿‡åŸŸåæˆ–è€…ipçš„æ–¹å¼å°±å¯ä»¥æ­£å¸¸è®¿é—®å‰ç«¯é¡¹ç›®å•¦ï¼</p><ul><li><p>åç«¯éƒ¨ç½²</p><p>åç«¯éƒ¨ç½²å’Œå‰ç«¯ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åœ¨ç½‘ç«™é‚£é‡Œï¼Œé€‰æ‹©javaé¡¹ç›®ï¼Œæ·»åŠ java é¡¹ç›®æŠŠåç«¯æ‰“åŒ…å¥½çš„jaråŒ…ä¸Šä¼ åˆ°æŸä¸ªæ–‡ä»¶ï¼Œåœ¨jarè·¯</p><p>å¾„æ æ­£ç¡®å¡«å†™è¯¥è·¯å¾„ï¼Œå¹¶ä¸”è®°å¾—è¦åœ¨é¡¹ç›®æ‰§è¡Œå‘½ä»¤æœ«å°¾è¡¥ä¸Š <code>--spring.profiles.active=prod</code>ï¼Œè¿™æ ·æˆ‘ä»¬æ‰æ˜¯å¯ç”¨</p><p>ç”Ÿäº§ç¯å¢ƒçš„é…ç½®</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230311203735982.png" alt="image-20230311203735982" style="zoom:50%;" /><p>é€šè¿‡<code>ip:ç«¯å£å·</code>æˆ–è€…<code>åŸŸå:ç«¯å£å·</code>çš„æ–¹å¼å°±èƒ½è®¿é—®åˆ°åç«¯äº†</p></li></ul><h3 id="å‰ç«¯æ‰˜ç®¡"><a href="#å‰ç«¯æ‰˜ç®¡" class="headerlink" title="å‰ç«¯æ‰˜ç®¡"></a>å‰ç«¯æ‰˜ç®¡</h3><p>å‰ç«¯è…¾è®¯äº‘ web åº”ç”¨æ‰˜ç®¡ï¼ˆæ¯”å®¹å™¨åŒ–æ›´å‚»ç“œå¼ï¼Œä¸éœ€è¦è‡ªå·±å†™æ„å»ºåº”ç”¨çš„å‘½ä»¤ï¼Œå°±èƒ½å¯åŠ¨å‰ç«¯é¡¹ç›®ï¼‰</p><blockquote><p><a href="https://console.cloud.tencent.com/webify/new">https://console.cloud.tencent.com/webify/new</a></p></blockquote><ul><li>å°ç¼ºç‚¹ï¼šéœ€è¦å°†ä»£ç æ”¾åˆ°ä»£ç æ‰˜ç®¡å¹³å°ä¸Š</li><li>ä¼˜åŠ¿ï¼šä¸ç”¨å†™å‘½ä»¤ã€ä»£ç æ›´æ–°æ—¶è‡ªåŠ¨æ„å»º</li></ul><h3 id="Dockeréƒ¨ç½²"><a href="#Dockeréƒ¨ç½²" class="headerlink" title="Dockeréƒ¨ç½²"></a>Dockeréƒ¨ç½²</h3><blockquote><p> Docker æ˜¯å®¹å™¨ï¼Œå¯ä»¥å°†é¡¹ç›®çš„ç¯å¢ƒï¼ˆæ¯”å¦‚ javaã€nginxï¼‰å’Œé¡¹ç›®çš„ä»£ç ä¸€èµ·æ‰“åŒ…æˆé•œåƒï¼Œæ‰€æœ‰äººéƒ½èƒ½ä¸‹è½½é•œåƒï¼Œæ›´å®¹æ˜“åˆ†å‘å’Œç§»æ¤ã€‚å†å¯åŠ¨é¡¹ç›®æ—¶ï¼Œä¸éœ€è¦æ•²ä¸€å¤§å †å‘½ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä¸‹è½½é•œåƒã€å¯åŠ¨é•œåƒå°±å¯ä»¥äº†ã€‚</p><p> docker å¯ä»¥ç†è§£ä¸ºè½¯ä»¶å®‰è£…åŒ…ã€‚</p></blockquote><p>Docker å®‰è£…ï¼š<a href="https://www.docker.com/get-started/">https://www.docker.com/get-started/</a> æˆ–è€…å®å¡”å®‰è£…</p><p><strong>Dockerfile</strong> ç”¨äºæŒ‡å®šæ„å»º Docker é•œåƒçš„æ–¹æ³•</p><h4 id="Dockerfile-ç¼–å†™ï¼š"><a href="#Dockerfile-ç¼–å†™ï¼š" class="headerlink" title="Dockerfile ç¼–å†™ï¼š"></a>Dockerfile ç¼–å†™ï¼š</h4><ul><li>FROM ä¾èµ–çš„åŸºç¡€é•œåƒ</li><li>WORKDIR å·¥ä½œç›®å½•</li><li>COPY ä»æœ¬æœºå¤åˆ¶æ–‡ä»¶</li><li>RUN æ‰§è¡Œå‘½ä»¤</li><li>CMD &#x2F; ENTRYPOINTï¼ˆé™„åŠ é¢å¤–å‚æ•°ï¼‰æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.5</span>-jdk-<span class="number">8</span>-alpine as builder</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy local code to the container image.</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> pom.xml .</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src ./src</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build a release artifact.</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn package -DskipTests</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Run the web service on container startup.</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app/target/sky-user-center-0.0.1-SNAPSHOT.jar&quot;</span>,<span class="string">&quot;--spring.profiles.active=prod&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ–è€…å¯ä»¥åœ¨æœ¬åœ°æ‰“åŒ…ï¼Œä¸Šä¼ target</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jdk-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy local code to the container image.</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build a release artifact.</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./target/user-center-backend-0.0.1-SNAPSHOT.jar /app/sky-user-center-0.0.1-SNAPSHOT.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8666</span></span><br><span class="line"><span class="comment"># Run the web service on container startup.</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app/sky-user-center-0.0.1-SNAPSHOT.jarr&quot;</span>,<span class="string">&quot;--spring.profiles.active=prod&quot;</span>]</span></span><br></pre></td></tr></table></figure><h4 id="docker-buildæ„å»ºé•œåƒ"><a href="#docker-buildæ„å»ºé•œåƒ" class="headerlink" title="docker buildæ„å»ºé•œåƒ"></a>docker buildæ„å»ºé•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åç«¯</span></span><br><span class="line">docker build -t sky-user-center-backend:v0.0.1 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‰ç«¯</span></span><br><span class="line">docker build -t sky-user-center-front:v0.0.1 .</span><br></pre></td></tr></table></figure><h4 id="docker-run-å¯åŠ¨"><a href="#docker-run-å¯åŠ¨" class="headerlink" title="docker run å¯åŠ¨"></a>docker run å¯åŠ¨</h4><p>ï¼ˆ-d åå°å¯åŠ¨ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‰ç«¯</span></span><br><span class="line">docker run -p 80:80 -d sky-user-center-front:v0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># åç«¯</span></span><br><span class="line">docker run -p 8666:8666 -d sky-user-center-backend:v0.0.1</span><br></pre></td></tr></table></figure><p>è™šæ‹ŸåŒ–</p><ol><li>ç«¯å£æ˜ å°„ï¼šæŠŠæœ¬æœºçš„èµ„æºï¼ˆå®é™…è®¿é—®åœ°å€ï¼‰å’Œå®¹å™¨å†…éƒ¨çš„èµ„æºï¼ˆåº”ç”¨å¯åŠ¨ç«¯å£ï¼‰è¿›è¡Œå…³è”</li><li>ç›®å½•æ˜ å°„ï¼šæŠŠæœ¬æœºçš„ç«¯å£å’Œå®¹å™¨åº”ç”¨çš„ç«¯å£è¿›è¡Œå…³è”</li></ol><h4 id="docker-å‘½ä»¤"><a href="#docker-å‘½ä»¤" class="headerlink" title="docker å‘½ä»¤"></a>docker å‘½ä»¤</h4><p>å¯ä»¥å‚è€ƒèœé¸Ÿæ•™ç¨‹</p><p><a href="https://www.runoob.com/docker/docker-tutorial.html">Docker æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p><p>è¿›å…¥å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -i -t  [container-id] /bin/bash</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f [container-id]</span><br></pre></td></tr></table></figure><p>æ€æ­»å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> [container-id]</span><br></pre></td></tr></table></figure><p>å¼ºåˆ¶åˆ é™¤é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f [container-id]</span><br></pre></td></tr></table></figure><h2 id="Dockerå¹³å°éƒ¨ç½²"><a href="#Dockerå¹³å°éƒ¨ç½²" class="headerlink" title="Dockerå¹³å°éƒ¨ç½²"></a>Dockerå¹³å°éƒ¨ç½²</h2><ol><li>äº‘æœåŠ¡å•†çš„å®¹å™¨å¹³å°ï¼ˆè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ï¼‰</li><li>é¢å‘æŸä¸ªé¢†åŸŸçš„å®¹å™¨å¹³å°ï¼ˆå¦‚å¾®ä¿¡äº‘æ‰˜ç®¡ï¼‰</li></ol><h2 id="ç»‘å®šåŸŸåè®¿é—®"><a href="#ç»‘å®šåŸŸåè®¿é—®" class="headerlink" title="ç»‘å®šåŸŸåè®¿é—®"></a>ç»‘å®šåŸŸåè®¿é—®</h2><p>å‡†å¤‡ä¸€ä¸ªå·²å¤‡æ¡ˆçš„åŸŸåï¼Œé…ç½®å¥½dnsè§£æ</p><p>ä»¥<a href="https://gitee.com/twintea/sky-user-center-front">sky-user-center-front: ç”¨æˆ·ä¸­å¿ƒé¡¹ç›®å‰ç«¯ (gitee.com)</a>é¡¹ç›®ä¸ºä¾‹ï¼Œå‰ç«¯å·²ç»å®šä¹‰äº†ç”Ÿäº§ç¯å¢ƒè¦è¯·æ±‚çš„åŸŸåã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20230312142151424.png" alt="image-20230312142151424"></p><p>å‰ç«¯é¡¹ç›®è®¿é—®æµç¨‹ï¼šç”¨æˆ·è¾“å…¥ç½‘å€ &#x3D;&gt; åŸŸåè§£ææœåŠ¡å™¨ï¼ˆæŠŠç½‘å€è§£æä¸º ip åœ°å€ &#x2F; äº¤ç»™å…¶ä»–çš„åŸŸåè§£ææœåŠ¡ï¼ˆCNAMEï¼‰ï¼‰ &#x3D;&gt; æœåŠ¡å™¨ &#x3D;&gt;ï¼ˆé˜²ç«å¢™ï¼‰&#x3D;&gt; nginx æ¥æ”¶è¯·æ±‚ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œè¿”å›æ–‡ä»¶ç»™å‰ç«¯ &#x3D;&gt; å‰ç«¯åŠ è½½æ–‡ä»¶åˆ°æµè§ˆå™¨ä¸­ï¼ˆjsã€cssï¼‰ &#x3D;&gt; æ¸²æŸ“é¡µé¢</p><p>åç«¯é¡¹ç›®è®¿é—®æµç¨‹ï¼šç”¨æˆ·è¾“å…¥ç½‘å€ &#x3D;&gt; åŸŸåè§£ææœåŠ¡å™¨ &#x3D;&gt; æœåŠ¡å™¨ &#x3D;&gt; nginx æ¥æ”¶è¯·æ±‚ &#x3D;&gt; åç«¯é¡¹ç›®ï¼ˆæ¯”å¦‚ 8080ç«¯å£ï¼‰</p><p>nginx åå‘ä»£ç†çš„ä½œç”¨ï¼šæ›¿æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œè½¬å‘è¯·æ±‚</p><ol><li><p><strong>å‰ç«¯å’Œåç«¯ç”¨ç›¸åŒçš„åŸŸå</strong></p><ul><li>åœ¨nginxçš„htmlç›®å½•æ”¾å…¥å‰ç«¯ç¼–è¯‘å®Œæˆçš„distæ–‡ä»¶</li><li>ä¿®æ”¹nginxçš„é…ç½®(80ç«¯å£ç›‘å¬ï¼Œç»‘å®š server_nameä¸ºåŸŸåæˆ–è€…IP)</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> åŸŸå ip;</span><br><span class="line">    <span class="attribute">index</span> index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line">    <span class="attribute">root</span> æŒ‡å‘distç›®å½•;</span><br><span class="line">...</span><br><span class="line">        <span class="section">location</span> /api &#123; å‡è®¾åç«¯æœ‰ä¸€ä¸ªurlå‰ç¼€ /<span class="attribute">api</span></span><br><span class="line">        proxy_pass <span class="number">127.0.0.1:8080</span>  å½“è¯·æ±‚/api urlæ—¶ï¼Œnginxä¼šå¸®æˆ‘ä»¬ä»£ç†åˆ°æœ¬æœº<span class="number">8080</span>ç«¯å£</span><br><span class="line">    &#125;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™ç§é…ç½®å¹¶ä¸æ¶‰åŠåˆ°è·¨åŸŸé—®é¢˜ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„é…ç½®ï¼Œæ­¤æ—¶è¾“å…¥åŸŸåæˆ–è€…ipå³å¯è®¿é—®é¡¹ç›®</li></ul></li><li><p><strong>åç«¯ç»‘å®šå‰ç«¯å®šä¹‰çš„ç”Ÿäº§ç¯å¢ƒåŸŸåï¼Œå‰ç«¯ç»‘å®šé¡¹ç›®åŸŸå</strong></p><ul><li>è¿™å°±æ¶‰åŠåˆ°äº†è·¨åŸŸé—®é¢˜ï¼ˆè¯¦è§ä¸‹é¢ <strong>è·¨åŸŸé—®é¢˜çš„è§£å†³</strong>ï¼‰</li><li>åç«¯å°±éœ€è¦ä½¿ç”¨nginxçš„åå‘ä»£ç†ï¼Œå³ï¼ˆå½“nginxæœåŠ¡å™¨æ¥æ”¶åˆ°åç«¯åŸŸå(80ç«¯å£)çš„è¯·æ±‚ï¼Œå°±åå‘ä»£ç†åˆ°[æŸæŸipï¼šç«¯å£]ï¼‰</li><li>å‰ç«¯æœåŠ¡å¦‚æœä¸æ˜¯è¿è¡Œåœ¨80ç«¯å£ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨nginxåå‘ä»£ç†</li></ul></li></ol><h2 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h2><p>æµè§ˆå™¨ä¸ºäº†ç”¨æˆ·çš„å®‰å…¨ï¼Œä»…å…è®¸å‘ <strong>åŒåŸŸåã€åŒç«¯å£</strong> çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p><blockquote><p>é‚£ä¹ˆå¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ</p></blockquote><h3 id="åŸŸåå’Œç«¯å£éƒ½æ”¹æˆç›¸åŒçš„"><a href="#åŸŸåå’Œç«¯å£éƒ½æ”¹æˆç›¸åŒçš„" class="headerlink" title="åŸŸåå’Œç«¯å£éƒ½æ”¹æˆç›¸åŒçš„"></a>åŸŸåå’Œç«¯å£éƒ½æ”¹æˆç›¸åŒçš„</h3><p>å‰åç«¯ä¸èƒ½è¿è¡Œåœ¨åŒä¸€æœåŠ¡å™¨çš„åŒä¸€ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨nginxçš„æ­£å‘æˆ–åå‘ä»£ç†è§£å†³</p><h3 id="æ·»åŠ è·¨åŸŸå¤´"><a href="#æ·»åŠ è·¨åŸŸå¤´" class="headerlink" title="æ·»åŠ è·¨åŸŸå¤´"></a>æ·»åŠ è·¨åŸŸå¤´</h3><p>è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰</p><h4 id="1-ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰"><a href="#1-ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰" class="headerlink" title="1.ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰"></a>1.ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·¨åŸŸé…ç½®</span></span><br><span class="line"><span class="section">location</span><span class="regexp"> ^~</span> /api/ &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://127.0.0.1:8080/api/;</span><br><span class="line">    <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="variable">$http_origin</span>;</span><br><span class="line">    <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span> <span class="string">&#x27;true&#x27;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Methods <span class="string">&#x27;GET, POST, OPTIONS&#x27;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Headers <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span> <span class="string">&#x27;true&#x27;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="variable">$http_origin</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, POST, OPTIONS&#x27;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#x27;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Max-Age&#x27;</span> <span class="number">1728000</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Content-Type&#x27;</span> <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">&#x27;Content-Length&#x27;</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">204</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹åç«¯æœåŠ¡"><a href="#2-ä¿®æ”¹åç«¯æœåŠ¡" class="headerlink" title="2.ä¿®æ”¹åç«¯æœåŠ¡"></a>2.ä¿®æ”¹åç«¯æœåŠ¡</h4><ol><li><p>é…ç½® @CrossOrigin æ³¨è§£</p></li><li><p>æ·»åŠ  web å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfg</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">            <span class="comment">//è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå</span></span><br><span class="line">            <span class="comment">//å½“**Credentialsä¸ºtrueæ—¶ï¼Œ**Originä¸èƒ½ä¸ºæ˜Ÿå·ï¼Œéœ€ä¸ºå…·ä½“çš„ipåœ°å€ã€å¦‚æœæ¥å£ä¸å¸¦cookie,ipæ— éœ€è®¾æˆå…·ä½“ipã€‘</span></span><br><span class="line">            .allowedOrigins(<span class="string">&quot;http://localhost:9527&quot;</span>, <span class="string">&quot;http://127.0.0.1:9527&quot;</span>, <span class="string">&quot;http://127.0.0.1:8082&quot;</span>, <span class="string">&quot;http://127.0.0.1:8083&quot;</span>)</span><br><span class="line">            <span class="comment">//æ˜¯å¦å…è®¸è¯ä¹¦ ä¸å†é»˜è®¤å¼€å¯</span></span><br><span class="line">            .allowCredentials(<span class="literal">true</span>)</span><br><span class="line">            <span class="comment">//è®¾ç½®å…è®¸çš„æ–¹æ³•</span></span><br><span class="line">            .allowedMethods(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">            <span class="comment">//è·¨åŸŸå…è®¸æ—¶é—´</span></span><br><span class="line">            .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å®šä¹‰æ–°çš„ corsFilter Bean</li></ol>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®éƒ¨ç½²å’Œä¸Šçº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POMæ–‡ä»¶å¸®åŠ©æ–‡æ¡£</title>
      <link href="//posts/9e256e89.html"/>
      <url>//posts/9e256e89.html</url>
      
        <content type="html"><![CDATA[<h1 id="é™„ä»¶1ï¼šPOMæ–‡ä»¶æ€»ä½“é…ç½®è¯´æ˜"><a href="#é™„ä»¶1ï¼šPOMæ–‡ä»¶æ€»ä½“é…ç½®è¯´æ˜" class="headerlink" title="é™„ä»¶1ï¼šPOMæ–‡ä»¶æ€»ä½“é…ç½®è¯´æ˜"></a>é™„ä»¶1ï¼šPOMæ–‡ä»¶æ€»ä½“é…ç½®è¯´æ˜</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd &quot;</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- çˆ¶é¡¹ç›®çš„åæ ‡ã€‚å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰è§„å®šæŸä¸ªå…ƒç´ çš„å€¼ï¼Œé‚£ä¹ˆçˆ¶é¡¹ç›®ä¸­çš„å¯¹åº”å€¼å³ä¸ºé¡¹ç›®çš„é»˜è®¤å€¼ã€‚</span></span><br><span class="line"><span class="comment">         åæ ‡åŒ…æ‹¬group IDï¼Œartifact IDå’Œ versionã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„æ„ä»¶æ ‡è¯†ç¬¦ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„ç‰ˆæœ¬ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- çˆ¶é¡¹ç›®çš„pom.xmlæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ç›¸å¯¹è·¯å¾„å…è®¸ä½ é€‰æ‹©ä¸€ä¸ªä¸åŒçš„è·¯å¾„ã€‚é»˜è®¤å€¼æ˜¯../pom.xmlã€‚</span></span><br><span class="line"><span class="comment">             Mavené¦–å…ˆåœ¨æ„å»ºå½“å‰é¡¹ç›®çš„åœ°æ–¹å¯»æ‰¾çˆ¶é¡¹ç›®çš„pomï¼Œå…¶æ¬¡åœ¨æ–‡ä»¶ç³»ç»Ÿçš„è¿™ä¸ªä½ç½®ï¼ˆrelativePathä½ç½®ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">             ç„¶ååœ¨æœ¬åœ°ä»“åº“ï¼Œæœ€ååœ¨è¿œç¨‹ä»“åº“å¯»æ‰¾çˆ¶é¡¹ç›®çš„pomã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜é¡¹ç›®æè¿°ç¬¦éµå¾ªå“ªä¸€ä¸ªPOMæ¨¡å‹ç‰ˆæœ¬ã€‚æ¨¡å‹æœ¬èº«çš„ç‰ˆæœ¬å¾ˆå°‘æ”¹å˜ï¼Œè™½ç„¶å¦‚æ­¤ï¼Œä½†å®ƒä»ç„¶æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œ</span></span><br><span class="line"><span class="comment">         è¿™æ˜¯ä¸ºäº†å½“Mavenå¼•å…¥äº†æ–°çš„ç‰¹æ€§æˆ–è€…å…¶ä»–æ¨¡å‹å˜æ›´çš„æ—¶å€™ï¼Œç¡®ä¿ç¨³å®šæ€§ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span> 4.0.0 <span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä½¿ç”¨å…¨é™å®šçš„åŒ…ååŒºåˆ†è¯¥é¡¹ç›®å’Œå…¶ä»–é¡¹ç›®ã€‚å¹¶ä¸”æ„å»ºæ—¶ç”Ÿæˆçš„è·¯å¾„ä¹Ÿæ˜¯ç”±æ­¤ç”Ÿæˆï¼Œ </span></span><br><span class="line"><span class="comment">         å¦‚com.mycompany.appç”Ÿæˆçš„ç›¸å¯¹è·¯å¾„ä¸ºï¼š/com/mycompany/app --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ„ä»¶çš„æ ‡è¯†ç¬¦ï¼Œå®ƒå’Œgroup IDä¸€èµ·å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ„ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œä½ ä¸èƒ½æœ‰ä¸¤ä¸ªä¸åŒçš„é¡¹ç›®æ‹¥æœ‰åŒæ ·çš„artifact ID</span></span><br><span class="line"><span class="comment">         å’ŒgroupIDï¼›åœ¨æŸä¸ªç‰¹å®šçš„group IDä¸‹ï¼Œartifact IDä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚æ„ä»¶æ˜¯é¡¹ç›®äº§ç”Ÿçš„æˆ–ä½¿ç”¨çš„ä¸€ä¸ªä¸œè¥¿ï¼ŒMaven</span></span><br><span class="line"><span class="comment">         ä¸ºé¡¹ç›®äº§ç”Ÿçš„æ„ä»¶åŒ…æ‹¬ï¼šJARsï¼Œæºç ï¼ŒäºŒè¿›åˆ¶å‘å¸ƒå’ŒWARsç­‰ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®äº§ç”Ÿçš„æ„ä»¶ç±»å‹ï¼Œä¾‹å¦‚jarã€warã€earã€pomã€‚æ’ä»¶å¯ä»¥åˆ›å»ºä»–ä»¬è‡ªå·±çš„æ„ä»¶ç±»å‹ï¼Œæ‰€ä»¥å‰é¢åˆ—çš„ä¸æ˜¯å…¨éƒ¨æ„ä»¶ç±»å‹ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span> jar <span class="tag">&lt;/<span class="name">packaging</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®å½“å‰ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸º:ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.å¢é‡ç‰ˆæœ¬-é™å®šç‰ˆæœ¬å· --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span> 1.0-SNAPSHOT <span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„åç§°, Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span> xxx-maven <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®ä¸»é¡µçš„URL, Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://maven.apache.org <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„è¯¦ç»†æè¿°, Maven äº§ç”Ÿçš„æ–‡æ¡£ç”¨ã€‚ å½“è¿™ä¸ªå…ƒç´ èƒ½å¤Ÿç”¨HTMLæ ¼å¼æè¿°æ—¶ï¼ˆä¾‹å¦‚ï¼ŒCDATAä¸­çš„æ–‡æœ¬ä¼šè¢«è§£æå™¨å¿½ç•¥ï¼Œ</span></span><br><span class="line"><span class="comment">         å°±å¯ä»¥åŒ…å«HTMLæ ‡ç­¾ï¼‰ï¼Œ ä¸é¼“åŠ±ä½¿ç”¨çº¯æ–‡æœ¬æè¿°ã€‚å¦‚æœä½ éœ€è¦ä¿®æ”¹äº§ç”Ÿçš„webç«™ç‚¹çš„ç´¢å¼•é¡µé¢ï¼Œä½ åº”è¯¥ä¿®æ”¹ä½ è‡ªå·±çš„</span></span><br><span class="line"><span class="comment">         ç´¢å¼•é¡µæ–‡ä»¶ï¼Œè€Œä¸æ˜¯è°ƒæ•´è¿™é‡Œçš„æ–‡æ¡£ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span> A maven project to study maven. <span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æè¿°äº†è¿™ä¸ªé¡¹ç›®æ„å»ºç¯å¢ƒä¸­çš„å‰ææ¡ä»¶ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">prerequisites</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- æ„å»ºè¯¥é¡¹ç›®æˆ–ä½¿ç”¨è¯¥æ’ä»¶æ‰€éœ€è¦çš„Mavençš„æœ€ä½ç‰ˆæœ¬ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">maven</span>&gt;</span><span class="tag">&lt;/<span class="name">maven</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">prerequisites</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿ(Bugzilla, Jira, Scarab,æˆ–ä»»ä½•ä½ å–œæ¬¢çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿ)çš„åç§°å’ŒURLï¼Œæœ¬ä¾‹ä¸º jira --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">issueManagement</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- é—®é¢˜ç®¡ç†ç³»ç»Ÿï¼ˆä¾‹å¦‚jiraï¼‰çš„åå­—ï¼Œ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">system</span>&gt;</span> jira <span class="tag">&lt;/<span class="name">system</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯¥é¡¹ç›®ä½¿ç”¨çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿçš„URL --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://jira.baidu.com/banseon <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">issueManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æŒç»­é›†æˆä¿¡æ¯ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">ciManagement</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- æŒç»­é›†æˆç³»ç»Ÿçš„åå­—ï¼Œä¾‹å¦‚continuum --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">system</span>&gt;</span><span class="tag">&lt;/<span class="name">system</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯¥é¡¹ç›®ä½¿ç”¨çš„æŒç»­é›†æˆç³»ç»Ÿçš„URLï¼ˆå¦‚æœæŒç»­é›†æˆç³»ç»Ÿæœ‰webæ¥å£çš„è¯ï¼‰ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ„å»ºå®Œæˆæ—¶ï¼Œéœ€è¦é€šçŸ¥çš„å¼€å‘è€…/ç”¨æˆ·çš„é…ç½®é¡¹ã€‚åŒ…æ‹¬è¢«é€šçŸ¥è€…ä¿¡æ¯å’Œé€šçŸ¥æ¡ä»¶ï¼ˆé”™è¯¯ï¼Œå¤±è´¥ï¼ŒæˆåŠŸï¼Œè­¦å‘Šï¼‰ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">notifiers</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- é…ç½®ä¸€ç§æ–¹å¼ï¼Œå½“æ„å»ºä¸­æ–­æ—¶ï¼Œä»¥è¯¥æ–¹å¼é€šçŸ¥ç”¨æˆ·/å¼€å‘è€… --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">notifier</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- ä¼ é€é€šçŸ¥çš„é€”å¾„ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span><span class="tag">&lt;/<span class="name">type</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å‘ç”Ÿé”™è¯¯æ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnError</span>&gt;</span><span class="tag">&lt;/<span class="name">sendOnError</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ„å»ºå¤±è´¥æ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnFailure</span>&gt;</span><span class="tag">&lt;/<span class="name">sendOnFailure</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ„å»ºæˆåŠŸæ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnSuccess</span>&gt;</span><span class="tag">&lt;/<span class="name">sendOnSuccess</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å‘ç”Ÿè­¦å‘Šæ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnWarning</span>&gt;</span><span class="tag">&lt;/<span class="name">sendOnWarning</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- ä¸èµæˆä½¿ç”¨ã€‚é€šçŸ¥å‘é€åˆ°å“ªé‡Œ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">address</span>&gt;</span><span class="tag">&lt;/<span class="name">address</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ‰©å±•é…ç½®é¡¹ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">notifier</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">notifiers</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">ciManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®åˆ›å»ºå¹´ä»½ï¼Œ4ä½æ•°å­—ã€‚å½“äº§ç”Ÿç‰ˆæƒä¿¡æ¯æ—¶éœ€è¦ä½¿ç”¨è¿™ä¸ªå€¼ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">inceptionYear</span> /&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®ç›¸å…³é‚®ä»¶åˆ—è¡¨ä¿¡æ¯ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">mailingLists</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰é‚®ä»¶åˆ—è¡¨ã€‚è‡ªåŠ¨äº§ç”Ÿçš„ç½‘ç«™å¼•ç”¨è¿™äº›ä¿¡æ¯ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">mailingList</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- é‚®ä»¶çš„åç§° --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> Demo <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‘é€é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">post</span>&gt;</span> banseon@126.com <span class="tag">&lt;/<span class="name">post</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è®¢é˜…é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">subscribe</span>&gt;</span> banseon@126.com <span class="tag">&lt;/<span class="name">subscribe</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å–æ¶ˆè®¢é˜…é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">unsubscribe</span>&gt;</span> banseon@126.com <span class="tag">&lt;/<span class="name">unsubscribe</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä½ å¯ä»¥æµè§ˆé‚®ä»¶ä¿¡æ¯çš„URL --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">archive</span>&gt;</span> http:/hi.baidu.com/banseon/demo/dev/ <span class="tag">&lt;/<span class="name">archive</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">mailingList</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mailingLists</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…åˆ—è¡¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- æŸä¸ªé¡¹ç›®å¼€å‘è€…çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- SCMé‡Œé¡¹ç›®å¼€å‘è€…çš„å”¯ä¸€æ ‡è¯†ç¬¦ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span> HELLO WORLD <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…çš„å…¨å --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> banseon <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…çš„email --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span> banseon@126.com <span class="tag">&lt;/<span class="name">email</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…çš„ä¸»é¡µçš„URL --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²ï¼Œè§’è‰²å…ƒç´ æè¿°äº†å„ç§è§’è‰² --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">roles</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span> Project Manager <span class="tag">&lt;/<span class="name">role</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span> Architect <span class="tag">&lt;/<span class="name">role</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">roles</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…æ‰€å±ç»„ç»‡ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">organization</span>&gt;</span> demo <span class="tag">&lt;/<span class="name">organization</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…æ‰€å±ç»„ç»‡çš„URL --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">organizationUrl</span>&gt;</span> http://hi.baidu.com/xxx <span class="tag">&lt;/<span class="name">organizationUrl</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…å±æ€§ï¼Œå¦‚å³æ—¶æ¶ˆæ¯å¦‚ä½•å¤„ç†ç­‰ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">dept</span>&gt;</span> No <span class="tag">&lt;/<span class="name">dept</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®å¼€å‘è€…æ‰€åœ¨æ—¶åŒºï¼Œ -11åˆ°12èŒƒå›´å†…çš„æ•´æ•°ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">timezone</span>&gt;</span> -5 <span class="tag">&lt;/<span class="name">timezone</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„å…¶ä»–è´¡çŒ®è€…åˆ—è¡¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">contributors</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- é¡¹ç›®çš„å…¶ä»–è´¡çŒ®è€…ã€‚å‚è§developers/developerå…ƒç´  --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">contributor</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…çš„å…¨å --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…çš„email --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span><span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…çš„ä¸»é¡µçš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…æ‰€å±ç»„ç»‡ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organization</span>&gt;</span><span class="tag">&lt;/<span class="name">organization</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…æ‰€å±ç»„ç»‡çš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organizationUrl</span>&gt;</span><span class="tag">&lt;/<span class="name">organizationUrl</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²ï¼Œè§’è‰²å…ƒç´ æè¿°äº†å„ç§è§’è‰² --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">roles</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span> Project Manager <span class="tag">&lt;/<span class="name">role</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span> Architect <span class="tag">&lt;/<span class="name">role</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">roles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…æ‰€åœ¨æ—¶åŒºï¼Œ -11åˆ°12èŒƒå›´å†…çš„æ•´æ•°ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">timezone</span>&gt;</span><span class="tag">&lt;/<span class="name">timezone</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®è´¡çŒ®è€…å±æ€§ï¼Œå¦‚å³æ—¶æ¶ˆæ¯å¦‚ä½•å¤„ç†ç­‰ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">dept</span>&gt;</span> No <span class="tag">&lt;/<span class="name">dept</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">contributor</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">contributors</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®æ‰€æœ‰Licenseåˆ—è¡¨ã€‚ åº”è¯¥åªåˆ—å‡ºè¯¥é¡¹ç›®çš„licenseåˆ—è¡¨ï¼Œä¸è¦åˆ—å‡ºä¾èµ–é¡¹ç›®çš„ licenseåˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">         å¦‚æœåˆ—å‡ºå¤šä¸ªlicenseï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å®ƒä»¬ä¸­çš„ä¸€ä¸ªè€Œä¸æ˜¯æ¥å—æ‰€æœ‰licenseã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- æè¿°äº†é¡¹ç›®çš„licenseï¼Œç”¨äºç”Ÿæˆé¡¹ç›®çš„webç«™ç‚¹çš„licenseé¡µé¢ï¼Œå…¶ä»–ä¸€äº›æŠ¥è¡¨å’Œvalidationä¹Ÿä¼šç”¨åˆ°è¯¥å…ƒç´ ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- licenseç”¨äºæ³•å¾‹ä¸Šçš„åç§° --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> Apache 2 <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å®˜æ–¹çš„licenseæ­£æ–‡é¡µé¢çš„URL --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://www.baidu.com/banseon/LICENSE-2.0.txt <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- é¡¹ç›®åˆ†å‘çš„ä¸»è¦æ–¹å¼ï¼š </span></span><br><span class="line"><span class="comment">                    repoï¼Œå¯ä»¥ä»Mavenåº“ä¸‹è½½ </span></span><br><span class="line"><span class="comment">                    manualï¼Œ ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨ä¸‹è½½å’Œå®‰è£…ä¾èµ– --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">distribution</span>&gt;</span> repo <span class="tag">&lt;/<span class="name">distribution</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å…³äºlicenseçš„è¡¥å……ä¿¡æ¯ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">comments</span>&gt;</span> A business-friendly OSS license <span class="tag">&lt;/<span class="name">comments</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">license</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- SCM(Source Control Management)æ ‡ç­¾å…è®¸ä½ é…ç½®ä½ çš„ä»£ç åº“ï¼Œä¾›Maven webç«™ç‚¹å’Œå…¶å®ƒæ’ä»¶ä½¿ç”¨ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- SCMçš„URL,è¯¥URLæè¿°äº†ç‰ˆæœ¬åº“å’Œå¦‚ä½•è¿æ¥åˆ°ç‰ˆæœ¬åº“ã€‚æ¬²çŸ¥è¯¦æƒ…ï¼Œè¯·çœ‹SCMsæä¾›çš„URLæ ¼å¼å’Œåˆ—è¡¨ã€‚è¯¥è¿æ¥åªè¯»ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>&gt;</span> </span><br><span class="line">            scm:svn:http://svn.baidu.com/banseon/maven/banseon/banseon-maven2-trunk(dao-trunk)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">connection</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å¼€å‘è€…ä½¿ç”¨çš„ï¼Œç±»ä¼¼connectionå…ƒç´ ã€‚å³è¯¥è¿æ¥ä¸ä»…ä»…åªè¯» --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>&gt;</span> </span><br><span class="line">            scm:svn:http://svn.baidu.com/banseon/maven/banseon/dao-trunk </span><br><span class="line">        <span class="tag">&lt;/<span class="name">developerConnection</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å½“å‰ä»£ç çš„æ ‡ç­¾ï¼Œåœ¨å¼€å‘é˜¶æ®µé»˜è®¤ä¸ºHEAD --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>&gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å‘é¡¹ç›®çš„å¯æµè§ˆSCMåº“ï¼ˆä¾‹å¦‚ViewVCæˆ–è€…Fisheyeï¼‰çš„URLã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://svn.baidu.com/banseon <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æè¿°é¡¹ç›®æ‰€å±ç»„ç»‡çš„å„ç§å±æ€§ã€‚Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">organization</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- ç»„ç»‡çš„å…¨å --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span> demo <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»„ç»‡ä¸»é¡µçš„URL --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://www.baidu.com/banseon <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">organization</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ„å»ºé¡¹ç›®éœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®æºç ç›®å½•ï¼Œå½“æ„å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œæ„å»ºç³»ç»Ÿä¼šç¼–è¯‘ç›®å½•é‡Œçš„æºç ã€‚è¯¥è·¯å¾„æ˜¯ç›¸å¯¹</span></span><br><span class="line"><span class="comment">             äºpom.xmlçš„ç›¸å¯¹è·¯å¾„ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span><span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®è„šæœ¬æºç ç›®å½•ï¼Œè¯¥ç›®å½•å’Œæºç ç›®å½•ä¸åŒï¼šç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥ç›®å½•ä¸‹çš„å†…å®¹ä¼š</span></span><br><span class="line"><span class="comment">             è¢«æ‹·è´åˆ°è¾“å‡ºç›®å½•(å› ä¸ºè„šæœ¬æ˜¯è¢«è§£é‡Šçš„ï¼Œè€Œä¸æ˜¯è¢«ç¼–è¯‘çš„)ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">scriptSourceDirectory</span>&gt;</span><span class="tag">&lt;/<span class="name">scriptSourceDirectory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®å•å…ƒæµ‹è¯•ä½¿ç”¨çš„æºç ç›®å½•ï¼Œå½“æµ‹è¯•é¡¹ç›®çš„æ—¶å€™ï¼Œæ„å»ºç³»ç»Ÿä¼šç¼–è¯‘ç›®å½•é‡Œçš„æºç ã€‚</span></span><br><span class="line"><span class="comment">             è¯¥è·¯å¾„æ˜¯ç›¸å¯¹äºpom.xmlçš„ç›¸å¯¹è·¯å¾„ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">testSourceDirectory</span>&gt;</span><span class="tag">&lt;/<span class="name">testSourceDirectory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¢«ç¼–è¯‘è¿‡çš„åº”ç”¨ç¨‹åºclassæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span><span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¢«ç¼–è¯‘è¿‡çš„æµ‹è¯•classæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">testOutputDirectory</span>&gt;</span><span class="tag">&lt;/<span class="name">testOutputDirectory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨æ¥è‡ªè¯¥é¡¹ç›®çš„ä¸€ç³»åˆ—æ„å»ºæ‰©å±• --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">extensions</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- æè¿°ä½¿ç”¨åˆ°çš„æ„å»ºæ‰©å±•ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">extension</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æ„å»ºæ‰©å±•çš„groupId --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ„å»ºæ‰©å±•çš„artifactId --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ„å»ºæ‰©å±•çš„ç‰ˆæœ¬ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">extension</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å½“é¡¹ç›®æ²¡æœ‰è§„å®šç›®æ ‡ï¼ˆMaven2 å«åšé˜¶æ®µï¼‰æ—¶çš„é»˜è®¤å€¼ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">defaultGoal</span>&gt;</span><span class="tag">&lt;/<span class="name">defaultGoal</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¿™ä¸ªå…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„åˆ—è¡¨ï¼Œä¾‹å¦‚å’Œé¡¹ç›®ç›¸å…³çš„å±æ€§æ–‡ä»¶ï¼Œè¿™äº›èµ„æºè¢«åŒ…å«åœ¨</span></span><br><span class="line"><span class="comment">             æœ€ç»ˆçš„æ‰“åŒ…æ–‡ä»¶é‡Œã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- è¿™ä¸ªå…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³æˆ–æµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æè¿°äº†èµ„æºçš„ç›®æ ‡è·¯å¾„ã€‚è¯¥è·¯å¾„ç›¸å¯¹target/classesç›®å½•ï¼ˆä¾‹å¦‚$&#123;project.build.outputDirectory&#125;ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">                     ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³èµ„æºåœ¨ç‰¹å®šçš„åŒ…é‡Œ(org.apache.maven.messages)ï¼Œä½ å°±å¿…é¡»è¯¥å…ƒç´ è®¾ç½®ä¸º</span></span><br><span class="line"><span class="comment">                    org/apache/maven/messagesã€‚ç„¶è€Œï¼Œå¦‚æœä½ åªæ˜¯æƒ³æŠŠèµ„æºæ”¾åˆ°æºç ç›®å½•ç»“æ„é‡Œï¼Œå°±ä¸éœ€è¦è¯¥é…ç½®ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span><span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ˜¯å¦ä½¿ç”¨å‚æ•°å€¼ä»£æ›¿å‚æ•°åã€‚å‚æ•°å€¼å–è‡ªpropertieså…ƒç´ æˆ–è€…æ–‡ä»¶é‡Œé…ç½®çš„å±æ€§ï¼Œæ–‡ä»¶åœ¨filterså…ƒç´ </span></span><br><span class="line"><span class="comment">                     é‡Œåˆ—å‡ºã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span><span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æè¿°å­˜æ”¾èµ„æºçš„ç›®å½•ï¼Œè¯¥è·¯å¾„ç›¸å¯¹POMè·¯å¾„ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- åŒ…å«çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml. --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exclude</span>&gt;</span><span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¿™ä¸ªå…ƒç´ æè¿°äº†å•å…ƒæµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ï¼Œä¾‹å¦‚å’Œå•å…ƒæµ‹è¯•ç›¸å…³çš„å±æ€§æ–‡ä»¶ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">testResources</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- è¿™ä¸ªå…ƒç´ æè¿°äº†æµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ï¼Œå‚è§build/resources/resourceå…ƒç´ çš„è¯´æ˜ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">testResource</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æè¿°äº†æµ‹è¯•ç›¸å…³çš„èµ„æºçš„ç›®æ ‡è·¯å¾„ã€‚è¯¥è·¯å¾„ç›¸å¯¹target/classesç›®å½•ï¼ˆä¾‹å¦‚$&#123;project.build.outputDirectory&#125;ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">                     ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³èµ„æºåœ¨ç‰¹å®šçš„åŒ…é‡Œ(org.apache.maven.messages)ï¼Œä½ å°±å¿…é¡»è¯¥å…ƒç´ è®¾ç½®ä¸º</span></span><br><span class="line"><span class="comment">                    org/apache/maven/messagesã€‚ç„¶è€Œï¼Œå¦‚æœä½ åªæ˜¯æƒ³æŠŠèµ„æºæ”¾åˆ°æºç ç›®å½•ç»“æ„é‡Œï¼Œå°±ä¸éœ€è¦è¯¥é…ç½®ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span><span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ˜¯å¦ä½¿ç”¨å‚æ•°å€¼ä»£æ›¿å‚æ•°åã€‚å‚æ•°å€¼å–è‡ªpropertieså…ƒç´ æˆ–è€…æ–‡ä»¶é‡Œé…ç½®çš„å±æ€§ï¼Œæ–‡ä»¶åœ¨filterså…ƒç´ </span></span><br><span class="line"><span class="comment">                     é‡Œåˆ—å‡ºã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span><span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æè¿°å­˜æ”¾æµ‹è¯•ç›¸å…³çš„èµ„æºçš„ç›®å½•ï¼Œè¯¥è·¯å¾„ç›¸å¯¹POMè·¯å¾„ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- åŒ…å«çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml. --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exclude</span>&gt;</span><span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ„å»ºäº§ç”Ÿçš„æ‰€æœ‰æ–‡ä»¶å­˜æ”¾çš„ç›®å½• --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- äº§ç”Ÿçš„æ„ä»¶çš„æ–‡ä»¶åï¼Œé»˜è®¤å€¼æ˜¯$&#123;artifactId&#125;-$&#123;version&#125;ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span><span class="tag">&lt;/<span class="name">finalName</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å½“filteringå¼€å…³æ‰“å¼€æ—¶ï¼Œä½¿ç”¨åˆ°çš„è¿‡æ»¤å™¨å±æ€§æ–‡ä»¶åˆ—è¡¨ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">filters</span>&gt;</span><span class="tag">&lt;/<span class="name">filters</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å­é¡¹ç›®å¯ä»¥å¼•ç”¨çš„é»˜è®¤æ’ä»¶ä¿¡æ¯ã€‚è¯¥æ’ä»¶é…ç½®é¡¹ç›´åˆ°è¢«å¼•ç”¨æ—¶æ‰ä¼šè¢«è§£ææˆ–ç»‘å®šåˆ°ç”Ÿå‘½å‘¨æœŸã€‚ç»™å®šæ’ä»¶çš„ä»»ä½•æœ¬</span></span><br><span class="line"><span class="comment">             åœ°é…ç½®éƒ½ä¼šè¦†ç›–è¿™é‡Œçš„é…ç½® --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨ ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- pluginå…ƒç´ åŒ…å«æè¿°æ’ä»¶æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- æ’ä»¶åœ¨ä»“åº“é‡Œçš„group ID --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ’ä»¶åœ¨ä»“åº“é‡Œçš„artifact ID --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- è¢«ä½¿ç”¨çš„æ’ä»¶çš„ç‰ˆæœ¬ï¼ˆæˆ–ç‰ˆæœ¬èŒƒå›´ï¼‰ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ˜¯å¦ä»è¯¥æ’ä»¶ä¸‹è½½Mavenæ‰©å±•ï¼ˆä¾‹å¦‚æ‰“åŒ…å’Œç±»å‹å¤„ç†å™¨ï¼‰ï¼Œç”±äºæ€§èƒ½åŸå› ï¼Œåªæœ‰åœ¨çœŸéœ€è¦ä¸‹è½½æ—¶ï¼Œè¯¥</span></span><br><span class="line"><span class="comment">                         å…ƒç´ æ‰è¢«è®¾ç½®æˆenabledã€‚ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- åœ¨æ„å»ºç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œä¸€ç»„ç›®æ ‡çš„é…ç½®ã€‚æ¯ä¸ªç›®æ ‡å¯èƒ½æœ‰ä¸åŒçš„é…ç½®ã€‚ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </span><br><span class="line">                        <span class="comment">&lt;!-- executionå…ƒç´ åŒ…å«äº†æ’ä»¶æ‰§è¡Œéœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </span><br><span class="line">                            <span class="comment">&lt;!-- æ‰§è¡Œç›®æ ‡çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†æ„å»ºè¿‡ç¨‹ä¸­çš„ç›®æ ‡ï¼Œæˆ–è€…åŒ¹é…ç»§æ‰¿è¿‡ç¨‹ä¸­éœ€è¦åˆå¹¶çš„æ‰§è¡Œç›®æ ‡ --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">&lt;!-- ç»‘å®šäº†ç›®æ ‡çš„æ„å»ºç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå¦‚æœçœç•¥ï¼Œç›®æ ‡ä¼šè¢«ç»‘å®šåˆ°æºæ•°æ®é‡Œé…ç½®çš„é»˜è®¤é˜¶æ®µ --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">phase</span>&gt;</span><span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">&lt;!-- é…ç½®çš„æ‰§è¡Œç›®æ ‡ --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                            <span class="comment">&lt;!-- é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­POM --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                            <span class="comment">&lt;!-- ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- é¡¹ç›®å¼•å…¥æ’ä»¶æ‰€éœ€è¦çš„é¢å¤–ä¾èµ– --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- ä»»ä½•é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­é¡¹ç›® --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯¥é¡¹ç›®ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨ ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- pluginå…ƒç´ åŒ…å«æè¿°æ’ä»¶æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æ’ä»¶åœ¨ä»“åº“é‡Œçš„group ID --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ’ä»¶åœ¨ä»“åº“é‡Œçš„artifact ID --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- è¢«ä½¿ç”¨çš„æ’ä»¶çš„ç‰ˆæœ¬ï¼ˆæˆ–ç‰ˆæœ¬èŒƒå›´ï¼‰ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æ˜¯å¦ä»è¯¥æ’ä»¶ä¸‹è½½Mavenæ‰©å±•ï¼ˆä¾‹å¦‚æ‰“åŒ…å’Œç±»å‹å¤„ç†å™¨ï¼‰ï¼Œç”±äºæ€§èƒ½åŸå› ï¼Œåªæœ‰åœ¨çœŸéœ€è¦ä¸‹è½½æ—¶ï¼Œè¯¥</span></span><br><span class="line"><span class="comment">                     å…ƒç´ æ‰è¢«è®¾ç½®æˆenabledã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- åœ¨æ„å»ºç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œä¸€ç»„ç›®æ ‡çš„é…ç½®ã€‚æ¯ä¸ªç›®æ ‡å¯èƒ½æœ‰ä¸åŒçš„é…ç½®ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- executionå…ƒç´ åŒ…å«äº†æ’ä»¶æ‰§è¡Œéœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </span><br><span class="line">                        <span class="comment">&lt;!-- æ‰§è¡Œç›®æ ‡çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†æ„å»ºè¿‡ç¨‹ä¸­çš„ç›®æ ‡ï¼Œæˆ–è€…åŒ¹é…ç»§æ‰¿è¿‡ç¨‹ä¸­éœ€è¦åˆå¹¶çš„æ‰§è¡Œç›®æ ‡ --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- ç»‘å®šäº†ç›®æ ‡çš„æ„å»ºç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå¦‚æœçœç•¥ï¼Œç›®æ ‡ä¼šè¢«ç»‘å®šåˆ°æºæ•°æ®é‡Œé…ç½®çš„é»˜è®¤é˜¶æ®µ --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span><span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- é…ç½®çš„æ‰§è¡Œç›®æ ‡ --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­POM --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- é¡¹ç›®å¼•å…¥æ’ä»¶æ‰€éœ€è¦çš„é¢å¤–ä¾èµ– --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- ä»»ä½•é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­é¡¹ç›® --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨åˆ—çš„é¡¹ç›®æ„å»ºprofileï¼Œå¦‚æœè¢«æ¿€æ´»ï¼Œä¼šä¿®æ”¹æ„å»ºå¤„ç† --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- æ ¹æ®ç¯å¢ƒå‚æ•°æˆ–å‘½ä»¤è¡Œå‚æ•°æ¿€æ´»æŸä¸ªæ„å»ºå¤„ç† --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- æ„å»ºé…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å³ç”¨äºå‘½ä»¤è¡Œæ¿€æ´»ï¼Œä¹Ÿç”¨äºåœ¨ç»§æ‰¿æ—¶åˆå¹¶å…·æœ‰ç›¸åŒæ ‡è¯†ç¬¦çš„profileã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è‡ªåŠ¨è§¦å‘profileçš„æ¡ä»¶é€»è¾‘ã€‚Activationæ˜¯profileçš„å¼€å¯é’¥åŒ™ã€‚profileçš„åŠ›é‡æ¥è‡ªäºå®ƒèƒ½å¤Ÿ</span></span><br><span class="line"><span class="comment">                 åœ¨æŸäº›ç‰¹å®šçš„ç¯å¢ƒä¸­è‡ªåŠ¨ä½¿ç”¨æŸäº›ç‰¹å®šçš„å€¼ï¼›è¿™äº›ç¯å¢ƒé€šè¿‡activationå…ƒç´ æŒ‡å®šã€‚activationå…ƒ</span></span><br><span class="line"><span class="comment">                 ç´ å¹¶ä¸æ˜¯æ¿€æ´»profileçš„å”¯ä¸€æ–¹å¼ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">activation</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡å¿— --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å½“åŒ¹é…çš„jdkè¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚ä¾‹å¦‚ï¼Œ1.4æ¿€æ´»JDK1.4ï¼Œ1.4.0_2ï¼Œè€Œ!1.4æ¿€æ´»æ‰€æœ‰ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">                     ä¸æ˜¯ä»¥1.4å¼€å¤´çš„JDKã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>jdkç‰ˆæœ¬ï¼Œå¦‚:1.7<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å½“åŒ¹é…çš„æ“ä½œç³»ç»Ÿå±æ€§è¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚oså…ƒç´ å¯ä»¥å®šä¹‰ä¸€äº›æ“ä½œç³»ç»Ÿç›¸å…³çš„å±æ€§ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">os</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿçš„åå­— --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span> Windows XP <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿæ‰€å±å®¶æ—(å¦‚ &#x27;windows&#x27;) --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">family</span>&gt;</span> Windows <span class="tag">&lt;/<span class="name">family</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">arch</span>&gt;</span> x86 <span class="tag">&lt;/<span class="name">arch</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span> 5.1.2600 <span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">os</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å¦‚æœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±æ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;åç§°&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„åç§°å’Œå€¼ï¼ŒProfile</span></span><br><span class="line"><span class="comment">                     å°±ä¼šè¢«æ¿€æ´»ã€‚å¦‚æœå€¼å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±æ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹</span></span><br><span class="line"><span class="comment">                     é…å±æ€§å€¼å­—æ®µ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„å±æ€§çš„åç§° --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span> mavenVersion <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- æ¿€æ´»profileçš„å±æ€§çš„å€¼ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span> 2.0.3 <span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œé€šè¿‡æ£€æµ‹è¯¥æ–‡ä»¶çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥æ¿€æ´»profileã€‚missingæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ¿€æ´» </span></span><br><span class="line"><span class="comment">                     profileã€‚å¦ä¸€æ–¹é¢ï¼Œexistsåˆ™ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ¿€æ´»profileã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">file</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- å¦‚æœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">exists</span>&gt;</span> /usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/ <span class="tag">&lt;/<span class="name">exists</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- å¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">missing</span>&gt;</span> /usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/ <span class="tag">&lt;/<span class="name">missing</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">file</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">activation</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æ„å»ºé¡¹ç›®æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚å‚è§buildå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">build</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">defaultGoal</span> /&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">resources</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">resource</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span><span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span><span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">include</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">exclude</span>&gt;</span><span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">resources</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">testResources</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">testResource</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span><span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span><span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">include</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">exclude</span>&gt;</span><span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span><span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">finalName</span>&gt;</span><span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filters</span>&gt;</span><span class="tag">&lt;/<span class="name">filters</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </span><br><span class="line">                        <span class="comment">&lt;!-- å‚è§build/pluginManagement/plugins/pluginå…ƒç´  --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </span><br><span class="line">                                <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </span><br><span class="line">                                    <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span><span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line">                                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                                <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- å‚è§build/pluginManagement/plugins/pluginå…ƒç´  --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </span><br><span class="line">                                <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">phase</span>&gt;</span><span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                            <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">build</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æ¨¡å—ï¼ˆæœ‰æ—¶ç§°ä½œå­é¡¹ç›®ï¼‰ è¢«æ„å»ºæˆé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚åˆ—å‡ºçš„æ¯ä¸ªæ¨¡å—å…ƒç´ æ˜¯æŒ‡å‘è¯¥æ¨¡å—çš„ç›®å½•çš„</span></span><br><span class="line"><span class="comment">                 ç›¸å¯¹è·¯å¾„ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å­é¡¹ç›®ç›¸å¯¹è·¯å¾„--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">module</span>&gt;</span><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">modules</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‘ç°ä¾èµ–å’Œæ‰©å±•çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">repositories</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- å‚è§repositories/repositoryå…ƒç´  --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">repository</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">layout</span>&gt;</span><span class="tag">&lt;/<span class="name">layout</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">repository</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œè¿™äº›æ’ä»¶ç”¨äºæ„å»ºå’ŒæŠ¥è¡¨ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§repositories/repositoryå…ƒç´  --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">layout</span>&gt;</span><span class="tag">&lt;/<span class="name">layout</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–ã€‚ è¿™äº›ä¾èµ–ç»„æˆäº†é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸ªç¯èŠ‚ã€‚å®ƒä»¬è‡ªåŠ¨ä»é¡¹ç›®å®šä¹‰çš„</span></span><br><span class="line"><span class="comment">                 ä»“åº“ä¸­ä¸‹è½½ã€‚è¦è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹é¡¹ç›®ä¾èµ–æœºåˆ¶ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¸èµæˆä½¿ç”¨. ç°åœ¨Mavenå¿½ç•¥è¯¥å…ƒç´ . --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">reports</span>&gt;</span><span class="tag">&lt;/<span class="name">reports</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è¯¥å…ƒç´ åŒ…æ‹¬ä½¿ç”¨æŠ¥è¡¨æ’ä»¶äº§ç”ŸæŠ¥è¡¨çš„è§„èŒƒã€‚å½“ç”¨æˆ·æ‰§è¡Œâ€œmvn siteâ€ï¼Œè¿™äº›æŠ¥è¡¨å°±ä¼šè¿è¡Œã€‚ åœ¨é¡µé¢å¯¼èˆªæ èƒ½çœ‹</span></span><br><span class="line"><span class="comment">                 åˆ°æ‰€æœ‰æŠ¥è¡¨çš„é“¾æ¥ã€‚å‚è§reportingå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">reporting</span>&gt;</span><span class="tag">&lt;/<span class="name">reporting</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‚è§dependencyManagementå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‚è§distributionManagementå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å‚è§propertieså…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¨¡å—ï¼ˆæœ‰æ—¶ç§°ä½œå­é¡¹ç›®ï¼‰ è¢«æ„å»ºæˆé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚åˆ—å‡ºçš„æ¯ä¸ªæ¨¡å—å…ƒç´ æ˜¯æŒ‡å‘è¯¥æ¨¡å—çš„ç›®å½•çš„ç›¸å¯¹è·¯å¾„ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å­é¡¹ç›®ç›¸å¯¹è·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å‘ç°ä¾èµ–å’Œæ‰©å±•çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå‘å¸ƒç‰ˆæœ¬çš„ä¸‹è½½ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">releases</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- trueæˆ–è€…falseè¡¨ç¤ºè¯¥ä»“åº“æ˜¯å¦ä¸ºä¸‹è½½æŸç§ç±»å‹æ„ä»¶ï¼ˆå‘å¸ƒç‰ˆï¼Œå¿«ç…§ç‰ˆï¼‰å¼€å¯ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- è¯¥å…ƒç´ æŒ‡å®šæ›´æ–°å‘ç”Ÿçš„é¢‘ç‡ã€‚Mavenä¼šæ¯”è¾ƒæœ¬åœ°POMå’Œè¿œç¨‹POMçš„æ—¶é—´æˆ³ã€‚è¿™é‡Œçš„é€‰é¡¹æ˜¯ï¼šalwaysï¼ˆä¸€ç›´ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">                     dailyï¼ˆé»˜è®¤ï¼Œæ¯æ—¥ï¼‰ï¼Œintervalï¼šXï¼ˆè¿™é‡ŒXæ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½çš„æ—¶é—´é—´éš”ï¼‰ï¼Œæˆ–è€…neverï¼ˆä»ä¸ï¼‰ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- å½“MavenéªŒè¯æ„ä»¶æ ¡éªŒæ–‡ä»¶å¤±è´¥æ—¶è¯¥æ€ä¹ˆåšï¼šignoreï¼ˆå¿½ç•¥ï¼‰ï¼Œfailï¼ˆå¤±è´¥ï¼‰ï¼Œæˆ–è€…warnï¼ˆè­¦å‘Šï¼‰ã€‚ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">releases</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå¿«ç…§ç‰ˆæœ¬çš„ä¸‹è½½ã€‚æœ‰äº†releaseså’Œsnapshotsè¿™ä¸¤ç»„é…ç½®ï¼ŒPOMå°±å¯ä»¥åœ¨æ¯ä¸ªå•ç‹¬çš„ä»“åº“ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">                 ä¸ºæ¯ç§ç±»å‹çš„æ„ä»¶é‡‡å–ä¸åŒçš„ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½æœ‰äººä¼šå†³å®šåªä¸ºå¼€å‘ç›®çš„å¼€å¯å¯¹å¿«ç…§ç‰ˆæœ¬ä¸‹è½½çš„æ”¯æŒã€‚å‚è§repositories/repository/releaseså…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span><span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è¿œç¨‹ä»“åº“å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å¯ä»¥ç”¨æ¥åŒ¹é…åœ¨settings.xmlæ–‡ä»¶é‡Œé…ç½®çš„è¿œç¨‹ä»“åº“ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span> banseon-repository-proxy <span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è¿œç¨‹ä»“åº“åç§° --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> banseon-repository-proxy <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- è¿œç¨‹ä»“åº“URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span> http://192.168.1.169:9999/repository/ <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ç”¨äºå®šä½å’Œæ’åºæ„ä»¶çš„ä»“åº“å¸ƒå±€ç±»å‹-å¯ä»¥æ˜¯defaultï¼ˆé»˜è®¤ï¼‰æˆ–è€…legacyï¼ˆé—ç•™ï¼‰ã€‚Maven 2ä¸ºå…¶ä»“åº“æä¾›äº†ä¸€ä¸ªé»˜è®¤</span></span><br><span class="line"><span class="comment">                 çš„å¸ƒå±€ï¼›ç„¶è€Œï¼ŒMaven 1.xæœ‰ä¸€ç§ä¸åŒçš„å¸ƒå±€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å…ƒç´ æŒ‡å®šå¸ƒå±€æ˜¯defaultï¼ˆé»˜è®¤ï¼‰è¿˜æ˜¯legacyï¼ˆé—ç•™ï¼‰ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span>&gt;</span> default <span class="tag">&lt;/<span class="name">layout</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œè¿™äº›æ’ä»¶ç”¨äºæ„å»ºå’ŒæŠ¥è¡¨ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§repositories/repositoryå…ƒç´  --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–ã€‚ è¿™äº›ä¾èµ–ç»„æˆäº†é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸ªç¯èŠ‚ã€‚å®ƒä»¬è‡ªåŠ¨ä»é¡¹ç›®å®šä¹‰çš„ä»“åº“ä¸­ä¸‹è½½ã€‚</span></span><br><span class="line"><span class="comment">         è¦è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹é¡¹ç›®ä¾èµ–æœºåˆ¶ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–çš„group ID --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.apache.maven <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–çš„artifact ID --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> maven-artifact <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–çš„ç‰ˆæœ¬å·ã€‚ åœ¨Maven 2é‡Œ, ä¹Ÿå¯ä»¥é…ç½®æˆç‰ˆæœ¬å·çš„èŒƒå›´ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span> 3.8.1 <span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–ç±»å‹ï¼Œé»˜è®¤ç±»å‹æ˜¯jarã€‚å®ƒé€šå¸¸è¡¨ç¤ºä¾èµ–çš„æ–‡ä»¶çš„æ‰©å±•åï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä¸€ä¸ªç±»å‹å¯ä»¥è¢«æ˜ å°„æˆå¦å¤–ä¸€ä¸ªæ‰©å±•</span></span><br><span class="line"><span class="comment">                 åæˆ–åˆ†ç±»å™¨ã€‚ç±»å‹ç»å¸¸å’Œä½¿ç”¨çš„æ‰“åŒ…æ–¹å¼å¯¹åº”ï¼Œå°½ç®¡è¿™ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä¸€äº›ç±»å‹çš„ä¾‹å­ï¼šjarï¼Œwarï¼Œejb-clientå’Œtest-jarã€‚</span></span><br><span class="line"><span class="comment">                 å¦‚æœè®¾ç½®extensionsä¸º trueï¼Œå°±å¯ä»¥åœ¨pluginé‡Œå®šä¹‰æ–°çš„ç±»å‹ã€‚æ‰€ä»¥å‰é¢çš„ç±»å‹çš„ä¾‹å­ä¸å®Œæ•´ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span> jar <span class="tag">&lt;/<span class="name">type</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–çš„åˆ†ç±»å™¨ã€‚åˆ†ç±»å™¨å¯ä»¥åŒºåˆ†å±äºåŒä¸€ä¸ªPOMï¼Œä½†ä¸åŒæ„å»ºæ–¹å¼çš„æ„ä»¶ã€‚åˆ†ç±»å™¨åè¢«é™„åŠ åˆ°æ–‡ä»¶åçš„ç‰ˆæœ¬å·åé¢ã€‚ä¾‹å¦‚ï¼Œ</span></span><br><span class="line"><span class="comment">                 å¦‚æœä½ æƒ³è¦æ„å»ºä¸¤ä¸ªå•ç‹¬çš„æ„ä»¶æˆJARï¼Œä¸€ä¸ªä½¿ç”¨Java 1.4ç¼–è¯‘å™¨ï¼Œå¦ä¸€ä¸ªä½¿ç”¨Java 6ç¼–è¯‘å™¨ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨åˆ†ç±»å™¨æ¥ç”Ÿ</span></span><br><span class="line"><span class="comment">                 æˆä¸¤ä¸ªå•ç‹¬çš„JARæ„ä»¶ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">classifier</span>&gt;</span><span class="tag">&lt;/<span class="name">classifier</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–èŒƒå›´ã€‚åœ¨é¡¹ç›®å‘å¸ƒè¿‡ç¨‹ä¸­ï¼Œå¸®åŠ©å†³å®šå“ªäº›æ„ä»¶è¢«åŒ…æ‹¬è¿›æ¥ã€‚æ¬²çŸ¥è¯¦æƒ…è¯·å‚è€ƒä¾èµ–æœºåˆ¶ã€‚ </span></span><br><span class="line"><span class="comment">                - compile ï¼šé»˜è®¤èŒƒå›´ï¼Œç”¨äºç¼–è¯‘ </span></span><br><span class="line"><span class="comment">                - providedï¼šç±»ä¼¼äºç¼–è¯‘ï¼Œä½†æ”¯æŒä½ æœŸå¾…jdkæˆ–è€…å®¹å™¨æä¾›ï¼Œç±»ä¼¼äºclasspath </span></span><br><span class="line"><span class="comment">                - runtime: åœ¨æ‰§è¡Œæ—¶éœ€è¦ä½¿ç”¨ </span></span><br><span class="line"><span class="comment">                - test: ç”¨äºtestä»»åŠ¡æ—¶ä½¿ç”¨ </span></span><br><span class="line"><span class="comment">                - system: éœ€è¦å¤–åœ¨æä¾›ç›¸åº”çš„å…ƒç´ ã€‚é€šè¿‡systemPathæ¥å–å¾— </span></span><br><span class="line"><span class="comment">                - systemPath: ä»…ç”¨äºèŒƒå›´ä¸ºsystemã€‚æä¾›ç›¸åº”çš„è·¯å¾„ </span></span><br><span class="line"><span class="comment">                - optional: å½“é¡¹ç›®è‡ªèº«è¢«ä¾èµ–æ—¶ï¼Œæ ‡æ³¨ä¾èµ–æ˜¯å¦ä¼ é€’ã€‚ç”¨äºè¿ç»­ä¾èµ–æ—¶ä½¿ç”¨ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span> test <span class="tag">&lt;/<span class="name">scope</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- ä»…ä¾›systemèŒƒå›´ä½¿ç”¨ã€‚æ³¨æ„ï¼Œä¸é¼“åŠ±ä½¿ç”¨è¿™ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”åœ¨æ–°çš„ç‰ˆæœ¬ä¸­è¯¥å…ƒç´ å¯èƒ½è¢«è¦†ç›–æ‰ã€‚è¯¥å…ƒç´ ä¸ºä¾èµ–è§„å®šäº†æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                 ç³»ç»Ÿä¸Šçš„è·¯å¾„ã€‚éœ€è¦ç»å¯¹è·¯å¾„è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„ã€‚æ¨èä½¿ç”¨å±æ€§åŒ¹é…ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚$&#123;java.home&#125;ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span><span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å½“è®¡ç®—ä¼ é€’ä¾èµ–æ—¶ï¼Œ ä»ä¾èµ–æ„ä»¶åˆ—è¡¨é‡Œï¼Œåˆ—å‡ºè¢«æ’é™¤çš„ä¾èµ–æ„ä»¶é›†ã€‚å³å‘Šè¯‰mavenä½ åªä¾èµ–æŒ‡å®šçš„é¡¹ç›®ï¼Œä¸ä¾èµ–é¡¹ç›®çš„</span></span><br><span class="line"><span class="comment">                 ä¾èµ–ã€‚æ­¤å…ƒç´ ä¸»è¦ç”¨äºè§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> spring-core <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.springframework <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å¯é€‰ä¾èµ–ï¼Œå¦‚æœä½ åœ¨é¡¹ç›®Bä¸­æŠŠCä¾èµ–å£°æ˜ä¸ºå¯é€‰ï¼Œä½ å°±éœ€è¦åœ¨ä¾èµ–äºBçš„é¡¹ç›®ï¼ˆä¾‹å¦‚é¡¹ç›®Aï¼‰ä¸­æ˜¾å¼çš„å¼•ç”¨å¯¹Cçš„ä¾èµ–ã€‚</span></span><br><span class="line"><span class="comment">                 å¯é€‰ä¾èµ–é˜»æ–­ä¾èµ–çš„ä¼ é€’æ€§ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span> true <span class="tag">&lt;/<span class="name">optional</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸èµæˆä½¿ç”¨. ç°åœ¨Mavenå¿½ç•¥è¯¥å…ƒç´ . --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">reports</span>&gt;</span><span class="tag">&lt;/<span class="name">reports</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯¥å…ƒç´ æè¿°ä½¿ç”¨æŠ¥è¡¨æ’ä»¶äº§ç”ŸæŠ¥è¡¨çš„è§„èŒƒã€‚å½“ç”¨æˆ·æ‰§è¡Œâ€œmvn siteâ€ï¼Œè¿™äº›æŠ¥è¡¨å°±ä¼šè¿è¡Œã€‚ åœ¨é¡µé¢å¯¼èˆªæ èƒ½çœ‹åˆ°æ‰€æœ‰æŠ¥è¡¨çš„é“¾æ¥ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">reporting</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- trueï¼Œåˆ™ï¼Œç½‘ç«™ä¸åŒ…æ‹¬é»˜è®¤çš„æŠ¥è¡¨ã€‚è¿™åŒ…æ‹¬â€œé¡¹ç›®ä¿¡æ¯â€èœå•ä¸­çš„æŠ¥è¡¨ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">excludeDefaults</span> /&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ‰€æœ‰äº§ç”Ÿçš„æŠ¥è¡¨å­˜æ”¾åˆ°å“ªé‡Œã€‚é»˜è®¤å€¼æ˜¯$&#123;project.build.directory&#125;/siteã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span> /&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨çš„æŠ¥è¡¨æ’ä»¶å’Œä»–ä»¬çš„é…ç½®ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- pluginå…ƒç´ åŒ…å«æè¿°æŠ¥è¡¨æ’ä»¶éœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æŠ¥è¡¨æ’ä»¶åœ¨ä»“åº“é‡Œçš„group ID --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">                <span class="comment">&lt;!-- æŠ¥è¡¨æ’ä»¶åœ¨ä»“åº“é‡Œçš„artifact ID --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- è¢«ä½¿ç”¨çš„æŠ¥è¡¨æ’ä»¶çš„ç‰ˆæœ¬ï¼ˆæˆ–ç‰ˆæœ¬èŒƒå›´ï¼‰ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- ä»»ä½•é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­é¡¹ç›® --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- æŠ¥è¡¨æ’ä»¶çš„é…ç½® --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- ä¸€ç»„æŠ¥è¡¨çš„å¤šé‡è§„èŒƒï¼Œæ¯ä¸ªè§„èŒƒå¯èƒ½æœ‰ä¸åŒçš„é…ç½®ã€‚ä¸€ä¸ªè§„èŒƒï¼ˆæŠ¥è¡¨é›†ï¼‰å¯¹åº”ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ ã€‚ä¾‹å¦‚ï¼Œ</span></span><br><span class="line"><span class="comment">                     æœ‰1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ä¸ªæŠ¥è¡¨ã€‚1ï¼Œ2ï¼Œ5æ„æˆAæŠ¥è¡¨é›†ï¼Œå¯¹åº”ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ã€‚2ï¼Œ5ï¼Œ8æ„æˆBæŠ¥</span></span><br><span class="line"><span class="comment">                     è¡¨é›†ï¼Œå¯¹åº”å¦ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ --&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">reportSets</span>&gt;</span> </span><br><span class="line">                    <span class="comment">&lt;!-- è¡¨ç¤ºæŠ¥è¡¨çš„ä¸€ä¸ªé›†åˆï¼Œä»¥åŠäº§ç”Ÿè¯¥é›†åˆçš„é…ç½® --&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">reportSet</span>&gt;</span> </span><br><span class="line">                        <span class="comment">&lt;!-- æŠ¥è¡¨é›†åˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒPOMç»§æ‰¿æ—¶ç”¨åˆ° --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- äº§ç”ŸæŠ¥è¡¨é›†åˆæ—¶ï¼Œè¢«ä½¿ç”¨çš„æŠ¥è¡¨çš„é…ç½® --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- é…ç½®æ˜¯å¦è¢«ç»§æ‰¿åˆ°å­POMs --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>true/false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- è¿™ä¸ªé›†åˆé‡Œä½¿ç”¨åˆ°å“ªäº›æŠ¥è¡¨ --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">reports</span>&gt;</span><span class="tag">&lt;/<span class="name">reports</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">reportSet</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;/<span class="name">reportSets</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">reporting</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç»§æ‰¿è‡ªè¯¥é¡¹ç›®çš„æ‰€æœ‰å­é¡¹ç›®çš„é»˜è®¤ä¾èµ–ä¿¡æ¯ã€‚è¿™éƒ¨åˆ†çš„ä¾èµ–ä¿¡æ¯ä¸ä¼šè¢«ç«‹å³è§£æ,è€Œæ˜¯å½“å­é¡¹ç›®å£°æ˜ä¸€ä¸ªä¾èµ–</span></span><br><span class="line"><span class="comment">        ï¼ˆå¿…é¡»æè¿°group IDå’Œartifact IDä¿¡æ¯ï¼‰ï¼Œå¦‚æœgroup IDå’Œartifact IDä»¥å¤–çš„ä¸€äº›ä¿¡æ¯æ²¡æœ‰æè¿°ï¼Œåˆ™é€šè¿‡</span></span><br><span class="line"><span class="comment">            group IDå’Œartifact IDåŒ¹é…åˆ°è¿™é‡Œçš„ä¾èµ–ï¼Œå¹¶ä½¿ç”¨è¿™é‡Œçš„ä¾èµ–ä¿¡æ¯ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- å‚è§dependencies/dependencyå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®åˆ†å‘ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œmvn deployåè¡¨ç¤ºè¦å‘å¸ƒçš„ä½ç½®ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯å°±å¯ä»¥æŠŠç½‘ç«™éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨æˆ–è€…</span></span><br><span class="line"><span class="comment">         æŠŠæ„ä»¶éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- éƒ¨ç½²é¡¹ç›®äº§ç”Ÿçš„æ„ä»¶åˆ°è¿œç¨‹ä»“åº“éœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- æ˜¯åˆ†é…ç»™å¿«ç…§ä¸€ä¸ªå”¯ä¸€çš„ç‰ˆæœ¬å·ï¼ˆç”±æ—¶é—´æˆ³å’Œæ„å»ºæµæ°´å·ï¼‰ï¼Ÿè¿˜æ˜¯æ¯æ¬¡éƒ½ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·ï¼Ÿå‚è§</span></span><br><span class="line"><span class="comment">                 repositories/repositoryå…ƒç´  --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">uniqueVersion</span> /&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span> banseon-maven2 <span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> banseon maven2 <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span> file://$&#123;basedir&#125;/target/deploy <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span>&gt;</span><span class="tag">&lt;/<span class="name">layout</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ„ä»¶çš„å¿«ç…§éƒ¨ç½²åˆ°å“ªé‡Œï¼Ÿå¦‚æœæ²¡æœ‰é…ç½®è¯¥å…ƒç´ ï¼Œé»˜è®¤éƒ¨ç½²åˆ°repositoryå…ƒç´ é…ç½®çš„ä»“åº“ï¼Œå‚è§</span></span><br><span class="line"><span class="comment">             distributionManagement/repositoryå…ƒç´  --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">uniqueVersion</span> /&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span> banseon-maven2 <span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> Banseon-maven2 Snapshot Repository <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span> scp://svn.baidu.com/banseon:/usr/local/maven-snapshot <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span>&gt;</span><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- éƒ¨ç½²é¡¹ç›®çš„ç½‘ç«™éœ€è¦çš„ä¿¡æ¯ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">site</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- éƒ¨ç½²ä½ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨æ¥åŒ¹é…ç«™ç‚¹å’Œsettings.xmlæ–‡ä»¶é‡Œçš„é…ç½® --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span> banseon-site <span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- éƒ¨ç½²ä½ç½®çš„åç§° --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span> business api website <span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- éƒ¨ç½²ä½ç½®çš„URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span> </span><br><span class="line">                scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web </span><br><span class="line">            <span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">site</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é¡¹ç›®ä¸‹è½½é¡µé¢çš„URLã€‚å¦‚æœæ²¡æœ‰è¯¥å…ƒç´ ï¼Œç”¨æˆ·åº”è¯¥å‚è€ƒä¸»é¡µã€‚ä½¿ç”¨è¯¥å…ƒç´ çš„åŸå› æ˜¯ï¼šå¸®åŠ©å®šä½</span></span><br><span class="line"><span class="comment">             é‚£äº›ä¸åœ¨ä»“åº“é‡Œçš„æ„ä»¶ï¼ˆç”±äºlicenseé™åˆ¶ï¼‰ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">downloadUrl</span> /&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¦‚æœæ„ä»¶æœ‰äº†æ–°çš„group IDå’Œartifact IDï¼ˆæ„ä»¶ç§»åˆ°äº†æ–°çš„ä½ç½®ï¼‰ï¼Œè¿™é‡Œåˆ—å‡ºæ„ä»¶çš„é‡å®šä½ä¿¡æ¯ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">relocation</span>&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- æ„ä»¶æ–°çš„group ID --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æ„ä»¶æ–°çš„artifact ID --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æ„ä»¶æ–°çš„ç‰ˆæœ¬å· --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- æ˜¾ç¤ºç»™ç”¨æˆ·çš„ï¼Œå…³äºç§»åŠ¨çš„é¢å¤–ä¿¡æ¯ï¼Œä¾‹å¦‚åŸå› ã€‚ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">message</span>&gt;</span><span class="tag">&lt;/<span class="name">message</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">relocation</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å‡ºè¯¥æ„ä»¶åœ¨è¿œç¨‹ä»“åº“çš„çŠ¶æ€ã€‚ä¸å¾—åœ¨æœ¬åœ°é¡¹ç›®ä¸­è®¾ç½®è¯¥å…ƒç´ ï¼Œå› ä¸ºè¿™æ˜¯å·¥å…·è‡ªåŠ¨æ›´æ–°çš„ã€‚æœ‰æ•ˆçš„å€¼</span></span><br><span class="line"><span class="comment">             æœ‰ï¼šnoneï¼ˆé»˜è®¤ï¼‰ï¼Œconvertedï¼ˆä»“åº“ç®¡ç†å‘˜ä»Maven 1 POMè½¬æ¢è¿‡æ¥ï¼‰ï¼Œpartnerï¼ˆç›´æ¥ä»ä¼™ä¼´Maven </span></span><br><span class="line"><span class="comment">             2ä»“åº“åŒæ­¥è¿‡æ¥ï¼‰ï¼Œdeployedï¼ˆä»Maven 2å®ä¾‹éƒ¨ç½²ï¼‰ï¼Œverifiedï¼ˆè¢«æ ¸å®æ—¶æ­£ç¡®çš„å’Œæœ€ç»ˆçš„ï¼‰ã€‚ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">status</span>&gt;</span><span class="tag">&lt;/<span class="name">status</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä»¥å€¼æ›¿ä»£åç§°ï¼ŒPropertieså¯ä»¥åœ¨æ•´ä¸ªPOMä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè§¦å‘æ¡ä»¶ï¼ˆè§settings.xmlé…ç½®æ–‡ä»¶é‡Œ</span></span><br><span class="line"><span class="comment">         activationå…ƒç´ çš„è¯´æ˜ï¼‰ã€‚æ ¼å¼æ˜¯&lt;name&gt;value&lt;/name&gt;ã€‚ --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>value<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span> </span><br></pre></td></tr></table></figure><h1 id="é™„ä»¶2ï¼šPOMæ–‡ä»¶å•é¡¹é…ç½®è¯´æ˜"><a href="#é™„ä»¶2ï¼šPOMæ–‡ä»¶å•é¡¹é…ç½®è¯´æ˜" class="headerlink" title="é™„ä»¶2ï¼šPOMæ–‡ä»¶å•é¡¹é…ç½®è¯´æ˜"></a>é™„ä»¶2ï¼šPOMæ–‡ä»¶å•é¡¹é…ç½®è¯´æ˜</h1><h2 id="localRepository"><a href="#localRepository" class="headerlink" title="localRepository"></a>localRepository</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚é»˜è®¤å€¼ä¸º$&#123;user.home&#125;/.m2/repositoryã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>usr/local/maven<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="interactiveMode"><a href="#interactiveMode" class="headerlink" title="interactiveMode"></a>interactiveMode</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Mavenæ˜¯å¦éœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ã€‚å¦‚æœMavenéœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ï¼Œåˆ™è®¾ç½®æˆtrueï¼Œåä¹‹åˆ™åº”ä¸ºfalseã€‚é»˜è®¤ä¸ºtrueã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">interactiveMode</span>&gt;</span>true<span class="tag">&lt;/<span class="name">interactiveMode</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="usePluginRegistry"><a href="#usePluginRegistry" class="headerlink" title="usePluginRegistry"></a>usePluginRegistry</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Mavenæ˜¯å¦éœ€è¦ä½¿ç”¨plugin-registry.xmlæ–‡ä»¶æ¥ç®¡ç†æ’ä»¶ç‰ˆæœ¬ã€‚å¦‚æœéœ€è¦è®©Mavenä½¿ç”¨æ–‡ä»¶$&#123;user.home&#125;/.m2/plugin-registry.xmlæ¥ç®¡ç†æ’ä»¶ç‰ˆæœ¬ï¼Œåˆ™è®¾ä¸ºtrueã€‚é»˜è®¤ä¸ºfalseã€‚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">usePluginRegistry</span>&gt;</span>false<span class="tag">&lt;/<span class="name">usePluginRegistry</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="offline"><a href="#offline" class="headerlink" title="offline"></a>offline</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è¡¨ç¤ºMavenæ˜¯å¦éœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œã€‚å¦‚æœæ„å»ºç³»ç»Ÿéœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œï¼Œåˆ™ä¸ºtrueï¼Œé»˜è®¤ä¸ºfalseã€‚å½“ç”±äºç½‘ç»œè®¾ç½®åŸå› æˆ–è€…å®‰å…¨å› ç´ ï¼Œæ„å»ºæœåŠ¡å™¨ä¸èƒ½è¿æ¥è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œè¯¥é…ç½®å°±ååˆ†æœ‰ç”¨ã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">offline</span>&gt;</span>false<span class="tag">&lt;/<span class="name">offline</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="pluginGroups"><a href="#pluginGroups" class="headerlink" title="pluginGroups"></a>pluginGroups</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å½“æ’ä»¶çš„ç»„ç»‡Idï¼ˆgroupIdï¼‰æ²¡æœ‰æ˜¾å¼æä¾›æ—¶ï¼Œä¾›æœå¯»æ’ä»¶ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„åˆ—è¡¨ã€‚è¯¥å…ƒç´ åŒ…å«ä¸€ä¸ªpluginGroupå…ƒç´ åˆ—è¡¨ï¼Œæ¯ä¸ªå­å…ƒç´ åŒ…å«äº†ä¸€ä¸ªç»„ç»‡Idï¼ˆgroupIdï¼‰ã€‚å½“æˆ‘ä»¬ä½¿ç”¨æŸä¸ªæ’ä»¶ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸ºå…¶æä¾›ç»„ç»‡Idï¼ˆgroupIdï¼‰çš„æ—¶å€™ï¼ŒMavenå°±ä¼šä½¿ç”¨è¯¥åˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥åˆ—è¡¨åŒ…å«äº†org.apache.maven.pluginså’Œorg.codehaus.mojo --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--pluginçš„ç»„ç»‡Idï¼ˆgroupIdï¼‰ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="proxies"><a href="#proxies" class="headerlink" title="proxies"></a>proxies</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç”¨æ¥é…ç½®ä¸åŒçš„ä»£ç†ï¼Œå¤šä»£ç†profiles å¯ä»¥åº”å¯¹ç¬”è®°æœ¬æˆ–ç§»åŠ¨è®¾å¤‡çš„å·¥ä½œç¯å¢ƒï¼šé€šè¿‡ç®€å•çš„è®¾ç½®profile idå°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ›´æ¢æ•´ä¸ªä»£ç†é…ç½®ã€‚ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">proxies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ä»£ç†å…ƒç´ åŒ…å«é…ç½®ä»£ç†æ—¶éœ€è¦çš„ä¿¡æ¯--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">proxy</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„å”¯ä¸€å®šä¹‰ç¬¦ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„ä»£ç†å…ƒç´ ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>myproxy<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è¯¥ä»£ç†æ˜¯å¦æ˜¯æ¿€æ´»çš„é‚£ä¸ªã€‚trueåˆ™æ¿€æ´»ä»£ç†ã€‚å½“æˆ‘ä»¬å£°æ˜äº†ä¸€ç»„ä»£ç†ï¼Œè€ŒæŸä¸ªæ—¶å€™åªéœ€è¦æ¿€æ´»ä¸€ä¸ªä»£ç†çš„æ—¶å€™ï¼Œè¯¥å…ƒç´ å°±å¯ä»¥æ´¾ä¸Šç”¨å¤„ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">active</span>&gt;</span>true<span class="tag">&lt;/<span class="name">active</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„åè®®ã€‚ åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">protocol</span>&gt;</span>http<span class="tag">&lt;/<span class="name">protocol</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„ä¸»æœºåã€‚åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚  --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">host</span>&gt;</span>proxy.somewhere.com<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„ç«¯å£ã€‚åè®®://ä¸»æœºå:ç«¯å£ï¼Œåˆ†éš”æˆç¦»æ•£çš„å…ƒç´ ä»¥æ–¹ä¾¿é…ç½®ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">port</span>&gt;</span>8080<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„ç”¨æˆ·åï¼Œç”¨æˆ·åå’Œå¯†ç è¡¨ç¤ºä»£ç†æœåŠ¡å™¨è®¤è¯çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">username</span>&gt;</span>proxyuser<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä»£ç†çš„å¯†ç ï¼Œç”¨æˆ·åå’Œå¯†ç è¡¨ç¤ºä»£ç†æœåŠ¡å™¨è®¤è¯çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">password</span>&gt;</span>somepassword<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ä¸è¯¥è¢«ä»£ç†çš„ä¸»æœºååˆ—è¡¨ã€‚è¯¥åˆ—è¡¨çš„åˆ†éš”ç¬¦ç”±ä»£ç†æœåŠ¡å™¨æŒ‡å®šï¼›ä¾‹å­ä¸­ä½¿ç”¨äº†ç«–çº¿åˆ†éš”ç¬¦ï¼Œä½¿ç”¨é€—å·åˆ†éš”ä¹Ÿå¾ˆå¸¸è§ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">nonProxyHosts</span>&gt;</span>*.google.com|ibiblio.org<span class="tag">&lt;/<span class="name">nonProxyHosts</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">proxy</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">proxies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="servers"><a href="#servers" class="headerlink" title="servers"></a>servers</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®æœåŠ¡ç«¯çš„ä¸€äº›è®¾ç½®ã€‚ä¸€äº›è®¾ç½®å¦‚å®‰å…¨è¯ä¹¦ä¸åº”è¯¥å’Œpom.xmlä¸€èµ·åˆ†å‘ã€‚è¿™ç§ç±»å‹çš„ä¿¡æ¯åº”è¯¥å­˜åœ¨äºæ„å»ºæœåŠ¡å™¨ä¸Šçš„settings.xmlæ–‡ä»¶ä¸­ã€‚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æœåŠ¡å™¨å…ƒç´ åŒ…å«é…ç½®æœåŠ¡å™¨æ—¶éœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è¿™æ˜¯serverçš„idï¼ˆæ³¨æ„ä¸æ˜¯ç”¨æˆ·ç™»é™†çš„idï¼‰ï¼Œè¯¥idä¸distributionManagementä¸­repositoryå…ƒç´ çš„idç›¸åŒ¹é…ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>server001<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--é‰´æƒç”¨æˆ·åã€‚é‰´æƒç”¨æˆ·åå’Œé‰´æƒå¯†ç è¡¨ç¤ºæœåŠ¡å™¨è®¤è¯æ‰€éœ€è¦çš„ç™»å½•åå’Œå¯†ç ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">username</span>&gt;</span>my_login<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--é‰´æƒå¯†ç  ã€‚é‰´æƒç”¨æˆ·åå’Œé‰´æƒå¯†ç è¡¨ç¤ºæœåŠ¡å™¨è®¤è¯æ‰€éœ€è¦çš„ç™»å½•åå’Œå¯†ç ã€‚å¯†ç åŠ å¯†åŠŸèƒ½å·²è¢«æ·»åŠ åˆ°2.1.0 +ã€‚è¯¦æƒ…è¯·è®¿é—®å¯†ç åŠ å¯†é¡µé¢--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">password</span>&gt;</span>my_password<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--é‰´æƒæ—¶ä½¿ç”¨çš„ç§é’¥ä½ç½®ã€‚å’Œå‰ä¸¤ä¸ªå…ƒç´ ç±»ä¼¼ï¼Œç§é’¥ä½ç½®å’Œç§é’¥å¯†ç æŒ‡å®šäº†ä¸€ä¸ªç§é’¥çš„è·¯å¾„ï¼ˆé»˜è®¤æ˜¯$&#123;user.home&#125;/.ssh/id_dsaï¼‰ä»¥åŠå¦‚æœéœ€è¦çš„è¯ï¼Œä¸€ä¸ªå¯†è¯­ã€‚å°†æ¥passphraseå’Œpasswordå…ƒç´ å¯èƒ½ä¼šè¢«æå–åˆ°å¤–éƒ¨ï¼Œä½†ç›®å‰å®ƒä»¬å¿…é¡»åœ¨settings.xmlæ–‡ä»¶ä»¥çº¯æ–‡æœ¬çš„å½¢å¼å£°æ˜ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">privateKey</span>&gt;</span>$&#123;usr.home&#125;/.ssh/id_dsa<span class="tag">&lt;/<span class="name">privateKey</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--é‰´æƒæ—¶ä½¿ç”¨çš„ç§é’¥å¯†ç ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">passphrase</span>&gt;</span>some_passphrase<span class="tag">&lt;/<span class="name">passphrase</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--æ–‡ä»¶è¢«åˆ›å»ºæ—¶çš„æƒé™ã€‚å¦‚æœåœ¨éƒ¨ç½²çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªä»“åº“æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æƒé™ï¼ˆpermissionï¼‰ã€‚è¿™ä¸¤ä¸ªå…ƒç´ åˆæ³•çš„å€¼æ˜¯ä¸€ä¸ªä¸‰ä½æ•°å­—ï¼Œå…¶å¯¹åº”äº†unixæ–‡ä»¶ç³»ç»Ÿçš„æƒé™ï¼Œå¦‚664ï¼Œæˆ–è€…775ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filePermissions</span>&gt;</span>664<span class="tag">&lt;/<span class="name">filePermissions</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--ç›®å½•è¢«åˆ›å»ºæ—¶çš„æƒé™ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">directoryPermissions</span>&gt;</span>775<span class="tag">&lt;/<span class="name">directoryPermissions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mirrors"><a href="#mirrors" class="headerlink" title="mirrors"></a>mirrors</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¸ºä»“åº“åˆ—è¡¨é…ç½®çš„ä¸‹è½½é•œåƒåˆ—è¡¨ã€‚é«˜çº§è®¾ç½®è¯·å‚é˜…é•œåƒè®¾ç½®é¡µé¢ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ç»™å®šä»“åº“çš„ä¸‹è½½é•œåƒã€‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è¯¥é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚idç”¨æ¥åŒºåˆ†ä¸åŒçš„mirrorå…ƒç´ ã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>planetmirror.com<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--é•œåƒåç§° --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>PlanetMirror Australia<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è¯¥é•œåƒçš„URLã€‚æ„å»ºç³»ç»Ÿä¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¯¥URLï¼Œè€Œéä½¿ç”¨é»˜è®¤çš„æœåŠ¡å™¨URLã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://downloads.planetmirror.com/pub/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--è¢«é•œåƒçš„æœåŠ¡å™¨çš„idã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¾ç½®äº†ä¸€ä¸ªMavenä¸­å¤®ä»“åº“ï¼ˆhttp://repo.maven.apache.org/maven2/ï¼‰çš„é•œåƒï¼Œå°±éœ€è¦å°†è¯¥å…ƒç´ è®¾ç½®æˆcentralã€‚è¿™å¿…é¡»å’Œä¸­å¤®ä»“åº“çš„id centralå®Œå…¨ä¸€è‡´ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="profiles"><a href="#profiles" class="headerlink" title="profiles"></a>profiles</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ ¹æ®ç¯å¢ƒå‚æ•°æ¥è°ƒæ•´æ„å»ºé…ç½®çš„åˆ—è¡¨ã€‚settings.xmlä¸­çš„profileå…ƒç´ æ˜¯pom.xmlä¸­profileå…ƒç´ çš„è£å‰ªç‰ˆæœ¬ã€‚å®ƒåŒ…å«äº†idï¼Œactivation, repositories, pluginRepositorieså’Œ propertieså…ƒç´ ã€‚è¿™é‡Œçš„profileå…ƒç´ åªåŒ…å«è¿™äº”ä¸ªå­å…ƒç´ æ˜¯å› ä¸ºè¿™é‡Œåªå…³å¿ƒæ„å»ºç³»ç»Ÿè¿™ä¸ªæ•´ä½“ï¼ˆè¿™æ­£æ˜¯settings.xmlæ–‡ä»¶çš„è§’è‰²å®šä½ï¼‰ï¼Œè€Œéå•ç‹¬çš„é¡¹ç›®å¯¹è±¡æ¨¡å‹è®¾ç½®ã€‚å¦‚æœä¸€ä¸ªsettingsä¸­çš„profileè¢«æ¿€æ´»ï¼Œå®ƒçš„å€¼ä¼šè¦†ç›–ä»»ä½•å…¶å®ƒå®šä¹‰åœ¨POMä¸­æˆ–è€…profile.xmlä¸­çš„å¸¦æœ‰ç›¸åŒidçš„profileã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ ¹æ®ç¯å¢ƒå‚æ•°æ¥è°ƒæ•´çš„æ„ä»¶çš„é…ç½®--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--è¯¥é…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Activation"><a href="#Activation" class="headerlink" title="Activation"></a>Activation</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è‡ªåŠ¨è§¦å‘profileçš„æ¡ä»¶é€»è¾‘ã€‚Activationæ˜¯profileçš„å¼€å¯é’¥åŒ™ã€‚å¦‚POMä¸­çš„profileä¸€æ ·ï¼Œprofileçš„åŠ›é‡æ¥è‡ªäºå®ƒèƒ½å¤Ÿåœ¨æŸäº›ç‰¹å®šçš„ç¯å¢ƒä¸­è‡ªåŠ¨ä½¿ç”¨æŸäº›ç‰¹å®šçš„å€¼ï¼›è¿™äº›ç¯å¢ƒé€šè¿‡activationå…ƒç´ æŒ‡å®šã€‚activationå…ƒç´ å¹¶ä¸æ˜¯æ¿€æ´»profileçš„å”¯ä¸€æ–¹å¼ã€‚settings.xmlæ–‡ä»¶ä¸­çš„activeProfileå…ƒç´ å¯ä»¥åŒ…å«profileçš„idã€‚profileä¹Ÿå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œï¼Œä½¿ç”¨-Pæ ‡è®°å’Œé€—å·åˆ†éš”çš„åˆ—è¡¨æ¥æ˜¾å¼çš„æ¿€æ´»ï¼ˆå¦‚ï¼Œ-P testï¼‰ã€‚--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡è¯†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>false<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å½“åŒ¹é…çš„jdkè¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚ä¾‹å¦‚ï¼Œ1.4æ¿€æ´»JDK1.4ï¼Œ1.4.0_2ï¼Œè€Œ!1.4æ¿€æ´»æ‰€æœ‰ç‰ˆæœ¬ä¸æ˜¯ä»¥1.4å¼€å¤´çš„JDKã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.5<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å½“åŒ¹é…çš„æ“ä½œç³»ç»Ÿå±æ€§è¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚oså…ƒç´ å¯ä»¥å®šä¹‰ä¸€äº›æ“ä½œç³»ç»Ÿç›¸å…³çš„å±æ€§ã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">os</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿçš„åå­— --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>Windows XP<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿæ‰€å±å®¶æ—(å¦‚ &#x27;windows&#x27;)  --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">family</span>&gt;</span>Windows<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„  --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">arch</span>&gt;</span>x86<span class="tag">&lt;/<span class="name">arch</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2600<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">os</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±æ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;name&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„name = å€¼ï¼ŒProfileå°±ä¼šè¢«æ¿€æ´»ã€‚å¦‚æœå€¼å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±æ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹é…å±æ€§å€¼å­—æ®µ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„å±æ€§çš„åç§°--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mavenVersion<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ¿€æ´»profileçš„å±æ€§çš„å€¼ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>2.0.3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œé€šè¿‡æ£€æµ‹è¯¥æ–‡ä»¶çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥æ¿€æ´»profileã€‚missingæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ¿€æ´»profileã€‚å¦ä¸€æ–¹é¢ï¼Œexistsåˆ™ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ¿€æ´»profileã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">exists</span>&gt;</span>$&#123;basedir&#125;/file2.properties<span class="tag">&lt;/<span class="name">exists</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">missing</span>&gt;</span>$&#123;basedir&#125;/file1.properties<span class="tag">&lt;/<span class="name">missing</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œå®ƒæ˜¯Mavenç”¨æ¥å¡«å……æ„å»ºç³»ç»Ÿæœ¬åœ°ä»“åº“æ‰€ä½¿ç”¨çš„ä¸€ç»„è¿œç¨‹é¡¹ç›®ã€‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¿œç¨‹ä»“åº“å”¯ä¸€æ ‡è¯†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>codehausSnapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¿œç¨‹ä»“åº“åç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Codehaus Snapshots<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå‘å¸ƒç‰ˆæœ¬çš„ä¸‹è½½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--trueæˆ–è€…falseè¡¨ç¤ºè¯¥ä»“åº“æ˜¯å¦ä¸ºä¸‹è½½æŸç§ç±»å‹æ„ä»¶ï¼ˆå‘å¸ƒç‰ˆï¼Œå¿«ç…§ç‰ˆï¼‰å¼€å¯ã€‚  --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--è¯¥å…ƒç´ æŒ‡å®šæ›´æ–°å‘ç”Ÿçš„é¢‘ç‡ã€‚Mavenä¼šæ¯”è¾ƒæœ¬åœ°POMå’Œè¿œç¨‹POMçš„æ—¶é—´æˆ³ã€‚è¿™é‡Œçš„é€‰é¡¹æ˜¯ï¼šalwaysï¼ˆä¸€ç›´ï¼‰ï¼Œdailyï¼ˆé»˜è®¤ï¼Œæ¯æ—¥ï¼‰ï¼Œintervalï¼šXï¼ˆè¿™é‡ŒXæ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½çš„æ—¶é—´é—´éš”ï¼‰ï¼Œæˆ–è€…neverï¼ˆä»ä¸ï¼‰ã€‚ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span>always<span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--å½“MavenéªŒè¯æ„ä»¶æ ¡éªŒæ–‡ä»¶å¤±è´¥æ—¶è¯¥æ€ä¹ˆåš-ignoreï¼ˆå¿½ç•¥ï¼‰ï¼Œfailï¼ˆå¤±è´¥ï¼‰ï¼Œæˆ–è€…warnï¼ˆè­¦å‘Šï¼‰ã€‚--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span>warn<span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå¿«ç…§ç‰ˆæœ¬çš„ä¸‹è½½ã€‚æœ‰äº†releaseså’Œsnapshotsè¿™ä¸¤ç»„é…ç½®ï¼ŒPOMå°±å¯ä»¥åœ¨æ¯ä¸ªå•ç‹¬çš„ä»“åº“ä¸­ï¼Œä¸ºæ¯ç§ç±»å‹çš„æ„ä»¶é‡‡å–ä¸åŒçš„ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½æœ‰äººä¼šå†³å®šåªä¸ºå¼€å‘ç›®çš„å¼€å¯å¯¹å¿«ç…§ç‰ˆæœ¬ä¸‹è½½çš„æ”¯æŒã€‚å‚è§repositories/repository/releaseså…ƒç´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enabled</span>/&gt;</span><span class="tag">&lt;<span class="name">updatePolicy</span>/&gt;</span><span class="tag">&lt;<span class="name">checksumPolicy</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¿œç¨‹ä»“åº“URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://snapshots.maven.codehaus.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç”¨äºå®šä½å’Œæ’åºæ„ä»¶çš„ä»“åº“å¸ƒå±€ç±»å‹-å¯ä»¥æ˜¯defaultï¼ˆé»˜è®¤ï¼‰æˆ–è€…legacyï¼ˆé—ç•™ï¼‰ã€‚Maven 2ä¸ºå…¶ä»“åº“æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¸ƒå±€ï¼›ç„¶è€Œï¼ŒMaven 1.xæœ‰ä¸€ç§ä¸åŒçš„å¸ƒå±€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å…ƒç´ æŒ‡å®šå¸ƒå±€æ˜¯defaultï¼ˆé»˜è®¤ï¼‰è¿˜æ˜¯legacyï¼ˆé—ç•™ï¼‰ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ä»“åº“æ˜¯ä¸¤ç§ä¸»è¦æ„ä»¶çš„å®¶ã€‚ç¬¬ä¸€ç§æ„ä»¶è¢«ç”¨ä½œå…¶å®ƒæ„ä»¶çš„ä¾èµ–ã€‚è¿™æ˜¯ä¸­å¤®ä»“åº“ä¸­å­˜å‚¨çš„å¤§éƒ¨åˆ†æ„ä»¶ç±»å‹ã€‚å¦å¤–ä¸€ç§æ„ä»¶ç±»å‹æ˜¯æ’ä»¶ã€‚Mavenæ’ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ„ä»¶ã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œæ’ä»¶ä»“åº“ç‹¬ç«‹äºå…¶å®ƒä»“åº“ã€‚pluginRepositorieså…ƒç´ çš„ç»“æ„å’Œrepositorieså…ƒç´ çš„ç»“æ„ç±»ä¼¼ã€‚æ¯ä¸ªpluginRepositoryå…ƒç´ æŒ‡å®šä¸€ä¸ªMavenå¯ä»¥ç”¨æ¥å¯»æ‰¾æ–°æ’ä»¶çš„è¿œç¨‹åœ°å€ã€‚--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§profiles/profile/repositories/repositoryå…ƒç´ çš„è¯´æ˜--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span>           </span><br><span class="line">    <span class="tag">&lt;<span class="name">releases</span>&gt;</span>      </span><br><span class="line">     <span class="tag">&lt;<span class="name">enabled</span>/&gt;</span><span class="tag">&lt;<span class="name">updatePolicy</span>/&gt;</span><span class="tag">&lt;<span class="name">checksumPolicy</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enabled</span>/&gt;</span><span class="tag">&lt;<span class="name">updatePolicy</span>/&gt;</span><span class="tag">&lt;<span class="name">checksumPolicy</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>/&gt;</span><span class="tag">&lt;<span class="name">name</span>/&gt;</span><span class="tag">&lt;<span class="name">url</span>/&gt;</span><span class="tag">&lt;<span class="name">layout</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="activeProfiles"><a href="#activeProfiles" class="headerlink" title="activeProfiles"></a>activeProfiles</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‰‹åŠ¨æ¿€æ´»profilesçš„åˆ—è¡¨ï¼ŒæŒ‰ç…§profileè¢«åº”ç”¨çš„é¡ºåºå®šä¹‰activeProfileã€‚ è¯¥å…ƒç´ åŒ…å«äº†ä¸€ç»„activeProfileå…ƒç´ ï¼Œæ¯ä¸ªactiveProfileéƒ½å«æœ‰ä¸€ä¸ªprofile idã€‚ä»»ä½•åœ¨activeProfileä¸­å®šä¹‰çš„profile idï¼Œä¸è®ºç¯å¢ƒè®¾ç½®å¦‚ä½•ï¼Œå…¶å¯¹åº”çš„</span></span><br><span class="line"><span class="comment">        profileéƒ½ä¼šè¢«æ¿€æ´»ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…çš„profileï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œenv-testæ˜¯ä¸€ä¸ªactiveProfileï¼Œåˆ™åœ¨pom.xmlï¼ˆæˆ–è€…profile.xmlï¼‰ä¸­å¯¹åº”idçš„profileä¼šè¢«æ¿€æ´»ã€‚å¦‚æœè¿è¡Œè¿‡ç¨‹ä¸­æ‰¾ä¸åˆ°è¿™æ ·ä¸€ä¸ªprofileï¼ŒMavenåˆ™ä¼šåƒå¾€å¸¸ä¸€æ ·è¿è¡Œã€‚ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeProfile</span>&gt;</span>env-test<span class="tag">&lt;/<span class="name">activeProfile</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç¬”è®°</title>
      <link href="//posts/93fcac00.html"/>
      <url>//posts/93fcac00.html</url>
      
        <content type="html"><![CDATA[<h1 id="MyBatisç¬”è®°"><a href="#MyBatisç¬”è®°" class="headerlink" title="MyBatisç¬”è®°"></a>MyBatisç¬”è®°</h1><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><h3 id="MyBatisæ˜¯ä»€ä¹ˆ"><a href="#MyBatisæ˜¯ä»€ä¹ˆ" class="headerlink" title="MyBatisæ˜¯ä»€ä¹ˆ"></a>MyBatisæ˜¯ä»€ä¹ˆ</h3><ul><li>MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong>ã€‚</li><li>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚</li><li>MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’ŒJavaçš„POJOï¼ˆ Plain Old Java Objectsï¼Œæ™®é€šçš„Javaå¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</li></ul><h3 id="MyBatiså†å²"><a href="#MyBatiså†å²" class="headerlink" title="MyBatiså†å²"></a>MyBatiså†å²</h3><ul><li>åŸæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´6æœˆè¿™ä¸ªé¡¹ç›®ç”±Apache Software Foundation è¿ç§»åˆ°äº†Google Codeï¼Œéšç€å¼€å‘å›¢é˜Ÿè½¬æŠ•Google Codeæ——ä¸‹ï¼Œ iBatis3.xæ­£å¼æ›´åä¸ºMyBatis ï¼Œä»£ç äº2013å¹´11æœˆè¿ç§»åˆ°Githubï¼ˆä¸‹è½½åœ°å€è§åï¼‰ã€‚</li><li>iBatisä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚ iBatisæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒData Access Objectsï¼ˆDAOï¼‰</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MyBatisï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MyBatisï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MyBatisï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MyBatisï¼Ÿ</h3><ul><li>JDBC<ul><li>SQLå¤¹åœ¨Javaä»£ç å—é‡Œï¼Œè€¦åˆåº¦é«˜å¯¼è‡´ç¡¬ç¼–ç å†…ä¼¤</li><li>ç»´æŠ¤ä¸æ˜“ä¸”å®é™…å¼€å‘éœ€æ±‚ä¸­sqlæ˜¯æœ‰å˜åŒ–ï¼Œé¢‘ç¹ä¿®æ”¹çš„æƒ…å†µå¤šè§</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/01.png"></p><ul><li>Hibernateå’ŒJPA<br>â€“ é•¿éš¾å¤æ‚SQLï¼Œå¯¹äºHibernateè€Œè¨€å¤„ç†ä¹Ÿä¸å®¹æ˜“<br>â€“ å†…éƒ¨è‡ªåŠ¨ç”Ÿäº§çš„SQLï¼Œä¸å®¹æ˜“åšç‰¹æ®Šä¼˜åŒ–ã€‚<br>â€“ åŸºäºå…¨æ˜ å°„çš„å…¨è‡ªåŠ¨æ¡†æ¶ï¼Œå¤§é‡å­—æ®µçš„POJOè¿›è¡Œéƒ¨åˆ†æ˜ å°„æ—¶æ¯”è¾ƒå›°éš¾ï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/02.png"></p><ul><li>MyBatisæ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨åŒ–çš„æŒä¹…åŒ–å±‚æ¡†æ¶ã€‚<ul><li>å¯¹å¼€å‘äººå‘˜è€Œè¨€ï¼Œæ ¸å¿ƒsqlè¿˜æ˜¯éœ€è¦è‡ªå·±ä¼˜åŒ–</li><li>sqlå’Œjavaç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ï¼Œä¸€ä¸ªä¸“æ³¨ä¸šåŠ¡ã€ä¸€ä¸ªä¸“æ³¨æ•°æ®ã€‚</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/03.png"></p><h2 id="2-ä¸‹è½½"><a href="#2-ä¸‹è½½" class="headerlink" title="2.ä¸‹è½½"></a>2.ä¸‹è½½</h2><p><a href="https://github.com/mybatis/mybatis-3/releases">MyBatisä¸‹è½½</a></p><p><a href="https://mybatis.org/mybatis-3/index.html">MyBatiså®˜ç½‘</a></p><h2 id="3-HelloWorld"><a href="#3-HelloWorld" class="headerlink" title="3.HelloWorld"></a>3.HelloWorld</h2><ul><li>åœ¨MySQLæ•°æ®åº“åˆ›å»ºä¸€æ•°æ®åº“å®ä¾‹<code>learnmybatis</code>ï¼Œåœ¨å…¶åˆ›å»ºä¸€å¼ è¡¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employee(</span><br><span class="line">id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">last_name <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">gender <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å†æ’è¿›ä¸€æ¡éšæ„æ•°æ®ï¼Œç”¨äºæµ‹è¯•</p><ul><li>åˆ›å»ºMavenå·¥ç¨‹ï¼Œæ·»åŠ ä¾èµ–</li></ul><p><a href="pom.xml">pom.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºå¯¹åº”çš„JavaBean</li></ul><p><a href="src/main/java/com/lun/c01/helloworld/bean/Employee.java">Employee.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String lastName;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line"><span class="comment">//getter and setter and toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºmybatisé…ç½®æ–‡ä»¶ï¼Œsqlæ˜ å°„æ–‡ä»¶<ul><li>MyBatis çš„å…¨å±€é…ç½®æ–‡ä»¶åŒ…å«äº†å½±å“ MyBatis è¡Œä¸ºç”šæ·±çš„è®¾ç½®ï¼ˆ settingsï¼‰å’Œå±æ€§ï¼ˆ propertiesï¼‰ä¿¡æ¯ã€å¦‚æ•°æ®åº“è¿æ¥æ± ä¿¡æ¯ç­‰ã€‚æŒ‡å¯¼ç€MyBatisè¿›è¡Œå·¥ä½œã€‚æˆ‘ä»¬å¯ä»¥å‚ç…§å®˜æ–¹æ–‡ä»¶çš„é…ç½®ç¤ºä¾‹ã€‚</li><li>æ˜ å°„æ–‡ä»¶çš„ä½œç”¨å°±ç›¸å½“äºæ˜¯å®šä¹‰Daoæ¥å£çš„å®ç°ç±»å¦‚ä½•å·¥ä½œã€‚è¿™ä¹Ÿæ˜¯<strong>æˆ‘ä»¬ä½¿ç”¨MyBatisæ—¶ç¼–å†™çš„æœ€å¤šçš„æ–‡ä»¶</strong>ã€‚</li></ul></li></ul><p>mybatiså…¨å±€é…ç½®æ–‡ä»¶</p><p><a href="src/main/resources/c01/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/learnmybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=CTT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å°†æˆ‘ä»¬å†™å¥½çš„sqlæ˜ å°„æ–‡ä»¶ï¼ˆEmployeeMapper.xmlï¼‰ä¸€å®šè¦æ³¨å†Œåˆ°å…¨å±€é…ç½®æ–‡ä»¶ï¼ˆmybatis-config.xmlï¼‰ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;c01/EmployeeMapper.xml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>sqlæ˜ å°„æ–‡ä»¶</strong></p><p><a href="src/main/resources/c01/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;abc&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">namespace:åç§°ç©ºé—´;é€šå¸¸æŒ‡å®šä¸ºæ¥å£çš„å…¨ç±»å</span></span><br><span class="line"><span class="comment">idï¼šå”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">resultTypeï¼šè¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">#&#123;id&#125;ï¼šä»ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸­å–å‡ºidå€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">public Employee getEmpById(Integer id);</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select id,last_name lastName,email,gender from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•</li></ul><p><a href="src/test/java/com/lun/c01/helloworld/HelloWorldTest.java">HelloWorldTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> SqlSessionFactory <span class="title function_">getSqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;c01/mybatis-config.xml&quot;</span>;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€æ ¹æ®xmlé…ç½®æ–‡ä»¶ï¼ˆå…¨å±€é…ç½®æ–‡ä»¶ï¼‰åˆ›å»ºä¸€ä¸ªSqlSessionFactoryå¯¹è±¡ æœ‰æ•°æ®æºä¸€äº›è¿è¡Œç¯å¢ƒä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * 2ã€sqlæ˜ å°„æ–‡ä»¶ï¼›é…ç½®äº†æ¯ä¸€ä¸ªsqlï¼Œä»¥åŠsqlçš„å°è£…è§„åˆ™ç­‰ã€‚ </span></span><br><span class="line"><span class="comment"> * 3ã€å°†sqlæ˜ å°„æ–‡ä»¶æ³¨å†Œåœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment"> * 4ã€å†™ä»£ç ï¼š</span></span><br><span class="line"><span class="comment"> * 1ï¼‰ã€æ ¹æ®å…¨å±€é…ç½®æ–‡ä»¶å¾—åˆ°SqlSessionFactoryï¼›</span></span><br><span class="line"><span class="comment"> * 2ï¼‰ã€ä½¿ç”¨sqlSessionå·¥å‚ï¼Œè·å–åˆ°sqlSessionå¯¹è±¡ä½¿ç”¨ä»–æ¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªsqlSessionå°±æ˜¯ä»£è¡¨å’Œæ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯ï¼Œç”¨å®Œå…³é—­</span></span><br><span class="line"><span class="comment"> * 3ï¼‰ã€ä½¿ç”¨sqlçš„å”¯ä¸€æ ‡å¿—æ¥å‘Šè¯‰MyBatisæ‰§è¡Œå“ªä¸ªsqlã€‚sqléƒ½æ˜¯ä¿å­˜åœ¨sqlæ˜ å°„æ–‡ä»¶ä¸­çš„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è·å–sqlSessionå®ä¾‹ï¼Œèƒ½ç›´æ¥æ‰§è¡Œå·²ç»æ˜ å°„çš„sqlè¯­å¥</span></span><br><span class="line"><span class="comment">// sqlçš„å”¯ä¸€æ ‡è¯†ï¼šstatement Unique identifier matching the statement to use.</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œsqlè¦ç”¨çš„å‚æ•°ï¼šparameter A parameter object to pass to the statement.</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> getSqlSessionFactory();</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> openSession.selectOne(</span><br><span class="line"><span class="string">&quot;abc.getEmpById&quot;</span>, <span class="number">1</span>);</span><br><span class="line">System.out.println(employee);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ¥å£å¼ç¼–ç¨‹"><a href="#4-æ¥å£å¼ç¼–ç¨‹" class="headerlink" title="4.æ¥å£å¼ç¼–ç¨‹"></a>4.æ¥å£å¼ç¼–ç¨‹</h2><p><strong>æ—¥åä¸»è¦ç”¨æ¥å£å¼ç¼–ç¨‹</strong></p><p>HelloWorld-æ¥å£å¼ç¼–ç¨‹</p><ul><li>åˆ›å»ºä¸€ä¸ªDaoæ¥å£</li></ul><p><a href="src/main/java/com/lun/c01/helloworld/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.lun.c01.helloworld.bean.Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹Mapperæ–‡ä»¶ï¼ˆå‘½åç©ºé—´ï¼Œidï¼ŒreturnTypeï¼‰</li></ul><p><a href="src/main/java/com/lun/c01/helloworld/dao/EmployeeMapper.java">EmployeeMapper2.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c01.helloworld.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">namespace:åç§°ç©ºé—´;æŒ‡å®šä¸ºæ¥å£çš„å…¨ç±»å</span></span><br><span class="line"><span class="comment">idï¼šå”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">resultTypeï¼šè¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment">#&#123;id&#125;ï¼šä»ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸­å–å‡ºidå€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">public Employee getEmpById(Integer id);</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select id,last_name lastName,email,gender from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•</li></ul><p><a href="src/test/java/com/lun/c01/helloworld/HelloWorldTest.java">HelloWorldTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> getSqlSessionFactory();</span><br><span class="line"><span class="comment">// 2ã€è·å–sqlSessionå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// 3ã€è·å–æ¥å£çš„å®ç°ç±»å¯¹è±¡</span></span><br><span class="line"><span class="comment">//ä¼šä¸ºæ¥å£è‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å»æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ–¹æ³•</span></span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> mapper.getEmpById(<span class="number">1</span>);</span><br><span class="line">System.out.println(mapper.getClass());</span><br><span class="line">System.out.println(employee);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-å°ç»“-1"><a href="#5-å°ç»“-1" class="headerlink" title="5.å°ç»“(1)"></a>5.å°ç»“(1)</h2><ol><li>æ¥å£å¼ç¼–ç¨‹<ul><li>åŸç”Ÿï¼šDao&#x3D;&#x3D;&#x3D;&#x3D;&gt;  DaoImpl</li><li>mybatisï¼šMapper&#x3D;&#x3D;&#x3D;&#x3D;&gt;  xxMapper.xml</li></ul></li><li>SqlSessionä»£è¡¨å’Œæ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯ï¼›ç”¨å®Œå¿…é¡»å…³é—­ï¼›</li><li>SqlSessionå’Œconnectionä¸€æ ·å¥¹éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨ã€‚æ¯æ¬¡ä½¿ç”¨éƒ½åº”è¯¥å»è·å–æ–°çš„å¯¹è±¡ã€‚</li><li>mapperæ¥å£æ²¡æœ‰å®ç°ç±»ï¼Œä½†æ˜¯mybatisä¼šä¸ºè¿™ä¸ªæ¥å£ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚<br>ï¼ˆå°†æ¥å£å’Œxmlè¿›è¡Œç»‘å®šï¼‰<code>EmployeeMapper empMapper = sqlSession.getMapper(EmployeeMapper.class);</code></li><li>ä¸¤ä¸ªé‡è¦çš„é…ç½®æ–‡ä»¶ï¼š<ul><li>mybatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼šåŒ…å«æ•°æ®åº“è¿æ¥æ± ä¿¡æ¯ï¼Œäº‹åŠ¡ç®¡ç†å™¨ä¿¡æ¯ç­‰â€¦ç³»ç»Ÿè¿è¡Œç¯å¢ƒä¿¡æ¯</li><li>sqlæ˜ å°„æ–‡ä»¶ï¼šä¿å­˜äº†æ¯ä¸€ä¸ªsqlè¯­å¥çš„æ˜ å°„ä¿¡æ¯ï¼šå°†sqlæŠ½å–å‡ºæ¥ã€‚</li></ul></li></ol><h2 id="6-å…¨å±€é…ç½®æ–‡ä»¶-å¼•å…¥dtdçº¦æŸ"><a href="#6-å…¨å±€é…ç½®æ–‡ä»¶-å¼•å…¥dtdçº¦æŸ" class="headerlink" title="6.å…¨å±€é…ç½®æ–‡ä»¶-å¼•å…¥dtdçº¦æŸ"></a>6.å…¨å±€é…ç½®æ–‡ä»¶-å¼•å…¥dtdçº¦æŸ</h2><h3 id="MyBatis-å…¨å±€é…ç½®æ–‡ä»¶"><a href="#MyBatis-å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="MyBatis-å…¨å±€é…ç½®æ–‡ä»¶"></a>MyBatis-å…¨å±€é…ç½®æ–‡ä»¶</h3><p>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†å½±å“ MyBatis è¡Œä¸ºç”šæ·±çš„è®¾ç½®ï¼ˆ settingsï¼‰å’Œå±æ€§ï¼ˆ propertiesï¼‰ä¿¡æ¯ã€‚æ–‡æ¡£çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>configuration é…ç½®<ul><li>properties å±æ€§</li><li>settings è®¾ç½®</li><li>typeAliases ç±»å‹å‘½å</li><li>typeHandlers ç±»å‹å¤„ç†å™¨</li><li>objectFactory å¯¹è±¡å·¥å‚</li><li>plugins æ’ä»¶</li><li>environments ç¯å¢ƒ<ul><li>environment ç¯å¢ƒå˜é‡<ul><li>transactionManager äº‹åŠ¡ç®¡ç†å™¨</li><li>dataSource æ•°æ®æº</li></ul></li></ul></li><li>databaseIdProvider æ•°æ®åº“å‚å•†æ ‡è¯†</li><li>mappers æ˜ å°„å™¨</li></ul></li></ul><h3 id="å¼•å…¥dtdçº¦æŸ"><a href="#å¼•å…¥dtdçº¦æŸ" class="headerlink" title="å¼•å…¥dtdçº¦æŸ"></a>å¼•å…¥dtdçº¦æŸ</h3><p>æœ‰æ—¶Eclipseåœ¨ç¼–è¾‘å…¨å±€xmlæˆ–æ˜ å°„xmlæ—¶æ²¡æœ‰ç¼–è¾‘æç¤ºï¼Œè¿™æ—¶å¯æ‰‹åŠ¨å¯¼å…¥dtdï¼Œå¯¼å…¥åæ‰æœ‰ç¼–è¾‘æç¤º</p><p>dtdæ–‡ä»¶åœ¨Mybatisçš„JaråŒ…çš„org&#x2F;apache&#x2F;ibatis&#x2F;builder&#x2F;xmlï¼Œå¯¼å…¥å‰éœ€Mybatisçš„JaråŒ…ä¸­çš„dtdå­˜æ”¾åˆ°æœ¬åœ°ç›®å½•</p><p>è®¾ç½®è·¯å¾„ï¼šWindow -&gt; Preferences -&gt; XML -&gt; XML Catalog -&gt; Add Catalog Entry -&gt;Set URL key and DTD local location</p><h2 id="7-å…¨å±€é…ç½®æ–‡ä»¶-properties-å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶"><a href="#7-å…¨å±€é…ç½®æ–‡ä»¶-properties-å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶" class="headerlink" title="7.å…¨å±€é…ç½®æ–‡ä»¶-properties-å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶"></a>7.å…¨å±€é…ç½®æ–‡ä»¶-properties-å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="src/main/resources/c02/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">1ã€mybatiså¯ä»¥ä½¿ç”¨propertiesæ¥å¼•å…¥å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼›</span></span><br><span class="line"><span class="comment">resourceï¼šå¼•å…¥ç±»è·¯å¾„ä¸‹çš„èµ„æº</span></span><br><span class="line"><span class="comment">urlï¼šå¼•å…¥ç½‘ç»œè·¯å¾„æˆ–è€…ç£ç›˜è·¯å¾„ä¸‹çš„èµ„æº</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span> =<span class="string">&quot;dbconfig.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="/LearnMybatis/src/main/resources/c02/dbconfig.properties">dbconfig.properties</a></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/learnmybatis?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;serverTimezone=CTT</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">123</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå±æ€§åœ¨ä¸åªä¸€ä¸ªåœ°æ–¹è¿›è¡Œäº†é…ç½®ï¼Œé‚£ä¹ˆ MyBatis å°†æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥åŠ è½½ï¼š</p><ul><li>åœ¨ properties å…ƒç´ ä½“å†…æŒ‡å®šçš„å±æ€§é¦–å…ˆè¢«è¯»å–ã€‚</li><li>ç„¶åæ ¹æ® properties å…ƒç´ ä¸­çš„ resource å±æ€§è¯»å–ç±»è·¯å¾„ä¸‹å±æ€§æ–‡ä»¶æˆ–æ ¹<br>æ® url å±æ€§æŒ‡å®šçš„è·¯å¾„è¯»å–å±æ€§æ–‡ä»¶ï¼Œå¹¶è¦†ç›–å·²è¯»å–çš„åŒåå±æ€§ã€‚</li><li>æœ€åè¯»å–ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§ï¼Œå¹¶è¦†ç›–å·²è¯»å–çš„åŒåå±æ€§ã€‚</li></ul><h2 id="8-å…¨å±€é…ç½®æ–‡ä»¶-settings-è¿è¡Œæ—¶è¡Œä¸ºè®¾ç½®"><a href="#8-å…¨å±€é…ç½®æ–‡ä»¶-settings-è¿è¡Œæ—¶è¡Œä¸ºè®¾ç½®" class="headerlink" title="8.å…¨å±€é…ç½®æ–‡ä»¶-settings-è¿è¡Œæ—¶è¡Œä¸ºè®¾ç½®"></a>8.å…¨å±€é…ç½®æ–‡ä»¶-settings-è¿è¡Œæ—¶è¡Œä¸ºè®¾ç½®</h2><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p><p><a href="src/main/resources/c02/mybatis-config2.xml">mybatis-config2.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">2ã€settingsåŒ…å«å¾ˆå¤šé‡è¦çš„è®¾ç½®é¡¹</span></span><br><span class="line"><span class="comment">setting:ç”¨æ¥è®¾ç½®æ¯ä¸€ä¸ªè®¾ç½®é¡¹</span></span><br><span class="line"><span class="comment">nameï¼šè®¾ç½®é¡¹å</span></span><br><span class="line"><span class="comment">valueï¼šè®¾ç½®é¡¹å–å€¼</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>è®¾ç½®å‚æ•°</th><th>æè¿°</th><th>æœ‰æ•ˆå€¼</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>cacheEnabled</td><td>è¯¥é…ç½®å½±å“çš„æ‰€æœ‰æ˜ å°„å™¨ä¸­é…ç½®çš„ç¼“å­˜çš„å…¨å±€å¼€å…³ã€‚</td><td>true&#x2F;false</td><td>TRUE</td></tr><tr><td>lazyLoadingEnabled</td><td>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ã€‚æ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½®fetchTypeå±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td><td>true&#x2F;false</td><td>FALSE</td></tr><tr><td>useColumnLabel</td><td>ä½¿ç”¨åˆ—æ ‡ç­¾ä»£æ›¿åˆ—åã€‚ä¸åŒçš„é©±åŠ¨åœ¨è¿™æ–¹é¢ä¼šæœ‰ä¸åŒçš„è¡¨ç°ï¼Œå…·ä½“å¯å‚è€ƒç›¸å…³é©±åŠ¨æ–‡æ¡£æˆ–é€šè¿‡æµ‹è¯•è¿™ä¸¤ç§ä¸åŒçš„æ¨¡å¼æ¥è§‚å¯Ÿæ‰€ç”¨é©±åŠ¨çš„ç»“æœã€‚</td><td>true&#x2F;false</td><td>TRUE</td></tr><tr><td>defaultStatementTimeout</td><td>è®¾ç½®è¶…æ—¶æ—¶é—´,å®ƒå†³å®šé©±åŠ¨ç­‰å¾…æ•°æ®åº“å“åº”çš„ç§’æ•°ã€‚</td><td>Any positive integer</td><td>Not Set (null)</td></tr><tr><td>mapUnderscoreToCamelCase</td><td>æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™( camel case )æ˜ å°„å³ä»ç»å…¸æ•°æ®åº“åˆ—åA_ COLUMNåˆ°ç»å…¸Javaå±æ€§åaColumnçš„ç±»ä¼¼æ˜ å°„</td><td>true&#x2F;false</td><td>FALSE</td></tr></tbody></table><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">æ›´å¤šè®¾ç½®</a></p><h2 id="9-å…¨å±€é…ç½®æ–‡ä»¶-typeAliases-åˆ«å"><a href="#9-å…¨å±€é…ç½®æ–‡ä»¶-typeAliases-åˆ«å" class="headerlink" title="9.å…¨å±€é…ç½®æ–‡ä»¶-typeAliases-åˆ«å"></a>9.å…¨å±€é…ç½®æ–‡ä»¶-typeAliases-åˆ«å</h2><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Author&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Blog&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Blog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Comment&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Comment&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Post&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Section&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Section&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Tag&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Tag&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“è¿™æ ·é…ç½®æ—¶ï¼ŒBlog å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨ domain.blog.Blog çš„åœ°æ–¹ã€‚</p><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;domain.blog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªåœ¨åŒ… domain.blog ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚ domain.blog.Author çš„åˆ«åä¸º authorï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Author</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ MyBatiså·²ç»ä¸ºè®¸å¤šå¸¸è§çš„ Java ç±»å‹å†…å»º<br>äº†ç›¸åº”çš„ç±»å‹åˆ«åã€‚<strong>å®ƒä»¬éƒ½æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„</strong>ï¼Œæˆ‘ä»¬åœ¨èµ·<br>åˆ«åçš„æ—¶å€™åƒä¸‡ä¸è¦å ç”¨å·²æœ‰çš„åˆ«åã€‚</p><table><thead><tr><th>åˆ«å</th><th>æ˜ å°„çš„ç±»å‹</th><th>åˆ«å</th><th>æ˜ å°„çš„ç±»å‹</th><th>åˆ«å</th><th>æ˜ å°„çš„ç±»å‹</th><th></th></tr></thead><tbody><tr><td>_byte</td><td>byte</td><td>string</td><td>String</td><td>date</td><td>Date</td><td></td></tr><tr><td>_long</td><td>long</td><td>byte</td><td>Byte</td><td>decimal</td><td>BigDecimal</td><td></td></tr><tr><td>_short</td><td>short</td><td>long</td><td>Long</td><td>bigdecimal</td><td>BigDecimal</td><td></td></tr><tr><td>_int</td><td>int</td><td>short</td><td>Short</td><td>object</td><td>Object</td><td></td></tr><tr><td>_integer</td><td>int</td><td>int</td><td>Integer</td><td>map</td><td>Map</td><td></td></tr><tr><td>_double</td><td>double</td><td>integer</td><td>Integer</td><td>hashmap</td><td>HashMap</td><td></td></tr><tr><td>_float</td><td>float</td><td>double</td><td>Double</td><td>list</td><td>List</td><td></td></tr><tr><td>_boolean</td><td>boolean</td><td>float</td><td>Float</td><td>arraylist</td><td>ArrayList</td><td></td></tr><tr><td>-</td><td>-</td><td>boolean</td><td>Boolean</td><td>collection</td><td>Collection</td><td></td></tr><tr><td>-</td><td>-</td><td>-</td><td>-</td><td>iterator</td><td>Iterator</td><td></td></tr></tbody></table><p><a href="src/main/resources/c02/mybatis-config3.xml">mybatis-config3.xml</a></p><h2 id="10-å…¨å±€é…ç½®æ–‡ä»¶-typeHandlers-ç±»å‹å¤„ç†å™¨ç®€ä»‹"><a href="#10-å…¨å±€é…ç½®æ–‡ä»¶-typeHandlers-ç±»å‹å¤„ç†å™¨ç®€ä»‹" class="headerlink" title="10.å…¨å±€é…ç½®æ–‡ä»¶-typeHandlers-ç±»å‹å¤„ç†å™¨ç®€ä»‹"></a>10.å…¨å±€é…ç½®æ–‡ä»¶-typeHandlers-ç±»å‹å¤„ç†å™¨ç®€ä»‹</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">å®˜æ–¹æ–‡æ¡£</a></p><p>æ— è®ºæ˜¯ MyBatis åœ¨é¢„å¤„ç†è¯­å¥ï¼ˆ PreparedStatementï¼‰ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿˜æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œéƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚</p><table><thead><tr><th>ç±»å‹å¤„ç†å™¨</th><th>Java ç±»å‹</th><th>JDBC ç±»å‹</th></tr></thead><tbody><tr><td>BooleanTypeHandler</td><td>java.lang.Boolean, boolean</td><td>æ•°æ®åº“å…¼å®¹çš„ BOOLEAN</td></tr><tr><td>ByteTypeHandler</td><td>java.lang.Byte, byte</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– BYTE</td></tr><tr><td>ShortTypeHandler</td><td>java.lang.Short, short</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– SHORT INTEGER</td></tr><tr><td>IntegerTypeHandler</td><td>java.lang.Integer, int</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– INTEGER</td></tr><tr><td>LongTypeHandler</td><td>java.lang.Long, long</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– LONG INTEGER</td></tr><tr><td>FloatTypeHandler</td><td>java.lang.Float, float</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– FLOAT</td></tr><tr><td>DoubleTypeHandler</td><td>java.lang.Double, double</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– DOUBLE</td></tr><tr><td>BigDecimalTypeHandler</td><td>java.math.BigDecimal</td><td>æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– DECIMAL</td></tr><tr><td>StringTypeHandler</td><td>java.lang.String</td><td>CHAR, VARCHAR</td></tr></tbody></table><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">more</a></p><h3 id="æ—¥æœŸç±»å‹çš„å¤„ç†"><a href="#æ—¥æœŸç±»å‹çš„å¤„ç†" class="headerlink" title="æ—¥æœŸç±»å‹çš„å¤„ç†"></a>æ—¥æœŸç±»å‹çš„å¤„ç†</h3><ul><li>æ—¥æœŸå’Œæ—¶é—´çš„å¤„ç†ï¼Œ JDK1.8ä»¥å‰ä¸€ç›´æ˜¯ä¸ªå¤´ç–¼çš„é—®é¢˜ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨JSR310è§„èŒƒé¢†å¯¼è€…Stephen Colebourneåˆ›å»ºçš„Joda-Timeæ¥æ“ä½œã€‚ 1.8å·²ç»å®ç°å…¨éƒ¨çš„JSR310è§„èŒƒäº†ã€‚</li><li>æ—¥æœŸæ—¶é—´å¤„ç†ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatisåŸºäºJSR310ï¼ˆ Date and Time APIï¼‰ç¼–å†™çš„å„ç§æ—¥æœŸæ—¶é—´ç±»å‹å¤„ç†å™¨ã€‚</li><li>MyBatis3.4ä»¥å‰çš„ç‰ˆæœ¬éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ³¨å†Œè¿™äº›å¤„ç†å™¨ï¼Œä»¥åçš„ç‰ˆæœ¬éƒ½æ˜¯è‡ªåŠ¨æ³¨å†Œçš„</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.InstantTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.LocalDateTimeTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.LocalDateTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.LocalTime TypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.0ffsetDateTimeTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.OffsetTimeTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.ZonedDateTimeTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.YearTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.MonthTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.YearMonthTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.JapaneseDateTypeHandler&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨"><a href="#è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨"></a>è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨</h3><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨ç¤ºä¾‹</a></p><p>æˆ‘ä»¬å¯ä»¥é‡å†™ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºè‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>å®ç°<code>org.apache.ibatis.type.TypeHandler</code>æ¥å£æˆ–è€…ç»§æ‰¿<code>org.apache.ibatis.type.BaseTypeHandler</code></li><li>æŒ‡å®šå…¶æ˜ å°„æŸä¸ªJDBCç±»å‹ï¼ˆå¯é€‰æ“ä½œï¼‰</li><li>åœ¨mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</li></ol><h2 id="11-å…¨å±€é…ç½®æ–‡ä»¶-plugins-æ’ä»¶ç®€ä»‹"><a href="#11-å…¨å±€é…ç½®æ–‡ä»¶-plugins-æ’ä»¶ç®€ä»‹" class="headerlink" title="11.å…¨å±€é…ç½®æ–‡ä»¶-plugins-æ’ä»¶ç®€ä»‹"></a>11.å…¨å±€é…ç½®æ–‡ä»¶-plugins-æ’ä»¶ç®€ä»‹</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">å®˜æ–¹æ–‡æ¡£</a></p><p>æ’ä»¶æ˜¯MyBatisæä¾›çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥ä¿®æ”¹MyBatisçš„ä¸€äº›æ ¸å¿ƒè¡Œä¸ºã€‚ æ’ä»¶é€šè¿‡åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå¯ä»¥ä»‹å…¥å››å¤§å¯¹è±¡çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚</p><p>äº†è§£mybatisè¿è¡ŒåŸç†æ‰èƒ½æ›´å¥½å¼€å‘æ’ä»¶ã€‚</p><ul><li><code>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</code></li><li><code>ParameterHandler (getParameterObject, setParameters)</code></li><li><code>ResultSetHandler (handleResultSets, handleOutputParameters)</code></li><li><code>StatementHandler (prepare, parameterize, batch, update, query)</code></li></ul><h2 id="12-å…¨å±€é…ç½®æ–‡ä»¶-enviroments-è¿è¡Œç¯å¢ƒ"><a href="#12-å…¨å±€é…ç½®æ–‡ä»¶-enviroments-è¿è¡Œç¯å¢ƒ" class="headerlink" title="12.å…¨å±€é…ç½®æ–‡ä»¶-enviroments-è¿è¡Œç¯å¢ƒ"></a>12.å…¨å±€é…ç½®æ–‡ä»¶-enviroments-è¿è¡Œç¯å¢ƒ</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#environments">enviroments - å®˜æ–¹æ–‡æ¡£</a></p><ul><li>MyBatiså¯ä»¥é…ç½®å¤šç§ç¯å¢ƒï¼Œæ¯”å¦‚å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ã€‚</li><li>æ¯ç§ç¯å¢ƒä½¿ç”¨ä¸€ä¸ªenvironmentæ ‡ç­¾è¿›è¡Œé…ç½®å¹¶æŒ‡å®šå”¯ä¸€æ ‡è¯†ç¬¦</li><li>å¯ä»¥é€šè¿‡environmentsæ ‡ç­¾ä¸­çš„defaultå±æ€§æŒ‡å®šä¸€ä¸ªç¯å¢ƒçš„æ ‡è¯†ç¬¦æ¥å¿«é€Ÿçš„åˆ‡æ¢ç¯å¢ƒ</li></ul><h3 id="environment-æŒ‡å®šå…·ä½“ç¯å¢ƒ"><a href="#environment-æŒ‡å®šå…·ä½“ç¯å¢ƒ" class="headerlink" title="environment-æŒ‡å®šå…·ä½“ç¯å¢ƒ"></a>environment-æŒ‡å®šå…·ä½“ç¯å¢ƒ</h3><ul><li>idï¼šæŒ‡å®šå½“å‰ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†</li><li>transactionManagerã€å’ŒdataSourceéƒ½å¿…é¡»æœ‰</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev_mysql&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev_mysql&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="transactionManager"><a href="#transactionManager" class="headerlink" title="transactionManager"></a>transactionManager</h4><ul><li>typeï¼š JDBC | MANAGED | è‡ªå®šä¹‰<ul><li>JDBCï¼šä½¿ç”¨äº† JDBC çš„æäº¤å’Œå›æ»šè®¾ç½®ï¼Œä¾èµ–äºä»æ•°æ®æºå¾—åˆ°çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡èŒƒå›´ã€‚JdbcTransactionFactory</li><li>MANAGEDï¼šä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ã€è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆæ¯”å¦‚ JEE åº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ï¼‰ã€‚ ManagedTransactionFactory</li><li>è‡ªå®šä¹‰ï¼šå®ç°TransactionFactoryæ¥å£ï¼Œ type&#x3D;å…¨ç±»å&#x2F;åˆ«å</li></ul></li></ul><h4 id="dataSource"><a href="#dataSource" class="headerlink" title="dataSource"></a>dataSource</h4><ul><li>typeï¼š UNPOOLED | POOLED | JNDI | è‡ªå®šä¹‰<ul><li>UNPOOLEDï¼šä¸ä½¿ç”¨è¿æ¥æ± ï¼Œ<br>UnpooledDataSourceFactory</li><li>POOLEDï¼šä½¿ç”¨è¿æ¥æ± ï¼Œ PooledDataSourceFactory</li><li>JNDIï¼š åœ¨EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­æŸ¥æ‰¾æŒ‡å®šçš„æ•°æ®æº</li><li>è‡ªå®šä¹‰ï¼šå®ç°DataSourceFactoryæ¥å£ï¼Œå®šä¹‰æ•°æ®æºçš„è·å–æ–¹å¼ã€‚</li></ul></li></ul><p><strong>å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨Springç®¡ç†æ•°æ®æºï¼Œå¹¶è¿›è¡Œäº‹åŠ¡æ§åˆ¶çš„é…ç½®æ¥è¦†ç›–ä¸Šè¿°é…ç½®</strong>ã€‚</p><h2 id="13-å…¨å±€é…ç½®æ–‡ä»¶-databaseIdProvider-å¤šæ•°æ®åº“æ”¯æŒ"><a href="#13-å…¨å±€é…ç½®æ–‡ä»¶-databaseIdProvider-å¤šæ•°æ®åº“æ”¯æŒ" class="headerlink" title="13.å…¨å±€é…ç½®æ–‡ä»¶-databaseIdProvider-å¤šæ•°æ®åº“æ”¯æŒ"></a>13.å…¨å±€é…ç½®æ–‡ä»¶-databaseIdProvider-å¤šæ•°æ®åº“æ”¯æŒ</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider">databaseIdProvider - å®˜æ–¹æ–‡æ¡£</a></p><ul><li>MyBatis å¯ä»¥æ ¹æ®ä¸åŒçš„æ•°æ®åº“å‚å•†æ‰§è¡Œä¸åŒçš„è¯­å¥ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;SQL Server&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlserver&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;DB2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;db2&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Oracle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Typeï¼š DB_VENDOR ä½¿ç”¨MyBatisæä¾›çš„VendorDatabaseIdProviderè§£ææ•°æ®åº“å‚å•†æ ‡è¯†ã€‚ä¹Ÿå¯ä»¥å®ç°DatabaseIdProvideræ¥å£æ¥è‡ªå®šä¹‰ã€‚</li><li>Property-nameï¼šæ•°æ®åº“å‚å•†æ ‡è¯†</li><li>Property-valueï¼šä¸ºæ ‡è¯†èµ·ä¸€ä¸ªåˆ«åï¼Œæ–¹ä¾¿SQLè¯­å¥ä½¿ç”¨databaseIdå±æ€§å¼•ç”¨</li></ul><p>DB_VENDOR - ä¼šé€šè¿‡ DatabaseMetaData#getDatabaseProductName() è¿”å›çš„å­—ç¬¦ä¸²è¿›è¡Œè®¾ç½®ã€‚ç”±äºé€šå¸¸æƒ…å†µä¸‹è¿™ä¸ªå­—ç¬¦ä¸²éƒ½éå¸¸é•¿è€Œä¸”ç›¸åŒäº§å“çš„ä¸åŒç‰ˆæœ¬ä¼šè¿”å›ä¸åŒçš„å€¼ï¼Œæ‰€ä»¥<strong>æœ€å¥½é€šè¿‡è®¾ç½®å±æ€§åˆ«åæ¥ä½¿å…¶å˜çŸ­</strong></p><ul><li>databaseIdå±æ€§åœ¨æ˜ å°„xmlä½¿ç”¨</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">databaseId</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">select * from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">databaseId</span>=<span class="string">&quot;oracle&quot;</span>&gt;</span></span><br><span class="line">select e.* from employee e where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡<code>&lt;environments default=&quot;mysql&quot;&gt;</code>åˆ‡æ¢æ•°æ®åº“ï¼Œä¾¿èƒ½åˆ‡æ¢SQL</li></ul><p>MyBatisåŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœæ²¡æœ‰é…ç½®databaseIdProvideræ ‡ç­¾ï¼Œé‚£ä¹ˆdatabaseId&#x3D;null</li><li>å¦‚æœé…ç½®äº†databaseIdProvideræ ‡ç­¾ï¼Œä½¿ç”¨æ ‡ç­¾é…ç½®çš„nameå»åŒ¹é…æ•°æ®åº“ä¿¡æ¯ï¼ŒåŒ¹é…ä¸Šè®¾ç½®databaseId&#x3D;é…ç½®æŒ‡å®šçš„å€¼ï¼Œå¦åˆ™ä¾æ—§ä¸ºnull</li><li>å¦‚æœdatabaseIdä¸ä¸ºnullï¼Œä»–åªä¼šæ‰¾åˆ°é…ç½®databaseIdçš„sqlè¯­å¥</li><li>MyBatis ä¼šåŠ è½½ä¸å¸¦ databaseId å±æ€§å’Œå¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§çš„æ‰€æœ‰è¯­å¥ã€‚å¦‚æœåŒæ—¶æ‰¾åˆ°å¸¦æœ‰ databaseId å’Œä¸å¸¦ databaseId çš„ç›¸åŒè¯­å¥ï¼Œ åˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚</li></ol><h2 id="14-å…¨å±€é…ç½®æ–‡ä»¶-mappers-sqlæ˜ å°„æ³¨å†Œ"><a href="#14-å…¨å±€é…ç½®æ–‡ä»¶-mappers-sqlæ˜ å°„æ³¨å†Œ" class="headerlink" title="14.å…¨å±€é…ç½®æ–‡ä»¶-mappers-sqlæ˜ å°„æ³¨å†Œ"></a>14.å…¨å±€é…ç½®æ–‡ä»¶-mappers-sqlæ˜ å°„æ³¨å†Œ</h2><p>æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå·²ç»ç”±ä¸Šè¿°å…ƒç´ é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦æ¥å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ ä½†é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚ åœ¨è‡ªåŠ¨æŸ¥æ‰¾èµ„æºæ–¹é¢ï¼ŒJava å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥<strong>æœ€å¥½çš„åŠæ³•æ˜¯ç›´æ¥å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶</strong>ã€‚ ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œæˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ file:&#x2F;&#x2F;&#x2F; å½¢å¼çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æ³¨å†Œæ¥å£</span></span><br><span class="line"><span class="comment">classï¼šå¼•ç”¨ï¼ˆæ³¨å†Œï¼‰æ¥å£ï¼Œ</span></span><br><span class="line"><span class="comment">1ã€æœ‰sqlæ˜ å°„æ–‡ä»¶ï¼Œæ˜ å°„æ–‡ä»¶åå¿…é¡»å’Œæ¥å£åŒåï¼Œå¹¶ä¸”æ”¾åœ¨ä¸æ¥å£åŒä¸€ç›®å½•ä¸‹ï¼›</span></span><br><span class="line"><span class="comment">2ã€æ²¡æœ‰sqlæ˜ å°„æ–‡ä»¶ï¼Œæ‰€æœ‰çš„sqléƒ½æ˜¯åˆ©ç”¨æ³¨è§£å†™åœ¨æ¥å£ä¸Š;</span></span><br><span class="line"><span class="comment">æ¨èï¼š</span></span><br><span class="line"><span class="comment">æ¯”è¾ƒé‡è¦çš„ï¼Œå¤æ‚çš„Daoæ¥å£æˆ‘ä»¬æ¥å†™sqlæ˜ å°„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">ä¸é‡è¦ï¼Œç®€å•çš„Daoæ¥å£ä¸ºäº†å¼€å‘å¿«é€Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼›</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.BlogMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.PostMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›é…ç½®ä¼šå‘Šè¯‰ MyBatis å»å“ªé‡Œæ‰¾æ˜ å°„æ–‡ä»¶</p><h2 id="15-å°ç»“-2"><a href="#15-å°ç»“-2" class="headerlink" title="15.å°ç»“(2)"></a>15.å°ç»“(2)</h2><p>æ³¨æ„mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾é¡ºåºï¼Œéœ€è¦æŒ‰ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</p><ul><li>configuration é…ç½®<ul><li>properties å±æ€§</li><li>settings è®¾ç½®</li><li>typeAliases ç±»å‹å‘½å</li><li>typeHandlers ç±»å‹å¤„ç†å™¨</li><li>objectFactory å¯¹è±¡å·¥å‚</li><li>plugins æ’ä»¶</li><li>environments ç¯å¢ƒ<ul><li>environment ç¯å¢ƒå˜é‡<ul><li>transactionManager äº‹åŠ¡ç®¡ç†å™¨</li><li>dataSource æ•°æ®æº</li></ul></li></ul></li><li>databaseIdProvider æ•°æ®åº“å‚å•†æ ‡è¯†</li><li>mappers æ˜ å°„å™¨</li></ul></li></ul><h2 id="16-æ˜ å°„æ–‡ä»¶-å¢åˆ æ”¹æŸ¥"><a href="#16-æ˜ å°„æ–‡ä»¶-å¢åˆ æ”¹æŸ¥" class="headerlink" title="16.æ˜ å°„æ–‡ä»¶-å¢åˆ æ”¹æŸ¥"></a>16.æ˜ å°„æ–‡ä»¶-å¢åˆ æ”¹æŸ¥</h2><p>æ˜ å°„æ–‡ä»¶æŒ‡å¯¼ç€MyBatiså¦‚ä½•è¿›è¡Œæ•°æ®åº“å¢åˆ æ”¹æŸ¥ï¼Œæœ‰ç€éå¸¸é‡è¦çš„æ„ä¹‰ï¼›</p><ul><li>cache â€“å‘½åç©ºé—´çš„äºŒçº§ç¼“å­˜é…ç½®</li><li>cache-ref â€“ å…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚</li><li>resultMap â€“ è‡ªå®šä¹‰ç»“æœé›†æ˜ å°„</li><li>parameterMap â€“ <strong>å·²åºŸå¼ƒ</strong>ï¼è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„</li><li>sql â€“æŠ½å–å¯é‡ç”¨è¯­å¥å—ã€‚</li><li>insert â€“ æ˜ å°„æ’å…¥è¯­å¥</li><li>update â€“ æ˜ å°„æ›´æ–°è¯­å¥</li><li>delete â€“ æ˜ å°„åˆ é™¤è¯­å¥</li><li>select â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥</li></ul><h3 id="CRUDåˆä½“éªŒ"><a href="#CRUDåˆä½“éªŒ" class="headerlink" title="CRUDåˆä½“éªŒ"></a>CRUDåˆä½“éªŒ</h3><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Long <span class="title function_">addEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmpById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select * from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- public void addEmp(Employee employee); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmp&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> &gt;</span></span><br><span class="line">insert into employee(last_name,email,gender) </span><br><span class="line">values(#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- public void updateEmp(Employee employee);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateEmp&quot;</span>&gt;</span></span><br><span class="line">update employee </span><br><span class="line">set last_name=#&#123;lastName&#125;,email=#&#123;email&#125;,gender=#&#123;gender&#125;</span><br><span class="line">where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- public void deleteEmpById(Integer id); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteEmpById&quot;</span>&gt;</span></span><br><span class="line">delete from employee where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCrud</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="type">Employee</span> <span class="variable">newEmployee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="literal">null</span>,<span class="string">&quot;kuang&quot;</span>,<span class="string">&quot;kuang@163.com&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¢</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> mapper.addEmp(newEmployee);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">System.out.println(<span class="string">&quot;After creating : &quot;</span> + mapper.getEmpById(newEmployee.getId()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¹</span></span><br><span class="line">newEmployee.setGender(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">mapper.updateEmp(newEmployee);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">System.out.println(<span class="string">&quot;After updating : &quot;</span> + mapper.getEmpById(newEmployee.getId()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">mapper.deleteEmpById(newEmployee.getId());</span><br><span class="line">System.out.println(<span class="string">&quot;After deleting : &quot;</span> + mapper.getEmpById(newEmployee.getId()));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¦å¤–"><a href="#å¦å¤–" class="headerlink" title="å¦å¤–"></a>å¦å¤–</h3><ol><li>mybatiså…è®¸å¢åˆ æ”¹ç›´æ¥å®šä¹‰ä»¥ä¸‹ç±»å‹è¿”å›å€¼<ul><li>Integerã€Longã€Booleanã€void</li></ul></li><li>æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æäº¤æ•°æ®<ul><li>sqlSessionFactory.openSession();&#x3D;&#x3D;&#x3D;ã€‹æ‰‹åŠ¨æäº¤</li><li>sqlSessionFactory.openSession(true);&#x3D;&#x3D;&#x3D;ã€‹è‡ªåŠ¨æäº¤</li></ul></li></ol><h2 id="17-æ˜ å°„æ–‡ä»¶-insert-è·å–è‡ªå¢ä¸»é”®çš„å€¼"><a href="#17-æ˜ å°„æ–‡ä»¶-insert-è·å–è‡ªå¢ä¸»é”®çš„å€¼" class="headerlink" title="17.æ˜ å°„æ–‡ä»¶-insert-è·å–è‡ªå¢ä¸»é”®çš„å€¼"></a>17.æ˜ å°„æ–‡ä»¶-insert-è·å–è‡ªå¢ä¸»é”®çš„å€¼</h2><ul><li>parameterTypeï¼šå‚æ•°ç±»å‹ï¼Œå¯ä»¥çœç•¥ï¼Œ</li><li>è·å–è‡ªå¢ä¸»é”®çš„å€¼ï¼š<ul><li>mysqlæ”¯æŒè‡ªå¢ä¸»é”®ï¼Œè‡ªå¢ä¸»é”®å€¼çš„è·å–ï¼Œmybatisä¹Ÿæ˜¯åˆ©ç”¨statement.getGenreatedKeys()ï¼›</li><li>useGeneratedKeys&#x3D;â€trueâ€ï¼›ä½¿ç”¨è‡ªå¢ä¸»é”®è·å–ä¸»é”®å€¼ç­–ç•¥</li><li>keyPropertyï¼›æŒ‡å®šå¯¹åº”çš„ä¸»é”®å±æ€§ï¼Œä¹Ÿå°±æ˜¯mybatisè·å–åˆ°ä¸»é”®å€¼ä»¥åï¼Œå°†è¿™ä¸ªå€¼å°è£…ç»™javaBeançš„å“ªä¸ªå±æ€§</li></ul></li></ul><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- public void addEmp(Employee employee); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmp&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> &gt;</span></span><br><span class="line">insert into employee(last_name,email,gender) </span><br><span class="line">values(#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="18-æ˜ å°„æ–‡ä»¶-insert-Oracleä½¿ç”¨åºåˆ—ç”Ÿæˆä¸»é”®æ¼”ç¤º"><a href="#18-æ˜ å°„æ–‡ä»¶-insert-Oracleä½¿ç”¨åºåˆ—ç”Ÿæˆä¸»é”®æ¼”ç¤º" class="headerlink" title="18.æ˜ å°„æ–‡ä»¶-insert-Oracleä½¿ç”¨åºåˆ—ç”Ÿæˆä¸»é”®æ¼”ç¤º"></a>18.æ˜ å°„æ–‡ä»¶-insert-Oracleä½¿ç”¨åºåˆ—ç”Ÿæˆä¸»é”®æ¼”ç¤º</h2><ul><li>Oracleä¸æ”¯æŒè‡ªå¢ï¼›Oracleä½¿ç”¨åºåˆ—æ¥æ¨¡æ‹Ÿè‡ªå¢ï¼›</li><li>æ¯æ¬¡æ’å…¥çš„æ•°æ®çš„ä¸»é”®æ˜¯ä»åºåˆ—ä¸­æ‹¿åˆ°çš„å€¼ï¼›å¦‚ä½•è·å–åˆ°è¿™ä¸ªå€¼ï¼›</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä»åºåˆ—è·å–æ–°ä¸»é”®å€¼</span><br><span class="line"><span class="keyword">select</span> employee_seq.nextval <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure><h2 id="19-oracleä½¿ç”¨ï¼‰æ˜ å°„æ–‡ä»¶-insert-è·å–éè‡ªå¢ä¸»é”®çš„å€¼-selectKey"><a href="#19-oracleä½¿ç”¨ï¼‰æ˜ å°„æ–‡ä»¶-insert-è·å–éè‡ªå¢ä¸»é”®çš„å€¼-selectKey" class="headerlink" title="19.(oracleä½¿ç”¨ï¼‰æ˜ å°„æ–‡ä»¶-insert-è·å–éè‡ªå¢ä¸»é”®çš„å€¼-selectKey"></a>19.(oracleä½¿ç”¨ï¼‰æ˜ å°„æ–‡ä»¶-insert-è·å–éè‡ªå¢ä¸»é”®çš„å€¼-selectKey</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmp&quot;</span> <span class="attr">databaseId</span>=<span class="string">&quot;oracle&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">keyProperty:æŸ¥å‡ºçš„ä¸»é”®å€¼å°è£…ç»™javaBeançš„å“ªä¸ªå±æ€§</span></span><br><span class="line"><span class="comment">order=&quot;BEFORE&quot;:å½“å‰sqlåœ¨æ’å…¥sqlä¹‹å‰è¿è¡Œ</span></span><br><span class="line"><span class="comment">   AFTERï¼šå½“å‰sqlåœ¨æ’å…¥sqlä¹‹åè¿è¡Œ</span></span><br><span class="line"><span class="comment">resultType:æŸ¥å‡ºçš„æ•°æ®çš„è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">BEFOREè¿è¡Œé¡ºåºï¼š</span></span><br><span class="line"><span class="comment">å…ˆè¿è¡ŒselectKeyæŸ¥è¯¢idçš„sqlï¼›æŸ¥å‡ºidå€¼å°è£…ç»™javaBeançš„idå±æ€§</span></span><br><span class="line"><span class="comment">åœ¨è¿è¡Œæ’å…¥çš„sqlï¼›å°±å¯ä»¥å–å‡ºidå±æ€§å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="comment">AFTERè¿è¡Œé¡ºåºï¼š</span></span><br><span class="line"><span class="comment">å…ˆè¿è¡Œæ’å…¥çš„sqlï¼ˆä»åºåˆ—ä¸­å–å‡ºæ–°å€¼ä½œä¸ºidï¼‰ï¼›</span></span><br><span class="line"><span class="comment">å†è¿è¡ŒselectKeyæŸ¥è¯¢idçš„sqlï¼›</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç¼–å†™æŸ¥è¯¢ä¸»é”®çš„sqlè¯­å¥ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- BEFORE--&gt;</span></span><br><span class="line">select EMPLOYEES_SEQ.nextval from dual </span><br><span class="line"><span class="comment">&lt;!-- AFTERï¼š</span></span><br><span class="line"><span class="comment"> select EMPLOYEES_SEQ.currval from dual --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ’å…¥æ—¶çš„ä¸»é”®æ˜¯ä»åºåˆ—ä¸­æ‹¿åˆ°çš„ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- BEFORE:--&gt;</span></span><br><span class="line">insert into employees(EMPLOYEE_ID,LAST_NAME,EMAIL) </span><br><span class="line">values(#&#123;id&#125;,#&#123;lastName&#125;,#&#123;email<span class="comment">&lt;!-- ,jdbcType=NULL --&gt;</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- AFTERï¼š</span></span><br><span class="line"><span class="comment">insert into employees(EMPLOYEE_ID,LAST_NAME,EMAIL) </span></span><br><span class="line"><span class="comment">values(employees_seq.nextval,#&#123;lastName&#125;,#&#123;email&#125;) --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>selectKey å…ƒç´ çš„å±æ€§</strong></p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>keyProperty</td><td>selectKey è¯­å¥ç»“æœåº”è¯¥è¢«è®¾ç½®åˆ°çš„ç›®æ ‡å±æ€§ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td>keyColumn</td><td>è¿”å›ç»“æœé›†ä¸­ç”Ÿæˆåˆ—å±æ€§çš„åˆ—åã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td>resultType</td><td>ç»“æœçš„ç±»å‹ã€‚é€šå¸¸ MyBatis å¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ å‡†ç¡®ï¼Œå†™ä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚MyBatis å…è®¸å°†ä»»ä½•ç®€å•ç±»å‹ç”¨ä½œä¸»é”®çš„ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒ…å«æœŸæœ›å±æ€§çš„ Object æˆ– Mapã€‚</td></tr><tr><td>order</td><td>å¯ä»¥è®¾ç½®ä¸º BEFORE æˆ– AFTERã€‚å¦‚æœè®¾ç½®ä¸º BEFOREï¼Œé‚£ä¹ˆå®ƒé¦–å…ˆä¼šç”Ÿæˆä¸»é”®ï¼Œè®¾ç½® keyProperty å†æ‰§è¡Œæ’å…¥è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º AFTERï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ˜¯ selectKey ä¸­çš„è¯­å¥ - è¿™å’Œ Oracle æ•°æ®åº“çš„è¡Œä¸ºç›¸ä¼¼ï¼Œåœ¨æ’å…¥è¯­å¥å†…éƒ¨å¯èƒ½æœ‰åµŒå…¥ç´¢å¼•è°ƒç”¨ã€‚</td></tr><tr><td>statementType</td><td>å’Œå‰é¢ä¸€æ ·ï¼ŒMyBatis æ”¯æŒ STATEMENTï¼ŒPREPARED å’Œ CALLABLE ç±»å‹çš„æ˜ å°„è¯­å¥ï¼Œåˆ†åˆ«ä»£è¡¨ Statement, PreparedStatement å’Œ CallableStatement ç±»å‹ã€‚</td></tr></tbody></table><h2 id="20-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å•ä¸ªå‚æ•°-amp-å¤šä¸ªå‚æ•°-amp-å‘½åå‚æ•°"><a href="#20-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å•ä¸ªå‚æ•°-amp-å¤šä¸ªå‚æ•°-amp-å‘½åå‚æ•°" class="headerlink" title="20.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å•ä¸ªå‚æ•°&amp;å¤šä¸ªå‚æ•°&amp;å‘½åå‚æ•°"></a>20.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å•ä¸ªå‚æ•°&amp;å¤šä¸ªå‚æ•°&amp;å‘½åå‚æ•°</h2><ul><li>å•ä¸ªå‚æ•°ï¼šmybatisä¸ä¼šåšç‰¹æ®Šå¤„ç†ï¼Œ<ul><li><code>#&#123;å‚æ•°å/ä»»æ„å&#125;</code>ï¼šå–å‡ºå‚æ•°å€¼ã€‚</li></ul></li><li>å¤šä¸ªå‚æ•°ï¼šmybatisä¼šåšç‰¹æ®Šå¤„ç†ã€‚<ul><li>é€šå¸¸æ“ä½œï¼š<ul><li>æ–¹æ³•ï¼špublic Employee getEmpByIdAndLastName(Integer id,String lastName);</li><li>å–å€¼ï¼š<code>#&#123;id&#125;</code>,<code>#&#123;lastName&#125;</code></li></ul></li><li>ä¸Šè¿°æ“ä½œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š<code>org.apache.ibatis.binding.BindingException: Parameter &#39;id&#39; not found. Available parameters are [1, 0, param1, param2]</code></li><li>å¤šä¸ªå‚æ•°ä¼šè¢«å°è£…æˆ ä¸€ä¸ªmapï¼Œ<ul><li>keyï¼šparam1â€¦paramN,æˆ–è€…å‚æ•°çš„ç´¢å¼•ä¹Ÿå¯ä»¥</li><li>valueï¼šä¼ å…¥çš„å‚æ•°å€¼</li></ul></li><li><code>#&#123;&#125;</code>å°±æ˜¯ä»mapä¸­è·å–æŒ‡å®šçš„keyçš„å€¼ï¼›</li></ul></li><li>ã€å‘½åå‚æ•°ã€‘ï¼šæ˜ç¡®æŒ‡å®šå°è£…å‚æ•°æ—¶mapçš„keyï¼›@Param(â€œidâ€)<ul><li>å¤šä¸ªå‚æ•°ä¼šè¢«å°è£…æˆ ä¸€ä¸ªmapï¼Œ<ul><li>keyï¼šä½¿ç”¨@Paramæ³¨è§£æŒ‡å®šçš„å€¼</li><li>valueï¼šå‚æ•°å€¼</li></ul></li><li><code>#&#123;æŒ‡å®šçš„key&#125;</code>å–å‡ºå¯¹åº”çš„å‚æ•°å€¼</li></ul></li></ul><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testParameters</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. </span></span><br><span class="line"><span class="comment">//å•ä¸ªå‚æ•°ï¼šmybatisä¸ä¼šåšç‰¹æ®Šå¤„ç†</span></span><br><span class="line">System.out.println(mapper.getEmpById2(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.</span></span><br><span class="line"><span class="comment">//å¤šä¸ªå‚æ•°ï¼Œæœªä½œå¤„ç† ï¼Œmapperç›´ç”¨#&#123;id&#125;,#&#123;lastName&#125;ä¼šæŠ›å¼‚å¸¸ </span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">System.out.println(mapper.getEmpByIdAndLastName(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>));</span><br><span class="line"><span class="comment">//org.apache.ibatis.exceptions.PersistenceException: </span></span><br><span class="line"><span class="comment">//### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter &#x27;id&#x27; not found. Available parameters are [0, 1, param1, param2]</span></span><br><span class="line"><span class="comment">//### Cause: org.apache.ibatis.binding.BindingException: Parameter &#x27;id&#x27; not found. Available parameters are [0, 1, param1, param2]</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(PersistenceException ex) &#123;</span><br><span class="line">System.err.println(ex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šä¸ªå‚æ•°ä¼šè¢«å°è£…æˆ ä¸€ä¸ªmap</span></span><br><span class="line"><span class="comment">//keyï¼šparam1...paramN,æˆ–è€…å‚æ•°çš„ç´¢å¼•0, 1..ä¹Ÿå¯ä»¥(è¿™ç§æ–¹æ³•çš„å¯è¯»æ€§è¾ƒå·®)</span></span><br><span class="line"><span class="comment">//valueï¼šä¼ å…¥çš„å‚æ•°å€¼</span></span><br><span class="line">System.out.println(mapper.getEmpByIdAndLastName2(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>));</span><br><span class="line">System.out.println(mapper.getEmpByIdAndLastName3(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. </span></span><br><span class="line"><span class="comment">//ã€å‘½åå‚æ•°ã€‘ï¼šæ˜ç¡®æŒ‡å®šå°è£…å‚æ•°æ—¶mapçš„keyï¼›@Param(&quot;id&quot;)</span></span><br><span class="line">System.out.println(mapper.getEmpByIdAndLastName4(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¤šä¸ªå‚æ•°ï¼Œä¸èƒ½ç›´å†™idæˆ–lastNameï¼Œå¦åˆ™æŠ›å‡º org.apache.ibatis.binding.BindingException: Parameter &#x27;id&#x27; not found. Available parameters are [1, 0, param1, param2]--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdAndLastName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from tbl_employee where id = #&#123;id&#125; and last_name=#&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdAndLastName2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id = #&#123;0&#125; and last_name=#&#123;1&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdAndLastName3&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id = #&#123;param1&#125; and last_name=#&#123;param2&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdAndLastName4&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id = #&#123;id&#125; and last_name=#&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdAndLastName</span><span class="params">(Integer id, String name)</span>;</span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdAndLastName2</span><span class="params">(Integer id, String name)</span>;</span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdAndLastName3</span><span class="params">(Integer id, String name)</span>;</span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdAndLastName4</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span>Integer id,// </span></span><br><span class="line"><span class="params"><span class="meta">@Param(&quot;lastName&quot;)</span>String name)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="21-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-POJO-amp-Map-amp-TO"><a href="#21-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-POJO-amp-Map-amp-TO" class="headerlink" title="21.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-POJO&amp;Map&amp;TO"></a>21.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-POJO&amp;Map&amp;TO</h2><ul><li>POJOï¼šå¦‚æœå¤šä¸ªå‚æ•°æ­£å¥½æ˜¯æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘çš„æ•°æ®æ¨¡å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä¼ å…¥pojoï¼›<ul><li><code>#&#123;å±æ€§å&#125;</code>ï¼šå–å‡ºä¼ å…¥çš„pojoçš„å±æ€§å€¼</li></ul></li><li>Mapï¼šå¦‚æœå¤šä¸ªå‚æ•°ä¸æ˜¯ä¸šåŠ¡æ¨¡å‹ä¸­çš„æ•°æ®ï¼Œæ²¡æœ‰å¯¹åº”çš„pojoï¼Œä¸ç»å¸¸ä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ å…¥map<ul><li><code>#&#123;key&#125;</code>ï¼šå–å‡ºmapä¸­å¯¹åº”çš„å€¼</li></ul></li><li>TOï¼šå¦‚æœå¤šä¸ªå‚æ•°ä¸æ˜¯ä¸šåŠ¡æ¨¡å‹ä¸­çš„æ•°æ®ï¼Œä½†æ˜¯ç»å¸¸è¦ä½¿ç”¨ï¼Œæ¨èæ¥ç¼–å†™ä¸€ä¸ªTOï¼ˆTransfer Objectï¼‰æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œå¦‚ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Page&#123;</span><br><span class="line"><span class="type">int</span> index;</span><br><span class="line"><span class="type">int</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testParameters</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">//4.</span></span><br><span class="line"><span class="comment">//ä¼ å…¥map</span></span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;lastName&quot;</span>, <span class="string">&quot;jallen&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;4. &quot;</span> + mapper.getEmpByMap(map));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- map ä½œå‚è¾“å…¥ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id = #&#123;id&#125; and last_name=#&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="22-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å‚æ•°å°è£…æ‰©å±•æ€è€ƒ"><a href="#22-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å‚æ•°å°è£…æ‰©å±•æ€è€ƒ" class="headerlink" title="22.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å‚æ•°å°è£…æ‰©å±•æ€è€ƒ"></a>22.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å‚æ•°å°è£…æ‰©å±•æ€è€ƒ</h2><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ€è€ƒ&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><ul><li><p><code>public Employee getEmp(@Param(&quot;id&quot;)Integer id,String lastName);</code></p><ul><li>å–å€¼ï¼šid&#x3D;&#x3D;&gt;#{id&#x2F;param1}   lastName&#x3D;&#x3D;&gt;#{param2}</li></ul></li><li><p><code>public Employee getEmp(Integer id,@Param(&quot;e&quot;)Employee emp);</code></p><ul><li>å–å€¼ï¼šid&#x3D;&#x3D;&gt;#{param1}    lastName&#x3D;&#x3D;&#x3D;&gt;#{param2.lastName&#x2F;e.lastName}</li></ul></li><li><p><strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼šå¦‚æœæ˜¯Collectionï¼ˆListã€Setï¼‰ç±»å‹æˆ–è€…æ˜¯æ•°ç»„ï¼Œ</p><ul><li>ä¹Ÿä¼šç‰¹æ®Šå¤„ç†ã€‚ä¹Ÿæ˜¯æŠŠä¼ å…¥çš„listæˆ–è€…æ•°ç»„å°è£…åœ¨mapä¸­ã€‚</li><li>keyï¼šCollectionï¼ˆcollectionï¼‰,å¦‚æœæ˜¯Listè¿˜å¯ä»¥ä½¿ç”¨è¿™ä¸ªkey(list)</li><li><code>public Employee getEmpById(List&lt;Integer&gt; ids);</code><ul><li>å–å€¼ï¼šå–å‡ºç¬¬ä¸€ä¸ªidçš„å€¼ï¼š   #{list[0]}</li></ul></li></ul></li></ul><h2 id="23-æºç åˆ†æ-å‚æ•°å¤„ç†-å‚æ•°å°è£…mapçš„è¿‡ç¨‹"><a href="#23-æºç åˆ†æ-å‚æ•°å¤„ç†-å‚æ•°å°è£…mapçš„è¿‡ç¨‹" class="headerlink" title="23.æºç åˆ†æ-å‚æ•°å¤„ç†-å‚æ•°å°è£…mapçš„è¿‡ç¨‹"></a>23.æºç åˆ†æ-å‚æ•°å¤„ç†-å‚æ•°å°è£…mapçš„è¿‡ç¨‹</h2><p><strong>ç»“åˆæºç ï¼Œmybatisæ€ä¹ˆå¤„ç†å‚æ•°</strong></p><ul><li>(@Param(â€œidâ€)Integer id,@Param(â€œlastNameâ€)String lastName);</li><li>ParamNameResolverè§£æå‚æ•°å°è£…mapçš„ï¼›</li><li>namesï¼š{0&#x3D;id, 1&#x3D;lastName}ï¼›æ„é€ å™¨çš„æ—¶å€™å°±ç¡®å®šå¥½äº†</li></ul><p>ç¡®å®šæµç¨‹ï¼š<br>1.è·å–æ¯ä¸ªæ ‡äº†paramæ³¨è§£çš„å‚æ•°çš„@Paramçš„å€¼ï¼šidï¼ŒlastNameï¼›  èµ‹å€¼ç»™name;<br>2.æ¯æ¬¡è§£æä¸€ä¸ªå‚æ•°ç»™mapä¸­ä¿å­˜ä¿¡æ¯ï¼šï¼ˆkeyï¼šå‚æ•°ç´¢å¼•ï¼Œvalueï¼šnameçš„å€¼ï¼‰<br>nameçš„å€¼ï¼š<br>æ ‡æ³¨äº†paramæ³¨è§£ï¼šæ³¨è§£çš„å€¼<br>æ²¡æœ‰æ ‡æ³¨ï¼š<br>1.å…¨å±€é…ç½®ï¼šuseActualParamNameï¼ˆjdk1.8ï¼‰ï¼šname&#x3D;å‚æ•°å<br>2.name&#x3D;map.size()ï¼›ç›¸å½“äºå½“å‰å…ƒç´ çš„ç´¢å¼•<br>{0&#x3D;id, 1&#x3D;lastName,2&#x3D;2}</p><p>argsã€1ï¼Œâ€Tomâ€,â€™helloâ€™ã€‘:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">getNamedParams</span><span class="params">(Object[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">paramCount</span> <span class="operator">=</span> names.size();</span><br><span class="line">    <span class="comment">//1ã€å‚æ•°ä¸ºnullç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (args == <span class="literal">null</span> || paramCount == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//2ã€å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰Paramæ³¨è§£ï¼›args[0]ï¼šå•ä¸ªå‚æ•°ç›´æ¥è¿”å›</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!hasParamAnnotation &amp;&amp; paramCount == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> args[names.firstKey()];</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//3ã€å¤šä¸ªå…ƒç´ æˆ–è€…æœ‰Paramæ ‡æ³¨</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> Map&lt;String, Object&gt; param = <span class="keyword">new</span> <span class="title class_">ParamMap</span>&lt;Object&gt;();</span><br><span class="line">      <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//4ã€éå†namesé›†åˆï¼›&#123;0=id, 1=lastName,2=2&#125;</span></span><br><span class="line">      <span class="keyword">for</span> (Map.Entry&lt;Integer, String&gt; entry : names.entrySet()) &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//namesé›†åˆçš„valueä½œä¸ºkey;  namesé›†åˆçš„keyåˆä½œä¸ºå–å€¼çš„å‚è€ƒargs[0]:argsã€1ï¼Œ&quot;Tom&quot;ã€‘:</span></span><br><span class="line">      <span class="comment">//eg:&#123;id=args[0]:1,lastName=args[1]:Tom,2=args[2]&#125;</span></span><br><span class="line">        param.put(entry.getValue(), args[entry.getKey()]);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// add generic param names (param1, param2, ...)param</span></span><br><span class="line">        <span class="comment">//é¢å¤–çš„å°†æ¯ä¸€ä¸ªå‚æ•°ä¹Ÿä¿å­˜åˆ°mapä¸­ï¼Œä½¿ç”¨æ–°çš„keyï¼šparam1...paramN</span></span><br><span class="line">        <span class="comment">//æ•ˆæœï¼šæœ‰Paramæ³¨è§£å¯ä»¥#&#123;æŒ‡å®šçš„key&#125;ï¼Œæˆ–è€…#&#123;param1&#125;</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">genericParamName</span> <span class="operator">=</span> GENERIC_NAME_PREFIX + String.valueOf(i + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// ensure not to overwrite parameter named with @Param</span></span><br><span class="line">        <span class="keyword">if</span> (!names.containsValue(genericParamName)) &#123;</span><br><span class="line">          param.put(genericParamName, args[entry.getKey()]);</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> param;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong>ï¼šå‚æ•°å¤šæ—¶ä¼šå°è£…mapï¼Œä¸ºäº†ä¸æ··ä¹±ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Paramæ¥æŒ‡å®šå°è£…æ—¶ä½¿ç”¨çš„keyï¼›#{key}å°±å¯ä»¥å–å‡ºmapä¸­çš„å€¼ï¼›</p><h2 id="24-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-ä¸-å–å€¼åŒºåˆ«"><a href="#24-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-ä¸-å–å€¼åŒºåˆ«" class="headerlink" title="24.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-#ä¸$å–å€¼åŒºåˆ«"></a>24.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-#ä¸$å–å€¼åŒºåˆ«</h2><p><code>#&#123;&#125;</code>å’Œ<code>$&#123;&#125;</code>éƒ½å¯ä»¥è·å–mapä¸­çš„å€¼æˆ–è€…pojoå¯¹è±¡å±æ€§çš„å€¼ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_employee <span class="keyword">where</span> id<span class="operator">=</span>$&#123;id&#125; <span class="keyword">and</span> last_name<span class="operator">=</span>#&#123;lastName&#125;</span><br><span class="line">#Preparing:</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_employee <span class="keyword">where</span> id<span class="operator">=</span><span class="number">2</span> <span class="keyword">and</span> last_name<span class="operator">=</span>?</span><br></pre></td></tr></table></figure><p><strong>åŒºåˆ«</strong>ï¼š</p><ul><li><code>#&#123;&#125;</code> : æ˜¯ä»¥é¢„ç¼–è¯‘çš„å½¢å¼ï¼Œå°†å‚æ•°è®¾ç½®åˆ°sqlè¯­å¥ä¸­ï¼›PreparedStatementï¼›é˜²æ­¢sqlæ³¨å…¥</li><li><code>$&#123;&#125;</code> : å–å‡ºçš„å€¼<strong>ç›´æ¥æ‹¼è£…</strong>åœ¨sqlè¯­å¥ä¸­ï¼›ä¼šæœ‰å®‰å…¨é—®é¢˜ï¼›</li></ul><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»å‚æ•°çš„å€¼éƒ½åº”è¯¥å»ä½¿ç”¨<code>#&#123;&#125;</code>ã€‚</p><p>åŸç”Ÿjdbcä¸æ”¯æŒå ä½ç¬¦çš„åœ°æ–¹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>$&#123;&#125;</code>è¿›è¡Œå–å€¼ï¼Œæ¯”å¦‚åˆ†è¡¨ã€æ’åºã€‚ã€‚ã€‚ï¼›æŒ‰ç…§å¹´ä»½åˆ†è¡¨æ‹†åˆ†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> $&#123;<span class="keyword">year</span>&#125;_salary <span class="keyword">where</span> xxx;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_employee <span class="keyword">order</span> <span class="keyword">by</span> $&#123;f_name&#125; $&#123;<span class="keyword">order</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="25-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å–å€¼æ—¶æŒ‡å®šå‚æ•°ç›¸å…³è§„åˆ™"><a href="#25-æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-å–å€¼æ—¶æŒ‡å®šå‚æ•°ç›¸å…³è§„åˆ™" class="headerlink" title="25.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-#å–å€¼æ—¶æŒ‡å®šå‚æ•°ç›¸å…³è§„åˆ™"></a>25.æ˜ å°„æ–‡ä»¶-å‚æ•°å¤„ç†-#å–å€¼æ—¶æŒ‡å®šå‚æ•°ç›¸å…³è§„åˆ™</h2><p><code>#&#123;&#125;</code>:æ›´ä¸°å¯Œçš„ç”¨æ³•ï¼š</p><p>è§„å®šå‚æ•°çš„ä¸€äº›è§„åˆ™ï¼š</p><ul><li>javaTypeã€</li><li>jdbcTypeã€</li><li>modeï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰ã€</li><li>numericScaleã€</li><li>resultMapã€</li><li>typeHandlerã€</li><li>jdbcTypeNameã€</li><li>expressionï¼ˆæœªæ¥å‡†å¤‡æ”¯æŒçš„åŠŸèƒ½ï¼‰ï¼›</li></ul><p>ä¾‹å¦‚ï¼šjdbcType</p><p>jdbcTypeé€šå¸¸éœ€è¦åœ¨æŸç§ç‰¹å®šçš„æ¡ä»¶ä¸‹è¢«è®¾ç½®ï¼š</p><ul><li>åœ¨æˆ‘ä»¬æ•°æ®ä¸ºnullçš„æ—¶å€™ï¼Œæœ‰äº›æ•°æ®åº“å¯èƒ½ä¸èƒ½è¯†åˆ«mybatiså¯¹nullçš„é»˜è®¤å¤„ç†ã€‚æ¯”å¦‚Oracle DBï¼ˆæŠ¥é”™ï¼‰ï¼›</li><li>JdbcType OTHERï¼šæ— æ•ˆçš„ç±»å‹ï¼›å› ä¸ºmybatiså¯¹æ‰€æœ‰çš„nulléƒ½æ˜ å°„çš„æ˜¯åŸç”ŸJdbcçš„OTHERç±»å‹ï¼ŒOracle DBä¸èƒ½æ­£ç¡®å¤„ç†;</li></ul><p>ç”±äºå…¨å±€é…ç½®ä¸­ï¼šjdbcTypeForNull&#x3D;OTHERï¼ŒOracle DBä¸æ”¯æŒï¼Œä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p><ol><li>åœ¨mapperæ–‡ä»¶ä¸­å†™<code>#&#123;email,jdbcType=NULL&#125;</code>;</li><li>åœ¨å…¨å±€é…ç½®æ–‡ä»¶<code>&lt;setting name=&quot;jdbcTypeForNull&quot; value=&quot;NULL&quot;/&gt;</code></li></ol><h2 id="26-æ˜ å°„æ–‡ä»¶-select-è¿”å›List"><a href="#26-æ˜ å°„æ–‡ä»¶-select-è¿”å›List" class="headerlink" title="26.æ˜ å°„æ–‡ä»¶-select-è¿”å›List"></a>26.æ˜ å°„æ–‡ä»¶-select-è¿”å›List</h2><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- public List&lt;Employee&gt; getEmpsByLastNameLike(String lastName); --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--resultTypeï¼šå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œè¦å†™é›†åˆä¸­å…ƒç´ çš„ç±»å‹  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByLastNameLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select * from employee where last_name like #&#123;lastName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//// return Collection</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByLastNameLike</span><span class="params">(String str)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testList</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line">List&lt;Employee&gt; result = em.getEmpsByLastNameLike(<span class="string">&quot;%a%&quot;</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="27-æ˜ å°„æ–‡ä»¶-select-è®°å½•å°è£…map"><a href="#27-æ˜ å°„æ–‡ä»¶-select-è®°å½•å°è£…map" class="headerlink" title="27.æ˜ å°„æ–‡ä»¶-select-è®°å½•å°è£…map"></a>27.æ˜ å°„æ–‡ä»¶-select-è®°å½•å°è£…map</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šæ¡è®°å½•å°è£…ä¸€ä¸ªmapï¼šMap&lt;Integer,Employee&gt;:é”®æ˜¯è¿™æ¡è®°å½•çš„ä¸»é”®ï¼Œå€¼æ˜¯è®°å½•å°è£…åçš„javaBean</span></span><br><span class="line"><span class="comment">//@MapKey:å‘Šè¯‰mybatiså°è£…è¿™ä¸ªmapçš„æ—¶å€™ä½¿ç”¨å“ªä¸ªå±æ€§ä½œä¸ºmapçš„key</span></span><br><span class="line"><span class="meta">@MapKey(&quot;lastName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Employee&gt; <span class="title function_">getEmpByLastNameLikeReturnMap</span><span class="params">(String lastName)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ä¸€æ¡è®°å½•çš„mapï¼›keyå°±æ˜¯åˆ—åï¼Œå€¼å°±æ˜¯å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">getEmpByIdReturnMap</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--public Map&lt;Integer, Employee&gt; getEmpByLastNameLikeReturnMap(String lastName);  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByLastNameLikeReturnMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where last_name like #&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">&lt;!--public Map&lt;String, Object&gt; getEmpByIdReturnMap(Integer id);  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdReturnMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">MapperTest</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMap</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line">Map&lt;String, Object&gt; result = em.getEmpByIdReturnMap(<span class="number">1</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;---&quot;</span>);</span><br><span class="line">Map&lt;String, Employee&gt; result2 = em.getEmpByLastNameLikeReturnMap(<span class="string">&quot;%a%&quot;</span>);</span><br><span class="line">System.out.println(result2);</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="28-æ˜ å°„æ–‡ä»¶-select-resultMap-è‡ªå®šä¹‰ç»“æœæ˜ å°„è§„åˆ™"><a href="#28-æ˜ å°„æ–‡ä»¶-select-resultMap-è‡ªå®šä¹‰ç»“æœæ˜ å°„è§„åˆ™" class="headerlink" title="28.æ˜ å°„æ–‡ä»¶-select-resultMap-è‡ªå®šä¹‰ç»“æœæ˜ å°„è§„åˆ™"></a>28.æ˜ å°„æ–‡ä»¶-select-resultMap-è‡ªå®šä¹‰ç»“æœæ˜ å°„è§„åˆ™</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç»“æœæ˜ å°„è§„åˆ™</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdWithResultMap</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--è‡ªå®šä¹‰æŸä¸ªjavaBeançš„å°è£…è§„åˆ™</span></span><br><span class="line"><span class="comment">typeï¼šè‡ªå®šä¹‰è§„åˆ™çš„Javaç±»å‹</span></span><br><span class="line"><span class="comment">id:å”¯ä¸€idæ–¹ä¾¿å¼•ç”¨</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MySimpleEmp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æŒ‡å®šä¸»é”®åˆ—çš„å°è£…è§„åˆ™</span></span><br><span class="line"><span class="comment">idå®šä¹‰ä¸»é”®ä¼šåº•å±‚æœ‰ä¼˜åŒ–ï¼›</span></span><br><span class="line"><span class="comment">columnï¼šæŒ‡å®šå“ªä¸€åˆ—</span></span><br><span class="line"><span class="comment">propertyï¼šæŒ‡å®šå¯¹åº”çš„javaBeanå±æ€§</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å®šä¹‰æ™®é€šåˆ—å°è£…è§„åˆ™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å…¶ä»–ä¸æŒ‡å®šçš„åˆ—ä¼šè‡ªåŠ¨å°è£…ï¼šæˆ‘ä»¬åªè¦å†™resultMapå°±æŠŠå…¨éƒ¨çš„æ˜ å°„è§„åˆ™éƒ½å†™ä¸Šã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- resultMap:è‡ªå®šä¹‰ç»“æœé›†æ˜ å°„è§„åˆ™ï¼›  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdWithResultMap&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;MySimpleEmp&quot;</span>&gt;</span></span><br><span class="line">select * from employee where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultMap</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(em.getEmpByIdWithResultMap(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="29-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-ç¯å¢ƒæ­å»º"><a href="#29-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-ç¯å¢ƒæ­å»º" class="headerlink" title="29.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-ç¯å¢ƒæ­å»º"></a>29.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-ç¯å¢ƒæ­å»º</h2><p>æ–°å»ºç±»<a href="src/main/java/com/lun/c01/helloworld/bean/Department.java">Department.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String departmentName;</span><br><span class="line"><span class="keyword">private</span> List&lt;Employee&gt; emps;</span><br><span class="line"></span><br><span class="line"><span class="comment">//getter and setter and toString()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p>ä¿®æ”¹ç±»<a href="src/main/java/com/lun/c01/helloworld/bean/Employee.java">Employee.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">private</span> Department department;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//add department&#x27;s getter and setter</span></span><br></pre></td></tr></table></figure><hr><p>åˆ›å»ºæ•°æ®åº“è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> department(</span><br><span class="line">id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">department_name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> department_id <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_employee_department </span><br><span class="line"><span class="keyword">FOREIGN</span> KEY(department_id) <span class="keyword">REFERENCES</span> department(id);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department(department_name) <span class="keyword">values</span> (<span class="string">&#x27;å¼€å‘éƒ¨&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> department(department_name) <span class="keyword">values</span> (<span class="string">&#x27;æµ‹è¯•éƒ¨&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="30-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-çº§è”å±æ€§å°è£…ç»“æœ"><a href="#30-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-çº§è”å±æ€§å°è£…ç»“æœ" class="headerlink" title="30.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-çº§è”å±æ€§å°è£…ç»“æœ"></a>30.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-çº§è”å±æ€§å°è£…ç»“æœ</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è”åˆæŸ¥è¯¢ï¼šçº§è”å±æ€§å°è£…ç»“æœé›†</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpAndDept</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è”åˆæŸ¥è¯¢ï¼šçº§è”å±æ€§å°è£…ç»“æœé›†</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDifEmp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;department_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;department.id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;department_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;department.departmentName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  public Employee getEmpAndDept(Integer id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDept&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDifEmp&quot;</span>&gt;</span></span><br><span class="line">SELECT</span><br><span class="line">e.id id,e.last_name last_name,e.gender gender,</span><br><span class="line">e.department_id department_id, d.department_name department_name </span><br><span class="line">FROM employee e, department d</span><br><span class="line">WHERE e.department_id=d.id AND e.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultMapAssociation</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(em.getEmpAndDept(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="31-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationå®šä¹‰å…³è”å¯¹è±¡å°è£…è§„åˆ™"><a href="#31-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationå®šä¹‰å…³è”å¯¹è±¡å°è£…è§„åˆ™" class="headerlink" title="31.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationå®šä¹‰å…³è”å¯¹è±¡å°è£…è§„åˆ™"></a>31.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationå®šä¹‰å…³è”å¯¹è±¡å°è£…è§„åˆ™</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è”åˆæŸ¥è¯¢ï¼šçº§è”å±æ€§å°è£…ç»“æœé›†</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpAndDept2</span><span class="params">(Integer id)</span>;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><font>æ³¨æ„ï¼šä½¿ç”¨è¯¥æ–¹æ³•ä¸å†™çš„columnå’Œpropertyä¸ä¼šè‡ªåŠ¨å°è£…ï¼Œå› æ­¤å¿…é¡»å†™å…¨ï¼Œä¸èƒ½å·æ‡’ï¼</font></p><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  associationå¯ä»¥æŒ‡å®šè”åˆçš„javaBeanå¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDifEmp2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  associationå¯ä»¥æŒ‡å®šè”åˆçš„javaBeanå¯¹è±¡</span></span><br><span class="line"><span class="comment">property=&quot;dept&quot;ï¼šæŒ‡å®šå“ªä¸ªå±æ€§æ˜¯è”åˆçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">javaType:æŒ‡å®šè¿™ä¸ªå±æ€§å¯¹è±¡çš„ç±»å‹[ä¸èƒ½çœç•¥]</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;department&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Department&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;department_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;department_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  public Employee getEmpAndDept2(Integer id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDept2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDifEmp2&quot;</span>&gt;</span></span><br><span class="line">SELECT</span><br><span class="line">e.id id,e.last_name last_name,e.gender gender,</span><br><span class="line">e.department_id department_id, d.department_name department_name </span><br><span class="line">FROM employee e, department d</span><br><span class="line">WHERE e.department_id=d.id AND e.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultMapAssociation2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(em.getEmpAndDept2(<span class="number">1</span>));</span><br><span class="line">System.out.println(em.getEmpAndDept2(<span class="number">1</span>).getDepartment());</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="32-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationåˆ†æ­¥æŸ¥è¯¢"><a href="#32-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationåˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="32.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationåˆ†æ­¥æŸ¥è¯¢"></a>32.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-associationåˆ†æ­¥æŸ¥è¯¢</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/DepartmentMapper.java">DepartmentMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DepartmentMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Department <span class="title function_">getDeptById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/DepartmentMapper.xml">DepartmentMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--public Department getDeptById(Integer id);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Department&quot;</span>&gt;</span></span><br><span class="line">select id,department_name departmentName from department where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;c03/EmployeeMapper.xml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;c03/DepartmentMapper.xml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//associationåˆ†æ­¥æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpByIdStep</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- associationåˆ†æ­¥æŸ¥è¯¢  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨associationè¿›è¡Œåˆ†æ­¥æŸ¥è¯¢ï¼š</span></span><br><span class="line"><span class="comment">1ã€å…ˆæŒ‰ç…§å‘˜å·¥idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">2ã€æ ¹æ®æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ä¸­çš„department_idå€¼å»éƒ¨é—¨è¡¨æŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">3ã€éƒ¨é—¨è®¾ç½®åˆ°å‘˜å·¥ä¸­ï¼›</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--  id  last_name  email   gender    d_id   --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyEmpByStep&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- associationå®šä¹‰å…³è”å¯¹è±¡çš„å°è£…è§„åˆ™</span></span><br><span class="line"><span class="comment"> select:è¡¨æ˜å½“å‰å±æ€§æ˜¯è°ƒç”¨selectæŒ‡å®šçš„æ–¹æ³•æŸ¥å‡ºçš„ç»“æœ</span></span><br><span class="line"><span class="comment"> column:æŒ‡å®šå°†å“ªä¸€åˆ—çš„å€¼ä¼ ç»™è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> æµç¨‹ï¼šä½¿ç”¨selectæŒ‡å®šçš„æ–¹æ³•ï¼ˆä¼ å…¥columnæŒ‡å®šçš„è¿™åˆ—å‚æ•°çš„å€¼ï¼‰æŸ¥å‡ºå¯¹è±¡ï¼Œå¹¶å°è£…ç»™propertyæŒ‡å®šçš„å±æ€§</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;department&quot;</span> </span></span><br><span class="line"><span class="tag"> <span class="attr">select</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper.getDeptById&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">column</span>=<span class="string">&quot;department_id&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--  public Employee getEmpByIdStep(Integer id);--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyEmpByStep&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testResultMapAssociation3</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(em.getEmpByIdStep(<span class="number">1</span>));</span><br><span class="line">System.out.println(em.getEmpByIdStep(<span class="number">1</span>).getDepartment());</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="33-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-åˆ†æ­¥æŸ¥è¯¢-amp-å»¶è¿ŸåŠ è½½"><a href="#33-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-åˆ†æ­¥æŸ¥è¯¢-amp-å»¶è¿ŸåŠ è½½" class="headerlink" title="33.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-åˆ†æ­¥æŸ¥è¯¢&amp;å»¶è¿ŸåŠ è½½"></a>33.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-åˆ†æ­¥æŸ¥è¯¢&amp;å»¶è¿ŸåŠ è½½</h2><p>æˆ‘ä»¬æ¯æ¬¡æŸ¥è¯¢Employeeå¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½å°†ä¸€èµ·æŸ¥è¯¢å‡ºæ¥ã€‚éƒ¨é—¨ä¿¡æ¯åœ¨æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å†å»æŸ¥è¯¢ï¼›åˆ†æ®µæŸ¥è¯¢çš„åŸºç¡€ä¹‹ä¸ŠåŠ ä¸Šä¸¤ä¸ªé…ç½®ï¼š</p><p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œå®ç°<strong>æ‡’åŠ è½½</strong></p><p><a href="src/main/resources/c03/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">&lt;!--æ˜¾ç¤ºçš„æŒ‡å®šæ¯ä¸ªæˆ‘ä»¬éœ€è¦æ›´æ”¹çš„é…ç½®çš„å€¼ï¼Œå³ä½¿ä»–æ˜¯é»˜è®¤çš„ã€‚é˜²æ­¢ç‰ˆæœ¬æ›´æ–°å¸¦æ¥çš„é—®é¢˜  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Setting</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>lazyLoadingEnabled</td><td>Globally enables or disables lazy loading. When enabled, all relations will be lazily loaded. This value can be superseded for an specific relation by using the fetchType attribute on it.</td><td>true&#x2F;false</td><td>false</td></tr><tr><td>aggressiveLazyLoading</td><td>When enabled, an object with lazy loaded properties will be loaded entirely upon a call to any of the lazy properties. Otherwise, each property is loaded on demand.</td><td>true&#x2F;false</td><td>true</td></tr></tbody></table><blockquote><p>aggressive<br>è‹± [É™ËˆÉ¡resÉªv]   ç¾ [É™ËˆÉ¡resÉªv]<br>adj.<br>å¥½æ–—çš„;æŒ‘è¡…çš„;ä¾µç•¥çš„;å¯Œäºæ”»å‡»æ€§çš„;æ°”åŠ¿æ±¹æ±¹çš„;å£°åŠ¿æµ©å¤§çš„;å¿—åœ¨å¿…å¾—çš„</p></blockquote><p>PS. ä¸ªäººè®¤ä¸ºaggressiveLazyLoading å¯é˜²æ­¢<strong>æ‡’åŠ è½½å¯¹è±¡é“¾</strong>æƒ…å†µå‡ºç°ã€‚TODO: å¾…éªŒè¯</p><h2 id="34-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionå®šä¹‰å…³è”é›†åˆå°è£…è§„åˆ™"><a href="#34-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionå®šä¹‰å…³è”é›†åˆå°è£…è§„åˆ™" class="headerlink" title="34.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionå®šä¹‰å…³è”é›†åˆå°è£…è§„åˆ™"></a>34.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionå®šä¹‰å…³è”é›†åˆå°è£…è§„åˆ™</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/DepartmentMapper.java">DepartmentMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DepartmentMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Department <span class="title function_">getDeptByIdPlus</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/DepartmentMapper.xml">DepartmentMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">public class Department &#123;</span></span><br><span class="line"><span class="comment">private Integer id;</span></span><br><span class="line"><span class="comment">private String departmentName;</span></span><br><span class="line"><span class="comment">private List&lt;Employee&gt; emps;</span></span><br><span class="line"><span class="comment">  did  dept_name  ||  eid  last_name  email   gender  </span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--åµŒå¥—ç»“æœé›†çš„æ–¹å¼ï¼Œä½¿ç”¨collectionæ ‡ç­¾å®šä¹‰å…³è”çš„é›†åˆç±»å‹çš„å±æ€§å°è£…è§„åˆ™  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Department&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;department_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">collectionå®šä¹‰å…³è”é›†åˆç±»å‹çš„å±æ€§çš„å°è£…è§„åˆ™ </span></span><br><span class="line"><span class="comment">ofType:æŒ‡å®šé›†åˆé‡Œé¢å…ƒç´ çš„ç±»å‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å®šä¹‰è¿™ä¸ªé›†åˆä¸­å…ƒç´ çš„å°è£…è§„åˆ™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- public Department getDeptByIdPlus(Integer id); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByIdPlus&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDept&quot;</span>&gt;</span></span><br><span class="line">SELECT d.id did,d.department_name department_name,</span><br><span class="line">e.id eid,e.last_name last_name,</span><br><span class="line">e.email email,e.gender gender</span><br><span class="line">FROM department d LEFT JOIN employee e ON d.id=e.department_id</span><br><span class="line">WHERE d.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/DepartmentMapperTest.java">DepartmentMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DepartmentTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetDeptByIdPlus</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DepartmentMapper</span> <span class="variable">dm</span> <span class="operator">=</span> session.getMapper(DepartmentMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="type">Department</span> <span class="variable">department</span> <span class="operator">=</span> dm.getDeptByIdPlus(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(department);</span><br><span class="line">System.out.println(department.getEmps());</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="35-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionåˆ†æ­¥æŸ¥è¯¢-amp-å»¶è¿ŸåŠ è½½"><a href="#35-æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionåˆ†æ­¥æŸ¥è¯¢-amp-å»¶è¿ŸåŠ è½½" class="headerlink" title="35.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionåˆ†æ­¥æŸ¥è¯¢&amp;å»¶è¿ŸåŠ è½½"></a>35.æ˜ å°„æ–‡ä»¶-select-resultMap-å…³è”æŸ¥è¯¢-collectionåˆ†æ­¥æŸ¥è¯¢&amp;å»¶è¿ŸåŠ è½½</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpsByDeptId</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--  public Employee getEmpsByDeptId(Integer departmentId);--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByDeptId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where department_id=#&#123;department_id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c03/mapper/dao/DepartmentMapper.java">DepartmentMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DepartmentMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Department <span class="title function_">getDeptByIdStep</span><span class="params">(Integer id)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/DepartmentMapper.xml">DepartmentMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- collectionï¼šåˆ†æ®µæŸ¥è¯¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Department&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;department_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">select</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper.getEmpsByDeptId&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- public Department getDeptByIdStep(Integer id); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line">select id,department_name from department where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/DepartmentMapperTest.java">DepartmentMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DepartmentMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetDeptByIdStep</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DepartmentMapper</span> <span class="variable">dm</span> <span class="operator">=</span> session.getMapper(DepartmentMapper.class);</span><br><span class="line"><span class="type">Department</span> <span class="variable">department</span> <span class="operator">=</span> dm.getDeptByIdStep(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(department);</span><br><span class="line">System.out.println(department.getEmps());</span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="36-æ˜ å°„æ–‡ä»¶-select-resultMap-åˆ†æ­¥æŸ¥è¯¢ä¼ é€’å¤šåˆ—å€¼-amp-fetchType"><a href="#36-æ˜ å°„æ–‡ä»¶-select-resultMap-åˆ†æ­¥æŸ¥è¯¢ä¼ é€’å¤šåˆ—å€¼-amp-fetchType" class="headerlink" title="36.æ˜ å°„æ–‡ä»¶-select-resultMap-åˆ†æ­¥æŸ¥è¯¢ä¼ é€’å¤šåˆ—å€¼&amp;fetchType"></a>36.æ˜ å°„æ–‡ä»¶-select-resultMap-åˆ†æ­¥æŸ¥è¯¢ä¼ é€’å¤šåˆ—å€¼&amp;fetchType</h2><p>æ‰©å±•ï¼š</p><ul><li>å¤šåˆ—çš„å€¼ä¼ é€’è¿‡å»ï¼š<ul><li>å°†å¤šåˆ—çš„å€¼å°è£…mapä¼ é€’ï¼›<code>column=&quot;&#123;key1=column1,key2=column2&#125;&quot;</code></li></ul></li><li>fetchType&#x3D;â€lazyâ€ï¼šè¡¨ç¤ºä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼›<ul><li>lazyï¼šå»¶è¿Ÿ</li><li>eagerï¼šç«‹å³</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Department&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;department_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">select</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper.getEmpsByDeptId&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">column</span>=<span class="string">&quot;&#123;deptId=id&#125;&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;lazy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- public Department getDeptByIdStep(Integer id); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line">select id,department_name from department where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="37-æ˜ å°„æ–‡ä»¶-select-resultMap-discriminatoré‰´åˆ«å™¨"><a href="#37-æ˜ å°„æ–‡ä»¶-select-resultMap-discriminatoré‰´åˆ«å™¨" class="headerlink" title="37.æ˜ å°„æ–‡ä»¶-select-resultMap-discriminatoré‰´åˆ«å™¨"></a>37.æ˜ å°„æ–‡ä»¶-select-resultMap-discriminatoré‰´åˆ«å™¨</h2><p><a href="src/main/java/com/lun/c03/mapper/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¦æœ‰é‰´åˆ«å™¨çš„</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsWithDiscriminator</span><span class="params">()</span>;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c03/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- =======================é‰´åˆ«å™¨============================ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;discriminator javaType=&quot;&quot;&gt;&lt;/discriminator&gt;</span></span><br><span class="line"><span class="comment">é‰´åˆ«å™¨ï¼šmybatiså¯ä»¥ä½¿ç”¨discriminatoråˆ¤æ–­æŸåˆ—çš„å€¼ï¼Œç„¶åæ ¹æ®æŸåˆ—çš„å€¼æ”¹å˜å°è£…è¡Œä¸º</span></span><br><span class="line"><span class="comment">å°è£…Employeeï¼š</span></span><br><span class="line"><span class="comment">å¦‚æœæŸ¥å‡ºçš„æ˜¯å¥³ç”Ÿï¼šå°±æŠŠéƒ¨é—¨ä¿¡æ¯æŸ¥è¯¢å‡ºæ¥ï¼Œå¦åˆ™ä¸æŸ¥è¯¢ï¼›</span></span><br><span class="line"><span class="comment">å¦‚æœæ˜¯ç”·ç”Ÿï¼ŒæŠŠlast_nameè¿™ä¸€åˆ—çš„å€¼èµ‹å€¼ç»™email;</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyEmpDis&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> columnï¼šæŒ‡å®šåˆ¤å®šçš„åˆ—å</span></span><br><span class="line"><span class="comment"> javaTypeï¼šåˆ—å€¼å¯¹åº”çš„javaç±»å‹  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¥³ç”Ÿ  resultType:æŒ‡å®šå°è£…çš„ç»“æœç±»å‹ï¼›ä¸èƒ½ç¼ºå°‘ã€‚/resultMap--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;department&quot;</span> </span></span><br><span class="line"><span class="tag"> <span class="attr">select</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper.getDeptById&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">column</span>=<span class="string">&quot;department_id&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span> &gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--ç”·ç”Ÿ ;å¦‚æœæ˜¯ç”·ç”Ÿï¼ŒæŠŠlast_nameè¿™ä¸€åˆ—çš„å€¼èµ‹å€¼ç»™email; --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--  public Employee getEmpByIdStep(Integer id);--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsWithDiscriminator&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyEmpDis&quot;</span>&gt;</span></span><br><span class="line"> select * from employee limit 10</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c03/mapper/EmployeeMapperTest.java">EmployeeMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsWithDiscriminator</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(em.getEmpsWithDiscriminator());</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="38-åŠ¨æ€sql-ç®€ä»‹-amp-ç¯å¢ƒæ­å»º"><a href="#38-åŠ¨æ€sql-ç®€ä»‹-amp-ç¯å¢ƒæ­å»º" class="headerlink" title="38.åŠ¨æ€sql-ç®€ä»‹&amp;ç¯å¢ƒæ­å»º"></a>38.åŠ¨æ€sql-ç®€ä»‹&amp;ç¯å¢ƒæ­å»º</h2><ul><li>åŠ¨æ€SQLæ˜¯MyBatiså¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚æå¤§çš„ç®€åŒ–æˆ‘ä»¬æ‹¼è£…SQLçš„æ“ä½œã€‚</li><li>åŠ¨æ€SQLå…ƒç´ å’Œä½¿ç”¨ JSTL æˆ–å…¶ä»–ç±»ä¼¼åŸºäº XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚</li><li>MyBatisé‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥ç®€åŒ–æ“ä½œã€‚<ul><li>if</li><li>choose (when, otherwise)</li><li>trim (where, set)</li><li>foreach</li></ul></li></ul><h2 id="39-åŠ¨æ€sql-if-åˆ¤æ–­-amp-OGNL"><a href="#39-åŠ¨æ€sql-if-åˆ¤æ–­-amp-OGNL" class="headerlink" title="39.åŠ¨æ€sql-if-åˆ¤æ–­&amp;OGNL"></a>39.åŠ¨æ€sql-if-åˆ¤æ–­&amp;OGNL</h2><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"><span class="comment">//æºå¸¦äº†å“ªä¸ªå­—æ®µæŸ¥è¯¢æ¡ä»¶å°±å¸¦ä¸Šè¿™ä¸ªå­—æ®µçš„å€¼</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionIf</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- æŸ¥è¯¢å‘˜å·¥ï¼Œè¦æ±‚ï¼Œæºå¸¦äº†å“ªä¸ªå­—æ®µæŸ¥è¯¢æ¡ä»¶å°±å¸¦ä¸Šè¿™ä¸ªå­—æ®µçš„å€¼ --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- public List&lt;Employee&gt; getEmpsByConditionIf(Employee employee); --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionIf&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee where</span><br><span class="line"> <span class="comment">&lt;!-- testï¼šåˆ¤æ–­è¡¨è¾¾å¼ï¼ˆOGNLï¼‰</span></span><br><span class="line"><span class="comment"> OGNLå‚ç…§PPTæˆ–è€…å®˜æ–¹æ–‡æ¡£ã€‚</span></span><br><span class="line"><span class="comment">    c:if  test</span></span><br><span class="line"><span class="comment"> ä»å‚æ•°ä¸­å–å€¼è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> é‡è§ç‰¹æ®Šç¬¦å·åº”è¯¥å»å†™è½¬ä¹‰å­—ç¬¦ï¼š</span></span><br><span class="line"><span class="comment"> &amp;&amp;ï¼š</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line"> id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> lastName!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> and last_name like #&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email.trim()!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> and email=#&#123;email&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line"> <span class="comment">&lt;!-- ognlä¼šè¿›è¡Œå­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢åˆ¤æ–­  &quot;0&quot;==0 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender==0 or gender==1&quot;</span>&gt;</span></span><br><span class="line">  and gender=#&#123;gender&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsByConditionIf</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">System.out.println(dsm.getEmpsByConditionIf(employee));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="OGNL"><a href="#OGNL" class="headerlink" title="OGNL"></a>OGNL</h3><p><a href="http://commons.apache.org/proper/commons-ognl/language-guide.html">OGNLå®˜æ–¹æ–‡æ¡£</a></p><p>OGNLï¼ˆ Object Graph Navigation Language ï¼‰å¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼Œ è¿™æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œé€šè¿‡å®ƒå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ¥æ“ä½œå¯¹è±¡å±æ€§ã€‚ ç±»ä¼¼äºæˆ‘ä»¬çš„ELï¼Œ SpELç­‰ã€‚</p><ul><li>è®¿é—®å¯¹è±¡å±æ€§ï¼š person.name</li><li>è°ƒç”¨æ–¹æ³•ï¼š person.getName()</li><li>è°ƒç”¨é™æ€å±æ€§&#x2F;æ–¹æ³•ï¼š @java.lang.Math@PIã€@java.util.UUID@randomUUID()</li><li>è°ƒç”¨æ„é€ æ–¹æ³•ï¼š new com.lun.Person(â€˜adminâ€™).name</li><li>è¿ç®—ç¬¦ï¼š +, -*, &#x2F;, %</li><li>é€»è¾‘è¿ç®—ç¬¦ï¼š in, not in, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D;, &#x3D;&#x3D;, !&#x3D;</li></ul><p><strong>æ³¨æ„</strong>ï¼š xmlä¸­ç‰¹æ®Šç¬¦å·å¦‚â€,&gt;,&lt;ç­‰è¿™äº›éƒ½éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦</p><p>è®¿é—®é›†åˆä¼ªå±æ€§ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ä¼ªå±æ€§</th><th>ä¼ªå±æ€§å¯¹åº”çš„ Java æ–¹æ³•</th></tr></thead><tbody><tr><td>Listã€ Setã€ Map</td><td>sizeã€ isEmpty</td><td>List&#x2F;Set&#x2F;Map.size(),List&#x2F;Set&#x2F;Map.isEmpty()</td></tr><tr><td>Listã€ Set</td><td>iterator</td><td>List.iterator()ã€ Set.iterator()</td></tr><tr><td>Map</td><td>keysã€ values</td><td>Map.keySet()ã€ Map.values()</td></tr><tr><td>Iterator</td><td>nextã€ hasNext</td><td>Iterator.next()ã€ Iterator.hasNext()</td></tr></tbody></table><h2 id="40-åŠ¨æ€sql-where-æŸ¥è¯¢æ¡ä»¶"><a href="#40-åŠ¨æ€sql-where-æŸ¥è¯¢æ¡ä»¶" class="headerlink" title="40.åŠ¨æ€sql-where-æŸ¥è¯¢æ¡ä»¶"></a>40.åŠ¨æ€sql-where-æŸ¥è¯¢æ¡ä»¶</h2><p>æŸ¥è¯¢çš„æ—¶å€™å¦‚æœæŸäº›æ¡ä»¶æ²¡å¸¦å¯èƒ½sqlæ‹¼è£…ä¼šæœ‰é—®é¢˜</p><ol><li>ç»™whereåé¢åŠ ä¸Š1&#x3D;1ï¼Œä»¥åçš„æ¡ä»¶éƒ½and xxxã€‚</li><li>mybatisä½¿ç”¨whereæ ‡ç­¾æ¥å°†æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶åŒ…æ‹¬åœ¨å†…ã€‚mybatiså°±ä¼šå°†whereæ ‡ç­¾ä¸­æ‹¼è£…çš„sqlï¼Œå¤šå‡ºæ¥çš„andæˆ–è€…orå»æ‰ï¼ˆwhereåªä¼šå»æ‰ç¬¬ä¸€ä¸ªå¤šå‡ºæ¥çš„andæˆ–è€…orï¼Œ<strong>ä½†æœ€åä¸€ä¸ªå¤šå‡ºæ¥çš„andæˆ–è€…oråˆ™ä¸ä¼šå»æ‰</strong>ï¼‰ã€‚</li></ol><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionIfWithWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee</span><br><span class="line"> <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line"> id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> lastName!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> and last_name like #&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email.trim()!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> and email=#&#123;email&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line"> <span class="comment">&lt;!-- ognlä¼šè¿›è¡Œå­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢åˆ¤æ–­  &quot;0&quot;==0 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender==0 or gender==1&quot;</span>&gt;</span></span><br><span class="line">  and gender=#&#123;gender&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionIfWithWhere</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsByConditionIfWithWhere</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="literal">null</span>, <span class="string">&quot;jallen&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">System.out.println(dsm.getEmpsByConditionIfWithWhere(employee));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="41-åŠ¨æ€sql-trim-è‡ªå®šä¹‰å­—ç¬¦ä¸²æˆªå–"><a href="#41-åŠ¨æ€sql-trim-è‡ªå®šä¹‰å­—ç¬¦ä¸²æˆªå–" class="headerlink" title="41.åŠ¨æ€sql-trim-è‡ªå®šä¹‰å­—ç¬¦ä¸²æˆªå–"></a>41.åŠ¨æ€sql-trim-è‡ªå®šä¹‰å­—ç¬¦ä¸²æˆªå–</h2><p>åé¢å¤šå‡ºçš„andæˆ–è€…or whereæ ‡ç­¾ä¸èƒ½è§£å†³</p><ul><li>prefix&#x3D;â€â€:å‰ç¼€ï¼štrimæ ‡ç­¾ä½“ä¸­æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²æ‹¼ä¸²åçš„ç»“æœã€‚<ul><li>prefixç»™æ‹¼ä¸²åçš„æ•´ä¸ªå­—ç¬¦ä¸²åŠ ä¸€ä¸ªå‰ç¼€</li></ul></li><li>prefixOverrides&#x3D;â€â€:<ul><li>å‰ç¼€è¦†ç›–ï¼š å»æ‰æ•´ä¸ªå­—ç¬¦ä¸²å‰é¢å¤šä½™çš„å­—ç¬¦</li></ul></li><li>suffix&#x3D;â€â€:åç¼€<ul><li>suffixç»™æ‹¼ä¸²åçš„æ•´ä¸ªå­—ç¬¦ä¸²åŠ ä¸€ä¸ªåç¼€</li></ul></li><li>suffixOverrides&#x3D;â€â€<ul><li>åç¼€è¦†ç›–ï¼šå»æ‰æ•´ä¸ªå­—ç¬¦ä¸²åé¢å¤šä½™çš„å­—ç¬¦</li></ul></li></ul><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionTrim</span><span class="params">(Employee employee)</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--public List&lt;Employee&gt; getEmpsByConditionTrim(Employee employee);  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionTrim&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee</span><br><span class="line"> <span class="comment">&lt;!-- è‡ªå®šä¹‰å­—ç¬¦ä¸²çš„æˆªå–è§„åˆ™ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line"> id=#&#123;id&#125; and</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> lastName!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> last_name like #&#123;lastName&#125; and</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email.trim()!=<span class="symbol">&amp;quot;</span><span class="symbol">&amp;quot;</span>&quot;</span>&gt;</span></span><br><span class="line"> email=#&#123;email&#125; and</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line"> <span class="comment">&lt;!-- ognlä¼šè¿›è¡Œå­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢åˆ¤æ–­  &quot;0&quot;==0 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender==0 or gender==1&quot;</span>&gt;</span></span><br><span class="line">  gender=#&#123;gender&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsByConditionTrim</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">System.out.println(dsm.getEmpsByConditionTrim(employee));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="42-åŠ¨æ€sql-choose-åˆ†æ”¯é€‰æ‹©"><a href="#42-åŠ¨æ€sql-choose-åˆ†æ”¯é€‰æ‹©" class="headerlink" title="42.åŠ¨æ€sql-choose-åˆ†æ”¯é€‰æ‹©"></a>42.åŠ¨æ€sql-choose-åˆ†æ”¯é€‰æ‹©</h2><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionChoose</span><span class="params">(Employee employee)</span>;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- public List&lt;Employee&gt; getEmpsByConditionChoose(Employee employee); --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> select * from employee </span><br><span class="line"> <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- å¦‚æœå¸¦äº†idå°±ç”¨idæŸ¥ï¼Œå¦‚æœå¸¦äº†lastNameå°±ç”¨lastNameæŸ¥;åªä¼šè¿›å…¥å…¶ä¸­ä¸€ä¸ª --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line"> id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null&quot;</span>&gt;</span></span><br><span class="line"> last_name like #&#123;lastName&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;email!=null&quot;</span>&gt;</span></span><br><span class="line"> email = #&#123;email&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line"> gender = 0</span><br><span class="line"> <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsByConditionChoose</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1</span>, <span class="string">&quot;jallen&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">System.out.println(dsm.getEmpsByConditionChoose(employee));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="43-åŠ¨æ€sql-set-ä¸ifç»“åˆçš„åŠ¨æ€æ›´æ–°"><a href="#43-åŠ¨æ€sql-set-ä¸ifç»“åˆçš„åŠ¨æ€æ›´æ–°" class="headerlink" title="43.åŠ¨æ€sql-set-ä¸ifç»“åˆçš„åŠ¨æ€æ›´æ–°"></a>43.åŠ¨æ€sql-set-ä¸ifç»“åˆçš„åŠ¨æ€æ›´æ–°</h2><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--public void updateEmp(Employee employee);  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateEmp&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- Setæ ‡ç­¾çš„ä½¿ç”¨ --&gt;</span></span><br><span class="line"> update employee </span><br><span class="line"><span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null&quot;</span>&gt;</span></span><br><span class="line">last_name=#&#123;lastName&#125;,</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null&quot;</span>&gt;</span></span><br><span class="line">email=#&#123;email&#125;,</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null&quot;</span>&gt;</span></span><br><span class="line">gender=#&#123;gender&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">where id=#&#123;id&#125; </span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">Trimï¼šæ›´æ–°æ‹¼ä¸²</span></span><br><span class="line"><span class="comment">update tbl_employee </span></span><br><span class="line"><span class="comment">&lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;if test=&quot;lastName!=null&quot;&gt;</span></span><br><span class="line"><span class="comment">last_name=#&#123;lastName&#125;,</span></span><br><span class="line"><span class="comment">&lt;/if&gt;</span></span><br><span class="line"><span class="comment">&lt;if test=&quot;email!=null&quot;&gt;</span></span><br><span class="line"><span class="comment">email=#&#123;email&#125;,</span></span><br><span class="line"><span class="comment">&lt;/if&gt;</span></span><br><span class="line"><span class="comment">&lt;if test=&quot;gender!=null&quot;&gt;</span></span><br><span class="line"><span class="comment">gender=#&#123;gender&#125;</span></span><br><span class="line"><span class="comment">&lt;/if&gt;</span></span><br><span class="line"><span class="comment">&lt;/trim&gt;</span></span><br><span class="line"><span class="comment">where id=#&#123;id&#125;  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateEmp</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1</span>, <span class="string">&quot;jallen2&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">dsm.updateEmp(employee);</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="44-åŠ¨æ€sql-foreach-éå†é›†åˆ"><a href="#44-åŠ¨æ€sql-foreach-éå†é›†åˆ" class="headerlink" title="44.åŠ¨æ€sql-foreach-éå†é›†åˆ"></a>44.åŠ¨æ€sql-foreach-éå†é›†åˆ</h2><ul><li><p>collectionï¼šæŒ‡å®šè¦éå†çš„é›†åˆï¼š</p><ul><li>listç±»å‹çš„å‚æ•°ä¼šç‰¹æ®Šå¤„ç†å°è£…åœ¨mapä¸­ï¼Œmapçš„keyå°±å«list</li></ul></li><li><p>itemï¼šå°†å½“å‰éå†å‡ºçš„å…ƒç´ èµ‹å€¼ç»™æŒ‡å®šçš„å˜é‡</p></li><li><p>separator:æ¯ä¸ªå…ƒç´ ä¹‹é—´çš„åˆ†éš”ç¬¦</p></li><li><p>openï¼šéå†å‡ºæ‰€æœ‰ç»“æœæ‹¼æ¥ä¸€ä¸ªå¼€å§‹çš„å­—ç¬¦</p></li><li><p>close:éå†å‡ºæ‰€æœ‰ç»“æœæ‹¼æ¥ä¸€ä¸ªç»“æŸçš„å­—ç¬¦</p></li><li><p>index:ç´¢å¼•ã€‚éå†listçš„æ—¶å€™æ˜¯indexå°±æ˜¯ç´¢å¼•ï¼Œitemå°±æ˜¯å½“å‰å€¼</p><ul><li>éå†mapçš„æ—¶å€™indexè¡¨ç¤ºçš„å°±æ˜¯mapçš„keyï¼Œitemå°±æ˜¯mapçš„å€¼</li></ul></li><li><p><code>#&#123;å˜é‡å&#125;</code>å°±èƒ½å–å‡ºå˜é‡çš„å€¼ä¹Ÿå°±æ˜¯å½“å‰éå†å‡ºçš„å…ƒç´ </p></li></ul><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionForeach</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span>List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!--<span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmpsByConditionForeach</span><span class="params">(List&lt;Integer&gt; ids)</span>;  --&gt;</span><br><span class="line"> &lt;select id=<span class="string">&quot;getEmpsByConditionForeach&quot;</span> resultType=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span><br><span class="line"> select * from employee</span><br><span class="line"> &lt;foreach collection=<span class="string">&quot;ids&quot;</span> item=<span class="string">&quot;item_id&quot;</span> separator=<span class="string">&quot;,&quot;</span></span><br><span class="line"> open=<span class="string">&quot;where id in(&quot;</span> close=<span class="string">&quot;)&quot;</span>&gt;</span><br><span class="line"> #&#123;item_id&#125;</span><br><span class="line"> &lt;/foreach&gt;</span><br><span class="line"> &lt;/select&gt;</span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicSQLMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpsByConditionForeach</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c04/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DynamicSQLMapper</span> <span class="variable">dsm</span> <span class="operator">=</span> session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"></span><br><span class="line">System.out.println(dsm.getEmpsByConditionForeach(Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="45-åŠ¨æ€sql-foreach-mysqlä¸‹foreachæ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼"><a href="#45-åŠ¨æ€sql-foreach-mysqlä¸‹foreachæ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="45.åŠ¨æ€sql-foreach-mysqlä¸‹foreachæ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼"></a>45.åŠ¨æ€sql-foreach-mysqlä¸‹foreachæ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼</h2><p><a href="src/main/java/com/lun/c04/dynamicsql/DynamicSQLMapper.java">DynamicSQLMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DynamicSQLMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmps</span><span class="params">(<span class="meta">@Param(&quot;emps&quot;)</span>List&lt;Employee&gt; emps)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmps2</span><span class="params">(<span class="meta">@Param(&quot;emps&quot;)</span>List&lt;Employee&gt; emps)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c04/DynamicSQLMapper.xml">DynamicSQLMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c04.dynamicsql.DynamicSQLMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- æ‰¹é‡ä¿å­˜ --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--public void addEmps(@Param(&quot;emps&quot;)List&lt;Employee&gt; emps);  --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--MySQLä¸‹æ‰¹é‡ä¿å­˜ï¼šå¯ä»¥foreachéå†   mysqlæ”¯æŒvalues(),(),()è¯­æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmps&quot;</span>&gt;</span></span><br><span class="line"> insert into employee(last_name,email,gender,department_id) </span><br><span class="line">values</span><br><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">(#&#123;emp.lastName&#125;,#&#123;emp.email&#125;,#&#123;emp.gender&#125;,#&#123;emp.department.id&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span><span class="comment">&lt;!--   --&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">&lt;!-- è¿™ç§æ–¹å¼éœ€è¦æ•°æ®åº“è¿æ¥å±æ€§allowMultiQueries=trueï¼›</span></span><br><span class="line"><span class="comment"> è¿™ç§åˆ†å·åˆ†éš”å¤šä¸ªsqlå¯ä»¥ç”¨äºå…¶ä»–çš„æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ï¼Œä¿®æ”¹ï¼‰ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmps2&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;;&quot;</span>&gt;</span></span><br><span class="line"> insert into employee(last_name,email,gender,department_id)</span><br><span class="line"> values(#&#123;emp.lastName&#125;,#&#123;emp.email&#125;,#&#123;emp.gender&#125;,#&#123;emp.department.id&#125;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼ŒMySQLæ•°æ®åº“è¿æ¥å±æ€§allowMultiQueries&#x3D;trueï¼Œæ‰èƒ½æ‰¹é‡åˆ é™¤ï¼Œä¿®æ”¹æ•°æ®ã€‚ï¼ˆåœ¨è¿æ¥MySQLçš„URLåæ·»åŠ å‚æ•°ï¼‰ã€‚</p><hr><p><a href="src/test/java/com/lun/c04/dynamicsql/DynamicSQLMapperTest.java">DynamicSQLMapperTest.java</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicSQLMapperTest &#123;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testAddEmps2() throws IOException &#123;</span><br><span class="line">SqlSessionFactory ssf = Tools.getSqlSessionFactory(&quot;c04/mybatis-config.xml&quot;);</span><br><span class="line">SqlSession session = ssf.openSession();</span><br><span class="line">try &#123;</span><br><span class="line">DynamicSQLMapper dsm = session.getMapper(DynamicSQLMapper.class);</span><br><span class="line"></span><br><span class="line">dsm.addEmps2(Arrays.asList(new Employee(null, &quot;abc&quot;, null, null),</span><br><span class="line">new Employee(null, &quot;cba&quot;,null, null)));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testAddEmps() throws IOException &#123;</span><br><span class="line">SqlSessionFactory ssf = Tools.getSqlSessionFactory(&quot;c04/mybatis-config.xml&quot;);</span><br><span class="line">SqlSession session = ssf.openSession();</span><br><span class="line">try &#123;</span><br><span class="line">DynamicSQLMapper dsm = session.getMapper(DynamicSQLMapper.class);</span><br><span class="line">dsm.addEmps(Arrays.asList(new Employee(null, &quot;abc&quot;, null, null),</span><br><span class="line">new Employee(null, &quot;cba&quot;,null, null)));</span><br><span class="line">session.commit();</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="46-åŠ¨æ€sql-foreach-oracleä¸‹æ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼"><a href="#46-åŠ¨æ€sql-foreach-oracleä¸‹æ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="46.åŠ¨æ€sql-foreach-oracleä¸‹æ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼"></a>46.åŠ¨æ€sql-foreach-oracleä¸‹æ‰¹é‡æ’å…¥çš„ä¸¤ç§æ–¹å¼</h2><p>Oracleæ•°æ®åº“æ‰¹é‡ä¿å­˜ï¼š</p><ul><li>Oracleä¸æ”¯æŒvalues(),(),()</li></ul><p>Oracleæ”¯æŒçš„æ‰¹é‡æ–¹å¼:</p><ol><li>å¤šä¸ªinsertæ”¾åœ¨begin - endé‡Œé¢</li><li>åˆ©ç”¨ä¸­é—´è¡¨</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># å¤šä¸ª<span class="keyword">insert</span>æ”¾åœ¨<span class="keyword">begin</span> <span class="operator">-</span> <span class="keyword">end</span>é‡Œé¢</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> employees(employee_id,last_name,email) </span><br><span class="line">    <span class="keyword">values</span>(employees_seq.nextval,<span class="string">&#x27;test_001&#x27;</span>,<span class="string">&#x27;test_001@atguigu.com&#x27;</span>);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> employees(employee_id,last_name,email) </span><br><span class="line">    <span class="keyword">values</span>(employees_seq.nextval,<span class="string">&#x27;test_002&#x27;</span>,<span class="string">&#x27;test_002@atguigu.com&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"># åˆ©ç”¨ä¸­é—´è¡¨</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employees(employee_id,last_name,email)</span><br><span class="line">   <span class="keyword">select</span> employees_seq.nextval,lastName,email <span class="keyword">from</span>(</span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;test_a_01&#x27;</span> lastName,<span class="string">&#x27;test_a_e01&#x27;</span> email <span class="keyword">from</span> dual</span><br><span class="line">          <span class="keyword">union</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;test_a_02&#x27;</span> lastName,<span class="string">&#x27;test_a_e02&#x27;</span> email <span class="keyword">from</span> dual</span><br><span class="line">          <span class="keyword">union</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;test_a_03&#x27;</span> lastName,<span class="string">&#x27;test_a_e03&#x27;</span> email <span class="keyword">from</span> dual</span><br><span class="line">   );</span><br></pre></td></tr></table></figure><h2 id="47-åŠ¨æ€sql-foreach-oracleä¸‹foreachæ‰¹é‡ä¿å­˜ä¸¤ç§æ–¹å¼"><a href="#47-åŠ¨æ€sql-foreach-oracleä¸‹foreachæ‰¹é‡ä¿å­˜ä¸¤ç§æ–¹å¼" class="headerlink" title="47.åŠ¨æ€sql-foreach-oracleä¸‹foreachæ‰¹é‡ä¿å­˜ä¸¤ç§æ–¹å¼"></a>47.åŠ¨æ€sql-foreach-oracleä¸‹foreachæ‰¹é‡ä¿å­˜ä¸¤ç§æ–¹å¼</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmps&quot;</span> <span class="attr">databaseId</span>=<span class="string">&quot;oracle&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- oracleç¬¬ä¸€ç§æ‰¹é‡æ–¹å¼ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; open=&quot;begin&quot; close=&quot;end;&quot;&gt;</span></span><br><span class="line"><span class="comment">insert into employees(employee_id,last_name,email) </span></span><br><span class="line"><span class="comment">    values(employees_seq.nextval,#&#123;emp.lastName&#125;,#&#123;emp.email&#125;);</span></span><br><span class="line"><span class="comment">&lt;/foreach&gt; </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- oracleç¬¬äºŒç§æ‰¹é‡æ–¹å¼  --&gt;</span></span><br><span class="line">insert into employees(employee_id,last_name,email)</span><br><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;union&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">open</span>=<span class="string">&quot;select employees_seq.nextval,lastName,email from(&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">select #&#123;emp.lastName&#125; lastName,#&#123;emp.email&#125; email from dual</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="48-åŠ¨æ€sql-å†…ç½®å‚æ•°-parameter-amp-databaseId"><a href="#48-åŠ¨æ€sql-å†…ç½®å‚æ•°-parameter-amp-databaseId" class="headerlink" title="48.åŠ¨æ€sql-å†…ç½®å‚æ•° _parameter &amp; _databaseId"></a>48.åŠ¨æ€sql-å†…ç½®å‚æ•° _parameter &amp; _databaseId</h2><p>ä¸åªæ˜¯æ–¹æ³•ä¼ é€’è¿‡æ¥çš„å‚æ•°å¯ä»¥è¢«ç”¨æ¥åˆ¤æ–­ï¼Œ</p><p>mybatisé»˜è®¤è¿˜æœ‰<strong>ä¸¤ä¸ªå†…ç½®å‚æ•°</strong>ï¼š</p><ol><li><strong>_parameter</strong>:ä»£è¡¨æ•´ä¸ªå‚æ•°<ul><li>å•ä¸ªå‚æ•°ï¼š_parameterå°±æ˜¯è¿™ä¸ªå‚æ•°</li><li>å¤šä¸ªå‚æ•°ï¼šå‚æ•°ä¼šè¢«å°è£…ä¸ºä¸€ä¸ªmapï¼›_parameterå°±æ˜¯ä»£è¡¨è¿™ä¸ªmap</li></ul></li><li><strong>_databaseId</strong>:å¦‚æœé…ç½®äº†databaseIdProvideræ ‡ç­¾ã€‚<ul><li>_databaseIdå°±æ˜¯ä»£è¡¨å½“å‰æ•°æ®åº“çš„åˆ«åoracle</li></ul></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public List&lt;Employee&gt; getEmpsTestInnerParameter(Employee employee);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsTestInnerParameter&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&#x27;mysql&#x27;&quot;</span>&gt;</span></span><br><span class="line">select * from tbl_employee</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter!=null&quot;</span>&gt;</span></span><br><span class="line">where last_name like #&#123;_parameter.lastName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&#x27;oracle&#x27;&quot;</span>&gt;</span></span><br><span class="line">select * from employees</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter!=null&quot;</span>&gt;</span></span><br><span class="line">where last_name like #&#123;_parameter.lastName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="49-åŠ¨æ€sql-bind-ç»‘å®šï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#49-åŠ¨æ€sql-bind-ç»‘å®šï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="49.åŠ¨æ€sql-bind-ç»‘å®šï¼ˆä¸å¸¸ç”¨ï¼‰"></a>49.åŠ¨æ€sql-bind-ç»‘å®šï¼ˆä¸å¸¸ç”¨ï¼‰</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public List&lt;Employee&gt; getEmpsTestInnerParameter(Employee employee);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsTestInnerParameter&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- bindï¼šå¯ä»¥å°†OGNLè¡¨è¾¾å¼çš„å€¼ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œæ–¹ä¾¿åæ¥å¼•ç”¨è¿™ä¸ªå˜é‡çš„å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;%&#x27;+lastName+&#x27;%&#x27;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&#x27;mysql&#x27;&quot;</span>&gt;</span></span><br><span class="line">select * from tbl_employee</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter!=null&quot;</span>&gt;</span></span><br><span class="line">where last_name like #&#123;lastName&#125;<span class="comment">&lt;!-- è¿™é‡Œä½¿ç”¨åˆ°lastName --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&#x27;oracle&#x27;&quot;</span>&gt;</span></span><br><span class="line">select * from employees</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter!=null&quot;</span>&gt;</span></span><br><span class="line">where last_name like #&#123;_parameter.lastName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="50-åŠ¨æ€sql-sql-æŠ½å–å¯é‡ç”¨çš„sqlç‰‡æ®µ"><a href="#50-åŠ¨æ€sql-sql-æŠ½å–å¯é‡ç”¨çš„sqlç‰‡æ®µ" class="headerlink" title="50.åŠ¨æ€sql-sql-æŠ½å–å¯é‡ç”¨çš„sqlç‰‡æ®µ"></a>50.åŠ¨æ€sql-sql-æŠ½å–å¯é‡ç”¨çš„sqlç‰‡æ®µ</h2><p>æŠ½å–å¯é‡ç”¨çš„sqlç‰‡æ®µã€‚æ–¹ä¾¿åé¢å¼•ç”¨ï¼š</p><ol><li>sqlæŠ½å–ï¼šç»å¸¸å°†è¦æŸ¥è¯¢çš„åˆ—åï¼Œæˆ–è€…æ’å…¥ç”¨çš„åˆ—åæŠ½å–å‡ºæ¥æ–¹ä¾¿å¼•ç”¨</li><li>includeæ¥å¼•ç”¨å·²ç»æŠ½å–çš„sqlï¼š</li><li>includeè¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›propertyï¼Œsqlæ ‡ç­¾å†…éƒ¨å°±èƒ½ä½¿ç”¨è‡ªå®šä¹‰çš„å±æ€§<ul><li>include-propertyï¼šå–å€¼çš„æ­£ç¡®æ–¹å¼${prop},</li><li>ä¸èƒ½ä½¿ç”¨<code>#&#123;&#125;</code>ï¼Œè€Œä½¿ç”¨<code>$&#123;&#125;</code></li></ul></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">sql</span> id<span class="operator">=</span>&quot;userColumns&quot;<span class="operator">&gt;</span> $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">sql</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;selectUsers&quot; resultType<span class="operator">=</span>&quot;map&quot;<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="operator">&lt;</span>include refid<span class="operator">=</span>&quot;userColumns&quot;<span class="operator">&gt;</span><span class="operator">&lt;</span>property name<span class="operator">=</span>&quot;alias&quot; <span class="keyword">value</span><span class="operator">=</span>&quot;t1&quot;<span class="operator">/</span><span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>include<span class="operator">&gt;</span>,</span><br><span class="line"><span class="operator">&lt;</span>include refid<span class="operator">=</span>&quot;userColumns&quot;<span class="operator">&gt;</span><span class="operator">&lt;</span>property name<span class="operator">=</span>&quot;alias&quot; <span class="keyword">value</span><span class="operator">=</span>&quot;t2&quot;<span class="operator">/</span><span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>include<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">from</span> some_table t1</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> some_table t2</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">sql</span> id<span class="operator">=</span>&quot;insertColumn&quot;<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>if test<span class="operator">=</span>&quot;_databaseId==&#x27;oracle&#x27;&quot;<span class="operator">&gt;</span></span><br><span class="line">employee_id,last_name,email</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>if<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>if test<span class="operator">=</span>&quot;_databaseId==&#x27;mysql&#x27;&quot;<span class="operator">&gt;</span></span><br><span class="line">last_name,email,gender,d_id</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>if<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">sql</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">insert</span> id<span class="operator">=</span>&quot;addEmps&quot;<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_employee(</span><br><span class="line"><span class="operator">&lt;</span>include refid<span class="operator">=</span>&quot;insertColumn&quot;<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>include<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">!</span><span class="comment">-- ä½¿ç”¨åœ°æ–¹ --&gt;</span></span><br><span class="line">) </span><br><span class="line"><span class="keyword">values</span></span><br><span class="line"><span class="operator">&lt;</span>foreach collection<span class="operator">=</span>&quot;emps&quot; item<span class="operator">=</span>&quot;emp&quot; separator<span class="operator">=</span>&quot;,&quot;<span class="operator">&gt;</span></span><br><span class="line">(#&#123;emp.lastName&#125;,#&#123;emp.email&#125;,#&#123;emp.gender&#125;,#&#123;emp.dept.id&#125;)</span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span>foreach<span class="operator">&gt;</span></span><br><span class="line"> <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">insert</span><span class="operator">&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="51-ç¼“å­˜-ç¼“å­˜ä»‹ç»"><a href="#51-ç¼“å­˜-ç¼“å­˜ä»‹ç»" class="headerlink" title="51.ç¼“å­˜-ç¼“å­˜ä»‹ç»"></a>51.ç¼“å­˜-ç¼“å­˜ä»‹ç»</h2><p><a href="https://mybatis.org/mybatis-3/zh/sqlmap-xml.html#cache">MyBatiså®˜æ–¹æ–‡æ¡£</a></p><p>MyBatis åŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®å’Œå®šåˆ¶ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€‚</p><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜ï¼ˆ SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰å¼€å¯ã€‚</li><li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li><li>ä¸ºäº†æé«˜æ‰©å±•æ€§ã€‚ MyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li></ol><h2 id="52-ç¼“å­˜-ä¸€çº§ç¼“å­˜ä½“éªŒ"><a href="#52-ç¼“å­˜-ä¸€çº§ç¼“å­˜ä½“éªŒ" class="headerlink" title="52.ç¼“å­˜-ä¸€çº§ç¼“å­˜ä½“éªŒ"></a>52.ç¼“å­˜-ä¸€çº§ç¼“å­˜ä½“éªŒ</h2><h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h3><ul><li>ä¸€çº§ç¼“å­˜(local cache)ï¼Œå³æœ¬åœ°ç¼“å­˜ï¼Œä½œç”¨åŸŸé»˜è®¤ä¸ºsqlSessionã€‚å½“ Session flush æˆ– close å, è¯¥Session ä¸­çš„æ‰€æœ‰ Cache å°†è¢«æ¸…ç©ºã€‚</li><li>æœ¬åœ°ç¼“å­˜ä¸èƒ½è¢«å…³é—­, ä½†å¯ä»¥è°ƒç”¨ clearCache() æ¥æ¸…ç©ºæœ¬åœ°ç¼“å­˜, æˆ–è€…æ”¹å˜ç¼“å­˜çš„ä½œç”¨åŸŸ.</li><li>åœ¨mybatis3.1ä¹‹å, å¯ä»¥é…ç½®æœ¬åœ°ç¼“å­˜çš„ä½œç”¨åŸŸ. åœ¨ mybatis.xml ä¸­é…ç½®</li></ul><table><thead><tr><th>-</th><th>-</th><th>-</th><th>-</th></tr></thead><tbody><tr><td>localCacheScope</td><td>MyBatis uses local cache to prevent circular references and speed up repeated nested queries. By default (SESSION) all queries executed during a session are cached. If localCacheScope&#x3D;STATEMENT local session will be used just for statement execution, no data will be shared between two different calls to the same SqlSession.</td><td>SESSION&#x2F;STATEMENT</td><td>SESSION</td></tr></tbody></table><h3 id="ä¸€çº§ç¼“å­˜ä½“éªŒ"><a href="#ä¸€çº§ç¼“å­˜ä½“éªŒ" class="headerlink" title="ä¸€çº§ç¼“å­˜ä½“éªŒ"></a>ä¸€çº§ç¼“å­˜ä½“éªŒ</h3><p><a href="src/test/java/com/lun/c05/cache/CacheTest.java">CacheTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFirstCache</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c03/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="type">Employee</span> <span class="variable">e1</span> <span class="operator">=</span> em.getEmpById(<span class="number">1</span>);</span><br><span class="line">System.out.println(e1);</span><br><span class="line"></span><br><span class="line"><span class="type">Employee</span> <span class="variable">e2</span> <span class="operator">=</span> em.getEmpById(<span class="number">1</span>);</span><br><span class="line">System.out.println(e2);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;e1 == e2 : &quot;</span> + (e1 == e2));</span><br><span class="line"></span><br><span class="line">session.commit();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 08-02 22:50:35,092 ==&gt;  Preparing: select * from employee where id = ?   (BaseJdbcLogger.java:145) </span><br><span class="line">DEBUG 08-02 22:50:35,192 ==&gt; Parameters: 1(Integer)  (BaseJdbcLogger.java:145) </span><br><span class="line">DEBUG 08-02 22:50:35,260 &lt;==      Total: 1  (BaseJdbcLogger.java:145) </span><br><span class="line">Employee [id=1, lastName=jallen2, email=jallen@good.com, gender=1, department=null]</span><br><span class="line">Employee [id=1, lastName=jallen2, email=jallen@good.com, gender=1, department=null]</span><br><span class="line">e1 == e2 : true &lt;-------------e1å’Œe2æŒ‡å‘ç›¸åŒçš„å¯¹è±¡</span><br></pre></td></tr></table></figure><h2 id="53-ç¼“å­˜-ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ"><a href="#53-ç¼“å­˜-ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ" class="headerlink" title="53.ç¼“å­˜-ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ"></a>53.ç¼“å­˜-ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</h2><p>åŒä¸€æ¬¡ä¼šè¯æœŸé—´åªè¦æŸ¥è¯¢è¿‡çš„æ•°æ®éƒ½ä¼šä¿å­˜åœ¨å½“å‰SqlSessionçš„ä¸€ä¸ªMapä¸­</p><ul><li>key &#x3D; hashCode + æŸ¥è¯¢çš„SqlId + ç¼–å†™çš„sqlæŸ¥è¯¢è¯­å¥ + å‚æ•°</li></ul><p>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µï¼š</p><ol><li>ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜</li><li>åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ</li><li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡<strong>å¢åˆ æ”¹</strong>æ“ä½œ</li><li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜</li></ol><h2 id="54-ç¼“å­˜-äºŒçº§ç¼“å­˜ä»‹ç»"><a href="#54-ç¼“å­˜-äºŒçº§ç¼“å­˜ä»‹ç»" class="headerlink" title="54.ç¼“å­˜-äºŒçº§ç¼“å­˜ä»‹ç»"></a>54.ç¼“å­˜-äºŒçº§ç¼“å­˜ä»‹ç»</h2><ul><li>äºŒçº§ç¼“å­˜(second level cache)ï¼Œå…¨å±€ä½œç”¨åŸŸç¼“å­˜</li><li>äºŒçº§ç¼“å­˜é»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®</li><li>MyBatisæä¾›äºŒçº§ç¼“å­˜çš„æ¥å£ä»¥åŠå®ç°ï¼Œç¼“å­˜å®ç°è¦æ±‚ POJOå®ç°Serializableæ¥å£</li><li>äºŒçº§ç¼“å­˜åœ¨ SqlSession å…³é—­æˆ–æäº¤ä¹‹åæ‰ä¼šç”Ÿæ•ˆ</li><li>ä½¿ç”¨æ­¥éª¤<ol><li>å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜<ul><li><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></li></ul></li><li>éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ˜ å°„æ–‡ä»¶å¤„ä½¿ç”¨cacheé…ç½®ç¼“å­˜<ul><li><code>&lt;cache /&gt;</code></li></ul></li><li><strong>æ³¨æ„</strong>ï¼š POJOéœ€è¦å®ç°Serializableæ¥å£</li></ol></li></ul><p>cacheæ ‡ç­¾çš„å±æ€§ï¼š</p><ul><li>eviction:ç¼“å­˜çš„å›æ”¶ç­–ç•¥ï¼š<ul><li>LRU â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</li><li>FIFO â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</li><li>SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li><li>WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li><li>é»˜è®¤çš„æ˜¯ LRUã€‚</li></ul></li><li>flushIntervalï¼šç¼“å­˜åˆ·æ–°é—´éš”<ul><li>ç¼“å­˜å¤šé•¿æ—¶é—´æ¸…ç©ºä¸€æ¬¡ï¼Œé»˜è®¤ä¸æ¸…ç©ºï¼Œè®¾ç½®ä¸€ä¸ªæ¯«ç§’å€¼</li></ul></li><li>readOnly:æ˜¯å¦åªè¯»ï¼š<ul><li>trueï¼šåªè¯»ï¼›mybatisè®¤ä¸ºæ‰€æœ‰ä»ç¼“å­˜ä¸­è·å–æ•°æ®çš„æ“ä½œéƒ½æ˜¯åªè¯»æ“ä½œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®ã€‚mybatisä¸ºäº†åŠ å¿«è·å–é€Ÿåº¦ï¼Œç›´æ¥å°±ä¼šå°†æ•°æ®åœ¨ç¼“å­˜ä¸­çš„å¼•ç”¨äº¤ç»™ç”¨æˆ·ã€‚ä¸å®‰å…¨ï¼Œé€Ÿåº¦å¿«</li><li>falseï¼šéåªè¯»ï¼šmybatisè§‰å¾—è·å–çš„æ•°æ®å¯èƒ½ä¼šè¢«ä¿®æ”¹ã€‚mybatisä¼šåˆ©ç”¨åºåˆ—åŒ–&amp;ååºåˆ—çš„æŠ€æœ¯å…‹éš†ä¸€ä»½æ–°çš„æ•°æ®ç»™ä½ ã€‚å®‰å…¨ï¼Œé€Ÿåº¦æ…¢</li></ul></li><li>sizeï¼šç¼“å­˜å­˜æ”¾å¤šå°‘å…ƒç´ ï¼›</li><li>type&#x3D;â€â€ï¼šæŒ‡å®šè‡ªå®šä¹‰ç¼“å­˜çš„å…¨ç±»åï¼›<ul><li>å®ç°Cacheæ¥å£å³å¯ï¼›</li></ul></li></ul><h2 id="55-ç¼“å­˜-äºŒçº§ç¼“å­˜ä½¿ç”¨-amp-ç»†èŠ‚"><a href="#55-ç¼“å­˜-äºŒçº§ç¼“å­˜ä½¿ç”¨-amp-ç»†èŠ‚" class="headerlink" title="55.ç¼“å­˜-äºŒçº§ç¼“å­˜ä½¿ç”¨&amp;ç»†èŠ‚"></a>55.ç¼“å­˜-äºŒçº§ç¼“å­˜ä½¿ç”¨&amp;ç»†èŠ‚</h2><p>ä½¿ç”¨æ­¥éª¤:</p><ol><li>å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜<ul><li><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></li></ul></li><li>éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ˜ å°„æ–‡ä»¶å¤„ä½¿ç”¨cacheé…ç½®ç¼“å­˜<ul><li><code>&lt;cache /&gt;</code></li></ul></li><li><strong>æ³¨æ„</strong>ï¼š POJOéœ€è¦å®ç°Serializableæ¥å£</li></ol><p><a href="src/main/resources/c05/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;settings&gt;</span><br><span class="line">&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c01/helloworld/bean/Employee.java">Employee.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">7390587151857533202L</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c05/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;false&quot;</span> <span class="attr">size</span>=<span class="string">&quot;1024&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c05/cache/CacheTest.java">CacheTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSecondCache</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c05/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session2</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em</span> <span class="operator">=</span> session.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">e1</span> <span class="operator">=</span> em.getEmpById(<span class="number">1</span>);</span><br><span class="line">System.out.println(e1);</span><br><span class="line">session.close();</span><br><span class="line"></span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">em2</span> <span class="operator">=</span> session2.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">e2</span> <span class="operator">=</span> em2.getEmpById(<span class="number">1</span>);</span><br><span class="line">System.out.println(e2);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;e1 == e2 : &quot;</span> + (e1 == e2));</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session2.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 08-03 01:13:02,575 Cache Hit Ratio [com.lun.c03.mapper.dao.EmployeeMapper]: 0.0  (LoggingCache.java:62) </span><br><span class="line">DEBUG 08-03 01:13:03,945 ==&gt;  Preparing: select * from employee where id = ?   (BaseJdbcLogger.java:145) </span><br><span class="line">DEBUG 08-03 01:13:04,081 ==&gt; Parameters: 1(Integer)  (BaseJdbcLogger.java:145) </span><br><span class="line">DEBUG 08-03 01:13:04,186 &lt;==      Total: 1  (BaseJdbcLogger.java:145) </span><br><span class="line">Employee [id=1, lastName=jallen2, email=jallen@good.com, gender=1, department=null]</span><br><span class="line">DEBUG 08-03 01:13:04,218 Cache Hit Ratio [com.lun.c03.mapper.dao.EmployeeMapper]: 0.5  (LoggingCache.java:62) </span><br><span class="line">Employee [id=1, lastName=jallen2, email=jallen@good.com, gender=1, department=null]</span><br><span class="line">e1 == e2 : false</span><br></pre></td></tr></table></figure><h2 id="56-ç¼“å­˜-ç¼“å­˜æœ‰å…³çš„è®¾ç½®ä»¥åŠå±æ€§"><a href="#56-ç¼“å­˜-ç¼“å­˜æœ‰å…³çš„è®¾ç½®ä»¥åŠå±æ€§" class="headerlink" title="56.ç¼“å­˜-ç¼“å­˜æœ‰å…³çš„è®¾ç½®ä»¥åŠå±æ€§"></a>56.ç¼“å­˜-ç¼“å­˜æœ‰å…³çš„è®¾ç½®ä»¥åŠå±æ€§</h2><ol><li>å…¨å±€settingçš„cacheEnableï¼š<br>â€“ é…ç½®äºŒçº§ç¼“å­˜çš„å¼€å…³ã€‚ä¸€çº§ç¼“å­˜ä¸€ç›´æ˜¯æ‰“å¼€çš„ã€‚</li><li>selectæ ‡ç­¾çš„useCacheå±æ€§ï¼š<br>â€“ é…ç½®è¿™ä¸ªselectæ˜¯å¦ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚ä¸€çº§ç¼“å­˜ä¸€ç›´æ˜¯ä½¿ç”¨çš„</li><li>æ¯ä¸ªå¢åˆ æ”¹æ ‡ç­¾çš„flushCacheå±æ€§ï¼š<br>â€“ å¢åˆ æ”¹é»˜è®¤flushCache&#x3D;trueã€‚sqlæ‰§è¡Œä»¥åï¼Œä¼šåŒæ—¶æ¸…ç©ºä¸€çº§å’ŒäºŒçº§ç¼“å­˜ã€‚æŸ¥è¯¢é»˜è®¤flushCache&#x3D;falseã€‚</li><li>sqlSession.clearCache()ï¼š<br>â€“ åªæ˜¯ç”¨æ¥æ¸…é™¤ä¸€çº§ç¼“å­˜ã€‚</li><li>å…¨å±€settingçš„localCacheScopeï¼šæœ¬åœ°ç¼“å­˜ä½œç”¨åŸŸï¼šï¼ˆä¸€çº§ç¼“å­˜SESSIONï¼‰ï¼Œå½“å‰ä¼šè¯çš„æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨ä¼šè¯ç¼“å­˜ä¸­ï¼›STATEMENTï¼šå¯ä»¥ç¦ç”¨ä¸€çº§ç¼“å­˜ã€‚</li></ol><h2 id="57-ç¼“å­˜-ç¼“å­˜åŸç†å›¾ç¤º"><a href="#57-ç¼“å­˜-ç¼“å­˜åŸç†å›¾ç¤º" class="headerlink" title="57.ç¼“å­˜-ç¼“å­˜åŸç†å›¾ç¤º"></a>57.ç¼“å­˜-ç¼“å­˜åŸç†å›¾ç¤º</h2><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/04.png"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220217184558739.png" alt="image-20220217184558739"></p><h2 id="58-ç¼“å­˜-ç¬¬ä¸‰æ–¹ç¼“å­˜æ•´åˆåŸç†-amp-ehcacheé€‚é…åŒ…ä¸‹è½½"><a href="#58-ç¼“å­˜-ç¬¬ä¸‰æ–¹ç¼“å­˜æ•´åˆåŸç†-amp-ehcacheé€‚é…åŒ…ä¸‹è½½" class="headerlink" title="58.ç¼“å­˜-ç¬¬ä¸‰æ–¹ç¼“å­˜æ•´åˆåŸç†&amp;ehcacheé€‚é…åŒ…ä¸‹è½½"></a>58.ç¼“å­˜-ç¬¬ä¸‰æ–¹ç¼“å­˜æ•´åˆåŸç†&amp;ehcacheé€‚é…åŒ…ä¸‹è½½</h2><ul><li>EhCache æ˜¯ä¸€ä¸ªçº¯Javaçš„è¿›ç¨‹å†…ç¼“å­˜æ¡†æ¶ï¼Œå…·æœ‰å¿«é€Ÿã€ç²¾å¹²ç­‰ç‰¹ç‚¹ï¼Œæ˜¯Hibernateä¸­é»˜è®¤çš„CacheProviderã€‚</li><li>MyBatiså®šä¹‰äº†Cacheæ¥å£æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè‡ªå®šä¹‰æ‰©å±•ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.ibatis.cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Cache</span> &#123;</span><br><span class="line"></span><br><span class="line">  String <span class="title function_">getId</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">putObject</span><span class="params">(Object key, Object value)</span>;</span><br><span class="line"></span><br><span class="line">  Object <span class="title function_">getObject</span><span class="params">(Object key)</span>;</span><br><span class="line"></span><br><span class="line">  Object <span class="title function_">removeObject</span><span class="params">(Object key)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">  ReadWriteLock <span class="title function_">getReadWriteLock</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="59-ç¼“å­˜-MyBatisæ•´åˆehcache-amp-æ€»ç»“"><a href="#59-ç¼“å­˜-MyBatisæ•´åˆehcache-amp-æ€»ç»“" class="headerlink" title="59.ç¼“å­˜-MyBatisæ•´åˆehcache&amp;æ€»ç»“"></a>59.ç¼“å­˜-MyBatisæ•´åˆehcache&amp;æ€»ç»“</h2><p>æ­¥éª¤ï¼š</p><ul><li>åŠ å…¥mybatis-ehcacheä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™<a href="src/main/resources/ehcache.xml">ehcache.xml</a>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../config/ehcache.xsd&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- ç£ç›˜ä¿å­˜è·¯å¾„ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;C:\\ehcache&quot;</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">defaultCache</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;10000&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;10000000&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">overflowToDisk</span>=<span class="string">&quot;true&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;120&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">å±æ€§è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">l diskStoreï¼šæŒ‡å®šæ•°æ®åœ¨ç£ç›˜ä¸­çš„å­˜å‚¨ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">l defaultCacheï¼šå½“å€ŸåŠ©CacheManager.add(&quot;demoCache&quot;)åˆ›å»ºCacheæ—¶ï¼ŒEhCacheä¾¿ä¼šé‡‡ç”¨&lt;defalutCache/&gt;æŒ‡å®šçš„çš„ç®¡ç†ç­–ç•¥</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">ä»¥ä¸‹å±æ€§æ˜¯å¿…é¡»çš„ï¼š</span></span><br><span class="line"><span class="comment">l maxElementsInMemory - åœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›® </span></span><br><span class="line"><span class="comment">l maxElementsOnDisk - åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§</span></span><br><span class="line"><span class="comment">l eternal - è®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œå¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsï¼ŒtimeToLiveSecondsåˆ¤æ–­</span></span><br><span class="line"><span class="comment">l overflowToDisk - è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„elementç¼“å­˜åˆ°ç£ç›˜ä¸Š</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">ä»¥ä¸‹å±æ€§æ˜¯å¯é€‰çš„ï¼š</span></span><br><span class="line"><span class="comment">l timeToIdleSeconds - å½“ç¼“å­˜åœ¨EhCacheä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶…è¿‡timeToIdleSecondsçš„å±æ€§å–å€¼æ—¶ï¼Œè¿™äº›æ•°æ®ä¾¿ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">l timeToLiveSeconds - ç¼“å­˜elementçš„æœ‰æ•ˆç”Ÿå‘½æœŸï¼Œé»˜è®¤æ˜¯0.,ä¹Ÿå°±æ˜¯elementå­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment"> diskSpoolBufferSizeMB è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°.é»˜è®¤æ˜¯30MB.æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº.</span></span><br><span class="line"><span class="comment">l diskPersistent - åœ¨VMé‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜EhCacheä¸­çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯falseã€‚</span></span><br><span class="line"><span class="comment">l diskExpiryThreadIntervalSeconds - ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚æ¯ä¸ª120sï¼Œç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡EhCacheä¸­æ•°æ®çš„æ¸…ç†å·¥ä½œ</span></span><br><span class="line"><span class="comment">l memoryStoreEvictionPolicy - å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„elementåŠ å…¥çš„æ—¶å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­elementçš„ç­–ç•¥ã€‚é»˜è®¤æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰LFUï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’ŒFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é…ç½®cacheæ ‡ç­¾<code>&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;&gt;&lt;/cache&gt;</code></li></ul><hr><p>æ¼”ç¤ºï¼š</p><p><a href="src/main/resources/c05/DepartmentMapper.xml">DepartmentMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c03.mapper.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c05/cache/CacheTest.java">CacheTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEhcache</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">ssf</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c05/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session2</span> <span class="operator">=</span> ssf.openSession();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">DepartmentMapper</span> <span class="variable">dm</span> <span class="operator">=</span> session.getMapper(DepartmentMapper.class);</span><br><span class="line"><span class="type">Department</span> <span class="variable">dp</span> <span class="operator">=</span> dm.getDeptById(<span class="number">1</span>);</span><br><span class="line">System.out.println(dp);</span><br><span class="line">session.close();</span><br><span class="line"></span><br><span class="line"><span class="type">DepartmentMapper</span> <span class="variable">dm2</span> <span class="operator">=</span> session2.getMapper(DepartmentMapper.class);</span><br><span class="line"><span class="type">Department</span> <span class="variable">dp2</span> <span class="operator">=</span> dm2.getDeptById(<span class="number">1</span>);</span><br><span class="line">System.out.println(dp2);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">session2.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¦å¤–</strong>ï¼š</p><p>å‚ç…§ç¼“å­˜ï¼š è‹¥æƒ³åœ¨å‘½åç©ºé—´ä¸­å…±äº«ç›¸åŒçš„ç¼“å­˜é…ç½®å’Œå®ä¾‹ã€‚å¯ä»¥ä½¿ç”¨ cache-ref å…ƒç´ æ¥å¼•ç”¨å¦å¤–ä¸€ä¸ªç¼“å­˜ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.mybatis.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•ç”¨ç¼“å­˜ï¼šnamespaceï¼šæŒ‡å®šå’Œå“ªä¸ªåç§°ç©ºé—´ä¸‹çš„ç¼“å­˜ä¸€æ · --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache-ref</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.mybatis.dao.EmployeeMapper&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="60-æ•´åˆSpring-æ•´åˆé€‚é…åŒ…ä¸‹è½½"><a href="#60-æ•´åˆSpring-æ•´åˆé€‚é…åŒ…ä¸‹è½½" class="headerlink" title="60.æ•´åˆSpring-æ•´åˆé€‚é…åŒ…ä¸‹è½½"></a>60.æ•´åˆSpring-æ•´åˆé€‚é…åŒ…ä¸‹è½½</h2><p>MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚å®ƒå°†å…è®¸ MyBatis å‚ä¸åˆ° Spring çš„äº‹åŠ¡ç®¡ç†ä¹‹ä¸­ï¼Œåˆ›å»ºæ˜ å°„å™¨ mapper å’Œ SqlSession å¹¶æ³¨å…¥åˆ° bean ä¸­ï¼Œä»¥åŠå°† Mybatis çš„å¼‚å¸¸è½¬æ¢ä¸º Spring çš„ DataAccessExceptionã€‚æœ€ç»ˆï¼Œå¯ä»¥åšåˆ°åº”ç”¨ä»£ç ä¸ä¾èµ–äº MyBatisï¼ŒSpring æˆ– MyBatis-Springã€‚</p><p><a href="http://mybatis.org/spring/zh/index.html">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://github.com/mybatis/spring">æºç ä»“åº“</a></p><p><a href="https://github.com/mybatis/jpetstore-6">å®˜æ–¹æ•´åˆç¤ºä¾‹</a></p><h2 id="61-æ•´åˆSpring-æ‰€æœ‰éœ€è¦çš„jaråŒ…å¯¼å…¥"><a href="#61-æ•´åˆSpring-æ‰€æœ‰éœ€è¦çš„jaråŒ…å¯¼å…¥" class="headerlink" title="61.æ•´åˆSpring-æ‰€æœ‰éœ€è¦çš„jaråŒ…å¯¼å…¥"></a>61.æ•´åˆSpring-æ‰€æœ‰éœ€è¦çš„jaråŒ…å¯¼å…¥</h2><p><a href="pom.xml">pom.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- DBè¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JSP --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç”¨äºæ•´åˆSpring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springframework.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="62-æ•´åˆSpring-å¼•å…¥MyBatisä¹‹å‰çš„é…ç½®"><a href="#62-æ•´åˆSpring-å¼•å…¥MyBatisä¹‹å‰çš„é…ç½®" class="headerlink" title="62.æ•´åˆSpring-å¼•å…¥MyBatisä¹‹å‰çš„é…ç½®"></a>62.æ•´åˆSpring-å¼•å…¥MyBatisä¹‹å‰çš„é…ç½®</h2><p><a href="src/main/resources/c06/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ˜¾ç¤ºçš„æŒ‡å®šæ¯ä¸ªæˆ‘ä»¬éœ€è¦æ›´æ”¹çš„é…ç½®çš„å€¼ï¼Œå³ä½¿ä»–æ˜¯é»˜è®¤çš„ã€‚é˜²æ­¢ç‰ˆæœ¬æ›´æ–°å¸¦æ¥çš„é—®é¢˜  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c06/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.c06.spring.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select * from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmps&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c01.helloworld.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select * from employee</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c06/spring/EmployeeMapper.java">EmployeeMapper</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getEmpById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmps</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="63-æ•´åˆSpring-SpringMVCé…ç½®æ–‡ä»¶ç¼–å†™"><a href="#63-æ•´åˆSpring-SpringMVCé…ç½®æ–‡ä»¶ç¼–å†™" class="headerlink" title="63.æ•´åˆSpring-SpringMVCé…ç½®æ–‡ä»¶ç¼–å†™"></a>63.æ•´åˆSpring-SpringMVCé…ç½®æ–‡ä»¶ç¼–å†™</h2><p><a href="src/main/webapp/WEB-INF/web.xml">web.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--Springé…ç½®ï¼š needed for ContextLoaderListener --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Bootstraps the root web application context before servlet initialization --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- SpringMVCé…ç½® --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- The front controller of this Spring Web application, responsible for handling all application requests --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/webapp/WEB-INF/spring-servlet.xml">spring-servlet.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">...</span>&quot;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--SpringMVCåªæ˜¯æ§åˆ¶ç½‘ç«™è·³è½¬é€»è¾‘  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åªæ‰«ææ§åˆ¶å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lun.c06&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="64-æ•´åˆSpring-Springé…ç½®æ–‡ä»¶ç¼–å†™"><a href="#64-æ•´åˆSpring-Springé…ç½®æ–‡ä»¶ç¼–å†™" class="headerlink" title="64.æ•´åˆSpring-Springé…ç½®æ–‡ä»¶ç¼–å†™"></a>64.æ•´åˆSpring-Springé…ç½®æ–‡ä»¶ç¼–å†™</h2><p><a href="src/main/resources/c06/applicationContext.xml">applicationContext.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Springå¸Œæœ›ç®¡ç†æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ç»„ä»¶ï¼Œç­‰ã€‚ã€‚ã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lun.c06&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:c04/dbconfig.properties&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Springç”¨æ¥æ§åˆ¶ä¸šåŠ¡é€»è¾‘ã€‚æ•°æ®æºã€äº‹åŠ¡æ§åˆ¶ã€aop --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- springäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span>/&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="65-æ•´åˆSpring-Springæ•´åˆMyBatiså…³é”®é…ç½®"><a href="#65-æ•´åˆSpring-Springæ•´åˆMyBatiså…³é”®é…ç½®" class="headerlink" title="65.æ•´åˆSpring-Springæ•´åˆMyBatiså…³é”®é…ç½®"></a>65.æ•´åˆSpring-Springæ•´åˆMyBatiså…³é”®é…ç½®</h2><p><a href="src/main/resources/c06/applicationContext.xml">applicationContext.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">æ•´åˆmybatis </span></span><br><span class="line"><span class="comment">ç›®çš„ï¼š1ã€springç®¡ç†æ‰€æœ‰ç»„ä»¶ã€‚mapperçš„å®ç°ç±»ã€‚</span></span><br><span class="line"><span class="comment">service==&gt;Dao   @Autowired:è‡ªåŠ¨æ³¨å…¥mapperï¼›</span></span><br><span class="line"><span class="comment">2ã€springç”¨æ¥ç®¡ç†äº‹åŠ¡ï¼Œspringå£°æ˜å¼äº‹åŠ¡</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åˆ›å»ºå‡ºSqlSessionFactoryå¯¹è±¡  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- configLocationæŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:c06/mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mapperLocations: æŒ‡å®šmapperæ–‡ä»¶çš„ä½ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:c06/*Mapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®ä¸€ä¸ªå¯ä»¥è¿›è¡Œæ‰¹é‡æ‰§è¡Œçš„sqlSession  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ‰«ææ‰€æœ‰çš„mapperæ¥å£çš„å®ç°ï¼Œè®©è¿™äº›mapperèƒ½å¤Ÿè‡ªåŠ¨æ³¨å…¥ï¼›</span></span><br><span class="line"><span class="comment">base-packageï¼šæŒ‡å®šmapperæ¥å£çš„åŒ…å</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mybatis-spring:scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lun.c06&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;property name=&quot;basePackage&quot; value=&quot;com.lun.dao&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">&lt;/bean&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="66-æ•´åˆSpring-æ•´åˆæµ‹è¯•"><a href="#66-æ•´åˆSpring-æ•´åˆæµ‹è¯•" class="headerlink" title="66.æ•´åˆSpring-æ•´åˆæµ‹è¯•"></a>66.æ•´åˆSpring-æ•´åˆæµ‹è¯•</h2><p><a href="src/main/java/com/lun/c06/spring/EmployeeController.java">EmployeeController.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">5415910268862124882L</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/getemps&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">emps</span><span class="params">(Map&lt;String,Object&gt; map)</span>&#123;</span><br><span class="line">List&lt;Employee&gt; emps = employeeService.getEmps();</span><br><span class="line">map.put(<span class="string">&quot;allEmps&quot;</span>, emps);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c06/spring/EmployeeService.java">EmployeeService.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getEmps</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//EmployeeMapper mapper = sqlSession.getMapper(EmployeeMapper.class);</span></span><br><span class="line"><span class="keyword">return</span> employeeMapper.getEmps();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/webapp/WEB-INF/pages/list.jsp">list.jsp</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>email<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;allEmps&#125;&quot;</span> <span class="attr">var</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;emp.id&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;emp.lastName&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;emp.email&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;emp.gender&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>æœ€åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥<code>http://localhost:8080/LearnMybatis/getemps</code>è¿›è¡Œæµ‹è¯•</p><h2 id="MyBatis-ä»£ç ç”Ÿæˆå™¨"><a href="#MyBatis-ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="MyBatis-ä»£ç ç”Ÿæˆå™¨"></a>MyBatis-ä»£ç ç”Ÿæˆå™¨</h2><p>MyBatis Generatorï¼š</p><p>ç®€ç§°MBGï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºMyBatisæ¡†æ¶ä½¿ç”¨è€…å®šåˆ¶çš„ä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥å¿«é€Ÿçš„æ ¹æ®è¡¨ç”Ÿæˆå¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼Œæ¥å£ï¼Œä»¥åŠbeanç±»ã€‚æ”¯æŒåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ï¼Œä»¥åŠQBCé£æ ¼çš„æ¡ä»¶æŸ¥è¯¢ã€‚ä½†æ˜¯è¡¨è¿æ¥ã€å­˜å‚¨è¿‡ç¨‹ç­‰è¿™äº›å¤æ‚sqlçš„å®šä¹‰éœ€è¦æˆ‘ä»¬æ‰‹å·¥ç¼–å†™</p><p><a href="http://www.mybatis.org/generator/">å®˜æ–¹æ–‡æ¡£åœ°å€</a></p><p><a href="https://github.com/mybatis/generator/releases">å®˜æ–¹å·¥ç¨‹åœ°å€</a></p><h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h3><ul><li>ä½¿ç”¨æ­¥éª¤ï¼š<ol><li>ç¼–å†™MBGçš„é…ç½®æ–‡ä»¶ï¼ˆé‡è¦å‡ å¤„é…ç½®ï¼‰<ol><li>jdbcConnectioné…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</li><li>javaModelGeneratoré…ç½®javaBeançš„ç”Ÿæˆç­–ç•¥</li><li>sqlMapGenerator é…ç½®sqlæ˜ å°„æ–‡ä»¶ç”Ÿæˆç­–ç•¥</li><li>javaClientGeneratoré…ç½®Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥</li><li>table é…ç½®è¦é€†å‘è§£æçš„æ•°æ®è¡¨<ul><li>tableNameï¼šè¡¨å</li><li>domainObjectNameï¼šå¯¹åº”çš„javaBeanå</li></ul></li></ol></li><li>è¿è¡Œä»£ç ç”Ÿæˆå™¨ç”Ÿæˆä»£ç </li></ol></li><li>æ³¨æ„ï¼š<ul><li>Contextæ ‡ç­¾<ul><li>targetRuntime&#x3D;â€œMyBatis3â€œå¯ä»¥ç”Ÿæˆå¸¦æ¡ä»¶çš„å¢åˆ æ”¹æŸ¥</li><li>targetRuntime&#x3D;â€œMyBatis3Simpleâ€œå¯ä»¥ç”ŸæˆåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥</li></ul></li><li>å¦‚æœå†æ¬¡ç”Ÿæˆï¼Œå»ºè®®å°†ä¹‹å‰ç”Ÿæˆçš„æ•°æ®åˆ é™¤ï¼Œé¿å…xmlå‘åè¿½åŠ å†…å®¹å‡ºç°çš„é—®é¢˜ã€‚</li></ul></li></ul><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p><a href="src/main/resources/c07/mbg.xml">mbg.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">targetRuntime=&quot;MyBatis3Simple&quot;:ç”Ÿæˆç®€å•ç‰ˆçš„CRUD</span></span><br><span class="line"><span class="comment">&quot;MyBatis3&quot;:è±ªåç‰ˆ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;c04/dbconfig.properties&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- jdbcConnectionï¼šæŒ‡å®šå¦‚ä½•è¿æ¥åˆ°ç›®æ ‡æ•°æ®åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">connectionURL</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">userId</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">password</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- javaModelGeneratorï¼šæŒ‡å®šjavaBeançš„ç”Ÿæˆç­–ç•¥ </span></span><br><span class="line"><span class="comment">targetPackage=&quot;test.model&quot;ï¼šç›®æ ‡åŒ…å</span></span><br><span class="line"><span class="comment">targetProject=&quot;\MBGTestProject\src&quot;ï¼šç›®æ ‡å·¥ç¨‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.lun.bean&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">targetProject</span>=<span class="string">&quot;C:\\src&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- sqlMapGeneratorï¼šsqlæ˜ å°„ç”Ÿæˆç­–ç•¥ï¼š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.lun.dao&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">targetProject</span>=<span class="string">&quot;C:\\src&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- javaClientGenerator:æŒ‡å®šmapperæ¥å£æ‰€åœ¨çš„ä½ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.lun.dao&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">targetProject</span>=<span class="string">&quot;C:\\src&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šè¦é€†å‘åˆ†æå“ªäº›è¡¨ï¼šæ ¹æ®è¡¨è¦åˆ›å»ºjavaBean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;department&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Department&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;employee&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆå™¨ä»£ç "><a href="#ç”Ÿæˆå™¨ä»£ç " class="headerlink" title="ç”Ÿæˆå™¨ä»£ç "></a>ç”Ÿæˆå™¨ä»£ç </h3><p><a href="src/main/java/com/lun/c07/generator/GenerateCode.java">GenerateCode.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenerateCode</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">List&lt;String&gt; warnings = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="type">boolean</span> <span class="variable">overwrite</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="type">File</span> <span class="variable">configFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(GenerateCode.class.getClassLoader().getResource(<span class="string">&quot;c07/mbg.xml&quot;</span>).getFile());</span><br><span class="line"><span class="type">ConfigurationParser</span> <span class="variable">cp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConfigurationParser</span>(warnings);</span><br><span class="line"><span class="type">Configuration</span> <span class="variable">config</span> <span class="operator">=</span> cp.parseConfiguration(configFile);</span><br><span class="line"><span class="type">DefaultShellCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultShellCallback</span>(overwrite);</span><br><span class="line"><span class="type">MyBatisGenerator</span> <span class="variable">myBatisGenerator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBatisGenerator</span>(config, callback, warnings);</span><br><span class="line">myBatisGenerator.generate(<span class="literal">null</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="QBCé£æ ¼çš„å¸¦æ¡ä»¶æŸ¥è¯¢"><a href="#QBCé£æ ¼çš„å¸¦æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="QBCé£æ ¼çš„å¸¦æ¡ä»¶æŸ¥è¯¢"></a>QBCé£æ ¼çš„å¸¦æ¡ä»¶æŸ¥è¯¢</h3><p>ç”Ÿæˆå™¨ä¼šQBCé£æ ¼ä»£ç </p><blockquote><p>QBC(Query By Criteria) APIæä¾›äº†æ£€ç´¢å¯¹è±¡çš„å¦ä¸€ç§æ–¹å¼ï¼Œå®ƒä¸»è¦ç”±Criteriaæ¥å£ã€Criterionæ¥å£å’ŒExpressonç±»ç»„æˆï¼Œå®ƒæ”¯æŒåœ¨è¿è¡Œæ—¶åŠ¨æ€ç”ŸæˆæŸ¥è¯¢è¯­å¥ã€‚</p><p>From <a href="https://baike.baidu.com/item/QBC/1529451">https://baike.baidu.com/item/QBC/1529451</a></p></blockquote><p>QBCé£æ ¼ä»£ç ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> build.openSession();</span><br><span class="line"><span class="type">DeptMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(DeptMapper.class);</span><br><span class="line"><span class="type">DeptExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeptExample</span>();</span><br><span class="line"><span class="comment">//æ‰€æœ‰çš„æ¡ä»¶éƒ½åœ¨exampleä¸­å°è£…</span></span><br><span class="line"><span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> example.createCriteria();</span><br><span class="line"><span class="comment">//select id, deptName, locAdd from tbl_dept WHERE</span></span><br><span class="line"><span class="comment">//( deptName like ? and id &gt; ? )</span></span><br><span class="line">criteria.andDeptnameLike(<span class="string">&quot;%éƒ¨%&quot;</span>);</span><br><span class="line">criteria.andIdGreaterThan(<span class="number">2</span>);</span><br><span class="line">List&lt;Dept&gt; list = mapper.selectByExample(example);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Dept dept : list) &#123;</span><br><span class="line">System.out.println(dept);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="MyBatis-å·¥ä½œåŸç†"><a href="#MyBatis-å·¥ä½œåŸç†" class="headerlink" title="MyBatis-å·¥ä½œåŸç†"></a>MyBatis-å·¥ä½œåŸç†</h2><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/05.png"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/07.png"></p><hr><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/08.png" alt="æ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºSQLSessionFactory"></p><ul><li>Configurationå°è£…äº†æ‰€æœ‰é…ç½®æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</li><li>æ€»ç»“ï¼šæŠŠé…ç½®æ–‡ä»¶çš„ä¿¡æ¯è§£æå¹¶ä¿å­˜åœ¨Configurationå¯¹è±¡ä¸­ï¼Œè¿”å›åŒ…å«äº†Configurationçš„DefaultSqlSessionå¯¹è±¡ã€‚</li></ul><hr><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/09.png" alt="openSessionè·å–sqlSessionå¯¹è±¡"></p><ul><li>è¿”å›SqlSessionçš„å®ç°ç±»DefaultSqlSessionå¯¹è±¡ã€‚ä»–é‡Œé¢åŒ…å«äº†Executorå’ŒConfiguration</li><li>Executorä¼šåœ¨è¿™ä¸€æ­¥è¢«åˆ›å»º</li></ul><hr><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/10.png" alt="getMapperè¿”å›æ¥å£çš„ä»£ç†å¯¹è±¡åŒ…å«äº†SqlSessionå¯¹è±¡"></p><hr><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/11.png" alt="æŸ¥è¯¢æµç¨‹"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/12.png" alt="æŸ¥è¯¢æµç¨‹æ€»ç»“"></p><ul><li>StatementHandlerï¼šå¤„ç†sqlè¯­å¥é¢„ç¼–è¯‘ï¼Œè®¾ç½®å‚æ•°ç­‰ç›¸å…³å·¥ä½œï¼›</li><li>ParameterHandlerï¼šè®¾ç½®é¢„ç¼–è¯‘å‚æ•°ç”¨çš„</li><li>ResultHandlerï¼šå¤„ç†ç»“æœé›†</li><li>TypeHandlerï¼šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œæ•°æ®åº“ç±»å‹å’ŒjavaBeanç±»å‹çš„æ˜ å°„</li></ul><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ol><li>æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆå…¨å±€ï¼Œsqlæ˜ å°„ï¼‰åˆå§‹åŒ–å‡ºConfigurationå¯¹è±¡</li><li>åˆ›å»ºä¸€ä¸ªDefaultSqlSessionå¯¹è±¡ï¼Œå®ƒé‡Œé¢åŒ…å«Configurationä»¥åŠExecutorï¼ˆæ ¹æ®å…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„defaultExecutorTypeåˆ›å»ºå‡ºå¯¹åº”çš„Executorï¼‰</li><li>DefaultSqlSession.getMapperï¼ˆï¼‰ï¼šæ‹¿åˆ°Mapperæ¥å£å¯¹åº”çš„MapperProxyï¼›</li><li>MapperProxyé‡Œé¢æœ‰ï¼ˆDefaultSqlSessionï¼‰ï¼›</li><li>æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼š<ol><li>è°ƒç”¨DefaultSqlSessionçš„å¢åˆ æ”¹æŸ¥ï¼ˆExecutorï¼‰ï¼›</li><li>ä¼šåˆ›å»ºä¸€ä¸ªStatementHandlerå¯¹è±¡ã€‚åŒæ—¶ä¹Ÿä¼šåˆ›å»ºå‡ºParameterHandlerå’ŒResultSetHandlerï¼‰</li><li>è°ƒç”¨StatementHandleré¢„ç¼–è¯‘å‚æ•°ä»¥åŠè®¾ç½®å‚æ•°å€¼ï¼Œä½¿ç”¨ParameterHandleræ¥ç»™sqlè®¾ç½®å‚æ•°</li><li>è°ƒç”¨StatementHandlerçš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼›</li><li>ResultSetHandlerå°è£…ç»“æœ</li></ol></li></ol><p><strong>æ³¨æ„</strong>ï¼šå››å¤§å¯¹è±¡(Executorã€ParameterHandlerã€ResultSetHandler)æ¯ä¸ªåˆ›å»ºçš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªinterceptorChain.pluginAll(parameterHandler);</p><h2 id="MyBatis-æ’ä»¶å¼€å‘"><a href="#MyBatis-æ’ä»¶å¼€å‘" class="headerlink" title="MyBatis-æ’ä»¶å¼€å‘"></a>MyBatis-æ’ä»¶å¼€å‘</h2><p>åœ¨å››å¤§å¯¹è±¡åˆ›å»ºçš„æ—¶å€™</p><ol><li>æ¯ä¸ªåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä¸æ˜¯ç›´æ¥è¿”å›çš„ï¼Œè€Œæ˜¯interceptorChain.pluginAll(parameterHandler);</li><li>è·å–åˆ°æ‰€æœ‰çš„Interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼ˆæ’ä»¶éœ€è¦å®ç°çš„æ¥å£ï¼‰ï¼›è°ƒç”¨interceptor.plugin(target);è¿”å›targetåŒ…è£…åçš„å¯¹è±¡</li><li>æ’ä»¶æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ’ä»¶ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼›AOPï¼ˆé¢å‘åˆ‡é¢ï¼‰æˆ‘ä»¬çš„æ’ä»¶å¯ä»¥ä¸ºå››å¤§å¯¹è±¡åˆ›å»ºå‡ºä»£ç†å¯¹è±¡ï¼›ä»£ç†å¯¹è±¡å°±å¯ä»¥æ‹¦æˆªåˆ°å››å¤§å¯¹è±¡çš„æ¯ä¸€ä¸ªæ‰§è¡Œï¼›</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">pluginAll</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Interceptor interceptor : interceptors) &#123;</span><br><span class="line">      target = interceptor.plugin(target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis å…è®¸ä½¿ç”¨æ’ä»¶æ¥æ‹¦æˆªçš„æ–¹æ³•è°ƒç”¨åŒ…æ‹¬ï¼š</p><ul><li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li><li>ParameterHandler (getParameterObject, setParameters)</li><li>ResultSetHandler (handleResultSets, handleOutputParameters)</li><li>StatementHandler (prepare, parameterize, batch, update, query)</li></ul><h3 id="æ’ä»¶å¼€å‘"><a href="#æ’ä»¶å¼€å‘" class="headerlink" title="æ’ä»¶å¼€å‘"></a>æ’ä»¶å¼€å‘</h3><p>æ’ä»¶å¼€å‘æ­¥éª¤ï¼š</p><ol><li>ç¼–å†™æ’ä»¶å®ç°Interceptoræ¥å£ï¼Œå¹¶ä½¿ç”¨ @Interceptsæ³¨è§£å®Œæˆæ’ä»¶ç­¾å</li><li>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ’ä»¶</li></ol><p><a href="src/main/java/com/lun/c08/interceptor/MyFirstPlugin.java">MyFirstPlugin.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®Œæˆæ’ä»¶ç­¾åï¼Œç”¨äºæ‹¦æˆªå“ªä¸ªå¯¹è±¡çš„å“ªä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="meta">@Intercepts(&#123;</span></span><br><span class="line"><span class="meta">    @Signature(type=StatementHandler.class,method=&quot;parameterize&quot;,args=java.sql.Statement.class)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFirstPlugin</span> <span class="keyword">implements</span> <span class="title class_">Interceptor</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * intercept:æ‹¦æˆª</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(<span class="string">&quot;myfirstplugin...interceptï¼š&quot;</span> + invocation.getMethod());</span><br><span class="line">        <span class="type">Object</span> <span class="variable">target</span> <span class="operator">=</span> invocation.getTarget();</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰æ‹¦æˆªåˆ°çš„å¯¹è±¡ï¼š&quot;</span>+target);</span><br><span class="line">        <span class="type">MetaObject</span> <span class="variable">metaObject</span> <span class="operator">=</span> SystemMetaObject.forObject(target);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> metaObject.getValue(<span class="string">&quot;parameterHandler.parameterObject&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;sqlè¯­å¥ä¸­çš„å‚æ•°æ˜¯ï¼š&quot;</span>+value);</span><br><span class="line">        metaObject.setValue(<span class="string">&quot;parameterHandler.parameterObject&quot;</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> invocation.proceed();</span><br><span class="line">        <span class="comment">//è¿”å›æ‰§è¡Œåçš„è¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åŒ…è£…ç›®æ ‡å¯¹è±¡ï¼Œä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">plugin</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--&gt;myfirstplugin...pluginï¼Œå°†è¦åŒ…è£…çš„å¯¹è±¡ï¼š&quot;</span>+target);</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">wrap</span> <span class="operator">=</span> Plugin.wrap(target, <span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//è¿”å›ä¸ºå½“å‰targetåˆ›å»ºçš„åŠ¨æ€ä»£ç†</span></span><br><span class="line">        <span class="keyword">return</span> wrap;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°†æ’ä»¶æ³¨å†Œæ—¶çš„propertyå±æ€§è®¾ç½®è¿›æ¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ’ä»¶é…ç½®çš„ä¿¡æ¯ï¼š&quot;</span>+properties);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="src/main/resources/c08/mybatis-config.xml">mybatis-config.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.lun.c08.interceptor.MyFirstPlugin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯å®ç°å¤šä¸ªæ’ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.lun.c08.interceptor.MySecondPlugin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶åŸç†"><a href="#æ’ä»¶åŸç†" class="headerlink" title="æ’ä»¶åŸç†"></a>æ’ä»¶åŸç†</h3><ul><li>æŒ‰ç…§æ’ä»¶æ³¨è§£å£°æ˜ï¼ŒæŒ‰ç…§æ’ä»¶é…ç½®é¡ºåºè°ƒç”¨æ’ä»¶pluginæ–¹æ³•ï¼Œç”Ÿæˆè¢«æ‹¦æˆªå¯¹è±¡çš„åŠ¨æ€ä»£ç†</li><li>å¤šä¸ªæ’ä»¶ä¾æ¬¡ç”Ÿæˆç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå±‚å±‚åŒ…è£¹ï¼Œå…ˆå£°æ˜çš„å…ˆåŒ…è£¹ï¼›å½¢æˆä»£ç†é“¾</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œæ—¶ä¾æ¬¡ä»å¤–åˆ°å†…æ‰§è¡Œæ’ä»¶çš„interceptæ–¹æ³•ã€‚</li><li>å¤šä¸ªæ’ä»¶æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦åœ¨æŸä¸ªæ’ä»¶ä¸­åˆ†ç¦»å‡ºç›®æ ‡å¯¹è±¡ã€‚å¯ä»¥å€ŸåŠ©MyBatisæä¾›çš„SystemMetaObjectç±»æ¥è¿›è¡Œè·å–æœ€åä¸€å±‚çš„hä»¥åŠtargetå±æ€§çš„å€¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/06.png"></p><h3 id="Interceptoræ¥å£"><a href="#Interceptoræ¥å£" class="headerlink" title="Interceptoræ¥å£"></a>Interceptoræ¥å£</h3><ul><li>Interceptï¼šæ‹¦æˆªç›®æ ‡æ–¹æ³•æ‰§è¡Œ</li><li>pluginï¼šç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨MyBatisæä¾›çš„Pluginç±»çš„wrapæ–¹æ³•</li><li>setPropertiesï¼šæ³¨å…¥æ’ä»¶é…ç½®æ—¶è®¾ç½®çš„å±æ€§</li></ul><h3 id="å¸¸ç”¨ä»£ç "><a href="#å¸¸ç”¨ä»£ç " class="headerlink" title="å¸¸ç”¨ä»£ç "></a>å¸¸ç”¨ä»£ç </h3><p>ä»ä»£ç†é“¾ä¸­åˆ†ç¦»çœŸå®è¢«ä»£ç†å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€åˆ†ç¦»ä»£ç†å¯¹è±¡ã€‚ç”±äºä¼šå½¢æˆå¤šæ¬¡ä»£ç†ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">while</span> å¾ªç¯åˆ†ç¦»å‡ºæœ€ç»ˆè¢«ä»£ç†å¯¹è±¡ï¼Œä»è€Œæ–¹ä¾¿æå–ä¿¡æ¯</span><br><span class="line"><span class="type">MetaObject</span> <span class="variable">metaObject</span> <span class="operator">=</span> SystemMetaObject.forObject(target);</span><br><span class="line"><span class="keyword">while</span> (metaObject.hasGetter(<span class="string">&quot;h&quot;</span>)) &#123;</span><br><span class="line"><span class="type">Object</span> <span class="variable">h</span> <span class="operator">=</span> metaObject.getValue(<span class="string">&quot;h&quot;</span>);</span><br><span class="line">metaObject = SystemMetaObject.forObject(h);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2ã€è·å–åˆ°ä»£ç†å¯¹è±¡ä¸­åŒ…å«çš„è¢«ä»£ç†çš„çœŸå®å¯¹è±¡</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> metaObject.getValue(<span class="string">&quot;target&quot;</span>);</span><br><span class="line"><span class="comment">//3ã€è·å–è¢«ä»£ç†å¯¹è±¡çš„MetaObjectæ–¹ä¾¿è¿›è¡Œä¿¡æ¯æå–</span></span><br><span class="line"><span class="type">MetaObject</span> <span class="variable">forObject</span> <span class="operator">=</span> SystemMetaObject.forObject(obj);</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µ"><a href="#æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µ" class="headerlink" title="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µ"></a>æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-PageHelperæ’ä»¶è¿›è¡Œåˆ†é¡µ</h2><p><a href="https://github.com/pagehelper/Mybatis-PageHelper">PageHelperæ’ä»¶å®˜ç½‘</a></p><p><a href="pom.xml">pom.xml</a>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†é¡µæ’ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c09/mybatis-config.xml">MyBatiså…¨å±€é…ç½®æ–‡ä»¶</a>æ³¨å†Œæ’ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c09/other/PageHelperTest.java">ä½¿ç”¨ç¤ºä¾‹</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageHelperTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c09/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">// 2ã€è·å–sqlSessionå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(EmployeeMapper.class);</span><br><span class="line">Page&lt;Object&gt; page = PageHelper.startPage(<span class="number">5</span>, <span class="number">1</span>);<span class="comment">//&lt;---------------------</span></span><br><span class="line"></span><br><span class="line">List&lt;Employee&gt; emps = mapper.getEmps();</span><br><span class="line"><span class="comment">//ä¼ å…¥è¦è¿ç»­æ˜¾ç¤ºå¤šå°‘é¡µ</span></span><br><span class="line">PageInfo&lt;Employee&gt; info = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(emps, <span class="number">5</span>);<span class="comment">//&lt;---------------------</span></span><br><span class="line"><span class="keyword">for</span> (Employee employee : emps) &#123;</span><br><span class="line">System.out.println(employee);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*System.out.println(&quot;å½“å‰é¡µç ï¼š&quot;+page.getPageNum());</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ€»è®°å½•æ•°ï¼š&quot;+page.getTotal());</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ¯é¡µçš„è®°å½•æ•°ï¼š&quot;+page.getPageSize());</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ€»é¡µç ï¼š&quot;+page.getPages());*/</span></span><br><span class="line"><span class="comment">///xxx</span></span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰é¡µç ï¼š&quot;</span>+info.getPageNum());</span><br><span class="line">System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+info.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;æ¯é¡µçš„è®°å½•æ•°ï¼š&quot;</span>+info.getPageSize());</span><br><span class="line">System.out.println(<span class="string">&quot;æ€»é¡µç ï¼š&quot;</span>+info.getPages());</span><br><span class="line">System.out.println(<span class="string">&quot;æ˜¯å¦ç¬¬ä¸€é¡µï¼š&quot;</span>+info.isIsFirstPage());</span><br><span class="line">System.out.println(<span class="string">&quot;è¿ç»­æ˜¾ç¤ºçš„é¡µç ï¼š&quot;</span>);</span><br><span class="line"><span class="type">int</span>[] nums = info.getNavigatepageNums();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">System.out.println(nums[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xxxx</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-æ‰¹é‡æ“ä½œ"><a href="#æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-æ‰¹é‡æ“ä½œ" class="headerlink" title="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-æ‰¹é‡æ“ä½œ"></a>æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-æ‰¹é‡æ“ä½œ</h2><ul><li>é»˜è®¤çš„ openSession() æ–¹æ³•æ²¡æœ‰å‚æ•°,å®ƒä¼šåˆ›å»ºæœ‰å¦‚ä¸‹ç‰¹æ€§çš„<ul><li>ä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡(ä¹Ÿå°±æ˜¯ä¸è‡ªåŠ¨æäº¤)</li><li>è¿æ¥å¯¹è±¡ä¼šä»ç”±æ´»åŠ¨ç¯å¢ƒé…ç½®çš„æ•°æ®æºå®ä¾‹å¾—åˆ°ã€‚</li><li>äº‹åŠ¡éš”ç¦»çº§åˆ«å°†ä¼šä½¿ç”¨é©±åŠ¨æˆ–æ•°æ®æºçš„é»˜è®¤è®¾ç½®ã€‚</li><li>é¢„å¤„ç†è¯­å¥ä¸ä¼šè¢«å¤ç”¨,ä¹Ÿä¸ä¼šæ‰¹é‡å¤„ç†æ›´æ–°ã€‚</li></ul></li><li>openSession æ–¹æ³•çš„ ExecutorType ç±»å‹çš„å‚æ•°ï¼Œæšä¸¾ç±»å‹:<ul><li>ExecutorType.SIMPLE: è¿™ä¸ªæ‰§è¡Œå™¨ç±»å‹ä¸åšç‰¹æ®Šçš„äº‹æƒ…ï¼ˆè¿™æ˜¯é»˜è®¤è£…é…çš„ï¼‰ã€‚å®ƒä¸ºæ¯ä¸ªè¯­å¥çš„æ‰§è¡Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ã€‚</li><li>ExecutorType.REUSE: è¿™ä¸ªæ‰§è¡Œå™¨ç±»å‹ä¼šå¤ç”¨é¢„å¤„ç†è¯­å¥ã€‚</li><li>ExecutorType.BATCH: è¿™ä¸ªæ‰§è¡Œå™¨ä¼šæ‰¹é‡æ‰§è¡Œæ‰€æœ‰æ›´æ–°è¯­å¥</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/13.png"></p><p>æ‰¹é‡æ“ä½œæˆ‘ä»¬æ˜¯ä½¿ç”¨MyBatisæä¾›çš„BatchExecutorè¿›è¡Œçš„ï¼Œå®ƒçš„åº•å±‚å°±æ˜¯é€šè¿‡jdbcæ”’sqlçš„æ–¹å¼è¿›è¡Œçš„ã€‚æˆ‘ä»¬å¯ä»¥è®©ä»–æ”’å¤Ÿä¸€å®šæ•°é‡åå‘ç»™æ•°æ®åº“ä¸€æ¬¡ã€‚</p><p><a href="src/test/java/com/lun/c09/other/BatchTest.java">BatchTest.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatchTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c09/mybatis-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥æ‰§è¡Œæ‰¹é‡æ“ä½œçš„sqlSession</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(ExecutorType.BATCH);</span><br><span class="line"><span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">mapper.addEmp(<span class="keyword">new</span> <span class="title class_">Employee</span>(UUID.randomUUID().toString().substring(<span class="number">0</span>, <span class="number">5</span>), <span class="string">&quot;b&quot;</span>, <span class="string">&quot;1&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line">openSession.commit();</span><br><span class="line"><span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"><span class="comment">//æ‰¹é‡ï¼šï¼ˆé¢„ç¼–è¯‘sqlä¸€æ¬¡==&gt;è®¾ç½®å‚æ•°===&gt;10000æ¬¡===&gt;æ‰§è¡Œï¼ˆ1æ¬¡ï¼‰ï¼‰</span></span><br><span class="line"><span class="comment">//Parameters: 616c1(String), b(String), 1(String)==&gt;4598</span></span><br><span class="line"><span class="comment">//éæ‰¹é‡ï¼šï¼ˆé¢„ç¼–è¯‘sql=è®¾ç½®å‚æ•°=æ‰§è¡Œï¼‰==ã€‹10000    10200</span></span><br><span class="line">System.out.println(<span class="string">&quot;æ‰§è¡Œæ—¶é•¿ï¼š&quot;</span>+(end-start));</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ä¸Springæ•´åˆä¸­ï¼Œæˆ‘ä»¬æ¨èï¼Œé¢å¤–çš„é…ç½®ä¸€ä¸ªå¯ä»¥ä¸“é—¨ç”¨æ¥æ‰§è¡Œæ‰¹é‡æ“ä½œçš„SqlSession</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ä¸€ä¸ªå¯ä»¥è¿›è¡Œæ‰¹é‡æ‰§è¡Œçš„sqlSession  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦ç”¨åˆ°æ‰¹é‡æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨å…¥é…ç½®çš„è¿™ä¸ªæ‰¹é‡SqlSessionã€‚é€šè¿‡ä»–è·å–åˆ°mapperæ˜ å°„å™¨è¿›è¡Œæ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>æ‰¹é‡æ“ä½œæ˜¯åœ¨session.commit()ä»¥åæ‰å‘é€sqlè¯­å¥ç»™æ•°æ®åº“è¿›è¡Œæ‰§è¡Œçš„</li><li>å¦‚æœæˆ‘ä»¬æƒ³è®©å…¶æå‰æ‰§è¡Œï¼Œä»¥æ–¹ä¾¿åç»­å¯èƒ½çš„æŸ¥è¯¢æ“ä½œè·å–æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨sqlSession.flushStatements()æ–¹æ³•ï¼Œè®©å…¶ç›´æ¥å†²åˆ·åˆ°æ•°æ®åº“è¿›è¡Œæ‰§è¡Œã€‚</li></ol><h2 id="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-å­˜å‚¨è¿‡ç¨‹"><a href="#æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-å­˜å‚¨è¿‡ç¨‹"></a>æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-å­˜å‚¨è¿‡ç¨‹</h2><p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¹Ÿä¼šå†™ä¸€äº›å­˜å‚¨è¿‡ç¨‹ï¼ŒMyBatisä¹Ÿæ”¯æŒå¯¹å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨</p><p>ä¸€ä¸ªæœ€ç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create procedure test()</span><br><span class="line">begin</span><br><span class="line">select &#x27;hello&#x27;;</span><br><span class="line">end $$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><p>å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨ï¼š</p><ol><li>selectæ ‡ç­¾ä¸­statementType&#x3D;â€œCALLABLEâ€</li><li>æ ‡ç­¾ä½“ä¸­è°ƒç”¨è¯­æ³•ï¼š<code>&#123;call procedure_name(#&#123;param1_info&#125;,#&#123;param2_info&#125;)&#125;</code></li></ol><p>MyBatiså¯¹å­˜å‚¨è¿‡ç¨‹çš„æ¸¸æ ‡æä¾›äº†ä¸€ä¸ªJdbcType&#x3D;CURSORçš„æ”¯æŒï¼Œå¯ä»¥æ™ºèƒ½çš„æŠŠæ¸¸æ ‡è¯»å–åˆ°çš„æ•°æ®ï¼Œæ˜ å°„åˆ°æˆ‘ä»¬å£°æ˜çš„ç»“æœé›†ä¸­</p><p>oracleå­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span></span><br><span class="line">hello_ test(</span><br><span class="line">p_start <span class="keyword">in</span> <span class="type">int</span>,p_end <span class="keyword">in</span> <span class="type">int</span>,p_count <span class="keyword">out</span> <span class="type">int</span>,p_emps <span class="keyword">out</span> sys_refcursor)</span><br><span class="line">) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> p_count <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">open</span> p_emps <span class="keyword">for</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> rownum rn,e.<span class="operator">*</span> <span class="keyword">from</span> employees e <span class="keyword">where</span> rownum<span class="operator">&lt;=</span>p_end )</span><br><span class="line"><span class="keyword">where</span> rn<span class="operator">&gt;=</span>p_start;</span><br><span class="line"><span class="keyword">end</span> hello_test;</span><br></pre></td></tr></table></figure><p>mapper.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lun.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- public void getPageByProcedure(); </span></span><br><span class="line"><span class="comment">1ã€ä½¿ç”¨selectæ ‡ç­¾å®šä¹‰è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">2ã€statementType=&quot;CALLABLE&quot;:è¡¨ç¤ºè¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">3ã€&#123;call procedure_name(params)&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getPageByProcedure&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">databaseId</span>=<span class="string">&quot;oracle&quot;</span>&gt;</span></span><br><span class="line">&#123;call hello_test(</span><br><span class="line">#&#123;start,mode=IN,jdbcType=INTEGER&#125;,</span><br><span class="line">#&#123;end,mode=IN,jdbcType=INTEGER&#125;,</span><br><span class="line">#&#123;count,mode=OUT,jdbcType=INTEGER&#125;,</span><br><span class="line">#&#123;emps,mode=OUT,jdbcType=CURSOR,javaType=ResultSet,resultMap=PageEmp&#125;</span><br><span class="line">)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;PageEmp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;EMPLOYEE_ID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;LAST_NAME&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;EMAIL&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¨å±€é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Oracle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * oracleåˆ†é¡µï¼š</span></span><br><span class="line"><span class="comment"> * å€ŸåŠ©rownumï¼šè¡Œå·ï¼›å­æŸ¥è¯¢ï¼›</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨è¿‡ç¨‹åŒ…è£…åˆ†é¡µé€»è¾‘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProcedure</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> getSqlSessionFactory();</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="type">OraclePage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OraclePage</span>();</span><br><span class="line">page.setStart(<span class="number">1</span>);</span><br><span class="line">page.setEnd(<span class="number">5</span>);</span><br><span class="line">mapper.getPageByProcedure(page);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+page.getCount());</span><br><span class="line">System.out.println(<span class="string">&quot;æŸ¥å‡ºçš„æ•°æ®ï¼š&quot;</span>+page.getEmps().size());</span><br><span class="line">System.out.println(<span class="string">&quot;æŸ¥å‡ºçš„æ•°æ®ï¼š&quot;</span>+page.getEmps());</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OraclePage</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> start;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> end;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line"><span class="keyword">private</span> List&lt;Employee&gt; emps;</span><br><span class="line"></span><br><span class="line"><span class="comment">//setter and getter</span></span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-typeHandlerå¤„ç†æšä¸¾"><a href="#æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-typeHandlerå¤„ç†æšä¸¾" class="headerlink" title="æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-typeHandlerå¤„ç†æšä¸¾"></a>æ‰©å±•-MyBatiså®ç”¨åœºæ™¯-typeHandlerå¤„ç†æšä¸¾</h2><h3 id="çƒ­èº«"><a href="#çƒ­èº«" class="headerlink" title="çƒ­èº«"></a>çƒ­èº«</h3><p>æ–°å»ºä¸€ä¸ªæšä¸¾ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">EmpStatus</span> &#123;</span><br><span class="line">LOGIN,LOGOUT,REMOVE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æšä¸¾çš„ç›¸å…³å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEnumUse</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">EmpStatus</span> <span class="variable">login</span> <span class="operator">=</span> EmpStatus.LOGIN;</span><br><span class="line">System.out.println(<span class="string">&quot;æšä¸¾çš„ç´¢å¼•ï¼š&quot;</span> + login.ordinal());</span><br><span class="line">System.out.println(<span class="string">&quot;æšä¸¾çš„åå­—ï¼š&quot;</span> + login.name());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æšä¸¾çš„ç´¢å¼•ï¼š0</span><br><span class="line">æšä¸¾çš„åå­—ï¼šLOGIN</span><br></pre></td></tr></table></figure><hr><p>è‹¥å­˜å…¥æšä¸¾å±æ€§åˆ°æ•°æ®åº“ï¼Œæ•°æ®åº“è¡¨ä¼šå‘ˆç°æ€æ ·çš„å€¼ï¼Ÿ</p><p><a href="src/main/java/com/lun/c09/other/bean/Employee.java">Employeeç±»</a>æ·»åŠ ä¸€ä¸ªæšä¸¾å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String lastName;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> String gender;</span><br><span class="line"><span class="keyword">private</span> <span class="type">EmpStatus</span> <span class="variable">empStatus</span> <span class="operator">=</span> EmpStatus.LOGOUT;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹è¡¨ç»“æ„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> EmpStatus <span class="type">VARCHAR</span>(<span class="number">255</span>);</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c09/other/dao/EmployeeMapper.java">EmployeeMapper.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmp2</span><span class="params">(com.lun.c09.other.bean.Employee em)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> com.lun.c09.other.bean.Employee <span class="title function_">getEmpById2</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="src/main/resources/c09/EmployeeMapper.xml">EmployeeMapper.xml</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmp2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.lun.c09.other.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> &gt;</span></span><br><span class="line">insert into employee(last_name,email,gender,empStatus) </span><br><span class="line">values(#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;,#&#123;empStatus&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lun.c09.other.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">select id,last_name lastName,email,gender,empStatus from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/test/java/com/lun/c09/other/EnumTest.java">æµ‹è¯•æ–¹æ³•</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤mybatisåœ¨å¤„ç†æšä¸¾å¯¹è±¡çš„æ—¶å€™ä¿å­˜çš„æ˜¯æšä¸¾çš„åå­—ï¼šEnumTypeHandler</span></span><br><span class="line"><span class="comment"> * æ”¹å˜ä½¿ç”¨ï¼šEnumOrdinalTypeHandlerï¼š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEnum</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> Tools.getSqlSessionFactory(<span class="string">&quot;c09/mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">openSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="type">EmployeeMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> openSession.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;test_enum&quot;</span>, <span class="string">&quot;enum@abc.com&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">mapper.addEmp2(employee);</span><br><span class="line"><span class="comment">//System.out.println(&quot;ä¿å­˜æˆåŠŸ&quot;+employee.getId());</span></span><br><span class="line"><span class="comment">//openSession.commit();</span></span><br><span class="line"><span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> mapper.getEmpById2(employee.getId());</span><br><span class="line">System.out.println(empById.getEmpStatus());</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯å­˜å…¥<code>LOGOUT</code>åˆ°æ•°æ®åº“è¡¨ã€‚</p><p>å› æ­¤ï¼Œé»˜è®¤mybatisåœ¨å¤„ç†æšä¸¾å¯¹è±¡çš„æ—¶å€™ä¿å­˜çš„æ˜¯æšä¸¾çš„åå­—ï¼šEnumTypeHandler</p><p>å°†æƒ³<strong>å­˜æ•°å€¼</strong>åˆ°æ•°æ®åº“è¡¨ï¼Œæ”¹ç”¨EnumOrdinalTypeHandler</p><p>åœ¨<a href="src/main/resources/c09/mybatis-config.xml">MyBatiså­˜å‚¨æ–‡ä»¶</a>æ³¨å†Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.EnumOrdinalTypeHandler&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">javaType</span>=<span class="string">&quot;com.lun.c09.other.bean.EmpStatus&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰TypeHandler"><a href="#è‡ªå®šä¹‰TypeHandler" class="headerlink" title="è‡ªå®šä¹‰TypeHandler"></a>è‡ªå®šä¹‰TypeHandler</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰TypeHandlerçš„å½¢å¼æ¥åœ¨è®¾ç½®å‚æ•°æˆ–è€…å–å‡ºç»“æœé›†çš„æ—¶å€™è‡ªå®šä¹‰å‚æ•°å°è£…ç­–ç•¥ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>å®ç°TypeHandleræ¥å£æˆ–è€…ç»§æ‰¿BaseTypeHandler</li><li>ä½¿ç”¨@MappedTypeså®šä¹‰å¤„ç†çš„javaç±»å‹ï¼Œä½¿ç”¨@MappedJdbcTypeså®šä¹‰jdbcTypeç±»å‹</li><li>åœ¨è‡ªå®šä¹‰ç»“æœé›†æ ‡ç­¾æˆ–è€…å‚æ•°å¤„ç†çš„æ—¶å€™å£°æ˜ä½¿ç”¨è‡ªå®šä¹‰TypeHandlerè¿›è¡Œå¤„ç†æˆ–è€…åœ¨å…¨å±€é…ç½®TypeHandlerè¦å¤„ç†çš„javaTypeã€‚</li></ol><hr><p>ç¤ºä¾‹ï¼šå¸Œæœ›æ•°æ®åº“ä¿å­˜çš„æ˜¯100,200è¿™äº›çŠ¶æ€ç ï¼Œè€Œä¸æ˜¯é»˜è®¤0,1æˆ–è€…æšä¸¾çš„åå­—</p><p><a href="src/main/java/com/lun/c09/other/bean/EmpStatus.java">EmpStatus.java</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">EmpStatus</span> &#123;</span><br><span class="line">LOGIN(<span class="number">100</span>,<span class="string">&quot;ç”¨æˆ·ç™»å½•&quot;</span>),LOGOUT(<span class="number">200</span>,<span class="string">&quot;ç”¨æˆ·ç™»å‡º&quot;</span>),REMOVE(<span class="number">300</span>,<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer code;</span><br><span class="line"><span class="keyword">private</span> String msg;</span><br><span class="line"><span class="keyword">private</span> <span class="title function_">EmpStatus</span><span class="params">(Integer code,String msg)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line"><span class="built_in">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‰ç…§çŠ¶æ€ç è¿”å›æšä¸¾å¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> EmpStatus <span class="title function_">getEmpStatusByCode</span><span class="params">(Integer code)</span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (code) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">100</span>:</span><br><span class="line"><span class="keyword">return</span> LOGIN;</span><br><span class="line"><span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line"><span class="keyword">return</span> LOGOUT;</span><br><span class="line"><span class="keyword">case</span> <span class="number">300</span>:</span><br><span class="line"><span class="keyword">return</span> REMOVE;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">return</span> LOGOUT;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><a href="src/main/java/com/lun/c09/other/typehandler/MyEnumEmpStatusTypeHandler.java">è‡ªå®šä¹‰Handler</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEnumEmpStatusTypeHandler</span> <span class="keyword">implements</span> <span class="title class_">TypeHandler</span>&lt;EmpStatus&gt; &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šä¹‰å½“å‰æ•°æ®å¦‚ä½•ä¿å­˜åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setParameter</span><span class="params">(PreparedStatement ps, <span class="type">int</span> i, EmpStatus parameter,</span></span><br><span class="line"><span class="params">JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;è¦ä¿å­˜çš„çŠ¶æ€ç ï¼š&quot;</span>+parameter.getCode());</span><br><span class="line">ps.setString(i, parameter.getCode().toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> EmpStatus <span class="title function_">getResult</span><span class="params">(ResultSet rs, String columnName)</span></span><br><span class="line"><span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">//éœ€è¦æ ¹æ®ä»æ•°æ®åº“ä¸­æ‹¿åˆ°çš„æšä¸¾çš„çŠ¶æ€ç è¿”å›ä¸€ä¸ªæšä¸¾å¯¹è±¡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> rs.getInt(columnName);</span><br><span class="line">System.out.println(<span class="string">&quot;ä»æ•°æ®åº“ä¸­è·å–çš„çŠ¶æ€ç ï¼š&quot;</span>+code);</span><br><span class="line"><span class="type">EmpStatus</span> <span class="variable">status</span> <span class="operator">=</span> EmpStatus.getEmpStatusByCode(code);</span><br><span class="line"><span class="keyword">return</span> status;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> EmpStatus <span class="title function_">getResult</span><span class="params">(ResultSet rs, <span class="type">int</span> columnIndex)</span></span><br><span class="line"><span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> rs.getInt(columnIndex);</span><br><span class="line">System.out.println(<span class="string">&quot;ä»æ•°æ®åº“ä¸­è·å–çš„çŠ¶æ€ç ï¼š&quot;</span>+code);</span><br><span class="line"><span class="type">EmpStatus</span> <span class="variable">status</span> <span class="operator">=</span> EmpStatus.getEmpStatusByCode(code);</span><br><span class="line"><span class="keyword">return</span> status;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> EmpStatus <span class="title function_">getResult</span><span class="params">(CallableStatement cs, <span class="type">int</span> columnIndex)</span></span><br><span class="line"><span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> cs.getInt(columnIndex);</span><br><span class="line">System.out.println(<span class="string">&quot;ä»æ•°æ®åº“ä¸­è·å–çš„çŠ¶æ€ç ï¼š&quot;</span>+code);</span><br><span class="line"><span class="type">EmpStatus</span> <span class="variable">status</span> <span class="operator">=</span> EmpStatus.getEmpStatusByCode(code);</span><br><span class="line"><span class="keyword">return</span> status;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æ³¨å†Œè‡ªå®šä¹‰TypeHandlerï¼š</p><p>1.<a href="src/main/resources/c09/mybatis-config.xml">MyBatiså…¨å±€é…ç½®æ–‡ä»¶</a>ä¸­æ³¨å†Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;com.lun.c09.other.typehandler.MyEnumEmpStatusTypeHandler&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">javaType</span>=<span class="string">&quot;com.lun.c09.other.bean.EmpStatus&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>ä¹Ÿå¯ä»¥åœ¨å¤„ç†æŸä¸ªå­—æ®µçš„æ—¶å€™å‘Šè¯‰MyBatisç”¨ä»€ä¹ˆç±»å‹å¤„ç†å™¨</li></ol><ul><li>ä¿å­˜ï¼š<code>#&#123;empStatus,typeHandler=xxxx&#125;</code></li><li>æŸ¥è¯¢ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.lun.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyEmp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;empStatus&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empStatus&quot;</span> <span class="attr">typeHandler</span>=<span class="string">&quot;xxxxx&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåœ¨å‚æ•°ä½ç½®ä¿®æ”¹TypeHandlerï¼Œåº”è¯¥ä¿è¯ä¿å­˜æ•°æ®å’ŒæŸ¥è¯¢æ•°æ®ç”¨çš„TypeHandleræ˜¯ä¸€æ ·çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCç¬”è®°</title>
      <link href="//posts/e545fed0.html"/>
      <url>//posts/e545fed0.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€SpringMVCç®€ä»‹"><a href="#ä¸€ã€SpringMVCç®€ä»‹" class="headerlink" title="ä¸€ã€SpringMVCç®€ä»‹"></a>ä¸€ã€SpringMVCç®€ä»‹</h1><h3 id="1ã€ä»€ä¹ˆæ˜¯MVC"><a href="#1ã€ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯MVC"></a>1ã€ä»€ä¹ˆæ˜¯MVC</h3><p>MVCæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³ï¼Œå°†è½¯ä»¶æŒ‰ç…§æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨æ¥åˆ’åˆ†</p><p>Mï¼šModelï¼Œæ¨¡å‹å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„JavaBeanï¼Œä½œç”¨æ˜¯å¤„ç†æ•°æ®</p><p>JavaBeanåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ä¸€ç±»ç§°ä¸ºå®ä½“ç±»Beanï¼šä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„ï¼Œå¦‚ Studentã€User ç­‰</li><li>ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç† Beanï¼šæŒ‡ Service æˆ– Dao å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚</li></ul><p>Vï¼šViewï¼Œè§†å›¾å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢ï¼Œä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºæ•°æ®</p><p>Cï¼šControllerï¼Œæ§åˆ¶å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„servletï¼Œä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p><p>MVCçš„å·¥ä½œæµç¨‹ï¼š<br>ç”¨æˆ·é€šè¿‡è§†å›¾å±‚å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢«Controlleræ¥æ”¶ï¼ŒControllerè°ƒç”¨ç›¸åº”çš„Modelå±‚å¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ°Controllerï¼ŒControllerå†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„Viewè§†å›¾ï¼Œæ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨</p><h3 id="2ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#2ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>2ã€ä»€ä¹ˆæ˜¯SpringMVC</h3><p>SpringMVCæ˜¯Springçš„ä¸€ä¸ªåç»­äº§å“ï¼Œæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®</p><p>SpringMVC æ˜¯ Spring ä¸ºè¡¨è¿°å±‚å¼€å‘æä¾›çš„ä¸€æ•´å¥—å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¡¨è¿°å±‚æ¡†æ¶å†ç» Strustã€WebWorkã€Strust2 ç­‰è¯¸å¤šäº§å“çš„å†ä»£æ›´è¿­ä¹‹åï¼Œç›®å‰ä¸šç•Œæ™®éé€‰æ‹©äº† SpringMVC ä½œä¸º Java EE é¡¹ç›®è¡¨è¿°å±‚å¼€å‘çš„<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚</p><blockquote><p>æ³¨ï¼šä¸‰å±‚æ¶æ„åˆ†ä¸ºè¡¨è¿°å±‚ï¼ˆæˆ–è¡¨ç¤ºå±‚ï¼‰ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ï¼Œè¡¨è¿°å±‚è¡¨ç¤ºå‰å°é¡µé¢å’Œåå°servlet</p></blockquote><h3 id="3ã€SpringMVCçš„ç‰¹ç‚¹"><a href="#3ã€SpringMVCçš„ç‰¹ç‚¹" class="headerlink" title="3ã€SpringMVCçš„ç‰¹ç‚¹"></a>3ã€SpringMVCçš„ç‰¹ç‚¹</h3><ul><li><strong>Spring å®¶æ—åŸç”Ÿäº§å“</strong>ï¼Œä¸ IOC å®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥</li><li><strong>åŸºäºåŸç”Ÿçš„Servlet</strong>ï¼Œé€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„<strong>å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</strong>ï¼Œå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†</li><li>è¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜<strong>å…¨æ–¹ä½è¦†ç›–</strong>ï¼Œæä¾›<strong>å…¨é¢è§£å†³æ–¹æ¡ˆ</strong></li><li><strong>ä»£ç æ¸…æ–°ç®€æ´</strong>ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡</li><li>å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶<strong>å³æ’å³ç”¨</strong>ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯</li><li><strong>æ€§èƒ½å“è‘—</strong>ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚</li></ul><h1 id="äºŒã€HelloWorld"><a href="#äºŒã€HelloWorld" class="headerlink" title="äºŒã€HelloWorld"></a>äºŒã€HelloWorld</h1><h3 id="1ã€å¼€å‘ç¯å¢ƒ"><a href="#1ã€å¼€å‘ç¯å¢ƒ" class="headerlink" title="1ã€å¼€å‘ç¯å¢ƒ"></a>1ã€å¼€å‘ç¯å¢ƒ</h3><p>IDEï¼šidea 2019.2</p><p>æ„å»ºå·¥å…·ï¼šmaven3.5.4</p><p>æœåŠ¡å™¨ï¼štomcat7</p><p>Springç‰ˆæœ¬ï¼š5.3.1</p><h3 id="2ã€åˆ›å»ºmavenå·¥ç¨‹"><a href="#2ã€åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="2ã€åˆ›å»ºmavenå·¥ç¨‹"></a>2ã€åˆ›å»ºmavenå·¥ç¨‹</h3><h5 id="a-gt-æ·»åŠ webæ¨¡å—"><a href="#a-gt-æ·»åŠ webæ¨¡å—" class="headerlink" title="a&gt;æ·»åŠ webæ¨¡å—"></a>a&gt;æ·»åŠ webæ¨¡å—</h5><h5 id="b-gt-æ‰“åŒ…æ–¹å¼ï¼šwar"><a href="#b-gt-æ‰“åŒ…æ–¹å¼ï¼šwar" class="headerlink" title="b&gt;æ‰“åŒ…æ–¹å¼ï¼šwar"></a>b&gt;æ‰“åŒ…æ–¹å¼ï¼šwar</h5><h5 id="c-gt-å¼•å…¥ä¾èµ–"><a href="#c-gt-å¼•å…¥ä¾èµ–" class="headerlink" title="c&gt;å¼•å…¥ä¾èµ–"></a>c&gt;å¼•å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SpringMVC --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šç”±äº Maven çš„ä¼ é€’æ€§ï¼Œæˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰éœ€è¦çš„åŒ…å…¨éƒ¨é…ç½®ä¾èµ–ï¼Œè€Œæ˜¯é…ç½®æœ€é¡¶ç«¯çš„ä¾èµ–ï¼Œå…¶ä»–é ä¼ é€’æ€§å¯¼å…¥ã€‚</p><p><strong>providedâ€”åªåœ¨mavenç¼–è¯‘å’Œæµ‹è¯•é˜¶æ®µç”Ÿæ•ˆï¼Œä¸åœ¨æ‰“åŒ…ï¼Œå®‰è£…ï¼Œéƒ¨ç½²ä¸­ç”Ÿæ•ˆ</strong></p><p>ä¾èµ–èŒƒå›´-&gt;provided:è¿è¡Œæ—¶æ— æ•ˆï¼ŒTomcatä¼šæœ‰servlet-apiï¼Œä½†æ˜¯ç¼–è¯‘æœŸéœ€è¦ï¼Œæ‰€æœ‰è¦æœ‰è¿™ä¸ªä¾èµ–ï¼Œè¦ä¸ç„¶æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚æ‰€ä»¥å®ƒä¸éœ€è¦è¢«æ‰“åŒ…ï¼Œå› ä¸ºæœåŠ¡å™¨æœ‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img001.png"></p><h3 id="3ã€é…ç½®web-xml"><a href="#3ã€é…ç½®web-xml" class="headerlink" title="3ã€é…ç½®web.xml"></a>3ã€é…ç½®web.xml</h3><p>æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</p><h5 id="a-gt-é»˜è®¤é…ç½®æ–¹å¼"><a href="#a-gt-é»˜è®¤é…ç½®æ–¹å¼" class="headerlink" title="a&gt;é»˜è®¤é…ç½®æ–¹å¼"></a>a&gt;é»˜è®¤é…ç½®æ–¹å¼</h5><p>æ­¤é…ç½®ä½œç”¨ä¸‹ï¼ŒSpringMVCçš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äºWEB-INFä¸‹ï¼Œé»˜è®¤åç§°ä¸º&lt;servlet-name&gt;-servlet.xmlï¼Œä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®æ‰€å¯¹åº”SpringMVCçš„é…ç½®æ–‡ä»¶ä½äºWEB-INFä¸‹ï¼Œæ–‡ä»¶åä¸ºspringMVC-servlet.xmlï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨mavenå°±æ˜¯éœ€è¦å°†æ‰€æœ‰é…ç½®æ–‡ä»¶æ”¾åˆ°resourceæ–‡ä»¶ä¸‹è¿›è¡Œç®¡ç†ï¼Œæ‰€ä»¥è¿™ç§é»˜è®¤é…ç½®æ–¹å¼ä¼šä½¿é¡¹ç›®ä¸å¤Ÿè§„èŒƒã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚ï¼Œè¿™é‡Œè¿™æ ·è®¾ç½®æ˜¯å› ä¸ºjspæœ¬è´¨å°±æ˜¯ä¸€ä¸ªservletï¼Œjspè¯·æ±‚åº”è¯¥ç”±ä¸“é—¨çš„jspè¯·æ±‚å¤„ç†ï¼Œè€Œä¸ç”¨springMVCçš„DispatcherServletå¤„ç†ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿‡æ»¤æ‰jspè¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">ï¼ˆæ³¨ï¼š å‰æœŸæ‰€å­¦çš„/*å°±è¡¨ç¤ºæ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…æ‹¬jspè¯·æ±‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯é€šè¿‡init-paramæ ‡ç­¾è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°ï¼Œé€šè¿‡load-on-startupæ ‡ç­¾è®¾ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- contextConfigLocationä¸ºå›ºå®šå€¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment"> ä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤§é‡çš„åˆå§‹åŒ–æ“ä½œè¦åš</span></span><br><span class="line"><span class="comment">è€Œè¿™äº›æ“ä½œæ”¾åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰æ‰§è¡Œä¼šä¸¥é‡å½±å“è®¿é—®é€Ÿåº¦</span></span><br><span class="line"><span class="comment">å› æ­¤éœ€è¦é€šè¿‡æ­¤æ ‡ç­¾å°†å¯åŠ¨æ§åˆ¶DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>&lt;url-pattern&gt;æ ‡ç­¾ä¸­ä½¿ç”¨&#x2F;å’Œ&#x2F;*çš„åŒºåˆ«ï¼š</p><p>&#x2F;æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯&#x2F;loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„ï¼Œä½†æ˜¯&#x2F;ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</p><p>å› æ­¤å°±å¯ä»¥é¿å…åœ¨è®¿é—®jspé¡µé¢æ—¶ï¼Œè¯¥è¯·æ±‚è¢«DispatcherServletå¤„ç†ï¼Œä»è€Œæ‰¾ä¸åˆ°ç›¸åº”çš„é¡µé¢</p><p>&#x2F;*åˆ™èƒ½å¤ŸåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå°±éœ€è¦ä½¿ç”¨&#x2F;*çš„å†™æ³•</p></blockquote><h3 id="4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"><a href="#4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨" class="headerlink" title="4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"></a>4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</h3><p>ç”±äºå‰ç«¯æ§åˆ¶å™¨å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»ï¼Œå³è¯·æ±‚æ§åˆ¶å™¨</p><p>è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•æˆä¸ºæ§åˆ¶å™¨æ–¹æ³•</p><p>å› ä¸ºSpringMVCçš„æ§åˆ¶å™¨ç”±ä¸€ä¸ªPOJOï¼ˆæ™®é€šçš„Javaç±»ï¼‰æ‹…ä»»ï¼Œå› æ­¤éœ€è¦é€šè¿‡@Controlleræ³¨è§£å°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œäº¤ç»™Springçš„IoCå®¹å™¨ç®¡ç†ï¼Œæ­¤æ—¶SpringMVCæ‰èƒ½å¤Ÿè¯†åˆ«æ§åˆ¶å™¨çš„å­˜åœ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Thymeleafä»‹ç»"><a href="#Thymeleafä»‹ç»" class="headerlink" title="Thymeleafä»‹ç»"></a>Thymeleafä»‹ç»</h3><ul><li>Thymeleafæ˜¯ç”¨æ¥å¼€å‘Webå’Œç‹¬ç«‹ç¯å¢ƒé¡¹ç›®çš„æœåŠ¡å™¨ç«¯çš„Javaæ¨¡ç‰ˆå¼•æ“</li><li>Springå®˜æ–¹æ”¯æŒçš„æœåŠ¡çš„æ¸²æŸ“æ¨¡æ¿ä¸­ï¼Œå¹¶ä¸åŒ…å«jspã€‚è€Œæ˜¯Thymeleafå’ŒFreemarkerç­‰ï¼Œè€ŒThymeleafä¸SpringMVCçš„è§†å›¾æŠ€æœ¯ï¼ŒåŠSpringBootçš„è‡ªåŠ¨åŒ–é…ç½®é›†æˆéå¸¸å®Œç¾ï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•æˆæœ¬ï¼Œä½ åªç”¨å…³æ³¨Thymeleafçš„è¯­æ³•å³å¯ã€‚</li></ul><h4 id="Thymeleafç‰¹ç‚¹"><a href="#Thymeleafç‰¹ç‚¹" class="headerlink" title="Thymeleafç‰¹ç‚¹"></a>Thymeleafç‰¹ç‚¹</h4><ul><li>åŠ¨é™ç»“åˆï¼šThymeleaf åœ¨æœ‰ç½‘ç»œå’Œæ— ç½‘ç»œçš„ç¯å¢ƒä¸‹çš†å¯è¿è¡Œï¼Œå³å®ƒå¯ä»¥è®©ç¾å·¥åœ¨æµè§ˆå™¨æŸ¥çœ‹é¡µé¢çš„é™æ€æ•ˆæœï¼Œä¹Ÿå¯ä»¥è®©ç¨‹åºå‘˜åœ¨æœåŠ¡å™¨æŸ¥çœ‹å¸¦æ•°æ®çš„åŠ¨æ€é¡µé¢æ•ˆæœã€‚è¿™æ˜¯ç”±äºå®ƒæ”¯æŒ html åŸå‹ï¼Œç„¶ååœ¨ html æ ‡ç­¾é‡Œå¢åŠ é¢å¤–çš„å±æ€§æ¥è¾¾åˆ°æ¨¡æ¿+æ•°æ®çš„å±•ç¤ºæ–¹å¼ã€‚æµè§ˆå™¨è§£é‡Š html æ—¶ä¼šå¿½ç•¥æœªå®šä¹‰çš„æ ‡ç­¾å±æ€§ï¼Œæ‰€ä»¥ thymeleaf çš„æ¨¡æ¿å¯ä»¥é™æ€åœ°è¿è¡Œï¼›å½“æœ‰æ•°æ®è¿”å›åˆ°é¡µé¢æ—¶ï¼ŒThymeleaf æ ‡ç­¾ä¼šåŠ¨æ€åœ°æ›¿æ¢æ‰é™æ€å†…å®¹ï¼Œä½¿é¡µé¢åŠ¨æ€æ˜¾ç¤ºã€‚</li><li>å¼€ç®±å³ç”¨ï¼šå®ƒæä¾›æ ‡å‡†å’Œspringæ ‡å‡†ä¸¤ç§æ–¹è¨€ï¼Œå¯ä»¥ç›´æ¥å¥—ç”¨æ¨¡æ¿å®ç°JSTLã€ OGNLè¡¨è¾¾å¼æ•ˆæœï¼Œé¿å…æ¯å¤©å¥—æ¨¡æ¿ã€è¯¥jstlã€æ”¹æ ‡ç­¾çš„å›°æ‰°ã€‚åŒæ—¶å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ‰©å±•å’Œåˆ›å»ºè‡ªå®šä¹‰çš„æ–¹è¨€ã€‚</li><li>å¤šæ–¹è¨€æ”¯æŒï¼šThymeleaf æä¾›springæ ‡å‡†æ–¹è¨€å’Œä¸€ä¸ªä¸ SpringMVC å®Œç¾é›†æˆçš„å¯é€‰æ¨¡å—ï¼Œå¯ä»¥å¿«é€Ÿçš„å®ç°è¡¨å•ç»‘å®šã€å±æ€§ç¼–è¾‘å™¨ã€å›½é™…åŒ–ç­‰åŠŸèƒ½ã€‚</li><li>ä¸SpringBootå®Œç¾æ•´åˆï¼ŒSpringBootæä¾›äº†Thymeleafçš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”ä¸ºThymeleafè®¾ç½®äº†è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬å¯ä»¥åƒä»¥å‰æ“ä½œjspä¸€æ ·æ¥æ“ä½œThymeleafã€‚ä»£ç å‡ ä¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå°±æ˜¯åœ¨æ¨¡æ¿è¯­æ³•ä¸Šæœ‰åŒºåˆ«ã€‚</li></ul><h3 id="5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶"><a href="#5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶"></a>5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mvc.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">                    <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">                    <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">   å¤„ç†é™æ€èµ„æºï¼Œä¾‹å¦‚htmlã€jsã€cssã€jpg</span></span><br><span class="line"><span class="comment">  è‹¥åªè®¾ç½®è¯¥æ ‡ç­¾ï¼Œåˆ™åªèƒ½è®¿é—®é™æ€èµ„æºï¼Œå…¶ä»–è¯·æ±‚åˆ™æ— æ³•è®¿é—®</span></span><br><span class="line"><span class="comment">  æ­¤æ—¶å¿…é¡»è®¾ç½®&lt;mvc:annotation-driven/&gt;è§£å†³é—®é¢˜</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯mvcæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¤„ç†å“åº”ä¸­æ–‡å†…å®¹ä¹±ç  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultCharset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6ã€æµ‹è¯•HelloWorld"><a href="#6ã€æµ‹è¯•HelloWorld" class="headerlink" title="6ã€æµ‹è¯•HelloWorld"></a>6ã€æµ‹è¯•HelloWorld</h3><p>RequestMappingå°±ç›¸å½“äºä¹‹å‰ web.xml çš„ servlet-mapping å•Šï¼Œvalue å°±ç›¸å½“äº url-pattern,  è€Œè¿™ä¸ªæ–¹æ³•å°±ç›¸å½“äºservletçš„serviceæ–¹æ³•</p><h5 id="a-gt-å®ç°å¯¹é¦–é¡µçš„è®¿é—®"><a href="#a-gt-å®ç°å¯¹é¦–é¡µçš„è®¿é—®" class="headerlink" title="a&gt;å®ç°å¯¹é¦–é¡µçš„è®¿é—®"></a>a&gt;å®ç°å¯¹é¦–é¡µçš„è®¿é—®</h5><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @RequestMappingæ³¨è§£ï¼šå¤„ç†è¯·æ±‚å’Œæ§åˆ¶å™¨æ–¹æ³•ä¹‹é—´çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">// @RequestMappingæ³¨è§£çš„valueå±æ€§å¯ä»¥é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚ï¼Œ/è¡¨ç¤ºçš„å½“å‰å·¥ç¨‹çš„ä¸Šä¸‹æ–‡è·¯å¾„</span></span><br><span class="line"><span class="comment">// localhost:8080/springMVC/</span></span><br><span class="line"><span class="comment">//RequestMappingå°±ç›¸å½“äºä¹‹å‰ web.xml çš„ servlet-mappingï¼Œvalue å°±ç›¸å½“äº url-pattern,  è€Œè¿™ä¸ªæ–¹æ³•å°±ç›¸å½“äºservletçš„serviceæ–¹æ³•</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®è§†å›¾åç§°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="b-gt-é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"><a href="#b-gt-é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢" class="headerlink" title="b&gt;é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"></a>b&gt;é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢</h5><p>åœ¨ä¸»é¡µindex.htmlä¸­è®¾ç½®è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/target&#125;&quot;</span>&gt;</span>è·³è½¬åˆ°targt.htmlé¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/target&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">HelloWorld</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7ã€æ€»ç»“"><a href="#7ã€æ€»ç»“" class="headerlink" title="7ã€æ€»ç»“"></a>7ã€æ€»ç»“</h3><p>æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚åœ°å€ç¬¦åˆå‰ç«¯æ§åˆ¶å™¨çš„url-patternï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«å‰ç«¯æ§åˆ¶å™¨DispatcherServletå¤„ç†ã€‚å‰ç«¯æ§åˆ¶å™¨ä¼šè¯»å–SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ‰«æç»„ä»¶æ‰¾åˆ°æ§åˆ¶å™¨ï¼Œå°†è¯·æ±‚åœ°å€å’Œæ§åˆ¶å™¨ä¸­@RequestMappingæ³¨è§£çš„valueå±æ€§å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œè¯¥æ³¨è§£æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚å¤„ç†è¯·æ±‚çš„æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è§†å›¾åç§°ï¼Œè¯¥è§†å›¾åç§°ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼ŒåŠ ä¸Šå‰ç¼€å’Œåç¼€ç»„æˆè§†å›¾çš„è·¯å¾„ï¼Œé€šè¿‡Thymeleafå¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆè½¬å‘åˆ°è§†å›¾æ‰€å¯¹åº”é¡µé¢</p><h1 id="ä¸‰ã€-RequestMappingæ³¨è§£"><a href="#ä¸‰ã€-RequestMappingæ³¨è§£" class="headerlink" title="ä¸‰ã€@RequestMappingæ³¨è§£"></a>ä¸‰ã€@RequestMappingæ³¨è§£</h1><h3 id="1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½"><a href="#1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½" class="headerlink" title="1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½"></a>1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½</h3><p>ä»æ³¨è§£åç§°ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p>SpringMVC æ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><h3 id="2ã€-RequestMappingæ³¨è§£çš„ä½ç½®"><a href="#2ã€-RequestMappingæ³¨è§£çš„ä½ç½®" class="headerlink" title="2ã€@RequestMappingæ³¨è§£çš„ä½ç½®"></a>2ã€@RequestMappingæ³¨è§£çš„ä½ç½®</h3><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªç±»ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯</p><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªæ–¹æ³•ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestMappingController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­¤æ—¶è¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„ä¸ºï¼š/test/testRequestMapping</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§"><a href="#3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§" class="headerlink" title="3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§"></a>3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§</h3><p>@RequestMappingæ³¨è§£çš„valueå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§å¿…é¡»è®¾ç½®ï¼Œè‡³å°‘é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRequestMapping&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/testRequestMapping<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§"><a href="#4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§" class="headerlink" title="4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§"></a>4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§</h3><p>ä¸å†™methodå±æ€§é»˜è®¤ä¸ä»¥è¯·æ±‚æ–¹å¼ä¸ºæ¡ä»¶ï¼Œå³èƒ½å¤ŸåŒ¹é…getè¯·æ±‚ï¼Œpostè¯·æ±‚ï¼Œputè¯·æ±‚ï¼Œdeleteè¯·æ±‚</p><p>@RequestMappingæ³¨è§£çš„methodå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼ˆgetæˆ–postï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„methodå±æ€§æ˜¯ä¸€ä¸ªRequestMethodç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šç§è¯·æ±‚æ–¹å¼çš„è¯·æ±‚</p><p>è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„valueå±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³methodå±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™405ï¼šRequest method â€˜POSTâ€™ not supported</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>1ã€å¯¹äºå¤„ç†æŒ‡å®šè¯·æ±‚æ–¹å¼çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ŒSpringMVCä¸­æä¾›äº†@RequestMappingçš„æ´¾ç”Ÿæ³¨è§£</p><p>å¤„ç†getè¯·æ±‚çš„æ˜ å°„â€“&gt;@GetMapping</p><p>å¤„ç†postè¯·æ±‚çš„æ˜ å°„â€“&gt;@PostMapping</p><p>å¤„ç†putè¯·æ±‚çš„æ˜ å°„â€“&gt;@PutMapping</p><p>å¤„ç†deleteè¯·æ±‚çš„æ˜ å°„â€“&gt;@DeleteMapping</p><p>2ã€å¸¸ç”¨çš„è¯·æ±‚æ–¹å¼æœ‰getï¼Œpostï¼Œputï¼Œdelete</p><p>ä½†æ˜¯ç›®å‰æµè§ˆå™¨åªæ”¯æŒgetå’Œpostï¼Œè‹¥åœ¨formè¡¨å•æäº¤æ—¶ï¼Œä¸ºmethodè®¾ç½®äº†å…¶ä»–è¯·æ±‚æ–¹å¼çš„å­—ç¬¦ä¸²ï¼ˆputæˆ–deleteï¼‰ï¼Œåˆ™æŒ‰ç…§é»˜è®¤çš„è¯·æ±‚æ–¹å¼getå¤„ç†</p><p>è‹¥è¦å‘é€putå’Œdeleteè¯·æ±‚ï¼Œåˆ™éœ€è¦é€šè¿‡springæä¾›çš„è¿‡æ»¤å™¨HiddenHttpMethodFilterï¼Œåœ¨RESTfuléƒ¨åˆ†ä¼šè®²åˆ°</p></blockquote><h3 id="5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"></a>5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰</h3><p>@RequestMappingæ³¨è§£çš„paramså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„paramså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œparamâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œ!paramâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œparam&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä¸”param&#x3D;value</p><p>â€œparam!&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä½†æ˜¯param!&#x3D;value</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test(username=&#x27;admin&#x27;,password=123456)&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„paramså±æ€§--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span></span><br><span class="line"><span class="meta">        ,method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">        ,params = &#123;&quot;username&quot;,&quot;password!=123456&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³paramså±æ€§ï¼Œæ­¤æ—¶é¡µé¢å›æŠ¥é”™400ï¼šParameter conditions â€œusername, password!&#x3D;123456â€ not met for actual request parameters: username&#x3D;{admin}, password&#x3D;{123456}</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleafæ‹¼æ¥å‚æ•°å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼Œè€Œä¸ç”¨?name=value&amp;name=value--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testParamsAndHeaders(username=&#x27;admin&#x27;,password=123456)&#125;&quot;</span>&gt;</span>æµ‹è¯•paramså±æ€§---&gt;ï¼Œè¯·æ±‚åœ°å€ä¸ºtestParamsAndHeaders<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br></pre></td></tr></table></figure></blockquote><h3 id="6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"></a>6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/testParamsAndHeaders&quot;,headers = &#123;&quot;Host=localhost:8080&quot;&#125;)</span></span><br></pre></td></tr></table></figure><p>@RequestMappingæ³¨è§£çš„headerså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„headerså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œheaderâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œ!headerâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œheader&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header&#x3D;value</p><p>â€œheader!&#x3D;valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header!&#x3D;value</p><p><strong>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³headerså±æ€§ï¼Œæ­¤æ—¶é¡µé¢æ˜¾ç¤º404é”™è¯¯ï¼Œå³èµ„æºæœªæ‰¾åˆ°</strong></p><h3 id="7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"><a href="#7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„" class="headerlink" title="7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"></a>7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„</h3><p>ï¼Ÿï¼šè¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦</p><p>*ï¼šè¡¨ç¤ºä»»æ„çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</p><p>**ï¼šè¡¨ç¤ºä»»æ„çš„ä¸€å±‚æˆ–å¤šå±‚ç›®å½•</p><p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨**æ—¶ï¼Œåªèƒ½ä½¿ç”¨&#x2F;**&#x2F;xxxçš„æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @RequestMapping(&quot;/?/testAnt&quot;)</span></span><br><span class="line"><span class="comment">//    @RequestMapping(&quot;/*atestAnt&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/**/testAnt&quot;)</span></span><br></pre></td></tr></table></figure><h3 id="8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰"><a href="#8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰"></a>8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰</h3><p>åŸå§‹æ–¹å¼ï¼š&#x2F;deleteUser?id&#x3D;1</p><p>restæ–¹å¼ï¼š&#x2F;deleteUser&#x2F;1</p><p>SpringMVCè·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äºRESTfulé£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMappingæ³¨è§£çš„valueå±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œåœ¨é€šè¿‡<code>@PathVariableæ³¨è§£</code>ï¼Œå°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRest/1/admin&#125;&quot;</span>&gt;</span>æµ‹è¯•è·¯å¾„ä¸­çš„å ä½ç¬¦--&gt;/testRest<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRest/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id, <span class="meta">@PathVariable(&quot;username&quot;)</span> String username)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;id:&quot;</span>+id+<span class="string">&quot;,username:&quot;</span>+username);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆè¾“å‡ºçš„å†…å®¹ä¸º--&gt;id:1,username:admin</span></span><br></pre></td></tr></table></figure><h1 id="å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"><a href="#å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"></a>å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°</h1><h3 id="1ã€é€šè¿‡ServletAPIè·å–"><a href="#1ã€é€šè¿‡ServletAPIè·å–" class="headerlink" title="1ã€é€šè¿‡ServletAPIè·å–"></a>1ã€é€šè¿‡ServletAPIè·å–</h3><p>å°†HttpServletRequestä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œæ­¤æ—¶HttpServletRequestç±»å‹çš„å‚æ•°è¡¨ç¤ºå°è£…äº†å½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡çš„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"><a href="#2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°" class="headerlink" title="2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"></a>2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°</h3><p>åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œè®¾ç½®å’Œè¯·æ±‚å‚æ•°åŒåçš„å½¢å‚ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒåŒ¹é…åˆ°è¯·æ±‚æ˜ å°„æ—¶ï¼Œåœ¨DispatcherServletä¸­å°±ä¼šå°†è¯·æ±‚å‚æ•°èµ‹å€¼ç»™ç›¸åº”çš„å½¢å‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testParam(username=&#x27;admin&#x27;,password=123456)&#125;&quot;</span>&gt;</span>æµ‹è¯•è·å–è¯·æ±‚å‚æ•°--&gt;/testParam<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥è¯·æ±‚æ‰€ä¼ è¾“çš„è¯·æ±‚å‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®å­—ç¬¦ä¸²æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„æ•°ç»„ä¸­åŒ…å«äº†æ¯ä¸€ä¸ªæ•°æ®</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„å€¼ä¸ºæ¯ä¸ªæ•°æ®ä¸­é—´ä½¿ç”¨é€—å·æ‹¼æ¥çš„ç»“æœ</p></blockquote><h3 id="3ã€-RequestParam"><a href="#3ã€-RequestParam" class="headerlink" title="3ã€@RequestParam"></a>3ã€@RequestParam</h3><p>@RequestParamæ˜¯å°†è¯·æ±‚å‚æ•°å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestParamæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼š</p><p>valueï¼šæŒ‡å®šä¸ºå½¢å‚èµ‹å€¼çš„è¯·æ±‚å‚æ•°çš„å‚æ•°å</p><p>requiredï¼šè®¾ç½®æ˜¯å¦å¿…é¡»ä¼ è¾“æ­¤è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrue</p><p><strong>è‹¥è®¾ç½®ä¸ºtrueæ—¶ï¼Œåˆ™å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°</strong>ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“è¯¥è¯·æ±‚å‚æ•°ï¼Œä¸”æ²¡æœ‰è®¾ç½®defaultValueå±æ€§ï¼Œåˆ™é¡µé¢æŠ¥é”™400ï¼šRequired String parameter â€˜xxxâ€™ is not presentï¼›è‹¥è®¾ç½®ä¸ºfalseï¼Œåˆ™å½“å‰è¯·æ±‚ä¸æ˜¯å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“ï¼Œåˆ™æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚çš„å€¼ä¸ºnull</p><p>defaultValueï¼šä¸ç®¡requiredå±æ€§å€¼ä¸ºtrueæˆ–falseï¼Œå½“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ²¡æœ‰ä¼ è¾“æˆ–ä¼ è¾“çš„å€¼ä¸ºâ€â€æ—¶ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¸ºå½¢å‚èµ‹å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//requiredé»˜è®¤å€¼ä¸ºtrue</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;user_name&quot;,required = false,defaultValue = &quot;baby&quot;)</span> String username, </span></span><br><span class="line"><span class="params">             String password, String hobby)</span>&#123;</span><br></pre></td></tr></table></figure><h3 id="4ã€-RequestHeader"><a href="#4ã€-RequestHeader" class="headerlink" title="4ã€@RequestHeader"></a>4ã€@RequestHeader</h3><p>@RequestHeaderæ˜¯å°†è¯·æ±‚å¤´ä¿¡æ¯å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestHeaderæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestHeader(value = &quot;sayHaha&quot;,defaultValue = &quot;haha&quot;)</span> String host,...</span><br></pre></td></tr></table></figure><h3 id="5ã€-CookieValue"><a href="#5ã€-CookieValue" class="headerlink" title="5ã€@CookieValue"></a>5ã€@CookieValue</h3><p>@CookieValueæ˜¯å°†cookieæ•°æ®å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@CookieValueæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span></span><br><span class="line">    <span class="params">(<span class="meta">@RequestParam(value = &quot;username&quot;, required = false, defaultValue = &quot;baby&quot;)</span></span></span><br><span class="line"><span class="params">                                String username,</span></span><br><span class="line"><span class="params">                  <span class="meta">@RequestHeader(value = &quot;sayHaha&quot;,defaultValue = &quot;haha&quot;)</span> String host,</span></span><br><span class="line"><span class="params">                        String password, String hobby,</span></span><br><span class="line"><span class="params">                        <span class="meta">@CookieValue(value = &quot;JSESSIONID&quot;)</span> String JSESSIONID)</span> &#123;</span><br></pre></td></tr></table></figure><h3 id="6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"><a href="#6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"></a>6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°</h3><p>å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®ä¸€ä¸ªå®ä½“ç±»ç±»å‹çš„å½¢å‚ï¼Œ<strong>æ­¤æ—¶è‹¥æµè§ˆå™¨ä¼ è¾“çš„è¯·æ±‚å‚æ•°çš„å‚æ•°åå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸€è‡´</strong>ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°å°±ä¼šä¸ºæ­¤å±æ€§èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testpojo&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æ€§åˆ«ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span>ç”·<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span>&gt;</span>å¥³<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    é‚®ç®±ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testpojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPOJO</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆç»“æœ--&gt;User&#123;id=null, username=&#x27;å¼ ä¸‰&#x27;, password=&#x27;123&#x27;, age=23, sex=&#x27;ç”·&#x27;, email=&#x27;123@qq.com&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"><a href="#7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜" class="headerlink" title="7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"></a>7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</h3><p>å¦‚æœæ˜¯getè¯·æ±‚çš„ä¹±ç å¯ä»¥é€šè¿‡è®¾ç½®tomcatçš„server.xmlé…ç½®æ–‡ä»¶è§£å†³</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220120183426768.png" alt="image-20220120183426768" style="zoom:67%;" /><p>åœ¨å¦‚å›¾æ‰€ç¤ºä½ç½®åŠ ä¸Š<code>URIEncoding=&quot;UTF-8&quot;</code></p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220120183532787.png" alt="image-20220120183532787" style="zoom:67%;" /><p>javawebä¸‰å¤§ç»„ä»¶æ‰§è¡Œé¡ºåºï¼šç›‘å¬å™¨listener-&gt;è¿‡æ»¤å™¨filter-&gt;servlet</p><p>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SpringMVCæä¾›çš„ç¼–ç è¿‡æ»¤å™¨CharacterEncodingFilterï¼Œä½†æ˜¯å¿…é¡»åœ¨web.xmlä¸­è¿›è¡Œæ³¨å†Œ</p><p>é€šè¿‡æŸ¥çœ‹CharacterEncodingFilterçš„æºç ï¼Œå¾—çŸ¥è¯¥ç±»ä¸­ä»…æœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">private</span> String encoding;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> forceRequestEncoding;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> forceResponseEncoding;</span><br></pre></td></tr></table></figure><p>å¹¶å®šä½åˆ°ä»¥ä¸‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•èµ·è¿‡æ»¤ä½œç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">encoding</span> <span class="operator">=</span> <span class="built_in">this</span>.getEncoding();</span><br><span class="line">    <span class="keyword">if</span> (encoding != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.isForceRequestEncoding() || request.getCharacterEncoding() == <span class="literal">null</span>) &#123;</span><br><span class="line">            request.setCharacterEncoding(encoding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.isForceResponseEncoding()) &#123;</span><br><span class="line">            response.setCharacterEncoding(encoding);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filterChain.doFilter(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤è¿‡æ»¤æ–¹æ³•ä¸­å¦‚æœç¼–ç å€¼ä¸ä¸ºç©ºä¼šæ”¹å˜ç¼–ç ï¼Œä»¥æ­¤ä¸ºåŸç†ï¼Œåšå‡ºé…ç½®springMVCç¼–ç è¿‡æ»¤å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®springMVCçš„ç¼–ç è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>SpringMVCä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åˆ°å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆ</p></blockquote><h1 id="äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®</h1><p>p34<a href="https://www.bilibili.com/video/BV1Ry4y1574R?p=34">å›é¡¾åŸŸå¯¹è±¡</a></p><p>å››ä¸ªåŸŸå¯¹è±¡åˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>pageContext(PageContextImplç±»)å½“å‰jspé¡µé¢èŒƒå›´å†…æœ‰æ•ˆ</p></li><li><p>request (HttpServletRequestç±»)ä¸€æ¬¡è¯·æ±‚å†…æœ‰æ•ˆ</p></li><li><p>session(HttpSessionç±»)ä¸€æ¬¡ä¼šè¯èŒƒå›´å†…æœ‰æ•ˆï¼ˆæ‰“å¼€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œç›´åˆ°å…³é—­æœåŠ¡å™¨ï¼‰</p></li><li><p>application (ServletContextç±»)æ•´ä¸ªwebå·¥ç¨‹èŒƒå›´å†…æœ‰æ•ˆï¼ˆåªè¦webå·¥ç¨‹ä¸åœæ­¢ï¼Œæ•°æ®éƒ½åœ¨ï¼‰</p></li></ul><h3 id="1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,servletAPI&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelAndView&quot;)</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨ModelAndViewå¿…é¡»å°†ModelAndViewå¯¹è±¡ä½œä¸ºè¯¥æ–¹æ³•çš„è¿”å›å€¼è¿”å›</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelAndViewæœ‰Modelå’ŒViewçš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * Modelä¸»è¦ç”¨äºå‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span></span><br><span class="line"><span class="comment">     * Viewä¸»è¦ç”¨äºè®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//å‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span></span><br><span class="line">    mav.addObject(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelAndView&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span></span><br><span class="line">    mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModel&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"><a href="#6ã€Modelã€ModelMapã€Mapçš„å…³ç³»" class="headerlink" title="6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"></a>6ã€Modelã€ModelMapã€Mapçš„å…³ç³»</h3><p>Modelã€ModelMapã€Mapç±»å‹çš„å‚æ•°å…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯ BindingAwareModelMap ç±»å‹çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Model&#123;&#125;</span><br><span class="line">public class ModelMap extends LinkedHashMap&lt;String, Object&gt; &#123;&#125;</span><br><span class="line">public class ExtendedModelMap extends ModelMap implements Model &#123;&#125;</span><br><span class="line">public class BindingAwareModelMap extends ExtendedModelMap &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®çš„æœ¬è´¨"><a href="#å‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®çš„æœ¬è´¨" class="headerlink" title="å‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®çš„æœ¬è´¨"></a>å‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®çš„æœ¬è´¨</h3><p>æ‰€æœ‰å‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œ</p><p>æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨DistpatcherServletçš„æ–¹æ³•ä¸­å°è£…æˆModelAndViewå¯¹è±¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220121165122590.png" alt="image-20220121165122590"></p><h3 id="7ã€å‘sessionåŸŸå…±äº«æ•°æ®"><a href="#7ã€å‘sessionåŸŸå…±äº«æ•°æ®" class="headerlink" title="7ã€å‘sessionåŸŸå…±äº«æ•°æ®"></a>7ã€å‘sessionåŸŸå…±äº«æ•°æ®</h3><p>æ¨èä½¿ç”¨åŸç”Ÿapiï¼Œå› ä¸ºspringMVCæä¾›çš„æ¯”è¾ƒå¤æ‚ï¼Œä¸å¦‚åŸç”Ÿapiæ–¹ä¾¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;hello,session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8ã€å‘applicationåŸŸå…±äº«æ•°æ®"><a href="#8ã€å‘applicationåŸŸå…±äº«æ•°æ®" class="headerlink" title="8ã€å‘applicationåŸŸå…±äº«æ•°æ®"></a>8ã€å‘applicationåŸŸå…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testApplication&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    application.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>, <span class="string">&quot;hello,application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…­ã€SpringMVCçš„è§†å›¾"><a href="#å…­ã€SpringMVCçš„è§†å›¾" class="headerlink" title="å…­ã€SpringMVCçš„è§†å›¾"></a>å…­ã€SpringMVCçš„è§†å›¾</h1><p>SpringMVCä¸­çš„è§†å›¾æ˜¯Viewæ¥å£ï¼Œè§†å›¾çš„ä½œç”¨æ¸²æŸ“æ•°æ®ï¼Œå°†æ¨¡å‹Modelä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·</p><p>SpringMVCè§†å›¾çš„ç§ç±»å¾ˆå¤šï¼Œé»˜è®¤æœ‰è½¬å‘è§†å›¾å’Œé‡å®šå‘è§†å›¾</p><p>å½“å·¥ç¨‹å¼•å…¥jstlçš„ä¾èµ–ï¼Œè½¬å‘è§†å›¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJstlView</p><p>è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸ºThymeleafï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†Thymeleafçš„è§†å›¾è§£æå™¨ï¼Œç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ThymeleafView</p><h3 id="1ã€ThymeleafView"><a href="#1ã€ThymeleafView" class="headerlink" title="1ã€ThymeleafView"></a>1ã€ThymeleafView</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„ï¼Œä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testHello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testHello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img002.png"></p><h3 id="2ã€è½¬å‘è§†å›¾"><a href="#2ã€è½¬å‘è§†å›¾" class="headerlink" title="2ã€è½¬å‘è§†å›¾"></a>2ã€è½¬å‘è§†å›¾</h3><p>SpringMVCä¸­é»˜è®¤çš„è½¬å‘è§†å›¾æ˜¯InternalResourceView</p><p>SpringMVCä¸­åˆ›å»ºè½¬å‘è§†å›¾çš„æƒ…å†µï¼š</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€forward:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºInternalResourceViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€forward:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€forward:&#x2F;â€œï¼Œâ€forward:&#x2F;employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testForward&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img003.png" alt="image-20210706201316593"></p><h3 id="3ã€é‡å®šå‘è§†å›¾"><a href="#3ã€é‡å®šå‘è§†å›¾" class="headerlink" title="3ã€é‡å®šå‘è§†å›¾"></a>3ã€é‡å®šå‘è§†å›¾</h3><p>å›é¡¾è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«</p><p>è½¬å‘ï¼š</p><ul><li>æµè§ˆå™¨å‘é€çš„ä¸€æ¬¡è¯·æ±‚ï¼ˆä¸€æ¬¡è¯·æ±‚ç”±æµè§ˆå™¨å‘å‡ºï¼Œä¸€æ¬¡è¯·æ±‚åœ¨æœåŠ¡å™¨å†…éƒ¨å‘ç”Ÿï¼‰</li><li>è½¬å‘å¯ä»¥è·å–åˆ°è¯·æ±‚åŸŸä¸­çš„æ•°æ®</li><li>å¯ä»¥è®¿é—®WEB-INFä¸‹çš„èµ„æº</li><li>ä¸å¯ä»¥è·¨åŸŸï¼Œåªèƒ½è®¿é—®æœåŠ¡å™¨çš„èµ„æº</li></ul><p>é‡å®šå‘ï¼š</p><ul><li>æµè§ˆå™¨å‘é€çš„ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡è®¿é—®servletï¼Œç¬¬äºŒæ¬¡è®¿é—®é‡å®šå‘åˆ°çš„åœ°å€</li><li>è·å–ä¸åˆ°è¯·æ±‚åŸŸçš„æ•°æ®</li><li>ä¸èƒ½è®¿é—®WEB-INFä¸‹çš„èµ„æº.</li><li>å¯ä»¥è·¨åŸŸï¼Œèƒ½å¤Ÿè®¿é—®å¤–éƒ¨èµ„æºï¼Œå¦‚å¯ä»¥é‡å®šå‘åˆ°baidu.com</li></ul><p>SpringMVCä¸­é»˜è®¤çš„é‡å®šå‘è§†å›¾æ˜¯RedirectView</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€redirect:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºRedirectViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€redirect:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡é‡å®šå‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€redirect:&#x2F;â€œï¼Œâ€redirect:&#x2F;employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRedirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img004.png" alt="image-20210706201602267"></p><blockquote><p>æ³¨ï¼š</p><p>é‡å®šå‘è§†å›¾åœ¨è§£ææ—¶ï¼Œä¼šå…ˆå°†redirect:å‰ç¼€å»æ‰ï¼Œç„¶åä¼šåˆ¤æ–­å‰©ä½™éƒ¨åˆ†æ˜¯å¦ä»¥&#x2F;å¼€å¤´ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡è·¯å¾„</p></blockquote><h3 id="4ã€è§†å›¾æ§åˆ¶å™¨view-controller"><a href="#4ã€è§†å›¾æ§åˆ¶å™¨view-controller" class="headerlink" title="4ã€è§†å›¾æ§åˆ¶å™¨view-controller"></a>4ã€è§†å›¾æ§åˆ¶å™¨view-controller</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä»…ä»…ç”¨æ¥å®ç°é¡µé¢è·³è½¬ï¼Œæ²¡æœ‰å…¶ä»–è¯·æ±‚è¿‡ç¨‹çš„å¤„ç†ï¼Œå³åªéœ€è¦è®¾ç½®è§†å›¾åç§°æ—¶ï¼Œå¯ä»¥å°†å¤„ç†å™¨æ–¹æ³•ä½¿ç”¨view-controlleræ ‡ç­¾è¿›è¡Œè¡¨ç¤º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">pathï¼šè®¾ç½®å¤„ç†çš„è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">view-nameï¼šè®¾ç½®è¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è§†å›¾åç§°</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/testView&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>å½“SpringMVCä¸­è®¾ç½®ä»»ä½•ä¸€ä¸ªview-controlleræ—¶ï¼Œå…¶ä»–æ§åˆ¶å™¨ä¸­çš„è¯·æ±‚æ˜ å°„å°†å…¨éƒ¨å¤±æ•ˆï¼Œæ­¤æ—¶éœ€è¦åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcæ³¨è§£é©±åŠ¨çš„æ ‡ç­¾ï¼š</p><p>&lt;mvc:annotation-driven &#x2F;&gt;</p></blockquote><h1 id="å¤„ç†jspè½¬å‘"><a href="#å¤„ç†jspè½¬å‘" class="headerlink" title="å¤„ç†jspè½¬å‘"></a>å¤„ç†jspè½¬å‘</h1><h3 id="springMVCçš„é…ç½®ç¨æœ‰ä¸åŒ"><a href="#springMVCçš„é…ç½®ç¨æœ‰ä¸åŒ" class="headerlink" title="springMVCçš„é…ç½®ç¨æœ‰ä¸åŒ"></a>springMVCçš„é…ç½®ç¨æœ‰ä¸åŒ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®InternalResourceViewResolver--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸»é¡µ"><a href="#ä¸»é¡µ" class="headerlink" title="ä¸»é¡µ"></a>ä¸»é¡µ</h3><p>ä¸»é¡µ index.jspç›´æ¥æ”¾åœ¨webappç›®å½•ä¸‹ï¼Œå¯åŠ¨æœåŠ¡å™¨å°±ä¼šç›´æ¥è®¿é—®è¯¥é¡µé¢</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--jstlè¡¨è¾¾å¼:$&#123;&#125; --%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/success&quot;</span>&gt;æµ‹è¯•è·³è½¬é¡µé¢&lt;/a&gt;</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€RESTful"><a href="#ä¸ƒã€RESTful" class="headerlink" title="ä¸ƒã€RESTful"></a>ä¸ƒã€RESTful</h1><h3 id="1ã€RESTfulç®€ä»‹"><a href="#1ã€RESTfulç®€ä»‹" class="headerlink" title="1ã€RESTfulç®€ä»‹"></a>1ã€RESTfulç®€ä»‹</h3><p>RESTï¼š<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransferï¼Œè¡¨ç°å±‚èµ„æºçŠ¶æ€è½¬ç§»ã€‚</p><p>è¡¨ç°å±‚ï¼šå‰ç«¯çš„è§†å›¾é¡µé¢å’Œåç«¯çš„æ§åˆ¶å±‚servletå±‚</p><h5 id="a-gt-èµ„æº"><a href="#a-gt-èµ„æº" class="headerlink" title="a&gt;èµ„æº"></a>a&gt;èµ„æº</h5><p>èµ„æºæ˜¯ä¸€ç§çœ‹å¾…æœåŠ¡å™¨çš„æ–¹å¼ï¼Œå³ï¼Œå°†æœåŠ¡å™¨çœ‹ä½œæ˜¯ç”±å¾ˆå¤šç¦»æ•£çš„èµ„æºç»„æˆã€‚æ¯ä¸ªèµ„æºæ˜¯æœåŠ¡å™¨ä¸Šä¸€ä¸ªå¯å‘½åçš„æŠ½è±¡æ¦‚å¿µã€‚å› ä¸ºèµ„æºæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥å®ƒä¸ä»…ä»…èƒ½ä»£è¡¨æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ç­‰ç­‰å…·ä½“çš„ä¸œè¥¿ï¼Œå¯ä»¥å°†èµ„æºè®¾è®¡çš„è¦å¤šæŠ½è±¡æœ‰å¤šæŠ½è±¡ï¼Œåªè¦æƒ³è±¡åŠ›å…è®¸è€Œä¸”å®¢æˆ·ç«¯åº”ç”¨å¼€å‘è€…èƒ½å¤Ÿç†è§£ã€‚ä¸é¢å‘å¯¹è±¡è®¾è®¡ç±»ä¼¼ï¼Œèµ„æºæ˜¯ä»¥åè¯ä¸ºæ ¸å¿ƒæ¥ç»„ç»‡çš„ï¼Œé¦–å…ˆå…³æ³¨çš„æ˜¯åè¯ã€‚ä¸€ä¸ªèµ„æºå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªURIæ¥æ ‡è¯†ã€‚URIæ—¢æ˜¯èµ„æºçš„åç§°ï¼Œä¹Ÿæ˜¯èµ„æºåœ¨Webä¸Šçš„åœ°å€ã€‚å¯¹æŸä¸ªèµ„æºæ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡èµ„æºçš„URIä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><h5 id="b-gt-èµ„æºçš„è¡¨è¿°"><a href="#b-gt-èµ„æºçš„è¡¨è¿°" class="headerlink" title="b&gt;èµ„æºçš„è¡¨è¿°"></a>b&gt;èµ„æºçš„è¡¨è¿°</h5><p>èµ„æºçš„è¡¨è¿°æ˜¯ä¸€æ®µå¯¹äºèµ„æºåœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€çš„æè¿°ã€‚å¯ä»¥åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆäº¤æ¢ï¼‰ã€‚èµ„æºçš„è¡¨è¿°å¯ä»¥æœ‰å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚HTML&#x2F;XML&#x2F;JSON&#x2F;çº¯æ–‡æœ¬&#x2F;å›¾ç‰‡&#x2F;è§†é¢‘&#x2F;éŸ³é¢‘ç­‰ç­‰ã€‚èµ„æºçš„è¡¨è¿°æ ¼å¼å¯ä»¥é€šè¿‡åå•†æœºåˆ¶æ¥ç¡®å®šã€‚è¯·æ±‚-å“åº”æ–¹å‘çš„è¡¨è¿°é€šå¸¸ä½¿ç”¨ä¸åŒçš„æ ¼å¼ã€‚</p><h5 id="c-gt-çŠ¶æ€è½¬ç§»"><a href="#c-gt-çŠ¶æ€è½¬ç§»" class="headerlink" title="c&gt;çŠ¶æ€è½¬ç§»"></a>c&gt;çŠ¶æ€è½¬ç§»</h5><p>çŠ¶æ€è½¬ç§»è¯´çš„æ˜¯ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆtransferï¼‰ä»£è¡¨èµ„æºçŠ¶æ€çš„è¡¨è¿°ã€‚é€šè¿‡è½¬ç§»å’Œæ“ä½œèµ„æºçš„è¡¨è¿°ï¼Œæ¥é—´æ¥å®ç°æ“ä½œèµ„æºçš„ç›®çš„ã€‚</p><h3 id="2ã€RESTfulçš„å®ç°"><a href="#2ã€RESTfulçš„å®ç°" class="headerlink" title="2ã€RESTfulçš„å®ç°"></a>2ã€RESTfulçš„å®ç°</h3><p>å…·ä½“è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚</p><p>å®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETE ç”¨æ¥åˆ é™¤èµ„æºã€‚</p><p><strong>REST é£æ ¼æå€¡ URL åœ°å€ä½¿ç”¨ç»Ÿä¸€çš„é£æ ¼è®¾è®¡</strong>ï¼Œä»å‰åˆ°åå„ä¸ªå•è¯ä½¿ç”¨æ–œæ åˆ†å¼€ï¼Œä¸ä½¿ç”¨é—®å·é”®å€¼å¯¹æ–¹å¼æºå¸¦è¯·æ±‚å‚æ•°ï¼Œè€Œæ˜¯å°†è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ä½œä¸º URL åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¿è¯æ•´ä½“é£æ ¼çš„ä¸€è‡´æ€§ã€‚</p><table><thead><tr><th>æ“ä½œ</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>RESTé£æ ¼</th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ“ä½œ</td><td>getUserById?id&#x3D;1</td><td>user&#x2F;1â€“&gt;getè¯·æ±‚æ–¹å¼</td></tr><tr><td>ä¿å­˜æ“ä½œ</td><td>saveUser</td><td>userâ€“&gt;postè¯·æ±‚æ–¹å¼</td></tr><tr><td>åˆ é™¤æ“ä½œ</td><td>deleteUser?id&#x3D;1</td><td>user&#x2F;1â€“&gt;deleteè¯·æ±‚æ–¹å¼</td></tr><tr><td>æ›´æ–°æ“ä½œ</td><td>updateUser</td><td>userâ€“&gt;putè¯·æ±‚æ–¹å¼</td></tr></tbody></table><h3 id="3ã€HiddenHttpMethodFilter"><a href="#3ã€HiddenHttpMethodFilter" class="headerlink" title="3ã€HiddenHttpMethodFilter"></a>3ã€HiddenHttpMethodFilter</h3><p>ç”±äºæµè§ˆå™¨åªæ”¯æŒå‘é€getå’Œpostæ–¹å¼çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å‘é€putå’Œdeleteè¯·æ±‚å‘¢ï¼Ÿ</p><p>SpringMVC æä¾›äº† <strong>HiddenHttpMethodFilter</strong> å¸®åŠ©æˆ‘ä»¬<strong>å°† POST è¯·æ±‚è½¬æ¢ä¸º DELETE æˆ– PUT è¯·æ±‚</strong></p><p>è½¬æ¢çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    ALLOWED_METHODS = Collections.unmodifiableList(Arrays.asList(HttpMethod.PUT.name(), HttpMethod.DELETE.name(), HttpMethod.PATCH.name()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">requestToUse</span> <span class="operator">=</span> request;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(<span class="string">&quot;javax.servlet.error.exception&quot;</span>) == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//methodParamæ’ç­‰äº&quot;_method&quot;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">paramValue</span> <span class="operator">=</span> request.getParameter(<span class="built_in">this</span>.methodParam);</span><br><span class="line">        <span class="comment">//ALLOWED_METHODSå°±æ˜¯ PUT,DELETE,PATCH</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasLength(paramValue)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> paramValue.toUpperCase(Locale.ENGLISH);</span><br><span class="line">            <span class="keyword">if</span> (ALLOWED_METHODS.contains(method)) &#123;</span><br><span class="line">                <span class="comment">//è¿™ä¸€æ­¥å°±æ˜¯å°† è¯·æ±‚çš„requesté‡æ–°åŒ…è£…</span></span><br><span class="line">     requestToUse = <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>.HttpMethodRequestWrapper(request, method);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filterChain.doFilter((ServletRequest)requestToUse, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>HiddenHttpMethodFilter</strong> å¤„ç†putå’Œdeleteè¯·æ±‚çš„æ¡ä»¶ï¼š</p><p>a&gt;å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpost</p><p>b&gt;å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“è¯·æ±‚å‚æ•°_method</p><p>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œ<strong>HiddenHttpMethodFilter</strong> è¿‡æ»¤å™¨å°±ä¼šå°†å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºè¯·æ±‚å‚æ•°_methodçš„å€¼ï¼Œå› æ­¤è¯·æ±‚å‚æ•°_methodçš„å€¼æ‰æ˜¯æœ€ç»ˆçš„è¯·æ±‚æ–¹å¼</p><p>åœ¨web.xmlä¸­æ³¨å†Œ<strong>HiddenHttpMethodFilter</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>ç›®å‰ä¸ºæ­¢ï¼ŒSpringMVCä¸­æä¾›äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼šCharacterEncodingFilterå’ŒHiddenHttpMethodFilter</p><p>åœ¨web.xmlä¸­æ³¨å†Œæ—¶ï¼Œå¿…é¡»å…ˆæ³¨å†ŒCharacterEncodingFilterï¼Œå†æ³¨å†ŒHiddenHttpMethodFilter</p><p>åŸå› ï¼š</p><ul><li><p>åœ¨ CharacterEncodingFilter ä¸­é€šè¿‡ request.setCharacterEncoding(encoding) æ–¹æ³•è®¾ç½®å­—ç¬¦é›†çš„</p></li><li><p>request.setCharacterEncoding(encoding) æ–¹æ³•è¦æ±‚å‰é¢ä¸èƒ½æœ‰ä»»ä½•è·å–è¯·æ±‚å‚æ•°çš„æ“ä½œ</p></li><li><p>è€Œ HiddenHttpMethodFilter æ°æ°æœ‰ä¸€ä¸ªè·å–è¯·æ±‚æ–¹å¼çš„æ“ä½œï¼š</p></li><li><p>&#96;&#96;&#96;<br>String paramValue &#x3D; request.getParameter(this.methodParam);</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># RESTfulé£æ ¼å‚æ•°æ‹¼æ¥</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;!--      restfulé“¾æ¥1--&gt;</span><br><span class="line">&lt;!--      &lt;a th:href=&quot;@&#123;/deleteEmployee/&#125;+$&#123;employee.id&#125;&quot;&gt;delete&lt;/a&gt;--&gt;</span><br><span class="line">&lt;!--      restfulé“¾æ¥2--&gt;</span><br><span class="line">     &lt;a th:href=&quot;@&#123;&#x27;/deleteEmployee/&#x27;+$&#123;employee.id&#125;&#125;&quot;&gt;delete&lt;/a&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h1 id="å…«ã€RESTfulæ¡ˆä¾‹"><a href="#å…«ã€RESTfulæ¡ˆä¾‹" class="headerlink" title="å…«ã€RESTfulæ¡ˆä¾‹"></a>å…«ã€RESTfulæ¡ˆä¾‹</h1><h3 id="1ã€å‡†å¤‡å·¥ä½œ"><a href="#1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="1ã€å‡†å¤‡å·¥ä½œ"></a>1ã€å‡†å¤‡å·¥ä½œ</h3><p>å’Œä¼ ç»Ÿ CRUD ä¸€æ ·ï¼Œå®ç°å¯¹å‘˜å·¥ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ã€‚</p><ul><li><p>æ­å»ºç¯å¢ƒ</p></li><li><p>å‡†å¤‡å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Integer id;</span><br><span class="line">   <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String email;</span><br><span class="line">   <span class="comment">//1 male, 0 female</span></span><br><span class="line">   <span class="keyword">private</span> Integer gender;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getLastName</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> lastName;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLastName</span><span class="params">(String lastName)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> email;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.email = email;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Integer <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> gender;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Integer gender)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.gender = gender;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(Integer id, String lastName, String email, Integer gender)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line">      <span class="built_in">this</span>.id = id;</span><br><span class="line">      <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">      <span class="built_in">this</span>.email = email;</span><br><span class="line">      <span class="built_in">this</span>.gender = gender;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‡†å¤‡daoæ¨¡æ‹Ÿæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mvc.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="literal">null</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">static</span>&#123;</span><br><span class="line">      employees = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Employee&gt;();</span><br><span class="line"></span><br><span class="line">      employees.put(<span class="number">1001</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>, <span class="string">&quot;E-AA&quot;</span>, <span class="string">&quot;aa@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">      employees.put(<span class="number">1002</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;E-BB&quot;</span>, <span class="string">&quot;bb@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">      employees.put(<span class="number">1003</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1003</span>, <span class="string">&quot;E-CC&quot;</span>, <span class="string">&quot;cc@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">      employees.put(<span class="number">1004</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1004</span>, <span class="string">&quot;E-DD&quot;</span>, <span class="string">&quot;dd@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">      employees.put(<span class="number">1005</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1005</span>, <span class="string">&quot;E-EE&quot;</span>, <span class="string">&quot;ee@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Integer</span> <span class="variable">initId</span> <span class="operator">=</span> <span class="number">1006</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(employee.getId() == <span class="literal">null</span>)&#123;</span><br><span class="line">         employee.setId(initId++);</span><br><span class="line">      &#125;</span><br><span class="line">      employees.put(employee.getId(), employee);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> employees.values();</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> employees.get(id);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">      employees.remove(id);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2ã€åŠŸèƒ½æ¸…å•"><a href="#2ã€åŠŸèƒ½æ¸…å•" class="headerlink" title="2ã€åŠŸèƒ½æ¸…å•"></a>2ã€åŠŸèƒ½æ¸…å•</h3><table><thead><tr><th>åŠŸèƒ½</th><th>URL åœ°å€</th><th>è¯·æ±‚æ–¹å¼</th></tr></thead><tbody><tr><td>è®¿é—®é¦–é¡µâˆš</td><td>&#x2F;</td><td>GET</td></tr><tr><td>æŸ¥è¯¢å…¨éƒ¨æ•°æ®âˆš</td><td>&#x2F;employee</td><td>GET</td></tr><tr><td>åˆ é™¤âˆš</td><td>&#x2F;employee&#x2F;2</td><td>DELETE</td></tr><tr><td>è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢âˆš</td><td>&#x2F;toAdd</td><td>GET</td></tr><tr><td>æ‰§è¡Œä¿å­˜âˆš</td><td>&#x2F;employee</td><td>POST</td></tr><tr><td>è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢âˆš</td><td>&#x2F;employee&#x2F;2</td><td>GET</td></tr><tr><td>æ‰§è¡Œæ›´æ–°âˆš</td><td>&#x2F;employee</td><td>PUT</td></tr></tbody></table><h3 id="3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"><a href="#3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ" class="headerlink" title="3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"></a>3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ</h3><h5 id="a-gt-é…ç½®view-controller"><a href="#a-gt-é…ç½®view-controller" class="headerlink" title="a&gt;é…ç½®view-controller"></a>a&gt;é…ç½®view-controller</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h5 id="b-gt-åˆ›å»ºé¡µé¢"><a href="#b-gt-åˆ›å»ºé¡µé¢" class="headerlink" title="b&gt;åˆ›å»ºé¡µé¢"></a>b&gt;åˆ›å»ºé¡µé¢</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span>&gt;</span>è®¿é—®å‘˜å·¥ä¿¡æ¯<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"><a href="#4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®" class="headerlink" title="4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"></a>4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="a&gt;æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmployeeList</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    Collection&lt;Employee&gt; employeeList = employeeDao.getAll();</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employeeList&quot;</span>, employeeList);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="b-gt-åˆ›å»ºemployee-list-html"><a href="#b-gt-åˆ›å»ºemployee-list-html" class="headerlink" title="b&gt;åˆ›å»ºemployee_list.html"></a>b&gt;åˆ›å»ºemployee_list.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Employee Info<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;dataTable&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>Employee Info<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>options(<span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toAdd&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span>)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;employeeList&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;deleteA&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"><a href="#5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤" class="headerlink" title="5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"></a>5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤</h3><h5 id="a-gt-åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"><a href="#a-gt-åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•" class="headerlink" title="a&gt;åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"></a>a&gt;åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;delete_form&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- HiddenHttpMethodFilterè¦æ±‚ï¼šå¿…é¡»ä¼ è¾“_methodè¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å€¼ä¸ºæœ€ç»ˆçš„è¯·æ±‚æ–¹å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="b-gt-åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#b-gt-åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="b&gt;åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"></a>b&gt;åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶</h5><p>å¼•å…¥vue.js</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;deleteA&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡vueå¤„ç†ç‚¹å‡»äº‹ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#dataTable&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//eventè¡¨ç¤ºå½“å‰äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">deleteEmployee</span>:<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> delete_form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;delete_form&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">                delete_form.<span class="property">action</span> = event.<span class="property">target</span>.<span class="property">href</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æäº¤è¡¨å•</span></span></span><br><span class="line"><span class="language-javascript">                delete_form.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º</span></span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="c-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#c-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="c&gt;æ§åˆ¶å™¨æ–¹æ³•"></a>c&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deleteEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    employeeDao.delete(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><blockquote><p>æ³¨æ„ï¼š</p><p>1.é™æ€èµ„æºçš„æ–‡ä»¶åˆšåŠ å…¥è¿›å»ä¸ä¼šè¢«æ‰“åŒ…ï¼Œè¿›è€Œä¸ä¼šè¢«æœåŠ¡å™¨è¯»å–ï¼Œå› æ­¤è¦åˆ°mavenæ‰“åŒ…æ›´æ–°ä¸€ä¸‹èµ„æºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220124180050109.png" alt="image-20220124180050109"></p><p>2.å¼•å…¥jsçš„é“¾æ¥ä¼šè¢«ä¼šè¢«è®¾ç½®çš„DispatcherServletæ¥ç®¡è€Œå¯¼è‡´é”™è¯¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é¢å¤–é…ç½®é»˜è®¤servletï¼Œå¹¶ä¸”è¯¥é…ç½®å¿…é¡»å’Œå¼€å¯æ³¨è§£é©±åŠ¨ä¸€èµ·ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå˜æˆæ‰€æœ‰èµ„æºéƒ½è¢«é»˜è®¤servletå¤„ç†ã€‚</p><p>è¿™é‡Œçš„å¤„ç†é€»è¾‘æ˜¯ï¼šèµ„æºè®¿é—®å…ˆç”±DispatcherServletå¤„ç†ï¼ŒDispartcherServletå¤„ç†ä¸äº†ï¼Œå†äº¤åˆ°é»˜è®¤servletå¤„ç†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;!--    å¼€å¯springMVCæ³¨è§£é©±åŠ¨--&gt;</span><br><span class="line">&gt;&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--    é…ç½®é»˜è®¤servletï¼Œå¼€æ”¾å¯¹é™æ€èµ„æºçš„è®¿é—®--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:default-servlet-handler</span>&gt;</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"><a href="#6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢" class="headerlink" title="6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"></a>6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢</h3><h5 id="a-gt-é…ç½®view-controller-1"><a href="#a-gt-é…ç½®view-controller-1" class="headerlink" title="a&gt;é…ç½®view-controller"></a>a&gt;é…ç½®view-controller</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/toAdd&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;employee_add&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="b-gt-åˆ›å»ºemployee-add-html"><a href="#b-gt-åˆ›å»ºemployee-add-html" class="headerlink" title="b&gt;åˆ›å»ºemployee_add.html"></a>b&gt;åˆ›å»ºemployee_add.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Add Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    lastName:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    email:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    gender:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>male</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>female<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;add&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"><a href="#7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜" class="headerlink" title="7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"></a>7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•-1"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•-1" class="headerlink" title="a&gt;æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"><a href="#8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢" class="headerlink" title="8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"></a>8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢</h3><h5 id="a-gt-ä¿®æ”¹è¶…é“¾æ¥"><a href="#a-gt-ä¿®æ”¹è¶…é“¾æ¥" class="headerlink" title="a&gt;ä¿®æ”¹è¶…é“¾æ¥"></a>a&gt;ä¿®æ”¹è¶…é“¾æ¥</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="b-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#b-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="b&gt;æ§åˆ¶å™¨æ–¹æ³•"></a>b&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmployeeById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeDao.get(id);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employee&quot;</span>, employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="c-gt-åˆ›å»ºemployee-update-html"><a href="#c-gt-åˆ›å»ºemployee-update-html" class="headerlink" title="c&gt;åˆ›å»ºemployee_update.html"></a>c&gt;åˆ›å»ºemployee_update.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Update Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span></span><br><span class="line">    lastName:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    email:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        th:field=&quot;$&#123;employee.gender&#125;&quot;å¯ç”¨äºå•é€‰æ¡†æˆ–å¤é€‰æ¡†çš„å›æ˜¾</span></span><br><span class="line"><span class="comment">        è‹¥å•é€‰æ¡†çš„valueå’Œemployee.genderçš„å€¼ä¸€è‡´ï¼Œåˆ™æ·»åŠ checked=&quot;checked&quot;å±æ€§</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    gender:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>male</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>female<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;update&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"><a href="#9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°" class="headerlink" title="9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"></a>9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•-2"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•-2" class="headerlink" title="a&gt;æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.PUT)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updateEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…«ã€HttpMessageConverter"><a href="#å…«ã€HttpMessageConverter" class="headerlink" title="å…«ã€HttpMessageConverter"></a>å…«ã€HttpMessageConverter</h1><p>HttpMessageConverterï¼ŒæŠ¥æ–‡ä¿¡æ¯è½¬æ¢å™¨ï¼Œå°†è¯·æ±‚æŠ¥æ–‡è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼Œæˆ–å°†Javaå¯¹è±¡è½¬æ¢ä¸ºå“åº”æŠ¥æ–‡</p><p>HttpMessageConverteræä¾›äº†ä¸¤ä¸ªæ³¨è§£å’Œä¸¤ä¸ªç±»å‹ï¼š@RequestBodyï¼Œ@ResponseBodyï¼ŒRequestEntityï¼Œ</p><p>ResponseEntity</p><h3 id="1ã€-RequestBody"><a href="#1ã€-RequestBody" class="headerlink" title="1ã€@RequestBody"></a>1ã€@RequestBody</h3><p>@RequestBodyå¯ä»¥è·å–è¯·æ±‚ä½“ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•è®¾ç½®ä¸€ä¸ªå½¢å‚ï¼Œä½¿ç”¨@RequestBodyè¿›è¡Œæ ‡è¯†ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚ä½“å°±ä¼šä¸ºå½“å‰æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testRequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> String requestBody)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><p>requestBody:username&#x3D;admin&amp;password&#x3D;123456</p><h3 id="2ã€RequestEntity"><a href="#2ã€RequestEntity" class="headerlink" title="2ã€RequestEntity"></a>2ã€RequestEntity</h3><p>RequestEntityå°è£…è¯·æ±‚æŠ¥æ–‡çš„ä¸€ç§ç±»å‹ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®è¯¥ç±»å‹çš„å½¢å‚ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡å°±ä¼šèµ‹å€¼ç»™è¯¥å½¢å‚ï¼Œå¯ä»¥é€šè¿‡getHeaders()è·å–è¯·æ±‚å¤´ä¿¡æ¯ï¼Œé€šè¿‡getBody()è·å–è¯·æ±‚ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestEntity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestEntity</span><span class="params">(RequestEntity&lt;String&gt; requestEntity)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestHeader:&quot;</span>+requestEntity.getHeaders());</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestEntity.getBody());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š<br>requestHeader:[host:â€localhost:8080â€, connection:â€keep-aliveâ€, content-length:â€27â€, cache-control:â€max-age&#x3D;0â€, sec-ch-ua:â€â€ Not A;Brandâ€;v&#x3D;â€99â€, â€œChromiumâ€;v&#x3D;â€90â€, â€œGoogle Chromeâ€;v&#x3D;â€90â€â€, sec-ch-ua-mobile:â€?0â€, upgrade-insecure-requests:â€1â€, origin:â€<a href="http://localhost:8080/">http://localhost:8080</a>â€œ, user-agent:â€Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;90.0.4430.93 Safari&#x2F;537.36â€]<br>requestBody:username&#x3D;admin&amp;password&#x3D;123</p><h3 id="3ã€-ResponseBody"><a href="#3ã€-ResponseBody" class="headerlink" title="3ã€@ResponseBody"></a>3ã€@ResponseBody</h3><p>@ResponseBodyç”¨äºæ ‡è¯†ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseBody&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span><span class="comment">//æœ‰@ResponseBodyæ³¨è§£çš„æƒ…å†µä¸‹ï¼Œè¿”å›å€¼å°±æ˜¯æœåŠ¡å™¨ç»™æµè§ˆå™¨çš„å“åº”ä½“ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ³¨è§£ï¼Œè¿”å›å€¼å°±ä¼šè¢«Thymeleafè§†å›¾è§£æå™¨è§£æä¸ºè·³è½¬çš„åœ°å€ã€‚</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testResponseBody</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæµè§ˆå™¨é¡µé¢æ˜¾ç¤ºsuccess</p><h3 id="4ã€SpringMVCå¤„ç†json"><a href="#4ã€SpringMVCå¤„ç†json" class="headerlink" title="4ã€SpringMVCå¤„ç†json"></a>4ã€SpringMVCå¤„ç†json</h3><p>@ResponseBodyå¤„ç†jsonçš„æ­¥éª¤ï¼š</p><p>a&gt;å¯¼å…¥jacksonçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨ï¼Œæ­¤æ—¶åœ¨HandlerAdaptorä¸­ä¼šè‡ªåŠ¨è£…é…ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨ï¼šMappingJackson2HttpMessageConverterï¼Œå¯ä»¥å°†å“åº”åˆ°æµè§ˆå™¨çš„Javaå¯¹è±¡è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven /&gt;</span><br></pre></td></tr></table></figure><p>c&gt;åœ¨å¤„ç†å™¨æ–¹æ³•ä¸Šä½¿ç”¨@ResponseBodyæ³¨è§£è¿›è¡Œæ ‡è¯†</p><p>d&gt;å°†Javaå¯¹è±¡ç›´æ¥ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œå°±ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseUser&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">testResponseUser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1001</span>,<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨çš„é¡µé¢ä¸­å±•ç¤ºçš„ç»“æœï¼š</p><p>{â€œidâ€:1001,â€usernameâ€:â€adminâ€,â€passwordâ€:â€123456â€,â€ageâ€:23,â€sexâ€:â€ç”·â€}</p><h3 id="5ã€SpringMVCå¤„ç†ajax"><a href="#5ã€SpringMVCå¤„ç†ajax" class="headerlink" title="5ã€SpringMVCå¤„ç†ajax"></a>5ã€SpringMVCå¤„ç†ajax</h3><p>a&gt;è¯·æ±‚è¶…é“¾æ¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testAjax&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;testAjax&quot;</span>&gt;</span>testAjax<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;é€šè¿‡vueå’Œaxioså¤„ç†ç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">testAjax</span>:<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>:event.<span class="property">target</span>.<span class="property">href</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">params</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">username</span>:<span class="string">&quot;admin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">password</span>:<span class="string">&quot;123456&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testAjax&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAjax</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello,ajax&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6ã€-RestControlleræ³¨è§£"><a href="#6ã€-RestControlleræ³¨è§£" class="headerlink" title="6ã€@RestControlleræ³¨è§£"></a>6ã€@RestControlleræ³¨è§£</h3><p>@RestControlleræ³¨è§£æ˜¯springMVCæä¾›çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œæ ‡è¯†åœ¨æ§åˆ¶å™¨çš„ç±»ä¸Šï¼Œå°±ç›¸å½“äºä¸ºç±»æ·»åŠ äº†@Controlleræ³¨è§£ï¼Œå¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•æ·»åŠ äº†@ResponseBodyæ³¨è§£</p><h3 id="7ã€ResponseEntity"><a href="#7ã€ResponseEntity" class="headerlink" title="7ã€ResponseEntity"></a>7ã€ResponseEntity</h3><p>ResponseEntityç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œè¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡</p><h1 id="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h3 id="1ã€æ–‡ä»¶ä¸‹è½½"><a href="#1ã€æ–‡ä»¶ä¸‹è½½" class="headerlink" title="1ã€æ–‡ä»¶ä¸‹è½½"></a>1ã€æ–‡ä»¶ä¸‹è½½</h3><p>ä½¿ç”¨ResponseEntityå®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testDown&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//è·å–ServletContextå¯¹è±¡</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/static/img/1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºè¾“å…¥æµ</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">    <span class="comment">//åˆ›å»ºå­—èŠ‚æ•°ç»„ is.available()å¾—åˆ°è¯¥æ–‡ä»¶çš„å­—èŠ‚å¤§å°</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">    <span class="comment">//å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­</span></span><br><span class="line">    is.read(bytes);</span><br><span class="line">    <span class="comment">//åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®è¦ä¸‹è½½æ–¹å¼ä»¥åŠä¸‹è½½æ–‡ä»¶çš„åå­—</span></span><br><span class="line">    headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span></span><br><span class="line">    <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">    <span class="comment">//åˆ›å»ºResponseEntityå¯¹è±¡</span></span><br><span class="line">    ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">    <span class="comment">//å…³é—­è¾“å…¥æµ</span></span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> responseEntity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€æ–‡ä»¶ä¸Šä¼ "><a href="#2ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2ã€æ–‡ä»¶ä¸Šä¼ "></a>2ã€æ–‡ä»¶ä¸Šä¼ </h3><p>æ–‡ä»¶ä¸Šä¼ è¦æ±‚formè¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpostï¼Œå¹¶ä¸”æ·»åŠ å±æ€§enctype&#x3D;â€multipart&#x2F;form-dataâ€</p><p>SpringMVCä¸­å°†ä¸Šä¼ çš„æ–‡ä»¶å°è£…åˆ°MultipartFileå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</p><p>ä¸Šä¼ æ­¥éª¤ï¼š</p><p>a&gt;æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¿…é¡»é€šè¿‡æ–‡ä»¶è§£æå™¨çš„è§£ææ‰èƒ½å°†æ–‡ä»¶è½¬æ¢ä¸ºMultipartFileå¯¹è±¡</span></span><br><span class="line"><span class="comment"> æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»é…ç½®idï¼Œå¹¶ä¸”idåå¿…é¡»æ˜¯multipartResolver--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å‰ç«¯é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testUp&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    å¤´åƒï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;photo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testUp&quot;)</span></span><br><span class="line"><span class="comment">//è¿™é‡Œçš„å‚æ•°å photoæ˜¯æ ¹æ®ä¸Šä¼ çš„nameå†³å®šçš„ï¼Œç±»å‹MultipartFileå°è£…äº†ä¸Šä¼ æ–‡ä»¶çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testUp</span><span class="params">(MultipartFile photo, HttpSession session)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„æ–‡ä»¶å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">    <span class="comment">//å¤„ç†æ–‡ä»¶é‡åé—®é¢˜</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hzName</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">    fileName = UUID.randomUUID().toString() + hzName;</span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡å™¨ä¸­photoç›®å½•çš„è·¯å¾„</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="type">String</span> <span class="variable">photoPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;photo&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(photoPath);</span><br><span class="line">    <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">        file.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">finalPath</span> <span class="operator">=</span> photoPath + File.separator + fileName;</span><br><span class="line">    <span class="comment">//å®ç°ä¸Šä¼ åŠŸèƒ½</span></span><br><span class="line">    photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(finalPath));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åã€æ‹¦æˆªå™¨"><a href="#åã€æ‹¦æˆªå™¨" class="headerlink" title="åã€æ‹¦æˆªå™¨"></a>åã€æ‹¦æˆªå™¨</h1><h3 id="1ã€æ‹¦æˆªå™¨çš„é…ç½®"><a href="#1ã€æ‹¦æˆªå™¨çš„é…ç½®" class="headerlink" title="1ã€æ‹¦æˆªå™¨çš„é…ç½®"></a>1ã€æ‹¦æˆªå™¨çš„é…ç½®</h3><p>tips:ctrl+oé‡ç°çˆ¶ç±»æ¥å£æ–¹æ³•</p><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨ç”¨äºæ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ</p><p><strong>SpringMVCä¸­çš„æ‹¦æˆªå™¨éœ€è¦å®ç°<code>HandlerInterceptor</code></strong></p><p>SpringMVCçš„æ‹¦æˆªå™¨å¿…é¡»åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ä½¿ç”¨ref bean æ–¹å¼å¿…é¡»åœ¨ ç±»ä¸Šé¢æ·»åŠ åˆ›å»ºå¯¹è±¡çš„æ³¨è§£ï¼Œå¹¶ä¸”è¦å¼€å¯ç»„ä»¶æ‰«æ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä»¥ä¸Šä¸¤ç§é…ç½®æ–¹å¼éƒ½æ˜¯å¯¹DispatcherServletæ‰€å¤„ç†çš„æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/testRequestEntity&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">ä»¥ä¸Šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡refæˆ–beanæ ‡ç­¾è®¾ç½®æ‹¦æˆªå™¨ï¼Œé€šè¿‡mvc:mappingè®¾ç½®éœ€è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œé€šè¿‡mvc:exclude-mappingè®¾ç½®éœ€è¦æ’é™¤çš„è¯·æ±‚ï¼Œå³ä¸éœ€è¦æ‹¦æˆªçš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"><a href="#2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•" class="headerlink" title="2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"></a>2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•</h3><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p><p>preHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡ŒpreHandle()ï¼Œå…¶booleanç±»å‹çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªæˆ–æ”¾è¡Œï¼Œè¿”å›trueä¸ºæ”¾è¡Œï¼Œå³è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ï¼›è¿”å›falseè¡¨ç¤ºæ‹¦æˆªï¼Œå³ä¸è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•</p><p>postHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡ŒpostHandle()</p><p>afterComplationï¼šå¤„ç†å®Œè§†å›¾å’Œæ¨¡å‹æ•°æ®ï¼Œæ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡ŒafterComplation()</p><h3 id="3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a href="#3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a>3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h3><p>a&gt;è‹¥æ¯ä¸ªæ‹¦æˆªå™¨çš„preHandle()éƒ½è¿”å›true</p><p>æ­¤æ—¶å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºæœ‰å…³ï¼š</p><p>preHandle()ä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œè€ŒpostHandle()å’ŒafterComplation()ä¼šæŒ‰ç…§é…ç½®çš„ååºæ‰§è¡Œ</p><p>b&gt;è‹¥æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›äº†false</p><p>preHandle()è¿”å›falseå’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„preHandle()éƒ½ä¼šæ‰§è¡Œï¼ŒpostHandle()éƒ½ä¸æ‰§è¡Œï¼Œè¿”å›falseçš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨çš„afterComplation()ä¼šæ‰§è¡Œ</p><h1 id="åä¸€ã€å¼‚å¸¸å¤„ç†å™¨"><a href="#åä¸€ã€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="åä¸€ã€å¼‚å¸¸å¤„ç†å™¨"></a>åä¸€ã€å¼‚å¸¸å¤„ç†å™¨</h1><h3 id="1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"><a href="#1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"></a>1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†</h3><p>SpringMVCæä¾›äº†ä¸€ä¸ªå¤„ç†æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‡ºç°çš„å¼‚å¸¸çš„æ¥å£ï¼šHandlerExceptionResolver</p><p>HandlerExceptionResolveræ¥å£çš„å®ç°ç±»æœ‰ï¼šDefaultHandlerExceptionResolverå’ŒSimpleMappingExceptionResolver</p><p>SpringMVCæä¾›äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolverï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        propertiesçš„é”®è¡¨ç¤ºå¤„ç†å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">        propertiesçš„å€¼è¡¨ç¤ºè‹¥å‡ºç°æŒ‡å®šå¼‚å¸¸æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„è§†å›¾åç§°ï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢</span></span><br><span class="line"><span class="comment">è¿™é‡Œå°±æ˜¯å½“å‡ºç°ç®—æ•°å¼‚å¸¸çš„æ—¶å€™ä¼šè·³è½¬åˆ° è¢«è§†å›¾è§£æå™¨è§£æçš„erroré¡µé¢</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ArithmeticException&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    exceptionAttributeå±æ€§è®¾ç½®ä¸€ä¸ªå±æ€§åï¼Œå°†å‡ºç°çš„å¼‚å¸¸ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­è¿›è¡Œå…±äº«</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionAttribute&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>erroré¡µé¢é…ç½®ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>å‡ºç°é”™è¯¯<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;ex&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"><a href="#2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"></a>2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@ControllerAdviceå°†å½“å‰ç±»æ ‡è¯†ä¸ºå¼‚å¸¸å¤„ç†çš„ç»„ä»¶</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@ExceptionHandlerç”¨äºè®¾ç½®æ‰€æ ‡è¯†æ–¹æ³•å¤„ç†çš„å¼‚å¸¸,</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="comment">//exè¡¨ç¤ºå½“å‰è¯·æ±‚å¤„ç†ä¸­å‡ºç°çš„å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handleArithmeticException</span><span class="params">(Exception ex, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;ex&quot;</span>, ex);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åäºŒã€æ³¨è§£é…ç½®SpringMVC"><a href="#åäºŒã€æ³¨è§£é…ç½®SpringMVC" class="headerlink" title="åäºŒã€æ³¨è§£é…ç½®SpringMVC"></a>åäºŒã€æ³¨è§£é…ç½®SpringMVC</h1><p>ä½¿ç”¨é…ç½®ç±»å’Œæ³¨è§£ä»£æ›¿web.xmlå’ŒSpringMVCé…ç½®æ–‡ä»¶çš„åŠŸèƒ½</p><h3 id="1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml"><a href="#1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml" class="headerlink" title="1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml"></a>1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml</h3><p>åœ¨Servlet3.0ç¯å¢ƒä¸­ï¼Œå®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½®Servletå®¹å™¨ã€‚<br>Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œåä¸ºSpringServletContainerInitializerï¼Œè¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶å°†é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆã€‚Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°ï¼Œåä¸ºAbstractAnnotationConfigDispatcherServletInitializerï¼Œå½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº†AbstractAnnotationConfigDispatcherServletInitializerå¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒï¼Œå¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šspringçš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šSpringMVCçš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šDispatcherServletçš„æ˜ å°„è§„åˆ™ï¼Œå³url-pattern</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">encodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        encodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        encodingFilter.setForceRequestEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;encodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"><a href="#2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"></a>2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"><span class="comment">//ssmæ•´åˆä¹‹åï¼Œspringçš„é…ç½®ä¿¡æ¯å†™åœ¨æ­¤ç±»ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"></a>3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ‰«æç»„ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.mvc.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯MVCæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">FirstInterceptor</span> <span class="variable">firstInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstInterceptor</span>();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é…ç½®è§†å›¾æ§åˆ¶</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void addViewControllers(ViewControllerRegistry registry) &#123;</span></span><br><span class="line"><span class="comment">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é…ç½®å¼‚å¸¸æ˜ å°„</span></span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;</span></span><br><span class="line"><span class="comment">        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();</span></span><br><span class="line"><span class="comment">        Properties prop = new Properties();</span></span><br><span class="line"><span class="comment">        prop.setProperty(&quot;java.lang.ArithmeticException&quot;, &quot;error&quot;);</span></span><br><span class="line"><span class="comment">        //è®¾ç½®å¼‚å¸¸æ˜ å°„</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionMappings(prop);</span></span><br><span class="line"><span class="comment">        //è®¾ç½®å…±äº«å¼‚å¸¸ä¿¡æ¯çš„é”®</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionAttribute(&quot;ex&quot;);</span></span><br><span class="line"><span class="comment">        resolvers.add(exceptionResolver);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        <span class="comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(</span><br><span class="line">                webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> &#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span>();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€æµ‹è¯•åŠŸèƒ½"><a href="#4ã€æµ‹è¯•åŠŸèƒ½" class="headerlink" title="4ã€æµ‹è¯•åŠŸèƒ½"></a>4ã€æµ‹è¯•åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹"><a href="#åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹"></a>åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹</h1><h3 id="1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"><a href="#1ã€SpringMVCå¸¸ç”¨ç»„ä»¶" class="headerlink" title="1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"></a>1ã€SpringMVCå¸¸ç”¨ç»„ä»¶</h3><ul><li>DispatcherServletï¼š<strong>å‰ç«¯æ§åˆ¶å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><ul><li>HandlerMappingï¼š<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„urlã€methodç­‰ä¿¡æ¯æŸ¥æ‰¾Handlerï¼Œå³æ§åˆ¶å™¨æ–¹æ³•</p><ul><li>Handlerï¼š<strong>å¤„ç†å™¨</strong>ï¼Œéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘</li></ul><p>ä½œç”¨ï¼šåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†</p><ul><li>HandlerAdapterï¼š<strong>å¤„ç†å™¨é€‚é…å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šé€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨æ–¹æ³•ï¼‰è¿›è¡Œæ‰§è¡Œ</p><ul><li>ViewResolverï¼š<strong>è§†å›¾è§£æå™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¾—åˆ°ç›¸åº”çš„è§†å›¾ï¼Œä¾‹å¦‚ï¼šThymeleafViewã€InternalResourceViewã€RedirectView</p><ul><li>Viewï¼š<strong>è§†å›¾</strong></li></ul><p>ä½œç”¨ï¼šå°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·</p><h3 id="2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"><a href="#2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"></a>2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹</h3><p>DispatcherServlet æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servletï¼Œæ‰€ä»¥å¤©ç„¶çš„éµå¾ª Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€ä»¥å®è§‚ä¸Šæ˜¯ Servlet ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œè°ƒåº¦ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img005.png" alt="images"></p><h5 id="a-gt-åˆå§‹åŒ–WebApplicationContext"><a href="#a-gt-åˆå§‹åŒ–WebApplicationContext" class="headerlink" title="a&gt;åˆå§‹åŒ–WebApplicationContext"></a>a&gt;åˆå§‹åŒ–WebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> WebApplicationContext <span class="title function_">initWebApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">WebApplicationContext</span> <span class="variable">rootContext</span> <span class="operator">=</span></span><br><span class="line">        WebApplicationContextUtils.getWebApplicationContext(getServletContext());</span><br><span class="line">    <span class="type">WebApplicationContext</span> <span class="variable">wac</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.webApplicationContext != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// A context instance was injected at construction time -&gt; use it</span></span><br><span class="line">        wac = <span class="built_in">this</span>.webApplicationContext;</span><br><span class="line">        <span class="keyword">if</span> (wac <span class="keyword">instanceof</span> ConfigurableWebApplicationContext) &#123;</span><br><span class="line">            <span class="type">ConfigurableWebApplicationContext</span> <span class="variable">cwac</span> <span class="operator">=</span> (ConfigurableWebApplicationContext) wac;</span><br><span class="line">            <span class="keyword">if</span> (!cwac.isActive()) &#123;</span><br><span class="line">                <span class="comment">// The context has not yet been refreshed -&gt; provide services such as</span></span><br><span class="line">                <span class="comment">// setting the parent context, setting the application context id, etc</span></span><br><span class="line">                <span class="keyword">if</span> (cwac.getParent() == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// The context instance was injected without an explicit parent -&gt; set</span></span><br><span class="line">                    <span class="comment">// the root application context (if any; may be null) as the parent</span></span><br><span class="line">                    cwac.setParent(rootContext);</span><br><span class="line">                &#125;</span><br><span class="line">                configureAndRefreshWebApplicationContext(cwac);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wac == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// No context instance was injected at construction time -&gt; see if one</span></span><br><span class="line">        <span class="comment">// has been registered in the servlet context. If one exists, it is assumed</span></span><br><span class="line">        <span class="comment">// that the parent context (if any) has already been set and that the</span></span><br><span class="line">        <span class="comment">// user has performed any initialization such as setting the context id</span></span><br><span class="line">        wac = findWebApplicationContext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wac == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// No context instance is defined for this servlet -&gt; create a local one</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºWebApplicationContext</span></span><br><span class="line">        wac = createWebApplicationContext(rootContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.refreshEventReceived) &#123;</span><br><span class="line">        <span class="comment">// Either the context is not a ConfigurableApplicationContext with refresh</span></span><br><span class="line">        <span class="comment">// support or the context injected at construction time had already been</span></span><br><span class="line">        <span class="comment">// refreshed -&gt; trigger initial onRefresh manually here.</span></span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>.onRefreshMonitor) &#123;</span><br><span class="line">            <span class="comment">// åˆ·æ–°WebApplicationContext</span></span><br><span class="line">            onRefresh(wac);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.publishContext) &#123;</span><br><span class="line">        <span class="comment">// Publish the context as a servlet context attribute.</span></span><br><span class="line">        <span class="comment">// å°†IOCå®¹å™¨åœ¨åº”ç”¨åŸŸå…±äº«</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">attrName</span> <span class="operator">=</span> getServletContextAttributeName();</span><br><span class="line">        getServletContext().setAttribute(attrName, wac);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wac;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="b-gt-åˆ›å»ºWebApplicationContext"><a href="#b-gt-åˆ›å»ºWebApplicationContext" class="headerlink" title="b&gt;åˆ›å»ºWebApplicationContext"></a>b&gt;åˆ›å»ºWebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> WebApplicationContext <span class="title function_">createWebApplicationContext</span><span class="params">(<span class="meta">@Nullable</span> ApplicationContext parent)</span> &#123;</span><br><span class="line">    Class&lt;?&gt; contextClass = getContextClass();</span><br><span class="line">    <span class="keyword">if</span> (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ApplicationContextException</span>(</span><br><span class="line">            <span class="string">&quot;Fatal initialization error in servlet with name &#x27;&quot;</span> + getServletName() +</span><br><span class="line">            <span class="string">&quot;&#x27;: custom WebApplicationContext class [&quot;</span> + contextClass.getName() +</span><br><span class="line">            <span class="string">&quot;] is not of type ConfigurableWebApplicationContext&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡åå°„åˆ›å»º IOC å®¹å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="type">ConfigurableWebApplicationContext</span> <span class="variable">wac</span> <span class="operator">=</span></span><br><span class="line">        (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);</span><br><span class="line"></span><br><span class="line">    wac.setEnvironment(getEnvironment());</span><br><span class="line">    <span class="comment">// è®¾ç½®çˆ¶å®¹å™¨</span></span><br><span class="line">    wac.setParent(parent);</span><br><span class="line">    <span class="type">String</span> <span class="variable">configLocation</span> <span class="operator">=</span> getContextConfigLocation();</span><br><span class="line">    <span class="keyword">if</span> (configLocation != <span class="literal">null</span>) &#123;</span><br><span class="line">        wac.setConfigLocation(configLocation);</span><br><span class="line">    &#125;</span><br><span class="line">    configureAndRefreshWebApplicationContext(wac);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wac;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="c-gt-DispatcherServletåˆå§‹åŒ–ç­–ç•¥"><a href="#c-gt-DispatcherServletåˆå§‹åŒ–ç­–ç•¥" class="headerlink" title="c&gt;DispatcherServletåˆå§‹åŒ–ç­–ç•¥"></a>c&gt;DispatcherServletåˆå§‹åŒ–ç­–ç•¥</h5><p>FrameworkServletåˆ›å»ºWebApplicationContextåï¼Œåˆ·æ–°å®¹å™¨ï¼Œè°ƒç”¨onRefresh(wac)ï¼Œæ­¤æ–¹æ³•åœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™ï¼Œè°ƒç”¨äº†initStrategies(context)æ–¹æ³•ï¼Œåˆå§‹åŒ–ç­–ç•¥ï¼Œå³åˆå§‹åŒ–DispatcherServletçš„å„ä¸ªç»„ä»¶</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">initStrategies</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">   initMultipartResolver(context);</span><br><span class="line">   initLocaleResolver(context);</span><br><span class="line">   initThemeResolver(context);</span><br><span class="line">   initHandlerMappings(context);</span><br><span class="line">   initHandlerAdapters(context);</span><br><span class="line">   initHandlerExceptionResolvers(context);</span><br><span class="line">   initRequestToViewNameTranslator(context);</span><br><span class="line">   initViewResolvers(context);</span><br><span class="line">   initFlashMapManager(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"><a href="#3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚" class="headerlink" title="3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"></a>3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚</h3><h5 id="a-gt-processRequest"><a href="#a-gt-processRequest" class="headerlink" title="a&gt;processRequest()"></a>a&gt;processRequest()</h5><p>FrameworkServleté‡å†™HttpServletä¸­çš„service()å’ŒdoXxx()ï¼Œè¿™äº›æ–¹æ³•ä¸­è°ƒç”¨äº†processRequest(request, response)</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">processRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">    <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="type">Throwable</span> <span class="variable">failureCause</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">LocaleContext</span> <span class="variable">previousLocaleContext</span> <span class="operator">=</span> LocaleContextHolder.getLocaleContext();</span><br><span class="line">    <span class="type">LocaleContext</span> <span class="variable">localeContext</span> <span class="operator">=</span> buildLocaleContext(request);</span><br><span class="line"></span><br><span class="line">    <span class="type">RequestAttributes</span> <span class="variable">previousAttributes</span> <span class="operator">=</span> RequestContextHolder.getRequestAttributes();</span><br><span class="line">    <span class="type">ServletRequestAttributes</span> <span class="variable">requestAttributes</span> <span class="operator">=</span> buildRequestAttributes(request, response, previousAttributes);</span><br><span class="line"></span><br><span class="line">    <span class="type">WebAsyncManager</span> <span class="variable">asyncManager</span> <span class="operator">=</span> WebAsyncUtils.getAsyncManager(request);</span><br><span class="line">    asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(), <span class="keyword">new</span> <span class="title class_">RequestBindingInterceptor</span>());</span><br><span class="line"></span><br><span class="line">    initContextHolders(request, localeContext, requestAttributes);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// æ‰§è¡ŒæœåŠ¡ï¼ŒdoService()æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™</span></span><br><span class="line">        doService(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (ServletException | IOException ex) &#123;</span><br><span class="line">        failureCause = ex;</span><br><span class="line">        <span class="keyword">throw</span> ex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">        failureCause = ex;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Request processing failed&quot;</span>, ex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        resetContextHolders(request, previousLocaleContext, previousAttributes);</span><br><span class="line">        <span class="keyword">if</span> (requestAttributes != <span class="literal">null</span>) &#123;</span><br><span class="line">            requestAttributes.requestCompleted();</span><br><span class="line">        &#125;</span><br><span class="line">        logResult(request, response, failureCause, asyncManager);</span><br><span class="line">        publishRequestHandledEvent(request, response, startTime, failureCause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="b-gt-doService"><a href="#b-gt-doService" class="headerlink" title="b&gt;doService()"></a>b&gt;doService()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doService</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    logRequest(request);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Keep a snapshot of the request attributes in case of an include,</span></span><br><span class="line">    <span class="comment">// to be able to restore the original attributes after the include.</span></span><br><span class="line">    Map&lt;String, Object&gt; attributesSnapshot = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (WebUtils.isIncludeRequest(request)) &#123;</span><br><span class="line">        attributesSnapshot = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Enumeration&lt;?&gt; attrNames = request.getAttributeNames();</span><br><span class="line">        <span class="keyword">while</span> (attrNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">attrName</span> <span class="operator">=</span> (String) attrNames.nextElement();</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) &#123;</span><br><span class="line">                attributesSnapshot.put(attrName, request.getAttribute(attrName));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make framework objects available to handlers and view objects.</span></span><br><span class="line">    request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());</span><br><span class="line">    request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class="built_in">this</span>.localeResolver);</span><br><span class="line">    request.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class="built_in">this</span>.themeResolver);</span><br><span class="line">    request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.flashMapManager != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">FlashMap</span> <span class="variable">inputFlashMap</span> <span class="operator">=</span> <span class="built_in">this</span>.flashMapManager.retrieveAndUpdate(request, response);</span><br><span class="line">        <span class="keyword">if</span> (inputFlashMap != <span class="literal">null</span>) &#123;</span><br><span class="line">            request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));</span><br><span class="line">        &#125;</span><br><span class="line">        request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class="keyword">new</span> <span class="title class_">FlashMap</span>());</span><br><span class="line">        request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class="built_in">this</span>.flashMapManager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">RequestPath</span> <span class="variable">requestPath</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.parseRequestPath &amp;&amp; !ServletRequestPathUtils.hasParsedRequestPath(request)) &#123;</span><br><span class="line">        requestPath = ServletRequestPathUtils.parseAndCache(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†è¯·æ±‚å’Œå“åº”</span></span><br><span class="line">        doDispatch(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</span><br><span class="line">            <span class="comment">// Restore the original attribute snapshot, in case of an include.</span></span><br><span class="line">            <span class="keyword">if</span> (attributesSnapshot != <span class="literal">null</span>) &#123;</span><br><span class="line">                restoreAttributesAfterInclude(request, attributesSnapshot);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (requestPath != <span class="literal">null</span>) &#123;</span><br><span class="line">            ServletRequestPathUtils.clearParsedRequestPath(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="c-gt-doDispatch"><a href="#c-gt-doDispatch" class="headerlink" title="c&gt;doDispatch()"></a>c&gt;doDispatch()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doDispatch</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">processedRequest</span> <span class="operator">=</span> request;</span><br><span class="line">    <span class="type">HandlerExecutionChain</span> <span class="variable">mappedHandler</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">multipartRequestParsed</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">WebAsyncManager</span> <span class="variable">asyncManager</span> <span class="operator">=</span> WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Exception</span> <span class="variable">dispatchException</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            processedRequest = checkMultipart(request);</span><br><span class="line">            multipartRequestParsed = (processedRequest != request);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Determine handler for the current request.</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            mappedHandlerï¼šè°ƒç”¨é“¾</span></span><br><span class="line"><span class="comment">                åŒ…å«handlerã€interceptorListã€interceptorIndex</span></span><br><span class="line"><span class="comment">            handlerï¼šæµè§ˆå™¨å‘é€çš„è¯·æ±‚æ‰€åŒ¹é…çš„æ§åˆ¶å™¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">            interceptorListï¼šå¤„ç†æ§åˆ¶å™¨æ–¹æ³•çš„æ‰€æœ‰æ‹¦æˆªå™¨é›†åˆ</span></span><br><span class="line"><span class="comment">            interceptorIndexï¼šæ‹¦æˆªå™¨ç´¢å¼•ï¼Œæ§åˆ¶æ‹¦æˆªå™¨afterCompletion()çš„æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            mappedHandler = getHandler(processedRequest);</span><br><span class="line">            <span class="keyword">if</span> (mappedHandler == <span class="literal">null</span>) &#123;</span><br><span class="line">                noHandlerFound(processedRequest, response);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Determine handler adapter for the current request.</span></span><br><span class="line">           <span class="comment">// é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•åˆ›å»ºç›¸åº”çš„å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨æ‰€å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</span></span><br><span class="line">            <span class="type">HandlerAdapter</span> <span class="variable">ha</span> <span class="operator">=</span> getHandlerAdapter(mappedHandler.getHandler());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Process last-modified header, if supported by the handler.</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">isGet</span> <span class="operator">=</span> <span class="string">&quot;GET&quot;</span>.equals(method);</span><br><span class="line">            <span class="keyword">if</span> (isGet || <span class="string">&quot;HEAD&quot;</span>.equals(method)) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">lastModified</span> <span class="operator">=</span> ha.getLastModified(request, mappedHandler.getHandler());</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">ServletWebRequest</span>(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„preHandle()</span></span><br><span class="line">            <span class="keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Actually invoke the handler.</span></span><br><span class="line">            <span class="comment">// ç”±å¤„ç†å™¨é€‚é…å™¨è°ƒç”¨å…·ä½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæœ€ç»ˆè·å¾—ModelAndViewå¯¹è±¡</span></span><br><span class="line">            mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            applyDefaultViewName(processedRequest, mv);</span><br><span class="line">            <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„postHandle()</span></span><br><span class="line">            mappedHandler.applyPostHandle(processedRequest, response, mv);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            dispatchException = ex;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Throwable err) &#123;</span><br><span class="line">            <span class="comment">// As of 4.3, we&#x27;re processing Errors thrown from handler methods as well,</span></span><br><span class="line">            <span class="comment">// making them available for @ExceptionHandler methods and other scenarios.</span></span><br><span class="line">            dispatchException = <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Handler dispatch failed&quot;</span>, err);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åç»­å¤„ç†ï¼šå¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span></span><br><span class="line">        processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        triggerAfterCompletion(processedRequest, response, mappedHandler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable err) &#123;</span><br><span class="line">        triggerAfterCompletion(processedRequest, response, mappedHandler,</span><br><span class="line">                               <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Handler processing failed&quot;</span>, err));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">            <span class="comment">// Instead of postHandle and afterCompletion</span></span><br><span class="line">            <span class="keyword">if</span> (mappedHandler != <span class="literal">null</span>) &#123;</span><br><span class="line">                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Clean up any resources used by a multipart request.</span></span><br><span class="line">            <span class="keyword">if</span> (multipartRequestParsed) &#123;</span><br><span class="line">                cleanupMultipart(processedRequest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="d-gt-processDispatchResult"><a href="#d-gt-processDispatchResult" class="headerlink" title="d&gt;processDispatchResult()"></a>d&gt;processDispatchResult()</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processDispatchResult</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="meta">@Nullable</span> ModelAndView mv,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@Nullable</span> Exception exception)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">errorView</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (exception != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (exception <span class="keyword">instanceof</span> ModelAndViewDefiningException) &#123;</span><br><span class="line">            logger.debug(<span class="string">&quot;ModelAndViewDefiningException encountered&quot;</span>, exception);</span><br><span class="line">            mv = ((ModelAndViewDefiningException) exception).getModelAndView();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">handler</span> <span class="operator">=</span> (mappedHandler != <span class="literal">null</span> ? mappedHandler.getHandler() : <span class="literal">null</span>);</span><br><span class="line">            mv = processHandlerException(request, response, handler, exception);</span><br><span class="line">            errorView = (mv != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Did the handler return a view to render?</span></span><br><span class="line">    <span class="keyword">if</span> (mv != <span class="literal">null</span> &amp;&amp; !mv.wasCleared()) &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span></span><br><span class="line">        render(mv, request, response);</span><br><span class="line">        <span class="keyword">if</span> (errorView) &#123;</span><br><span class="line">            WebUtils.clearErrorRequestAttributes(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (logger.isTraceEnabled()) &#123;</span><br><span class="line">            logger.trace(<span class="string">&quot;No view rendering, null ModelAndView returned.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</span><br><span class="line">        <span class="comment">// Concurrent handling started during a forward</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mappedHandler != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Exception (if any) is already handled..</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„afterCompletion()</span></span><br><span class="line">        mappedHandler.triggerAfterCompletion(request, response, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"><a href="#4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹" class="headerlink" title="4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"></a>4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹</h3><ol><li><p>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢«SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServletæ•è·ã€‚</p></li><li><p>DispatcherServletå¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œåˆ¤æ–­è¯·æ±‚URIå¯¹åº”çš„æ˜ å°„ï¼š</p></li></ol><p>a) ä¸å­˜åœ¨</p><p>i. å†åˆ¤æ–­æ˜¯å¦é…ç½®äº†mvc:default-servlet-handler</p><p>ii. å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º404é”™è¯¯</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img006.png" alt="image-20210709214911404"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img007.png" alt="image-20210709214947432"></p><p>iii. å¦‚æœæœ‰é…ç½®ï¼Œåˆ™è®¿é—®ç›®æ ‡èµ„æºï¼ˆä¸€èˆ¬ä¸ºé™æ€èµ„æºï¼Œå¦‚ï¼šJS,CSS,HTMLï¼‰ï¼Œæ‰¾ä¸åˆ°å®¢æˆ·ç«¯ä¹Ÿä¼šå±•ç¤º404é”™è¯¯</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img008.png" alt="image-20210709215255693"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/img009.png" alt="image-20210709215336097"></p><p>b) å­˜åœ¨åˆ™æ‰§è¡Œä¸‹é¢çš„æµç¨‹</p><ol start="3"><li><p>æ ¹æ®è¯¥URIï¼Œè°ƒç”¨HandlerMappingè·å¾—è¯¥Handleré…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬Handlerå¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥HandlerExecutionChainæ‰§è¡Œé“¾å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</p></li><li><p>DispatcherServlet æ ¹æ®è·å¾—çš„Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapterã€‚</p></li><li><p>å¦‚æœæˆåŠŸè·å¾—HandlerAdapterï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„preHandler(â€¦)æ–¹æ³•ã€æ­£å‘ã€‘</p></li><li><p>æå–Requestä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……Handlerå…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandlerï¼ˆController)æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ã€‚åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p></li></ol><p>a) HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</p><p>b) æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰</p><p>c) æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</p><p>d) æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResultæˆ–Errorä¸­</p><ol start="7"><li><p>Handleræ‰§è¡Œå®Œæˆåï¼Œå‘DispatcherServlet è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ã€‚</p></li><li><p>æ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„postHandle(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p></li><li><p>æ ¹æ®è¿”å›çš„ModelAndViewï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡ŒHandlerExceptionResolverè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ViewResolverè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®Modelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚</p></li><li><p>æ¸²æŸ“è§†å›¾å®Œæ¯•æ‰§è¡Œæ‹¦æˆªå™¨çš„afterCompletion(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p></li><li><p>å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Springå®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaWebã€æ—§ã€‘</title>
      <link href="//posts/6be9069f.html"/>
      <url>//posts/6be9069f.html</url>
      
        <content type="html"><![CDATA[<h2 id="Htmlé¡µé¢æ ‡ç­¾"><a href="#Htmlé¡µé¢æ ‡ç­¾" class="headerlink" title="Htmlé¡µé¢æ ‡ç­¾"></a>Htmlé¡µé¢æ ‡ç­¾</h2><p>æ³¨ï¼šJava æ–‡ä»¶æ˜¯éœ€è¦å…ˆç¼–è¯‘ï¼Œå†ç”± java è™šæ‹Ÿæœºè·‘èµ·æ¥ã€‚ä½† HTML æ–‡ä»¶å®ƒä¸éœ€è¦ç¼–è¯‘ï¼Œç›´æ¥ç”±æµè§ˆå™¨è¿›è¡Œè§£ææ‰§è¡Œã€‚</p><h3 id="htmlé¡µé¢æ ‡ç­¾çš„ä¹¦å†™è§„èŒƒ"><a href="#htmlé¡µé¢æ ‡ç­¾çš„ä¹¦å†™è§„èŒƒ" class="headerlink" title="htmlé¡µé¢æ ‡ç­¾çš„ä¹¦å†™è§„èŒƒ"></a>htmlé¡µé¢æ ‡ç­¾çš„ä¹¦å†™è§„èŒƒ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- DOCTYPEï¼šå‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ä»€ä¹ˆè§„èŒƒï¼ˆé»˜è®¤æ˜¯htmlï¼‰ --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¯­è¨€ zhä¸­æ–‡ enè‹±æ–‡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- headæ ‡ç­¾ä»£è¡¨ç½‘é¡µå¤´éƒ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- meta æè¿°æ€§æ ‡ç­¾ï¼Œè¡¨ç¤ºç”¨æ¥æè¿°ç½‘ç«™çš„ä¸€äº›ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸€èˆ¬ç”¨æ¥åšSEOï¼šæœç´¢æ®·å‹¤ä¼˜åŒ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;cess,javaweb&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ä¸€èµ·æ¥å­¦ä¹ java&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- ç½‘ç«™æ ‡é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- bodyä»£è¡¨ä¸»ä½“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">Hello Worldï¼</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- è¿™æ˜¯ html æ³¨é‡Šï¼Œå¯ä»¥åœ¨é¡µé¢å³é”®æŸ¥çœ‹æºä»£ç ä¸­çœ‹åˆ° --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="htmlæ ‡ç­¾ä»‹ç»"><a href="#htmlæ ‡ç­¾ä»‹ç»" class="headerlink" title="htmlæ ‡ç­¾ä»‹ç»"></a>htmlæ ‡ç­¾ä»‹ç»</h3><p>1.æ ‡ç­¾çš„æ ¼å¼:</p><p>â€‹&lt;æ ‡ç­¾å&gt;å°è£…çš„æ•°æ®</p><p>2.æ ‡ç­¾åå¤§å°å†™ä¸æ•æ„Ÿã€‚</p><p>3.æ ‡ç­¾æ‹¥æœ‰è‡ªå·±çš„å±æ€§ã€‚</p><p>â€‹ i. åˆ†ä¸ºåŸºæœ¬å±æ€§ï¼šbgcolor&#x3D;â€redâ€ å¯ä»¥ä¿®æ”¹ç®€å•çš„æ ·å¼æ•ˆæœ</p><p>â€‹ ii. äº‹ä»¶å±æ€§ï¼š onclick&#x3D;â€alert(â€˜ä½ å¥½ï¼â€™);â€ å¯ä»¥ç›´æ¥è®¾ç½®äº‹ä»¶å“åº”åçš„ä»£ç ã€‚</p><p>4.æ ‡ç­¾åˆåˆ†ä¸ºï¼Œå•æ ‡ç­¾å’ŒåŒæ ‡ç­¾ã€‚</p><p>â€‹i. å•æ ‡ç­¾æ ¼å¼ï¼š &lt;æ ‡ç­¾å &#x2F;&gt; br æ¢è¡Œ hr æ°´å¹³çº¿</p><p>â€‹ii. åŒæ ‡ç­¾æ ¼å¼:&lt;æ ‡ç­¾å&gt; â€¦å°è£…çš„æ•°æ®â€¦&lt;&#x2F;æ ‡ç­¾å&gt;**</p><h3 id="htmlæ ‡ç­¾è¯­æ³•"><a href="#htmlæ ‡ç­¾è¯­æ³•" class="headerlink" title="htmlæ ‡ç­¾è¯­æ³•"></a>htmlæ ‡ç­¾è¯­æ³•</h3><ol><li>æ ‡ç­¾ä¸èƒ½äº¤å‰åµŒå¥—</li><li>æ ‡ç­¾å¿…é¡»æ­£ç¡®å…³é—­</li><li>å±æ€§å¿…é¡»æœ‰å€¼ï¼Œå±æ€§å€¼å¿…é¡»åŠ å¼•å·</li><li>æ³¨é‡Šä¸èƒ½ åµŒå¥—</li><li>æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¿®å¤ä¸€äº›é”™è¯¯</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- â‘ æ ‡ç­¾ä¸èƒ½äº¤å‰åµŒå¥— --&gt;</span></span><br><span class="line">æ­£ç¡®ï¼š<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- â‘¡æ ‡ç­¾å¿…é¡»æ­£ç¡®å…³é—­ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- i.æœ‰æ–‡æœ¬å†…å®¹çš„æ ‡ç­¾ï¼š --&gt;</span></span><br><span class="line">æ­£ç¡®ï¼š<span class="tag">&lt;<span class="name">div</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="tag">&lt;<span class="name">div</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ii.æ²¡æœ‰æ–‡æœ¬å†…å®¹çš„æ ‡ç­¾ï¼š --&gt;</span></span><br><span class="line">æ­£ç¡®ï¼š<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- â‘¢å±æ€§å¿…é¡»æœ‰å€¼ï¼Œå±æ€§å€¼å¿…é¡»åŠ å¼•å· --&gt;</span></span><br><span class="line">æ­£ç¡®ï¼š<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;blue&quot;</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>&gt;</span>æ—©å®‰ï¼Œå°šç¡…è°·<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- â‘£æ³¨é‡Šä¸èƒ½åµŒå¥— --&gt;</span></span><br><span class="line">æ­£ç¡®ï¼š<span class="comment">&lt;!-- æ³¨é‡Šå†…å®¹ --&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">é”™è¯¯ï¼š<span class="comment">&lt;!-- &lt;!-- è¿™æ˜¯é”™è¯¯çš„ html æ³¨é‡Š --&gt;</span> --&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">1.html ä»£ç ä¸æ˜¯å¾ˆä¸¥è°¨ã€‚æœ‰æ—¶å€™æ ‡ç­¾ä¸é—­åˆï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨htmlæ ‡ç­¾"><a href="#å¸¸ç”¨htmlæ ‡ç­¾" class="headerlink" title="å¸¸ç”¨htmlæ ‡ç­¾"></a>å¸¸ç”¨htmlæ ‡ç­¾</h3><h4 id="fontæ ‡ç­¾"><a href="#fontæ ‡ç­¾" class="headerlink" title="fontæ ‡ç­¾"></a>fontæ ‡ç­¾</h4><p>éœ€æ±‚ 1ï¼šåœ¨ç½‘é¡µä¸Šæ˜¾ç¤º æˆ‘æ˜¯å­—ä½“æ ‡ç­¾ ï¼Œå¹¶ä¿®æ”¹å­—ä½“ä¸º å®‹ä½“ï¼Œé¢œè‰²ä¸ºçº¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">       <span class="comment">&lt;!--fontä¿®æ”¹å­—ä½“æ ‡ç­¾ ï¼Œ</span></span><br><span class="line"><span class="comment">        colorä¿®æ”¹å­—ä½“é¢œè‰² </span></span><br><span class="line"><span class="comment">        sizeä¿®æ”¹å­—ä½“å¤§å° 1-7ï¼Œ</span></span><br><span class="line"><span class="comment">        faceä¿®æ”¹å­—ä½“--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">face</span>=<span class="string">&quot;é»‘ä½“&quot;</span>&gt;</span>å­—ä½“æ ‡ç­¾æ¼”ç¤º<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h4><p>éœ€æ±‚ 1ï¼šæŠŠ   æ¢è¡Œæ ‡ç­¾ å˜æˆæ–‡æœ¬ è½¬æ¢æˆå­—ç¬¦æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</p><p>å¸¸è§çš„ç‰¹æ®Šå­—ç¬¦è¡¨</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211112152919632.png" alt="image-20211112152919632">&gt;-</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &amp;lt; ç”¨äºè½¬ä¹‰ &lt;  less than</span></span><br><span class="line"><span class="comment">        &amp;gt; ç”¨äºè½¬ä¹‰ &gt;  greater than</span></span><br><span class="line"><span class="comment">        &amp;nbsp; ç”¨äºè½¬ä¹‰ ç©ºæ ¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"> æˆ‘æ˜¯ <span class="symbol">&amp;lt;</span>br<span class="symbol">&amp;gt;</span>æ ‡ç­¾<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"> Monkey<span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span> King</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ ‡é¢˜æ ‡ç­¾"><a href="#æ ‡é¢˜æ ‡ç­¾" class="headerlink" title="æ ‡é¢˜æ ‡ç­¾"></a>æ ‡é¢˜æ ‡ç­¾</h4><p>æ ‡é¢˜æ ‡ç­¾æ˜¯ h1 åˆ° h6</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æ ‡é¢˜æ ‡ç­¾ h1 - h6 h1æœ€å¤§ï¼Œh6æœ€å°</span></span><br><span class="line"><span class="comment">        é»˜è®¤å·¦å¯¹é½</span></span><br><span class="line"><span class="comment">           æ ‡é¢˜å±æ€§ align</span></span><br><span class="line"><span class="comment">            left å·¦å¯¹é½</span></span><br><span class="line"><span class="comment">            center å±…ä¸­</span></span><br><span class="line"><span class="comment">            right å³å¯¹é½</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h6</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¶…é“¾æ¥ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"><a href="#è¶…é“¾æ¥ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰" class="headerlink" title="è¶…é“¾æ¥ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"></a>è¶…é“¾æ¥ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        a æ˜¯è¶…é“¾æ¥æ ‡ç­¾</span></span><br><span class="line"><span class="comment">        hrefå±æ€§ è¡¨ç¤ºè·³è½¬çš„è¿æ¥</span></span><br><span class="line"><span class="comment">        targetå±æ€§è®¾ç½®å“ªä¸ªç›®æ ‡è¿›è¡Œè·³è½¬</span></span><br><span class="line"><span class="comment">        _self è¡¨ç¤ºå½“å‰é¡µé¢(é»˜è®¤å€¼)</span></span><br><span class="line"><span class="comment">        _blank è¡¨ç¤ºæ‰“å¼€æ–°é¡µé¢æ¥è¿›è¡Œè·³è½¬</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åˆ—è¡¨æ ‡ç­¾"><a href="#åˆ—è¡¨æ ‡ç­¾" class="headerlink" title="åˆ—è¡¨æ ‡ç­¾"></a>åˆ—è¡¨æ ‡ç­¾</h4><p><strong>åˆ†ä¸ºæ— åºåˆ—è¡¨å’Œæœ‰åºåˆ—è¡¨</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ— åºåˆ—è¡¨ æ ‡ç­¾ ul</span></span><br><span class="line"><span class="comment">        liæ˜¯åˆ—è¡¨é¡¹</span></span><br><span class="line"><span class="comment">    æœ‰åºåˆ—è¡¨ æ ‡ç­¾ ol --ã€‹order list</span></span><br><span class="line"><span class="comment">    å±æ€§ typeå¯ä»¥ä¿®æ”¹åˆ—è¡¨é¡¹å‰é¢çš„ç¬¦å·--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">type</span>=<span class="string">&quot;none&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>åˆ˜å¾·å<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>éƒ­å¯ŒåŸ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å¼ å­¦å‹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>é»æ˜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="imgæ ‡ç­¾"><a href="#imgæ ‡ç­¾" class="headerlink" title="imgæ ‡ç­¾"></a>imgæ ‡ç­¾</h4><p><strong>img æ ‡ç­¾å¯ä»¥åœ¨ html é¡µé¢ä¸Šæ˜¾ç¤ºå›¾ç‰‡</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚1ï¼šä½¿ç”¨imgæ ‡ç­¾æ˜¾ç¤ºä¸€å¼ ç¾å¥³çš„ç…§ç‰‡ã€‚å¹¶ä¿®æ”¹å®½é«˜ï¼Œå’Œè¾¹æ¡†å±æ€§</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       imgæ ‡ç­¾æ˜¯å›¾ç‰‡æ ‡ç­¾,ç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line"><span class="comment">           srcå±æ€§å¯ä»¥è®¾ç½®å›¾ç‰‡çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">           widthå±æ€§è®¾ç½®å›¾ç‰‡çš„å®½åº¦</span></span><br><span class="line"><span class="comment">           heightå±æ€§è®¾ç½®å›¾ç‰‡çš„é«˜åº¦</span></span><br><span class="line"><span class="comment">           borderå±æ€§è®¾ç½®å›¾ç‰‡è¾¹æ¡†å¤§å°</span></span><br><span class="line"><span class="comment">           altå±æ€§è®¾ç½®å½“æŒ‡å®šè·¯å¾„æ‰¾ä¸åˆ°å›¾ç‰‡æ—¶,ç”¨æ¥ä»£æ›¿æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       åœ¨JavaSEä¸­è·¯å¾„ä¹Ÿåˆ†ä¸ºç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„.</span></span><br><span class="line"><span class="comment">           ç›¸å¯¹è·¯å¾„:ä»å·¥ç¨‹åå¼€å§‹ç®—</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           ç»å¯¹è·¯å¾„:ç›˜ç¬¦:/ç›®å½•/æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       åœ¨webä¸­è·¯å¾„åˆ†ä¸ºç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ä¸¤ç§</span></span><br><span class="line"><span class="comment">           ç›¸å¯¹è·¯å¾„:</span></span><br><span class="line"><span class="comment">               .           è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span></span><br><span class="line"><span class="comment">               ..          è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line"><span class="comment">               æ–‡ä»¶å      è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶,ç›¸å½“äº ./æ–‡ä»¶å            ./ å¯ä»¥çœç•¥</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           ç»å¯¹è·¯å¾„:</span></span><br><span class="line"><span class="comment">               æ­£ç¡®æ ¼å¼æ˜¯:  http://ip:port/å·¥ç¨‹å/èµ„æºè·¯å¾„</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">               é”™è¯¯æ ¼å¼æ˜¯:  ç›˜ç¬¦:/ç›®å½•/æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../imgs/3.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;æ²¡æœ‰è¯¥å›¾ç‰‡&quot;</span> <span class="attr">border</span>=<span class="string">&quot;20px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;268&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../imgs/10.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;æ²¡æœ‰è¯¥å›¾ç‰‡&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;268&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../imgs/50.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;æ²¡æœ‰è¯¥å›¾ç‰‡&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;268&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../imgs/3.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;æ²¡æœ‰è¯¥å›¾ç‰‡&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;268&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;13.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;æ²¡æœ‰è¯¥å›¾ç‰‡&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;268&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¡¨æ ¼æ ‡ç­¾ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#è¡¨æ ¼æ ‡ç­¾ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="è¡¨æ ¼æ ‡ç­¾ï¼ˆï¼ï¼ï¼ï¼‰"></a>è¡¨æ ¼æ ‡ç­¾ï¼ˆï¼ï¼ï¼ï¼‰</h4><p>éœ€æ±‚ 1ï¼šåšä¸€ä¸ª å¸¦è¡¨å¤´çš„ ï¼Œä¸‰è¡Œï¼Œä¸‰åˆ—çš„è¡¨æ ¼ï¼Œå¹¶æ˜¾ç¤ºè¾¹æ¡†</p><p>éœ€æ±‚ 2ï¼šä¿®æ”¹è¡¨æ ¼çš„å®½åº¦ï¼Œé«˜åº¦ï¼Œè¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼Œå•å…ƒæ ¼é—´è·ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">éœ€æ±‚1ï¼šåšä¸€ä¸ª å¸¦è¡¨å¤´çš„ ï¼Œä¸‰è¡Œï¼Œä¸‰åˆ—çš„è¡¨æ ¼ï¼Œå¹¶æ˜¾ç¤ºè¾¹æ¡†</span></span><br><span class="line"><span class="comment">éœ€æ±‚2ï¼šä¿®æ”¹è¡¨æ ¼çš„å®½åº¦ï¼Œé«˜åº¦ï¼Œè¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼Œå•å…ƒæ ¼é—´è·ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">table æ ‡ç­¾æ˜¯è¡¨æ ¼æ ‡ç­¾</span></span><br><span class="line"><span class="comment">border è®¾ç½®è¡¨æ ¼æ ‡ç­¾</span></span><br><span class="line"><span class="comment">width è®¾ç½®è¡¨æ ¼å®½åº¦</span></span><br><span class="line"><span class="comment">height è®¾ç½®è¡¨æ ¼é«˜åº¦</span></span><br><span class="line"><span class="comment">align è®¾ç½®è¡¨æ ¼ç›¸å¯¹äºé¡µé¢çš„å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="comment">cellspacing è®¾ç½®å•å…ƒæ ¼é—´è·</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">tr æ˜¯è¡Œæ ‡ç­¾</span></span><br><span class="line"><span class="comment">thæ˜¯è¡¨å¤´æ ‡ç­¾</span></span><br><span class="line"><span class="comment">td  æ˜¯å•å…ƒæ ¼æ ‡ç­¾</span></span><br><span class="line"><span class="comment">align è®¾ç½®å•å…ƒæ ¼æ–‡æœ¬å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="comment">bæ˜¯åŠ ç²—æ ‡ç­¾</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è·¨è¡Œè·¨åˆ—è¡¨æ ¼"><a href="#è·¨è¡Œè·¨åˆ—è¡¨æ ¼" class="headerlink" title="è·¨è¡Œè·¨åˆ—è¡¨æ ¼"></a>è·¨è¡Œè·¨åˆ—è¡¨æ ¼</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚ 1ï¼šæ–°å»ºä¸€ä¸ªäº”è¡Œï¼Œäº”åˆ—çš„è¡¨æ ¼ï¼Œç¬¬ä¸€è¡Œï¼Œç¬¬ä¸€åˆ—çš„å•å…ƒæ ¼è¦è·¨ä¸¤åˆ—ï¼Œç¬¬äºŒè¡Œç¬¬ä¸€åˆ—çš„å•å…ƒæ ¼è·¨ä¸¤è¡Œï¼Œç¬¬å››è¡Œç¬¬å››</span></span><br><span class="line"><span class="comment">åˆ—çš„å•å…ƒæ ¼è·¨ä¸¤è¡Œä¸¤åˆ—ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   colspan å±æ€§è®¾ç½®è·¨åˆ—</span></span><br><span class="line"><span class="comment">    rowspan å±æ€§è®¾ç½®è·¨è¡Œ</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>4.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>4.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>4.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>4.4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="iFrameæ¡†æ¶æ ‡ç­¾ï¼ˆå†…åµŒçª—å£ï¼‰"><a href="#iFrameæ¡†æ¶æ ‡ç­¾ï¼ˆå†…åµŒçª—å£ï¼‰" class="headerlink" title="iFrameæ¡†æ¶æ ‡ç­¾ï¼ˆå†…åµŒçª—å£ï¼‰"></a>iFrameæ¡†æ¶æ ‡ç­¾ï¼ˆå†…åµŒçª—å£ï¼‰</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--iframe æ ‡ç­¾å¯ä»¥åœ¨é¡µé¢ä¸Šå¼€è¾Ÿä¸€ä¸ªå°åŒºåŸŸæ˜¾ç¤ºä¸€ä¸ªå•ç‹¬çš„é¡µé¢</span></span><br><span class="line"><span class="comment">iframe å’Œ a æ ‡ç­¾ç»„åˆä½¿ç”¨çš„æ­¥éª¤:</span></span><br><span class="line"><span class="comment">1 åœ¨ iframe æ ‡ç­¾ä¸­ä½¿ç”¨ name å±æ€§å®šä¹‰ä¸€ä¸ªåç§°</span></span><br><span class="line"><span class="comment">2 åœ¨ a æ ‡ç­¾çš„ target å±æ€§ä¸Šè®¾ç½® iframe çš„ name çš„å±æ€§å€¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªé¡µé¢ä¸Šçš„å•ç‹¬ä¸€ä¸ªåŒºåŸŸé¡µé¢<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;æ ‡é¢˜æ ‡ç­¾.html&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">name</span>=<span class="string">&quot;abc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;imgæ ‡ç­¾.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>imgæ ‡ç­¾.html<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;åˆ—è¡¨æ ‡ç­¾.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>åˆ—è¡¨æ ‡ç­¾.html<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;è¡¨æ ¼æ ‡ç­¾.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>è¡¨æ ¼æ ‡ç­¾.html<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¡¨å•æ ‡ç­¾-ï¼ˆ-é‡ç‚¹ï¼ï¼ï¼ï¼‰"><a href="#è¡¨å•æ ‡ç­¾-ï¼ˆ-é‡ç‚¹ï¼ï¼ï¼ï¼‰" class="headerlink" title="è¡¨å•æ ‡ç­¾ ï¼ˆ é‡ç‚¹ï¼ï¼ï¼ï¼‰"></a>è¡¨å•æ ‡ç­¾ ï¼ˆ é‡ç‚¹ï¼ï¼ï¼ï¼‰</h4><p>ä»€ä¹ˆæ˜¯è¡¨å•?</p><p>è¡¨å•å°±æ˜¯ html é¡µé¢ä¸­,ç”¨æ¥æ”¶é›†ç”¨æˆ·ä¿¡æ¯çš„æ‰€æœ‰å…ƒç´ é›†åˆ.ç„¶åæŠŠè¿™äº›ä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">éœ€æ±‚ 1:åˆ›å»ºä¸€ä¸ªä¸ªäººä¿¡æ¯æ³¨å†Œçš„è¡¨å•ç•Œé¢ã€‚åŒ…å«ç”¨æˆ·åï¼Œå¯†ç ï¼Œç¡®è®¤å¯†ç ã€‚æ€§åˆ«ï¼ˆå•é€‰ï¼‰ï¼Œå…´è¶£çˆ±å¥½ï¼ˆå¤šé€‰ï¼‰ï¼Œå›½ç±ï¼ˆä¸‹</span></span><br><span class="line"><span class="comment">æ‹‰åˆ—è¡¨ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">éšè—åŸŸï¼Œè‡ªæˆ‘è¯„ä»·ï¼ˆå¤šè¡Œæ–‡æœ¬åŸŸï¼‰ã€‚é‡ç½®ï¼Œæäº¤ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        formæ ‡ç­¾å°±æ˜¯è¡¨å•</span></span><br><span class="line"><span class="comment">            input type=text     æ˜¯æ–‡ä»¶è¾“å…¥æ¡†  valueè®¾ç½®é»˜è®¤æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line"><span class="comment">            input type=password æ˜¯å¯†ç è¾“å…¥æ¡†  valueè®¾ç½®é»˜è®¤æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line"><span class="comment">            input type=radio    æ˜¯å•é€‰æ¡†    nameå±æ€§å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†ç»„   checked=&quot;checked&quot;è¡¨ç¤ºé»˜è®¤é€‰ä¸­</span></span><br><span class="line"><span class="comment">            input type=checkbox æ˜¯å¤é€‰æ¡†   checked=&quot;checked&quot;è¡¨ç¤ºé»˜è®¤é€‰ä¸­</span></span><br><span class="line"><span class="comment">            input type=reset    æ˜¯é‡ç½®æŒ‰é’®      valueå±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment">            input type=submit   æ˜¯æäº¤æŒ‰é’®      valueå±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment">            input type=button   æ˜¯æŒ‰é’®          valueå±æ€§ä¿®æ”¹æŒ‰é’®ä¸Šçš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment">            input type=file     æ˜¯æ–‡ä»¶ä¸Šä¼ åŸŸ</span></span><br><span class="line"><span class="comment">            input type=hidden   æ˜¯éšè—åŸŸ    å½“æˆ‘ä»¬è¦å‘é€æŸäº›ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯ï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ï¼Œå°±å¯ä»¥ä½¿ç”¨éšè—åŸŸï¼ˆæäº¤çš„æ—¶å€™åŒæ—¶å‘é€ç»™æœåŠ¡å™¨ï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            select æ ‡ç­¾æ˜¯ä¸‹æ‹‰åˆ—è¡¨æ¡†</span></span><br><span class="line"><span class="comment">            option æ ‡ç­¾æ˜¯ä¸‹æ‹‰åˆ—è¡¨æ¡†ä¸­çš„é€‰é¡¹ selected=&quot;selected&quot;è®¾ç½®é»˜è®¤é€‰ä¸­</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            textarea è¡¨ç¤ºå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡† ï¼ˆèµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹æ˜¯é»˜è®¤å€¼ï¼‰</span></span><br><span class="line"><span class="comment">                rows å±æ€§è®¾ç½®å¯ä»¥æ˜¾ç¤ºå‡ è¡Œçš„é«˜åº¦</span></span><br><span class="line"><span class="comment">                cols å±æ€§è®¾ç½®æ¯è¡Œå¯ä»¥æ˜¾ç¤ºå‡ ä¸ªå­—ç¬¦å®½åº¦</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        ç¡®è®¤å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        æ€§åˆ«ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>/&gt;</span>ç”·<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>/&gt;</span>å¥³<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>/&gt;</span>Java<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>/&gt;</span>C++</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span>Python<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å›½ç±ï¼š<span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>-è¯·é€‰æ‹©å›½å›½ç±-<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span>&gt;</span>ä¸­å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>ç¾å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>å°æ—¥æœ¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        è‡ªæˆ‘è¯„ä»·ï¼š<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;10&quot;</span>&gt;</span>æˆ‘æ˜¯é»˜è®¤å€¼<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¢å¤é»˜è®¤è®¾ç½®&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¡®è®¤å¹¶æäº¤&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span> = <span class="string">&quot;abc&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jlg&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¡¨å•æ ¼å¼åŒ–"><a href="#è¡¨å•æ ¼å¼åŒ–" class="headerlink" title="è¡¨å•æ ¼å¼åŒ–"></a>è¡¨å•æ ¼å¼åŒ–</h4><p>å°†ä¸Šä¸€ä¸ªè¡¨å•æ”¾åˆ°tableè¡¨é‡Œé¢ï¼Œè¿™æ ·çš„æ˜¾ç¤ºæ•ˆæœæ›´å¥½</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç¡®è®¤å¯†ç ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    .....</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¡¨å•æäº¤çš„ç»†èŠ‚"><a href="#è¡¨å•æäº¤çš„ç»†èŠ‚" class="headerlink" title="è¡¨å•æäº¤çš„ç»†èŠ‚"></a>è¡¨å•æäº¤çš„ç»†èŠ‚</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        formæ ‡ç­¾æ˜¯è¡¨å•æ ‡ç­¾</span></span><br><span class="line"><span class="comment">            actionå±æ€§è®¾ç½®æäº¤çš„æœåŠ¡å™¨åœ°å€</span></span><br><span class="line"><span class="comment">            methodå±æ€§è®¾ç½®æäº¤çš„æ–¹å¼GET(é»˜è®¤å€¼)æˆ–POST</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        è¡¨å•æäº¤çš„æ—¶å€™ï¼Œæ•°æ®æ²¡æœ‰å‘é€ç»™æœåŠ¡å™¨çš„ä¸‰ç§æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment">            1ã€è¡¨å•é¡¹æ²¡æœ‰nameå±æ€§å€¼</span></span><br><span class="line"><span class="comment">            2ã€å•é€‰ã€å¤é€‰ï¼ˆä¸‹æ‹‰åˆ—è¡¨ä¸­çš„optionæ ‡ç­¾ï¼‰éƒ½éœ€è¦æ·»åŠ valueå±æ€§ï¼Œä»¥ä¾¿å‘é€ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment">            3ã€è¡¨å•é¡¹ä¸åœ¨æäº¤çš„formæ ‡ç­¾ä¸­</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        GETè¯·æ±‚çš„ç‰¹ç‚¹æ˜¯ï¼š</span></span><br><span class="line"><span class="comment">            1ã€æµè§ˆå™¨åœ°å€æ ä¸­çš„åœ°å€æ˜¯ï¼šactionå±æ€§[+?+è¯·æ±‚å‚æ•°]</span></span><br><span class="line"><span class="comment">                è¯·æ±‚å‚æ•°çš„æ ¼å¼æ˜¯ï¼šname=value&amp;name=value</span></span><br><span class="line"><span class="comment">            2ã€ä¸å®‰å…¨</span></span><br><span class="line"><span class="comment">            3ã€å®ƒæœ‰æ•°æ®é•¿åº¦çš„é™åˆ¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        POSTè¯·æ±‚çš„ç‰¹ç‚¹æ˜¯ï¼š</span></span><br><span class="line"><span class="comment">            1ã€æµè§ˆå™¨åœ°å€æ ä¸­åªæœ‰actionå±æ€§å€¼</span></span><br><span class="line"><span class="comment">            2ã€ç›¸å¯¹äºGETè¯·æ±‚è¦å®‰å…¨</span></span><br><span class="line"><span class="comment">            3ã€ç†è®ºä¸Šæ²¡æœ‰æ•°æ®é•¿åº¦çš„é™åˆ¶</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">value</span>=<span class="string">&quot;boy&quot;</span>/&gt;</span>ç”·</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;girl&quot;</span>/&gt;</span>å¥³<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>/&gt;</span>Java</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span>/&gt;</span>C++</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;python&quot;</span> /&gt;</span>Python<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›½ç±ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;country&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;none&quot;</span>&gt;</span>-è¯·é€‰æ‹©å›½å›½ç±-<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cn&quot;</span>&gt;</span>ä¸­å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;usa&quot;</span>&gt;</span>ç¾å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;jp&quot;</span>&gt;</span>å°æ—¥æœ¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>è‡ªæˆ‘è¯„ä»·ï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;10&quot;</span> <span class="attr">name</span>=<span class="string">&quot;self&quot;</span>&gt;</span>æˆ‘æ˜¯é»˜è®¤å€¼<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¢å¤é»˜è®¤è®¾ç½®&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¡®è®¤å¹¶æäº¤&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span> = <span class="string">&quot;abc&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jlg&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–æ ‡ç­¾"><a href="#å…¶ä»–æ ‡ç­¾" class="headerlink" title="å…¶ä»–æ ‡ç­¾"></a>å…¶ä»–æ ‡ç­¾</h4><p>æ¼”ç¤º div span pæ ‡ç­¾çš„ä½¿ç”¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚ 1ï¼šdivã€spanã€p æ ‡ç­¾çš„æ¼”ç¤º</span></span><br><span class="line"><span class="comment">div æ ‡ç­¾ é»˜è®¤ç‹¬å ä¸€è¡Œ</span></span><br><span class="line"><span class="comment">span æ ‡ç­¾ å®ƒçš„é•¿åº¦æ˜¯å°è£…æ•°æ®çš„é•¿åº¦ </span></span><br><span class="line"><span class="comment">è¿™é‡Œspanæ ‡ç­¾1å’Œspanæ ‡ç­¾2ç›´æ¥æœ‰ä¸ªå°ç©ºæ ¼æ˜¯å› ä¸ºè¿™ä¿©æ ‡ç­¾ä¹‹é—´æœ‰å¾ˆå¤šç©ºæ ¼ï¼Œæµè§ˆå™¨è‡ªåŠ¨ä¼˜åŒ–æˆä¸€ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p æ®µè½æ ‡ç­¾ é»˜è®¤ä¼šåœ¨æ®µè½çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹å„ç©ºå‡ºä¸€è¡Œæ¥ï¼ˆå¦‚æœå·²æœ‰å°±ä¸å†ç©ºï¼‰</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>pæ ‡ç­¾1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>pæ ‡ç­¾2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="CSSæŠ€æœ¯"><a href="#CSSæŠ€æœ¯" class="headerlink" title="CSSæŠ€æœ¯"></a>CSSæŠ€æœ¯</h2><h3 id="ä»€ä¹ˆæ˜¯CSS"><a href="#ä»€ä¹ˆæ˜¯CSS" class="headerlink" title="ä»€ä¹ˆæ˜¯CSS"></a>ä»€ä¹ˆæ˜¯CSS</h3><p>CSS æ˜¯ã€Œå±‚å æ ·å¼è¡¨å•ã€ã€‚æ˜¯ç”¨äº(å¢å¼º)æ§åˆ¶ç½‘é¡µæ ·å¼å¹¶å…è®¸å°†æ ·å¼ä¿¡æ¯ä¸ç½‘é¡µå†…å®¹åˆ†ç¦»çš„ä¸€ç§æ ‡è®°æ€§è¯­è¨€ã€‚</p><h3 id="CSSè¯­æ³•è§„åˆ™"><a href="#CSSè¯­æ³•è§„åˆ™" class="headerlink" title="CSSè¯­æ³•è§„åˆ™"></a>CSSè¯­æ³•è§„åˆ™</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211112210748108.png" alt="image-20211112210748108"></p><p>é€‰æ‹©å™¨ï¼šæµè§ˆå™¨æ ¹æ®â€œé€‰æ‹©å™¨â€å†³å®šå— CSS æ ·å¼å½±å“çš„ HTML å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ã€‚</p><p>å±æ€§ (property) æ˜¯ä½ è¦æ”¹å˜çš„æ ·å¼åï¼Œå¹¶ä¸”æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚å±æ€§å’Œå€¼è¢«å†’å·åˆ†å¼€ï¼Œå¹¶ ç”±èŠ±æ‹¬å·åŒ…å›´ï¼Œè¿™æ ·å°±ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ ·å¼å£°æ˜ï¼ˆdeclarationï¼‰ï¼Œä¾‹å¦‚ï¼šp {color: blue} å¤šä¸ªå£°æ˜ï¼šå¦‚æœè¦å®šä¹‰ä¸æ­¢ä¸€ä¸ªå£°æ˜ï¼Œåˆ™éœ€è¦ç”¨åˆ†å·å°†æ¯ä¸ªå£°æ˜åˆ†å¼€ã€‚è™½ç„¶æœ€åä¸€æ¡å£°æ˜çš„ æœ€åå¯ä»¥ä¸åŠ åˆ†å·(ä½†å°½é‡åœ¨æ¯æ¡å£°æ˜çš„æœ«å°¾éƒ½åŠ ä¸Šåˆ†å·)</p><p>ä¾‹å¦‚ï¼š p{</p><p>color:red;</p><p>font-size:30px;</p><p>}</p><p><strong>æ³¨ï¼šä¸€èˆ¬æ¯è¡Œåªæè¿°ä¸€ä¸ªå±æ€§ CSS æ³¨é‡Šï¼š<code>/*æ³¨é‡Šå†…å®¹*/</code></strong></p><h3 id="CSSå’Œhtmlçš„ç»“åˆæ–¹å¼"><a href="#CSSå’Œhtmlçš„ç»“åˆæ–¹å¼" class="headerlink" title="CSSå’Œhtmlçš„ç»“åˆæ–¹å¼"></a>CSSå’Œhtmlçš„ç»“åˆæ–¹å¼</h3><h4 id="ç¬¬ä¸€ç§ï¼š"><a href="#ç¬¬ä¸€ç§ï¼š" class="headerlink" title="ç¬¬ä¸€ç§ï¼š"></a>ç¬¬ä¸€ç§ï¼š</h4><p><strong>åœ¨æ ‡ç­¾çš„ style å±æ€§ä¸Šè®¾ç½®â€key:value value;â€ï¼Œä¿®æ”¹æ ‡ç­¾æ ·å¼ã€‚</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚ 1ï¼šåˆ†åˆ«å®šä¹‰ä¸¤ä¸ª divã€span æ ‡ç­¾ï¼Œåˆ†åˆ«ä¿®æ”¹æ¯ä¸ª div æ ‡ç­¾çš„æ ·å¼ä¸ºï¼šè¾¹æ¡† 1 ä¸ªåƒç´ ï¼Œå®çº¿ï¼Œçº¢è‰²ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span>&gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span>&gt;</span>divæ ‡ç­¾2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span>&gt;</span>spanæ ‡ç­¾1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid red;&quot;</span>&gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">é—®é¢˜ï¼šè¿™ç§æ–¹å¼çš„ç¼ºç‚¹ï¼Ÿ</span><br><span class="line"> 1.å¦‚æœæ ‡ç­¾å¤šäº†ã€‚æ ·å¼å¤šäº†ã€‚ä»£ç é‡éå¸¸åºå¤§ã€‚</span><br><span class="line">2.å¯è¯»æ€§éå¸¸å·®ã€‚</span><br><span class="line"> 3.Css ä»£ç æ²¡ä»€ä¹ˆå¤ç”¨æ€§å¯è¨€</span><br></pre></td></tr></table></figure><p><strong>å¿«æ·é”®ï¼šctrl+rå¿«æ·æ›¿æ¢</strong></p><h4 id="ç¬¬äºŒç§ï¼š"><a href="#ç¬¬äºŒç§ï¼š" class="headerlink" title="ç¬¬äºŒç§ï¼š"></a>ç¬¬äºŒç§ï¼š</h4><p>**åœ¨ head æ ‡ç­¾ä¸­ï¼Œä½¿ç”¨ style æ ‡ç­¾æ¥å®šä¹‰å„ç§è‡ªå·±éœ€è¦çš„ css æ ·å¼ã€‚</p><p>æ ¼å¼å¦‚ä¸‹ï¼š xxx {</p><p>â€‹Key : value value;</p><p>â€‹ }**</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    styleæ ‡ç­¾ä¸“é—¨å®šä¹‰ cssæ ·å¼ä»£ç --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*è¿™æ˜¯cssçš„æ³¨é‡Š*/</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: red solid <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: red solid <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span>divæ ‡ç­¾2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> &gt;</span>spanæ ‡ç­¾1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> &gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>é—®é¢˜ï¼šè¿™ç§æ–¹å¼çš„ç¼ºç‚¹ã€‚</strong></p><p><strong>1.åªèƒ½åœ¨åŒä¸€é¡µé¢å†…å¤ç”¨ä»£ç ï¼Œä¸èƒ½åœ¨å¤šä¸ªé¡µé¢ä¸­å¤ç”¨ css ä»£ç ã€‚</strong></p><p><strong>2.ç»´æŠ¤èµ·æ¥ä¸æ–¹ä¾¿ï¼Œå®é™…çš„é¡¹ç›®ä¸­ä¼šæœ‰æˆåƒä¸Šä¸‡çš„é¡µé¢ï¼Œè¦åˆ°æ¯ä¸ªé¡µé¢ä¸­å»ä¿®æ”¹ã€‚å·¥ä½œé‡å¤ªå¤§äº†ã€‚</strong></p><h4 id="ç¬¬ä¸‰ç§ï¼š"><a href="#ç¬¬ä¸‰ç§ï¼š" class="headerlink" title="ç¬¬ä¸‰ç§ï¼š"></a>ç¬¬ä¸‰ç§ï¼š</h4><p><strong>æŠŠ css æ ·å¼å†™æˆä¸€ä¸ªå•ç‹¬çš„ css æ–‡ä»¶ï¼Œå†é€šè¿‡ link æ ‡ç­¾å¼•å…¥å³å¯å¤ç”¨ã€‚ ä½¿ç”¨ html çš„</strong></p><p><strong><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;cssæ–‡ä»¶è·¯å¾„&quot; /&gt;</code></strong></p><p><strong>æ ‡ç­¾ å¯¼å…¥ css æ · å¼æ–‡ä»¶ã€‚</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*è¿™æ˜¯cssçš„æ³¨é‡Š*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: red solid <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: red solid <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;cssfor03.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span>divæ ‡ç­¾2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> &gt;</span>spanæ ‡ç­¾1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> &gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h3><h4 id="æ ‡ç­¾åé€‰æ‹©å™¨"><a href="#æ ‡ç­¾åé€‰æ‹©å™¨" class="headerlink" title="æ ‡ç­¾åé€‰æ‹©å™¨"></a>æ ‡ç­¾åé€‰æ‹©å™¨</h4><p>æ ‡ç­¾åé€‰æ‹©å™¨çš„æ ¼å¼æ˜¯ï¼š</p><p>æ ‡ç­¾å{</p><p>â€‹å±æ€§ï¼šå€¼;</p><p>â€‹ }</p><p>æ ‡ç­¾åé€‰æ‹©å™¨ï¼Œå¯ä»¥å†³å®šå“ªäº›æ ‡ç­¾è¢«åŠ¨çš„ä½¿ç”¨è¿™ä¸ªæ ·å¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: yellow solid <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blue;<span class="comment">/*å­—ä½“é¢œè‰²*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;<span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: blue dashed <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: yellow;<span class="comment">/*å­—ä½“é¢œè‰²*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- éœ€æ±‚ 1ï¼šåœ¨æ‰€æœ‰ div æ ‡ç­¾ä¸Šä¿®æ”¹å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å° 30 ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º 1 åƒç´ é»„è‰²å®çº¿ã€‚</span></span><br><span class="line"><span class="comment">å¹¶ä¸”ä¿®æ”¹æ‰€æœ‰ span æ ‡ç­¾çš„å­—ä½“é¢œè‰²ä¸ºé»„è‰²ï¼Œå­—ä½“å¤§å° 20 ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º 5 åƒç´ è“è‰²è™šçº¿ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="idé€‰æ‹©å™¨"><a href="#idé€‰æ‹©å™¨" class="headerlink" title="idé€‰æ‹©å™¨"></a>idé€‰æ‹©å™¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">id é€‰æ‹©å™¨çš„æ ¼å¼æ˜¯ï¼š</span><br><span class="line">#id å±æ€§å€¼&#123;</span><br><span class="line">å±æ€§ï¼šå€¼;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">id é€‰æ‹©å™¨ï¼Œå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡ id å±æ€§é€‰æ‹©æ€§çš„å»ä½¿ç”¨è¿™ä¸ªæ ·</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>idé€‰æ‹©å™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#id001</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: yellow <span class="number">1px</span> dotted;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#id002</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: blue <span class="number">5px</span> dotted;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--éœ€æ±‚ 1ï¼šåˆ†åˆ«å®šä¹‰ä¸¤ä¸ª div æ ‡ç­¾ï¼Œ</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ä¸ª div æ ‡ç­¾å®šä¹‰ id ä¸º id001 ï¼Œç„¶åæ ¹æ® id å±æ€§å®šä¹‰ css æ ·å¼ä¿®æ”¹å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œ</span></span><br><span class="line"><span class="comment">å­—ä½“å¤§å° 30 ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º 1 åƒç´ é»„è‰²å®çº¿ã€‚</span></span><br><span class="line"><span class="comment">ç¬¬äºŒä¸ª div æ ‡ç­¾å®šä¹‰ id ä¸º id002 ï¼Œç„¶åæ ¹æ® id å±æ€§å®šä¹‰ css æ ·å¼ ä¿®æ”¹çš„å­—ä½“é¢œè‰²ä¸ºçº¢è‰²ï¼Œå­—ä½“å¤§å° 20 ä¸ªåƒ</span></span><br><span class="line"><span class="comment">ç´ ã€‚è¾¹æ¡†ä¸º 5--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;id001&quot;</span>&gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;id002&quot;</span>&gt;</span>divæ ‡ç­¾1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="classé€‰æ‹©å™¨ï¼ˆç±»é€‰æ‹©å™¨ï¼‰"><a href="#classé€‰æ‹©å™¨ï¼ˆç±»é€‰æ‹©å™¨ï¼‰" class="headerlink" title="classé€‰æ‹©å™¨ï¼ˆç±»é€‰æ‹©å™¨ï¼‰"></a>classé€‰æ‹©å™¨ï¼ˆç±»é€‰æ‹©å™¨ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class ç±»å‹é€‰æ‹©å™¨çš„æ ¼å¼æ˜¯ï¼š</span><br><span class="line">.class å±æ€§å€¼&#123;</span><br><span class="line">å±æ€§ï¼šå€¼;</span><br><span class="line">&#125;</span><br><span class="line">class ç±»å‹é€‰æ‹©å™¨ï¼Œå¯ä»¥é€šè¿‡ class å±æ€§æœ‰æ•ˆçš„é€‰æ‹©æ€§åœ°å»ä½¿ç”¨è¿™ä¸ªæ ·å¼ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>classç±»å‹é€‰æ‹©å™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.class01</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border</span>: <span class="number">1px</span> solid yellow;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.class02</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">color</span>: grey;</span></span><br><span class="line"><span class="language-css"><span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">éœ€æ±‚1ï¼šä¿®æ”¹ class å±æ€§å€¼ä¸º class01çš„ span æˆ– div æ ‡ç­¾ï¼Œå­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å°30ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º1åƒç´ é»„è‰²å®çº¿ã€‚</span></span><br><span class="line"><span class="comment">éœ€æ±‚2ï¼šä¿®æ”¹ class å±æ€§å€¼ä¸º class02çš„ div æ ‡ç­¾ï¼Œå­—ä½“é¢œè‰²ä¸ºç°è‰²ï¼Œå­—ä½“å¤§å°26ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º1åƒç´ çº¢è‰²å®çº¿ã€‚</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;class02&quot;</span>&gt;</span>divæ ‡ç­¾class01<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;class02&quot;</span>&gt;</span>divæ ‡ç­¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;class02&quot;</span>&gt;</span>spanæ ‡ç­¾class01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanæ ‡ç­¾2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç»„åˆé€‰æ‹©å™¨"><a href="#ç»„åˆé€‰æ‹©å™¨" class="headerlink" title="ç»„åˆé€‰æ‹©å™¨"></a>ç»„åˆé€‰æ‹©å™¨</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç»„åˆé€‰æ‹©å™¨çš„æ ¼å¼æ˜¯ï¼š</span><br><span class="line">é€‰æ‹©å™¨ 1ï¼Œé€‰æ‹©å™¨ 2ï¼Œé€‰æ‹©å™¨ n&#123;</span><br><span class="line">å±æ€§ï¼šå€¼;</span><br><span class="line">&#125;</span><br><span class="line">ç»„åˆé€‰æ‹©å™¨å¯ä»¥è®©å¤šä¸ªé€‰æ‹©å™¨å…±ç”¨åŒä¸€ä¸ª css æ ·å¼ä»£ç </span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>classç±»å‹é€‰æ‹©å™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.class01</span> , <span class="selector-id">#id01</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>:  yellow <span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">éœ€æ±‚1ï¼šä¿®æ”¹ class=&quot;class01&quot; çš„div æ ‡ç­¾ å’Œ id=&quot;id01&quot; æ‰€æœ‰çš„spanæ ‡ç­¾ï¼Œ</span></span><br><span class="line"><span class="comment">å­—ä½“é¢œè‰²ä¸ºè“è‰²ï¼Œå­—ä½“å¤§å°20ä¸ªåƒç´ ã€‚è¾¹æ¡†ä¸º1åƒç´ é»„è‰²å®çº¿ã€‚</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;id01&quot;</span>&gt;</span>divæ ‡ç­¾class01<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span>&gt;</span>span æ ‡ç­¾<span class="tag">&lt;/<span class="name">span</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span>&gt;</span>divæ ‡ç­¾id01<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨æ ·å¼"><a href="#å¸¸ç”¨æ ·å¼" class="headerlink" title="å¸¸ç”¨æ ·å¼"></a>å¸¸ç”¨æ ·å¼</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">1ã€å­—ä½“é¢œè‰²</span><br><span class="line">colorï¼šredï¼›</span><br><span class="line">é¢œè‰²å¯ä»¥å†™é¢œè‰²åå¦‚ï¼šblack, blue, red, green ç­‰</span><br><span class="line">é¢œè‰²ä¹Ÿå¯ä»¥å†™ rgb å€¼å’Œåå…­è¿›åˆ¶è¡¨ç¤ºå€¼ï¼šå¦‚ rgb(255,0,0)ï¼Œ#00F6DEï¼Œå¦‚æœå†™åå…­è¿›åˆ¶å€¼å¿…</span><br><span class="line">é¡»åŠ #</span><br><span class="line"></span><br><span class="line">2ã€å®½åº¦</span><br><span class="line">width:19px;</span><br><span class="line">å®½åº¦å¯ä»¥å†™åƒç´ å€¼ï¼š19pxï¼›</span><br><span class="line">ä¹Ÿå¯ä»¥å†™ç™¾åˆ†æ¯”å€¼ï¼š20%ï¼›</span><br><span class="line"></span><br><span class="line">3ã€é«˜åº¦</span><br><span class="line">height:20px;</span><br><span class="line">é«˜åº¦å¯ä»¥å†™åƒç´ å€¼ï¼š19pxï¼›</span><br><span class="line">ä¹Ÿå¯ä»¥å†™ç™¾åˆ†æ¯”å€¼ï¼š20%ï¼›</span><br><span class="line"></span><br><span class="line">4ã€èƒŒæ™¯é¢œè‰²</span><br><span class="line">background-color:#0F2D4C</span><br><span class="line"></span><br><span class="line">4ã€å­—ä½“æ ·å¼ï¼š</span><br><span class="line">colorï¼š#FF0000ï¼›å­—ä½“é¢œè‰²çº¢è‰²</span><br><span class="line">font-sizeï¼š20px; å­—ä½“å¤§å°</span><br><span class="line"></span><br><span class="line">5ã€çº¢è‰² 1 åƒç´ å®çº¿è¾¹æ¡†</span><br><span class="line">borderï¼š1px solid red;</span><br><span class="line"></span><br><span class="line">7ã€DIV å±…ä¸­</span><br><span class="line">margin-left: auto;</span><br><span class="line">margin-right: auto;</span><br><span class="line"></span><br><span class="line">8ã€æ–‡æœ¬å±…ä¸­ï¼š</span><br><span class="line">text-align: center;</span><br><span class="line"></span><br><span class="line">9ã€è¶…è¿æ¥å»ä¸‹åˆ’çº¿</span><br><span class="line">text-decoration: none;</span><br><span class="line"></span><br><span class="line">10ã€è¡¨æ ¼ç»†çº¿</span><br><span class="line">table &#123;</span><br><span class="line">border: 1px solid black; /*è®¾ç½®è¾¹æ¡†*/</span><br><span class="line">border-collapse: collapse; /*å°†è¾¹æ¡†åˆå¹¶*/</span><br><span class="line">&#125;</span><br><span class="line">td,th &#123;</span><br><span class="line">border: 1px solid black; /*è®¾ç½®è¾¹æ¡†*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">11ã€åˆ—è¡¨å»é™¤ä¿®é¥°</span><br><span class="line">ul &#123;</span><br><span class="line">list-style: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>06-csså¸¸ç”¨æ ·å¼.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> yellow solid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> red solid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">td</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> red solid;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>11111111111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>11111111111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>11111111111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>11111111111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>11111111111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯divæ ‡ç­¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><h3 id="JavaScriptä»‹ç»"><a href="#JavaScriptä»‹ç»" class="headerlink" title="JavaScriptä»‹ç»"></a>JavaScriptä»‹ç»</h3><p>Javascript è¯­è¨€è¯ç”Ÿä¸»è¦æ˜¯å®Œæˆé¡µé¢çš„æ•°æ®éªŒè¯ã€‚</p><p>å› æ­¤å®ƒè¿è¡Œåœ¨å®¢æˆ·ç«¯ï¼Œéœ€è¦è¿è¡Œæµè§ˆå™¨æ¥è§£ææ‰§è¡Œ JavaScript ä»£ç ã€‚</p><p>JS æ˜¯ Netscape ç½‘æ™¯å…¬å¸çš„äº§å“ï¼Œæœ€æ—©å–åä¸º LiveScript;ä¸ºäº†å¸å¼•æ›´å¤š java ç¨‹åºå‘˜ã€‚æ›´åä¸º JavaScriptã€‚</p><p><strong>JS æ˜¯å¼±ç±»å‹ï¼ŒJava æ˜¯å¼ºç±»å‹ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å¼±ç±»å‹å°±æ˜¯ç±»å‹å¯å˜ã€‚</span><br><span class="line">å¼ºç±»å‹ï¼Œå°±æ˜¯å®šä¹‰å˜é‡çš„æ—¶å€™ã€‚ç±»å‹å·²ç¡®å®šã€‚è€Œä¸”ä¸å¯å˜ã€‚</span><br><span class="line">int i = 12ï¼›</span><br><span class="line">var iï¼› ç±»å‹ä¸ç¡®å®šï¼Œå¯å˜</span><br><span class="line">i=12ï¼› æ•°å€¼å‹</span><br><span class="line">i= &quot;abc&quot; å­—ç¬¦ä¸²ç±»å‹</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š</p><ol><li><p>äº¤äº’æ€§ï¼ˆå®ƒå¯ä»¥åšçš„å°±æ˜¯ä¿¡æ¯çš„åŠ¨æ€äº¤äº’ï¼‰</p></li><li><p>å®‰å…¨æ€§ï¼ˆä¸å…è®¸ç›´æ¥è®¿é—®æœ¬åœ°ç¡¬ç›˜ï¼‰</p></li><li><p>è·¨å¹³å°æ€§ï¼ˆåªè¦æ˜¯å¯ä»¥è§£é‡Š JS çš„æµè§ˆå™¨éƒ½å¯ä»¥æ‰§è¡Œï¼Œå’Œå¹³å°æ— å…³)</p></li></ol><h3 id="JavaScriptå’Œhtmlç»“åˆ"><a href="#JavaScriptå’Œhtmlç»“åˆ" class="headerlink" title="JavaScriptå’Œhtmlç»“åˆ"></a>JavaScriptå’Œhtmlç»“åˆ</h3><h4 id="ç¬¬ä¸€ç§"><a href="#ç¬¬ä¸€ç§" class="headerlink" title="ç¬¬ä¸€ç§"></a>ç¬¬ä¸€ç§</h4><p>åªéœ€è¦åœ¨ head æ ‡ç­¾ä¸­ï¼Œæˆ–è€…åœ¨ body æ ‡ç­¾ä¸­ï¼Œ ä½¿ç”¨ script æ ‡ç­¾ æ¥ä¹¦å†™ JavaScript ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//  alertæ˜¯JavaScriptæä¾›çš„ä¸€ä¸ªè­¦å‘Šæ¡†å‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//  å®ƒå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯è­¦å‘Šæ¡†çš„æç¤ºä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;hello,JavaScript!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒç§"><a href="#ç¬¬äºŒç§" class="headerlink" title="ç¬¬äºŒç§"></a>ç¬¬äºŒç§</h4><p>ä½¿ç”¨ script æ ‡ç­¾å¼•å…¥ å•ç‹¬çš„ JavaScript ä»£ç æ–‡ä»¶</p><p>åœ¨å¤–éƒ¨å®šä¹‰jsæ–‡ä»¶ ,å†é€šè¿‡æ ‡ç­¾å±æ€§ srcå¼•å…¥<code>&lt;script type=&quot;text/javascript&quot; src=&quot;For02.js&quot;&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è¿™é‡Œç”¨åˆ°ä»å¤–éƒ¨å¼•å…¥jsæ–‡ä»¶çš„æ–¹æ³•ï¼Œæ³¨æ„è¿™é‡Œä¸èƒ½å†åµŒå¥—ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;For02.js&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//alert();ä¸èƒ½å†åœ¨è¿™é‡Œå†™ï¼Œè€Œæ˜¯è¦å¦å¼€æ ‡ç­¾å†ä½¿ç”¨</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯åœ¨htmlæ–‡ä»¶å®šä¹‰çš„jsæ–‡ä»¶&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ul><li><p>ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿå˜é‡æ˜¯å¯ä»¥å­˜æ”¾æŸäº›å€¼çš„å†…å­˜çš„å‘½åã€‚</p></li><li><p>JavaScript çš„å˜é‡ç±»å‹ï¼š<br>æ•°å€¼ç±»å‹ï¼š number<br>å­—ç¬¦ä¸²ç±»å‹ï¼š string<br>å¯¹è±¡ç±»å‹ï¼š object<br>å¸ƒå°”ç±»å‹ï¼š boolean<br>å‡½æ•°ç±»å‹ï¼š function</p></li><li><p>JavaScript é‡Œç‰¹æ®Šçš„å€¼ï¼š<br>undefined æœªå®šä¹‰ï¼Œæ‰€æœ‰ js å˜é‡æœªèµ‹äºåˆå§‹å€¼çš„æ—¶å€™ï¼Œé»˜è®¤å€¼éƒ½æ˜¯ undefined.<br>null ç©ºå€¼<br>NaN å…¨ç§°æ˜¯ï¼šNot a Numberã€‚éæ•°å­—ã€‚éæ•°å€¼ã€‚</p></li><li><p>JS ä¸­çš„å®šä¹‰å˜é‡æ ¼å¼ï¼š<br>var å˜é‡å;<br>var å˜é‡å &#x3D; å€¼</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> i;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//typeofæ˜¯JavaScriptæä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¿”å›å‚æ•°çš„ç±»å‹</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//alert(typeof (i)); //undefined</span></span></span><br><span class="line"><span class="language-javascript">    i = <span class="number">13</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//alert(typeof (i));//number</span></span></span><br><span class="line"><span class="language-javascript">    i = <span class="string">&quot;aba&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//alert(typeof (i));//string</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a =<span class="number">12</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> b = <span class="string">&quot;abc&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(a*b); <span class="comment">//NaN å…¨ç§°æ˜¯ not a number éæ•°å­—ï¼Œéæ•°å€¼ã€‚</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…³ç³»è¿ç®—ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰"><a href="#å…³ç³»è¿ç®—ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰" class="headerlink" title="å…³ç³»è¿ç®—ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰"></a>å…³ç³»è¿ç®—ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰</h3><p>ç­‰äºï¼š &#x3D;&#x3D; ç­‰äºæ˜¯ç®€å•çš„åšå­—é¢å€¼çš„æ¯”è¾ƒ</p><p>å…¨ç­‰äºï¼š &#x3D;&#x3D;&#x3D; é™¤äº†åšå­—é¢å€¼çš„æ¯”è¾ƒä¹‹å¤–ï¼Œè¿˜ä¼šæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„æ•°æ®ç±»å‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> a = <span class="number">12</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> b = <span class="string">&quot;12&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//alert(a==b); //true  ==ç®€å•çš„å­—é¢ä¸Šçš„æ¯”è¾ƒ ï¼Œä¸­é—´ä¼šè‡ªåŠ¨åšç±»å‹è½¬æ¢</span></span></span><br><span class="line"><span class="language-javascript">       <span class="title function_">alert</span>(a===b); <span class="comment">//false </span></span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h3><p>ä¸”è¿ç®—ï¼š &amp;&amp;</p><p>æˆ–è¿ç®—ï¼š ||</p><p>å–åè¿ç®—ï¼š !</p><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥åšä¸ºä¸€ä¸ª boolean ç±»å‹çš„å˜é‡å»ä½¿ç”¨ã€‚</p><p>0 ã€nullã€ undefinedã€â€â€(ç©ºä¸²) éƒ½è®¤ä¸ºæ˜¯ falseï¼›**</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&amp;&amp; ä¸”è¿ç®—ã€‚</span></span><br><span class="line"><span class="comment">æœ‰ä¸¤ç§æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ç§ï¼šå½“è¡¨è¾¾å¼å…¨ä¸ºçœŸçš„æ—¶å€™ã€‚è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">ç¬¬äºŒç§ï¼šå½“è¡¨è¾¾å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸ºå‡çš„æ—¶å€™ã€‚è¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„è¡¨è¾¾å¼çš„å€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">|| æˆ–è¿ç®—</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ç§æƒ…å†µï¼šå½“è¡¨è¾¾å¼å…¨ä¸ºå‡æ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼</span></span><br><span class="line"><span class="comment">ç¬¬äºŒç§æƒ…å†µï¼šåªè¦æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸ºçœŸã€‚å°±ä¼šæŠŠå›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„è¡¨è¾¾å¼çš„å€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å¹¶ä¸” &amp;&amp; ä¸è¿ç®— å’Œ ||æˆ–è¿ç®— æœ‰çŸ­è·¯ã€‚</span></span><br><span class="line"><span class="comment">çŸ­è·¯å°±æ˜¯è¯´ï¼Œå½“è¿™ä¸ª&amp;&amp;æˆ–||è¿ç®—æœ‰ç»“æœäº†ä¹‹å ã€‚åé¢çš„è¡¨è¾¾å¼ä¸å†æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> d = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">null</span>;</span><br><span class="line"><span class="title function_">alert</span>(b &amp;&amp; c &amp;&amp; d); <span class="comment">//åªè¦æœ‰ä¸€ä¸ªä¸ºå‡ï¼Œå°±è¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼ //null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#æ•°ç»„ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="æ•°ç»„ï¼ˆï¼ï¼ï¼ï¼‰"></a>æ•°ç»„ï¼ˆï¼ï¼ï¼ï¼‰</h3><p>JS ä¸­ æ•°ç»„çš„å®šä¹‰ï¼š</p><p>æ ¼å¼ï¼š var æ•°ç»„å &#x3D; []; &#x2F;&#x2F; ç©ºæ•°ç»„</p><p>var æ•°ç»„å &#x3D; [1 , â€™abcâ€™ , true]; &#x2F;&#x2F; å®šä¹‰æ•°ç»„åŒæ—¶èµ‹å€¼å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[]; <span class="comment">//ç©ºæ•°ç»„</span></span><br><span class="line">        <span class="keyword">var</span> brr = [<span class="literal">true</span> ,<span class="number">1</span>,<span class="literal">null</span>,<span class="string">&quot;aaa&quot;</span>,<span class="string">&quot;&quot;</span>];<span class="comment">//æ•°ç»„å…ƒç´ ä¸è¦æ±‚åŒç±»å‹</span></span><br><span class="line"></span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">12</span></span><br><span class="line">        <span class="comment">//alert(arr[0]);//12</span></span><br><span class="line">        arr[<span class="number">2</span>]=<span class="string">&quot;java&quot;</span>;</span><br><span class="line">        <span class="comment">//alert(arr[2])//java</span></span><br><span class="line">        <span class="comment">//alert(arr.length)//3 è¿™é‡Œå®šä¹‰arr[2]çš„æ—¶å€™è‡ªåŠ¨æ‰©å®¹æˆäº†é•¿åº¦ä¸º3çš„æ•°ç»„ï¼Œ</span></span><br><span class="line"><span class="comment">//è‡³äºarr[1]æ²¡æœ‰èµ‹å€¼ï¼Œæ‰€ä»¥æ˜¯undefined</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//alert(arr[9]); //è¯»æ“ä½œä¸ä¼šç»™æ•°ç»„æ‰©å®¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;<span class="comment">//javaScriptæ•°ç»„ä¹Ÿå¯ä»¥è¿›è¡Œéå†æ“ä½œ</span></span><br><span class="line">            <span class="title function_">alert</span>(arr[i]);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="å‡½æ•°çš„ä¸¤ç§å®šä¹‰æ–¹å¼ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#å‡½æ•°çš„ä¸¤ç§å®šä¹‰æ–¹å¼ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="å‡½æ•°çš„ä¸¤ç§å®šä¹‰æ–¹å¼ï¼ˆï¼ï¼ï¼ï¼‰"></a>å‡½æ•°çš„ä¸¤ç§å®šä¹‰æ–¹å¼ï¼ˆï¼ï¼ï¼ï¼‰</h4><h5 id="ç¬¬ä¸€ç§ï¼Œå¯ä»¥ä½¿ç”¨-function"><a href="#ç¬¬ä¸€ç§ï¼Œå¯ä»¥ä½¿ç”¨-function" class="headerlink" title="ç¬¬ä¸€ç§ï¼Œå¯ä»¥ä½¿ç”¨ function"></a>ç¬¬ä¸€ç§ï¼Œå¯ä»¥ä½¿ç”¨ function</h5><p>ä½¿ç”¨çš„æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function å‡½æ•°å(å½¢å‚åˆ—è¡¨)&#123; </span><br><span class="line">å‡½æ•°ä½“ </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œå¦‚ä½•å®šä¹‰å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Ÿ</p><p>åªéœ€è¦åœ¨å‡½æ•°ä½“å†…ç›´æ¥ä½¿ç”¨ return è¯­å¥è¿”å›å€¼å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//functionå®šä¹‰å‡½æ•°</span></span><br><span class="line">       <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">           <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæ— å‚å‡½æ•°&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//f();//å’Œjavaä¸€æ ·ï¼Œéœ€è¦è°ƒç”¨å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">s,m</span>) &#123;  <span class="comment">//å®šä¹‰æœ‰å‚å‡½æ•°ï¼Œå‚æ•°ä¸éœ€è¦å†™ç±»å‹ã€‚</span></span><br><span class="line">           <span class="keyword">return</span> s+m;     <span class="comment">//è¿”å›å€¼ç›´æ¥ä½¿ç”¨return</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="title function_">alert</span>(<span class="title function_">f1</span>(<span class="number">100</span>,<span class="number">50</span>));<span class="comment">//è°ƒç”¨æœ‰å‚å‡½æ•°</span></span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒç§-1"><a href="#ç¬¬äºŒç§-1" class="headerlink" title="ç¬¬äºŒç§"></a>ç¬¬äºŒç§</h5><p>ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><p>â€‹<code>var å‡½æ•°å = function(å½¢å‚åˆ—è¡¨)&#123;&#125;</code></p><p><strong>æ³¨æ„ï¼šJavaScriptä¸å…è®¸å‡½æ•°é‡è½½ï¼Œè‹¥ä½¿ç”¨é‡è½½ï¼Œåˆ™ä¼šè¦†ç›–ä¸Šä¸€æ¬¡çš„å®šä¹‰</strong></p><h4 id="å‡½æ•°çš„-arguments-éšå½¢å‚æ•°ï¼ˆåªåœ¨-function-å‡½æ•°å†…ï¼‰"><a href="#å‡½æ•°çš„-arguments-éšå½¢å‚æ•°ï¼ˆåªåœ¨-function-å‡½æ•°å†…ï¼‰" class="headerlink" title="å‡½æ•°çš„ arguments éšå½¢å‚æ•°ï¼ˆåªåœ¨ function å‡½æ•°å†…ï¼‰"></a>å‡½æ•°çš„ arguments éšå½¢å‚æ•°ï¼ˆåªåœ¨ function å‡½æ•°å†…ï¼‰</h4><h5 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h5><ul><li><p>å°±æ˜¯åœ¨ function å‡½æ•°ä¸­ä¸éœ€è¦å®šä¹‰ï¼Œä½†å´å¯ä»¥ç›´æ¥ç”¨æ¥è·å–æ‰€æœ‰å‚æ•°çš„å˜é‡ã€‚</p><p>æˆ‘ä»¬ç®¡å®ƒå«éšå½¢å‚æ•°ã€‚ éšå½¢å‚æ•°ç‰¹åˆ«åƒ java åŸºç¡€çš„å¯å˜é•¿å‚æ•°ä¸€æ ·ã€‚</p><p>public void fun( Object â€¦ args );</p><p>å¯å˜é•¿å‚æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p><p>é‚£ä¹ˆ js ä¸­çš„éšå½¢å‚æ•°ä¹Ÿè·Ÿ javaçš„å¯å˜é•¿å‚æ•°ä¸€æ ·ã€‚æ“ä½œç±»ä¼¼æ•°ç»„ã€‚</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a</span>) &#123;<span class="comment">//è¿™é‡Œçš„å‚æ•°åˆ—è¡¨ä¸ä¼šå½±å“å¯å˜å‚æ•° arguments</span></span><br><span class="line">     <span class="title function_">alert</span>(<span class="variable language_">arguments</span>.<span class="property">length</span>);</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">         <span class="title function_">alert</span>(<span class="variable language_">arguments</span>[i]);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//f(1,3,6,&quot;abc&quot;);</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">//argumentsçš„ä½¿ç”¨æ¡ˆä¾‹æ¼”ç¤º</span></span><br><span class="line"> <span class="comment">//è¦æ±‚ï¼šæ±‚å‡½æ•°å‚æ•°åˆ—è¡¨çš„å’Œ</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">num1,num2</span>) &#123;<span class="comment">//è¿™é‡Œä¼ é€’ä¸¤ä¸ªå‚æ•°æ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œå®é™…è°ƒç”¨çš„æ—¶å€™å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°</span></span><br><span class="line">     <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">             <span class="keyword">if</span> (<span class="title function_">typeof</span>(<span class="variable language_">arguments</span>[i])==<span class="string">&quot;number&quot;</span>) <span class="comment">//è¿™é‡Œåšä¸€ä¸ªç±»å‹åˆ¤æ–­</span></span><br><span class="line">                 result += <span class="variable language_">arguments</span>[i];</span><br><span class="line">         &#125;</span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="title function_">alert</span>( <span class="title function_">f1</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="string">&quot;abcv&quot;</span>));<span class="comment">//55</span></span><br></pre></td></tr></table></figure><h3 id="jsä¸­è‡ªå®šä¹‰å¯¹è±¡"><a href="#jsä¸­è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="jsä¸­è‡ªå®šä¹‰å¯¹è±¡"></a>jsä¸­è‡ªå®šä¹‰å¯¹è±¡</h3><h4 id="objectå½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡"><a href="#objectå½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="objectå½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡"></a>objectå½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡</h4><p>å¯¹è±¡çš„å®šä¹‰ï¼š var å˜é‡å &#x3D; new Object(); &#x2F;&#x2F; å¯¹è±¡å®ä¾‹ï¼ˆç©ºå¯¹è±¡ï¼‰</p><p>å˜é‡å.å±æ€§å &#x3D; å€¼; &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå±æ€§</p><p>å˜é‡å.å‡½æ•°å &#x3D; function(){} &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå‡½æ•°</p><p>å¯¹è±¡çš„è®¿é—®ï¼š å˜é‡å.å±æ€§ &#x2F; å‡½æ•°å()</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰ object ç±»å‹çš„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        obj.<span class="property">name</span> = <span class="string">&quot;å‘¨æ˜Ÿé©°&quot;</span>;</span><br><span class="line">        obj.<span class="property">age</span>=<span class="string">&quot;18&quot;</span>;</span><br><span class="line">        obj.<span class="property">fun</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;å§“åï¼š&quot;</span>+<span class="variable language_">this</span>.<span class="property">name</span>+<span class="string">&quot;,å¹´é¾„ï¼š&quot;</span>+<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// alert(obj.name);</span></span><br><span class="line">        <span class="comment">// alert(obj.age);</span></span><br><span class="line">        obj.<span class="title function_">fun</span>();</span><br></pre></td></tr></table></figure><h4 id="å¤§æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡"><a href="#å¤§æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="å¤§æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡"></a>å¤§æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡</h4><p>å¯¹è±¡çš„å®šä¹‰ï¼š</p><p>var å˜é‡å &#x3D; { &#x2F;&#x2F; ç©ºå¯¹è±¡</p><p>â€‹å±æ€§åï¼šå€¼, &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå±æ€§ æ³¨æ„ï¼šä¸æ˜¯æœ€åä¸€ä¸ªå°±è¦åŠ <code>,</code></p><p>â€‹ å±æ€§åï¼šå€¼, &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå±æ€§</p><p>â€‹å‡½æ•°åï¼šfunction(){} &#x2F;&#x2F; å®šä¹‰ä¸€ä¸ªå‡½æ•°</p><p>};</p><p>å¯¹è±¡çš„è®¿é—®ï¼š å˜é‡å.å±æ€§ &#x2F; å‡½æ•°å();**</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤§æ‹¬å·å½¢å¼çš„è‡ªå®šä¹‰å¯¹è±¡</span></span><br><span class="line">     <span class="keyword">var</span> obj = &#123;   <span class="comment">//å®šä¹‰å¯¹è±¡</span></span><br><span class="line">         <span class="attr">name</span>: <span class="string">&quot;å‘¨æ˜Ÿé©°&quot;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">         <span class="attr">fun</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">             <span class="title function_">alert</span>(<span class="string">&quot;å§“åï¼š&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;ï¼Œå¹´é¾„ï¼š&quot;</span> + <span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="comment">//å¯¹è±¡è°ƒç”¨</span></span><br><span class="line">     <span class="title function_">alert</span>(obj.<span class="property">name</span>);</span><br><span class="line">     <span class="title function_">alert</span>(obj.<span class="property">age</span>);</span><br><span class="line">     obj.<span class="title function_">fun</span>();</span><br></pre></td></tr></table></figure><h3 id="jsä¸­çš„äº‹ä»¶"><a href="#jsä¸­çš„äº‹ä»¶" class="headerlink" title="jsä¸­çš„äº‹ä»¶"></a>jsä¸­çš„äº‹ä»¶</h3><p>ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿäº‹ä»¶æ˜¯ç”µè„‘è¾“å…¥è®¾å¤‡ä¸é¡µé¢è¿›è¡Œäº¤äº’çš„å“åº”ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºäº‹ä»¶ã€‚</p><h4 id="å¸¸ç”¨çš„äº‹ä»¶"><a href="#å¸¸ç”¨çš„äº‹ä»¶" class="headerlink" title="å¸¸ç”¨çš„äº‹ä»¶"></a>å¸¸ç”¨çš„äº‹ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onload åŠ è½½å®Œæˆäº‹ä»¶ï¼š é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œå¸¸ç”¨äºåšé¡µé¢ js ä»£ç åˆå§‹åŒ–æ“ä½œ</span><br><span class="line">onclick å•å‡»äº‹ä»¶ï¼š å¸¸ç”¨äºæŒ‰é’®çš„ç‚¹å‡»å“åº”æ“ä½œã€‚</span><br><span class="line">onblur å¤±å»ç„¦ç‚¹äº‹ä»¶ï¼š å¸¸ç”¨ç”¨äºè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹åéªŒè¯å…¶è¾“å…¥å†…å®¹æ˜¯å¦åˆæ³•ã€‚</span><br><span class="line">onchange å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶ï¼š å¸¸ç”¨äºä¸‹æ‹‰åˆ—è¡¨å’Œè¾“å…¥æ¡†å†…å®¹å‘ç”Ÿæ”¹å˜åæ“ä½œ</span><br><span class="line">onsubmit è¡¨å•æäº¤äº‹ä»¶ï¼š å¸¸ç”¨äºè¡¨å•æäº¤å‰ï¼ŒéªŒè¯æ‰€æœ‰è¡¨å•é¡¹æ˜¯å¦åˆæ³•ã€‚</span><br></pre></td></tr></table></figure><h4 id="äº‹ä»¶çš„æ³¨å†Œåˆåˆ†ä¸ºé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œä¸¤ç§"><a href="#äº‹ä»¶çš„æ³¨å†Œåˆåˆ†ä¸ºé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œä¸¤ç§" class="headerlink" title="äº‹ä»¶çš„æ³¨å†Œåˆåˆ†ä¸ºé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œä¸¤ç§"></a>äº‹ä»¶çš„æ³¨å†Œåˆåˆ†ä¸ºé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œä¸¤ç§</h4><h5 id="ä»€ä¹ˆæ˜¯äº‹ä»¶çš„æ³¨å†Œï¼ˆç»‘å®šï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹ä»¶çš„æ³¨å†Œï¼ˆç»‘å®šï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹ä»¶çš„æ³¨å†Œï¼ˆç»‘å®šï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹ä»¶çš„æ³¨å†Œï¼ˆç»‘å®šï¼‰ï¼Ÿ</h5><ul><li>å…¶å®å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œå½“äº‹ä»¶å“åº”åè¦æ‰§è¡Œå“ªäº›æ“ä½œä»£ç ï¼Œå«äº‹ä»¶æ³¨å†Œæˆ–äº‹ä»¶ç»‘å®šã€‚</li></ul><h5 id="é™æ€æ³¨å†Œäº‹ä»¶ï¼š"><a href="#é™æ€æ³¨å†Œäº‹ä»¶ï¼š" class="headerlink" title="é™æ€æ³¨å†Œäº‹ä»¶ï¼š"></a>é™æ€æ³¨å†Œäº‹ä»¶ï¼š</h5><ul><li>é€šè¿‡ html æ ‡ç­¾çš„äº‹ä»¶å±æ€§ç›´æ¥èµ‹äºäº‹ä»¶å“åº”åçš„ä»£ç ï¼Œè¿™ç§æ–¹å¼æˆ‘ä»¬å«é™æ€æ³¨å†Œã€‚</li></ul><h5 id="åŠ¨æ€æ³¨å†Œäº‹ä»¶ï¼š"><a href="#åŠ¨æ€æ³¨å†Œäº‹ä»¶ï¼š" class="headerlink" title="åŠ¨æ€æ³¨å†Œäº‹ä»¶ï¼š"></a>åŠ¨æ€æ³¨å†Œäº‹ä»¶ï¼š</h5><ul><li>æ˜¯æŒ‡å…ˆé€šè¿‡ js ä»£ç å¾—åˆ°æ ‡ç­¾çš„ dom å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡ dom å¯¹è±¡.äº‹ä»¶å &#x3D; function(){} è¿™ç§å½¢å¼èµ‹äºäº‹ä»¶å“åº”åçš„ä»£ç ï¼Œå«åŠ¨æ€æ³¨å†Œã€‚</li></ul><h5 id="åŠ¨æ€æ³¨å†ŒåŸºæœ¬æ­¥éª¤ï¼š"><a href="#åŠ¨æ€æ³¨å†ŒåŸºæœ¬æ­¥éª¤ï¼š" class="headerlink" title="åŠ¨æ€æ³¨å†ŒåŸºæœ¬æ­¥éª¤ï¼š"></a>åŠ¨æ€æ³¨å†ŒåŸºæœ¬æ­¥éª¤ï¼š</h5><p>â€‹å›ºå®šå†™æ³•</p><ul><li>1ã€è·å–æ ‡ç­¾å¯¹è±¡<br>2ã€æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å &#x3D; fucntion()</li></ul><h4 id="onload-åŠ è½½å®Œæˆäº‹ä»¶"><a href="#onload-åŠ è½½å®Œæˆäº‹ä»¶" class="headerlink" title="onload åŠ è½½å®Œæˆäº‹ä»¶"></a>onload åŠ è½½å®Œæˆäº‹ä»¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//onloadäº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> onloadFun = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯é™æ€æ³¨å†ŒOnloadäº‹ä»¶...å¾ˆå¤šä»£ç &quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//onloadäº‹ä»¶åŠ¨æ€æ³¨å†Œ æ˜¯å›ºå®šå†™æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯åŠ¨æ€æ³¨å†Œ Onloadäº‹ä»¶&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;body onload=&quot;alert(&#x27;è¿™æ˜¯é™æ€æ³¨å†Œonloadäº‹ä»¶&#x27;)&quot;&gt; å¯ä»¥ç›´æ¥å†™åœ¨ bodyæ ‡ç­¾é‡Œé¢ï¼Œä½†ä¸æ¨èè¿™ç§å†™æ³• --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        é™æ€æ³¨å†Œonloadäº‹ä»¶ï¼š</span></span><br><span class="line"><span class="comment">            onloadäº‹ä»¶æ˜¯æµè§ˆå™¨è§£æå®Œæˆé¡µé¢ä¹‹åè‡ªåŠ¨è§¦å‘çš„äº‹ä»¶</span></span><br><span class="line"><span class="comment">            &lt;body onload=&quot;onloadFun()&quot;&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="onclick-å•å‡»äº‹ä»¶"><a href="#onclick-å•å‡»äº‹ä»¶" class="headerlink" title="onclick å•å‡»äº‹ä»¶"></a>onclick å•å‡»äº‹ä»¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> onclickFun = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯é™æ€æ³¨å†Œ onclickäº‹ä»¶&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//åŠ¨æ€æ³¨å†Œ onclickäº‹ä»¶</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//åŠ¨æ€æ³¨å†Œçš„æ­¥éª¤</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//1.è·å–æ ‡ç­¾å¯¹è±¡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> btnObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn02&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">/* document æ˜¯ JavaScriptè¯­è¨€æä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆæ–‡æ¡£ï¼‰ ç›¸å½“äºæ•´ä¸ªé¡µé¢</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">                   getElementById é€šè¿‡ idå±æ€§è·å–æ ‡ç­¾å¯¹è±¡</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">             */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//2.æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function()&#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            btnObj.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">alert</span>(<span class="string">&quot;è¿™æ˜¯åŠ¨æ€æ³¨å†Œ onclickäº‹ä»¶&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--        æ¼”ç¤ºonclickäº‹ä»¶--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;onclickFun()&quot;</span>&gt;</span>æŒ‰é’®1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--é€šè¿‡æŒ‰é’®2 æ¼”ç¤º åŠ¨æ€æ³¨å†Œonclickäº‹ä»¶--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn02&quot;</span>&gt;</span>æŒ‰é’®2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="onblur-å¤±å»ç„¦ç‚¹äº‹ä»¶"><a href="#onblur-å¤±å»ç„¦ç‚¹äº‹ä»¶" class="headerlink" title="onblur å¤±å»ç„¦ç‚¹äº‹ä»¶"></a>onblur å¤±å»ç„¦ç‚¹äº‹ä»¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> onBlurFun = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ¼”ç¤ºé™æ€æ³¨å†Œonbluräº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console æ˜¯ æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œæ˜¯JavaScriptæä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºåœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å‡º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//log   å°±æ˜¯æ‰“å°çš„æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é™æ€æ³¨å†Œonbluräº‹ä»¶&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åŠ¨æ€æ³¨å†Œonbluräº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ä»ç„¶æ˜¯å›ºå®šå†™æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> pwdObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;pwd&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            pwdObj.<span class="property">onblur</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿™æ˜¯åŠ¨æ€æ³¨å†Œonbluräº‹ä»¶&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;onBlurFun()&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="onchange-å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶"><a href="#onchange-å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶" class="headerlink" title="onchange å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶"></a>onchange å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//é™æ€æ³¨å†Œonchangeäº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> onChangeFun = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;æ¡£æ¬¡å‘ç”Ÿå˜åŒ–&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åŠ¨æ€æ³¨å†Œ</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å›ºå®šæ­¥éª¤</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//è·å–æ ‡ç­¾å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> goodsObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;selGoods&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ ‡ç­¾å¯¹è±¡.äº‹ä»¶å = function()&#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript">            goodsObj.<span class="property">onchange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;å•†å“å‘ç”Ÿå˜åŒ–&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">è¯·é€‰æ‹©è´­ä¹°æ¡£æ¬¡<span class="tag">&lt;<span class="name">select</span> <span class="attr">onchange</span>=<span class="string">&quot;onChangeFun()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>-æ¡£æ¬¡-<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ä½çº§<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>æ™®é€š<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>é«˜çº§<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">è¯·é€‰æ‹©å•†å“<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selGoods&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>-å•†å“-<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>13<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>13pro<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>13proMax<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="onsubmit-è¡¨å•æäº¤äº‹"><a href="#onsubmit-è¡¨å•æäº¤äº‹" class="headerlink" title="onsubmit è¡¨å•æäº¤äº‹"></a>onsubmit è¡¨å•æäº¤äº‹</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">onSubmitFun</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;é™æ€æ³¨å†Œ onsubmitäº‹ä»¶...ä¸åˆæ³•ï¼Œé˜»æ­¢æäº¤&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¼”ç¤ºåŠ¨æ€æ³¨å†Œonsubmitäº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å›ºå®šå†™æ³•</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> formObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;form02&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            formObj.<span class="property">onsubmit</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;åŠ¨æ€æ³¨å†Œ onsubmitäº‹ä»¶...ä¸åˆæ³•ï¼Œé˜»æ­¢æäº¤&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return onSubmitFun()&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é™æ€æ³¨å†Œ&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080&quot;</span> <span class="attr">id</span>=<span class="string">&quot;form02&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŠ¨æ€æ³¨å†Œ&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="jsçš„æ­£åˆ™è¡¨è¾¾å¼"><a href="#jsçš„æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="jsçš„æ­£åˆ™è¡¨è¾¾å¼"></a>jsçš„æ­£åˆ™è¡¨è¾¾å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ä¸­ï¼Œæ˜¯å¦åŒ…å«å­—æ¯e</span><br><span class="line">        // var patt = new RegExp(&quot;e&quot;);</span><br><span class="line">        // var patt = /e/; // ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ä¸­ï¼Œæ˜¯å¦åŒ…å«å­—æ¯aæˆ–bæˆ–cçš„ä»»æ„ä¸€ä¸ª</span><br><span class="line">        // var patt = /[abc]/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«å°å†™å­—æ¯</span><br><span class="line">        // var patt = /[a-z]/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«ä»»æ„å¤§å†™å­—æ¯</span><br><span class="line">        // var patt = /[A-Z]/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«ä»»æ„æ•°å­—</span><br><span class="line">        // var patt = /[0-9]/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚å­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿</span><br><span class="line">        // var patt = /\w/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«è‡³å°‘ä¸€ä¸ªa(1åˆ°å¤š)</span><br><span class="line">        // var patt = /a+/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²ä¸­æ˜¯å¦ *åŒ…å«* é›¶ä¸ª æˆ– å¤šä¸ªa</span><br><span class="line">        // var patt = /a*/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ä¸€ä¸ªæˆ–é›¶ä¸ªa</span><br><span class="line">        // var patt = /a?/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«è¿ç»­ä¸‰ä¸ªa</span><br><span class="line">        // var patt = /a&#123;3&#125;/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²æ˜¯å¦åŒ… è‡³å°‘3ä¸ªè¿ç»­çš„aï¼Œæœ€å¤š5ä¸ªè¿ç»­çš„a</span><br><span class="line">        // var patt = /a&#123;3,5&#125;/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²æ˜¯å¦åŒ… è‡³å°‘3ä¸ªè¿ç»­çš„aï¼Œ</span><br><span class="line">        // var patt = /a&#123;3,&#125;/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²å¿…é¡»ä»¥aç»“å°¾</span><br><span class="line">        // var patt = /a$/;</span><br><span class="line">        // è¡¨ç¤ºè¦æ±‚ å­—ç¬¦ä¸²å¿…é¡»ä»¥aæ‰“å¤´</span><br><span class="line">        // var patt = /^a/;</span><br><span class="line"></span><br><span class="line">        // è¦æ±‚å­—ç¬¦ä¸²ä¸­æ˜¯å¦*åŒ…å«* è‡³å°‘3ä¸ªè¿ç»­çš„a</span><br><span class="line">        // var patt = /a&#123;3,5&#125;/;</span><br><span class="line">        // è¦æ±‚å­—ç¬¦ä¸²ï¼Œä»å¤´åˆ°å°¾éƒ½å¿…é¡»å®Œå…¨åŒ¹é…</span><br><span class="line">        // var patt = /^a&#123;3,5&#125;$/;</span><br><span class="line"></span><br><span class="line">        var patt = /^\w&#123;5,12&#125;$/;</span><br><span class="line"></span><br><span class="line">        var str = &quot;wzg168[[[&quot;;</span><br><span class="line"></span><br><span class="line">        alert( patt.test(str) );</span><br></pre></td></tr></table></figure><h3 id="DOMæ¨¡å‹"><a href="#DOMæ¨¡å‹" class="headerlink" title="DOMæ¨¡å‹"></a>DOMæ¨¡å‹</h3><p>DOM å…¨ç§°æ˜¯ Document Object Model æ–‡æ¡£å¯¹è±¡æ¨¡å‹</p><p>â€‹å¤§ç™½è¯ï¼Œå°±æ˜¯æŠŠæ–‡æ¡£ä¸­çš„æ ‡ç­¾ï¼Œå±æ€§ï¼Œæ–‡æœ¬ï¼Œè½¬æ¢æˆä¸ºå¯¹è±¡æ¥ç®¡ç†ã€‚</p><p>â€‹ é‚£ä¹ˆ å®ƒä»¬æ˜¯å¦‚ä½•å®ç°æŠŠæ ‡ç­¾ï¼Œå±æ€§ï¼Œæ–‡æœ¬è½¬æ¢æˆä¸ºå¯¹è±¡æ¥ç®¡ç†å‘¢ã€‚è¿™å°±æ˜¯æˆ‘ä»¬é©¬ä¸Šè¦å­¦ä¹ çš„é‡ç‚¹ã€‚</p><h4 id="Documentå¯¹è±¡ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"><a href="#Documentå¯¹è±¡ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰" class="headerlink" title="Documentå¯¹è±¡ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"></a>Documentå¯¹è±¡ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211113224646603.png" alt="image-20211113224646603"></p><ul><li><p><strong>Document å¯¹è±¡çš„ç†è§£ï¼š</strong></p></li><li><p>ç¬¬ä¸€ç‚¹ï¼šDocument å®ƒç®¡ç†äº†æ‰€æœ‰çš„ HTML æ–‡æ¡£å†…å®¹ã€‚</p></li><li><p>ç¬¬äºŒç‚¹ï¼šdocument å®ƒæ˜¯ä¸€ç§æ ‘ç»“æ„çš„æ–‡æ¡£ã€‚æœ‰å±‚çº§å…³ç³»ã€‚</p></li><li><p>ç¬¬ä¸‰ç‚¹ï¼šå®ƒè®©æˆ‘ä»¬æŠŠæ‰€æœ‰çš„æ ‡ç­¾ éƒ½ å¯¹è±¡åŒ–</p></li><li><p>ç¬¬å››ç‚¹ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ document è®¿é—®æ‰€æœ‰çš„æ ‡ç­¾å¯¹è±¡ã€‚</p></li><li><p><strong>ä»€ä¹ˆæ˜¯å¯¹è±¡åŒ–ï¼Ÿï¼Ÿ</strong></p><ul><li><p>æˆ‘ä»¬å·²ç»å­¦è¿‡é¢å‘å¯¹è±¡ã€‚è¯·é—®ä»€ä¹ˆæ˜¯å¯¹è±¡åŒ–ï¼Ÿ</p><p>ä¸¾ä¾‹ï¼š æœ‰ä¸€ä¸ªäººæœ‰å¹´é¾„ï¼š18 å²ï¼Œæ€§åˆ«ï¼šå¥³ï¼Œåå­—ï¼šå¼ æŸæŸ</p><p>æˆ‘ä»¬è¦æŠŠè¿™ä¸ªäººçš„ä¿¡æ¯å¯¹è±¡åŒ–æ€ä¹ˆåŠï¼</p><pre><code>     Class Person &#123; </code></pre><p>â€‹private int age;</p><p>â€‹private String sex;</p><p>â€‹private String name;</p><p>â€‹ }</p></li></ul></li><li><p><strong>é‚£ä¹ˆ html æ ‡ç­¾ è¦ å¯¹è±¡åŒ– æ€ä¹ˆåŠï¼Ÿ</strong></p><ul><li><p>æ¨¡æ‹Ÿå¯¹è±¡åŒ–ï¼Œç›¸å½“äºï¼š</p></li><li><p>&#96;&#96;&#96;</p></li></ul><p>  class Dom{ </p><pre><code>   private String id; // id å±æ€§    private String tagName; //è¡¨ç¤ºæ ‡ç­¾å    private Dom parentNode; //çˆ¶äº²    private List&lt;Dom&gt; children; // å­©å­ç»“ç‚¹        private String innerHTML; // èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­é—´çš„å†…å®¹ </code></pre><p>  }<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Document å¯¹è±¡ä¸­çš„æ–¹æ³•ä»‹ç»ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</span><br><span class="line"></span><br><span class="line">****</span><br><span class="line"></span><br><span class="line">- **`document.getElementByIdï¼ˆelementIdï¼‰`</span><br><span class="line">  é€šè¿‡æ ‡ç­¾çš„idå±æ€§æŸ¥æ‰¾æ ‡ç­¾domå¯¹è±¡ï¼Œ elementIdæ˜¯æ ‡ç­¾çš„idå±æ€§å€¼</span><br><span class="line"></span><br><span class="line">- `document.getElementsByName ï¼ˆelementNameï¼‰`</span><br><span class="line">  é€šè¿‡æ ‡ç­¾çš„nameå±æ€§æŸ¥æ‰¾æ ‡ç­¾domå¯¹è±¡ï¼Œ elementNameæ ‡ç­¾çš„nameå±æ€§å€¼</span><br><span class="line"></span><br><span class="line">- `document.getElementsByTagName ï¼ˆtagnameï¼‰`</span><br><span class="line">  é€šè¿‡æ ‡ç­¾åæŸ¥æ‰¾æ ‡ç­¾domå¯¹è±¡ã€‚tagnameæ˜¯æ ‡ç­¾å</span><br><span class="line"></span><br><span class="line">- `document.createElementï¼ˆ tagNameï¼‰`</span><br><span class="line">  æ–¹æ³•ï¼Œé€šè¿‡ç»™å®šçš„æ ‡ç­¾åï¼Œåˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¯¹è±¡ã€‚tagNameæ˜¯è¦åˆ›å»ºçš„æ ‡ç­¾å</span><br><span class="line"></span><br><span class="line">æ³¨ï¼š</span><br><span class="line">documentå¯¹è±¡çš„ä¸‰ä¸ªæŸ¥è¯¢æ–¹æ³•ï¼Œå¦‚æœæœ‰idå±æ€§ï¼Œä¼˜å…ˆä½¿ç”¨`getElementById`æ–¹æ³•æ¥è¿›è¡ŒæŸ¥è¯¢</span><br><span class="line">å¦‚æœæ²¡æœ‰idå±æ€§ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨`getElementsByName`æ–¹æ³•æ¥è¿›è¡ŒæŸ¥è¯¢</span><br><span class="line">å¦‚æœidå±æ€§å’Œnameå±æ€§éƒ½æ²¡æœ‰æœ€åå†æŒ‰æ ‡ç­¾åæŸ¥`getElementsByTagName`</span><br><span class="line"></span><br><span class="line">ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ï¼Œä¸€å®šè¦åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åæ‰§è¡Œï¼Œæ‰èƒ½æŸ¥è¯¢åˆ°æ ‡ç­¾å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### getElementById</span><br><span class="line"></span><br><span class="line">##### å®Œæˆç”¨æˆ·è¾“å…¥æ ¡éªŒ</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        //è®¾è®¡ï¼šé€šè¿‡æ ¡éªŒæŒ‰é’®æ ¡éªŒ ç”¨æˆ·åè¾“å…¥æ¡†çš„åˆæ³•æ€§</span><br><span class="line"></span><br><span class="line">        function onClickFun() &#123;/*</span><br><span class="line">        æ€è·¯ï¼šé¦–å…ˆè¦è·å– ç”¨æˆ·åè¾“å…¥æ¡†çš„å†…å®¹</span><br><span class="line">        é€šè¿‡document çš„ getElementByIdæ–¹æ³•è·å–æ ‡ç­¾å¯¹è±¡</span><br><span class="line">        å¾—åˆ°çš„å¯¹è±¡å®é™…å°±æ˜¯ domï¼Œè¯¥å¯¹è±¡åŒ…å«äº†æ ‡ç­¾çš„å±æ€§</span><br><span class="line">         */</span><br><span class="line">            var userNameObj = document.getElementById(&quot;userName&quot;);</span><br><span class="line">            var value = userNameObj.value;//è·å–è¯¥æ ‡ç­¾çš„valueï¼Œå³è¾“å…¥æ¡†çš„å†…å®¹</span><br><span class="line">            //é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒ</span><br><span class="line">            var patt = /^\w&#123;5,12&#125;$/;</span><br><span class="line">            /*</span><br><span class="line">           * test()æ–¹æ³•ç”¨äºæµ‹è¯•æŸä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸æ˜¯åŒ¹é…æˆ‘çš„è§„åˆ™ ï¼Œ</span><br><span class="line">           * åŒ¹é…å°±è¿”å› trueã€‚ä¸åŒ¹é…å°±è¿”å› false.</span><br><span class="line">           * */</span><br><span class="line">            //é€šè¿‡documentå¯¹è±¡æ“ä½œspanæ ‡ç­¾</span><br><span class="line">            var spanObj = document.getElementById(&quot;userNameSpan&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if (patt.test(value)) &#123;</span><br><span class="line">                // alert(&quot;åˆæ³•&quot;)</span><br><span class="line">                //spanObj.innerHTML = &quot;ç”¨æˆ·ååˆæ³•&quot;;</span><br><span class="line"></span><br><span class="line">                //æ³¨æ„è¿™é‡Œçš„imgæ ‡ç­¾é‡Œçš„â€œéœ€è¦è½¬ä¹‰</span><br><span class="line">                spanObj.innerHTML = &quot;&lt;img src=\&quot;right.png\&quot; width=\&quot;18px\&quot; height=\&quot;18\&quot;px&gt;&quot;;</span><br><span class="line">            &#125; else</span><br><span class="line">                spanObj.innerHTML = &quot;&lt;img src=\&quot;wrong.png\&quot; width=\&quot;18px\&quot; height=\&quot;18\&quot;px&gt;&quot;;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--    å®Œæˆç”¨æˆ·åè¾“å…¥æ ¡éªŒ,è¦æ±‚ 5-12ä½ æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿ --&gt;</span><br><span class="line">        ç”¨æˆ·å:&lt;input type=&quot;text&quot; value=&quot;wag&quot; id=&quot;userName&quot;&gt;</span><br><span class="line">        &lt;span id=&quot;userNameSpan&quot; style=&quot;color: red&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;button onclick=&quot;onClickFun()&quot;&gt;æ ¡éªŒ&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p></li></ul><h4 id="getElementsByName"><a href="#getElementsByName" class="headerlink" title="getElementsByName"></a>getElementsByName</h4><h5 id="å®Œæˆå…¨é€‰ï¼Œå…¨ä¸é€‰å’Œåé€‰åŠŸèƒ½"><a href="#å®Œæˆå…¨é€‰ï¼Œå…¨ä¸é€‰å’Œåé€‰åŠŸèƒ½" class="headerlink" title="å®Œæˆå…¨é€‰ï¼Œå…¨ä¸é€‰å’Œåé€‰åŠŸèƒ½"></a>å®Œæˆå…¨é€‰ï¼Œå…¨ä¸é€‰å’Œåé€‰åŠŸèƒ½</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> hobbys = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;hobby&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">checkAll</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é€šè¿‡jsæ“ä½œå®ç°å¤é€‰æ¡†çš„å…¨é€‰ï¼Œå…¨ä¸é€‰ï¼Œåé€‰åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é€šè¿‡ getElementsByNameæ–¹æ³•è¿”å› å¤šä¸ªæ ‡ç­¾å¯¹è±¡é›†åˆ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è¿™ä¸ªé›†åˆçš„æ“ä½œè·Ÿæ•°ç»„ ä¸€æ ·</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ dom å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ é¡ºåºæ˜¯ä»–ä»¬åœ¨ html é¡µé¢ä¸­ä»ä¸Šåˆ°ä¸‹çš„é¡ºåº</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é›†åˆé‡Œçš„å…ƒç´ çš„checkedå±æ€§å¯è¯»å¯å†™ï¼Œå½“checked = trueæ—¶è¡¨ç¤ºé€‰ä¸­ï¼Œåä¹‹æœªé€‰ä¸­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hobbys.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                hobbys[i].<span class="property">checked</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">checkNone</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//é›†åˆé‡Œçš„å…ƒç´ çš„checkedå±æ€§å¯è¯»å¯å†™ï¼Œå½“checked = trueæ—¶è¡¨ç¤ºé€‰ä¸­ï¼Œåä¹‹æœªé€‰ä¸­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hobbys.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                hobbys[i].<span class="property">checked</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">checkReberse</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hobbys.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                hobbys[i].<span class="property">checked</span> =! hobbys[i].<span class="property">checked</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>java</span><br><span class="line">    å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>cpp</span><br><span class="line">    å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;python&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>python<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;checkAll()&quot;</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;checkNone()&quot;</span>&gt;</span>å…¨ä¸é€‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;checkReberse()&quot;</span>&gt;</span>åé€‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="getElementsByTagName"><a href="#getElementsByTagName" class="headerlink" title="getElementsByTagName"></a>getElementsByTagName</h4><p>ç”¨è¿‡æ ‡ç­¾åè·å–å…ƒç´ é›†åˆ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">checkAll</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//getElementsByTagNameæ˜¯é€šè¿‡ æ ‡ç­¾åæ¥è·å–æ ‡ç­¾å¯¹è±¡é›†åˆ,å…¶ä»–æ“ä½œå’ŒgetElementsByNameç±»ä¼¼ï¼Œ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> inputObjs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; inputObjs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                inputObjs[i].<span class="property">checked</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>java</span><br><span class="line">        å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>cpp</span><br><span class="line">        å…´è¶£çˆ±å¥½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;python&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> /&gt;</span>python<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;checkAll()&quot;</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="createElement-amp-appendChild"><a href="#createElement-amp-appendChild" class="headerlink" title="createElement &amp; appendChild"></a>createElement &amp; appendChild</h4><p><code>document.createElement(tagName)</code></p><p>æ–¹æ³•ï¼Œé€šè¿‡ç»™å®šçš„æ ‡ç­¾åï¼Œåˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¯¹è±¡ã€‚tagNameæ˜¯è¦åˆ›å»ºçš„æ ‡ç­¾å</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç°åœ¨éœ€è¦æˆ‘ä»¬ä½¿ç”¨jsä»£ç æ¥åˆ›å»ºhtmlæ ‡ç­¾ï¼Œå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ ‡ç­¾çš„å†…å®¹å°±æ˜¯ï¼š&lt;div&gt;ä½ ä¹Ÿèƒ½å˜æˆå…‰&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> divObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>); <span class="comment">// åœ¨å†…å­˜ä¸­ &lt;div&gt;&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> textNodeObj = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&quot;ä½ ä¹Ÿèƒ½å˜æˆå…‰&quot;</span>);<span class="comment">//æœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹å¯¹è±¡ #ä½ ä¹Ÿèƒ½å˜æˆå…‰</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            divObj.<span class="title function_">appendChild</span>(textNodeObj); <span class="comment">// &lt;div&gt;ä½ ä¹Ÿèƒ½å˜æˆå…‰&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// divObj.innerHTML = &quot;ä½ ä¹Ÿèƒ½å˜æˆå…‰&quot;; // &lt;div&gt;ä½ ä¹Ÿèƒ½å˜æˆå…‰&lt;/div&gt;,ä½†ï¼Œè¿˜åªæ˜¯åœ¨å†…å­˜ä¸­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ·»åŠ å­å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(divObj);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="èŠ‚ç‚¹çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•"><a href="#èŠ‚ç‚¹çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•" class="headerlink" title="èŠ‚ç‚¹çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•"></a>èŠ‚ç‚¹çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•</h4><p>èŠ‚ç‚¹å°±æ˜¯æ ‡ç­¾å¯¹è±¡</p><h5 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h5><ul><li><p>é€šè¿‡å…·ä½“çš„å…ƒç´ èŠ‚ç‚¹è°ƒç”¨</p><p>getElementsByTagName()</p><p>æ–¹æ³•ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„æŒ‡å®šæ ‡ç­¾åå­©å­èŠ‚ç‚¹</p></li><li><p>appendChild( oChildNode )</p><p>æ–¹æ³•ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ŒoChildNode æ˜¯è¦æ·»åŠ çš„å­©å­èŠ‚ç‚¹</p></li></ul><h5 id="å±æ€§ï¼š"><a href="#å±æ€§ï¼š" class="headerlink" title="å±æ€§ï¼š"></a>å±æ€§ï¼š</h5><ul><li><p>childNodes<br>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</p></li><li><p>firstChild<br>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</p></li><li><p>lastChild<br>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹</p></li><li><p>parentNode<br>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</p></li><li><p><strong>nextSibling</strong><br><strong>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</strong></p></li><li><p>previousSibling<br>å±æ€§ï¼Œè·å–å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹</p></li><li><p>className<br>ç”¨äºè·å–æˆ–è®¾ç½®æ ‡ç­¾çš„classå±æ€§å€¼</p></li><li><p>innerHTML<br>å±æ€§ï¼Œè¡¨ç¤ºè·å–&#x2F;è®¾ç½®èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹ï¼ˆåŒ…å«é‡Œé¢çš„æ ‡ç­¾ï¼‰</p></li><li><p>innerText<br>å±æ€§ï¼Œè¡¨ç¤ºè·å–&#x2F;è®¾ç½®èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬</p></li></ul><h5 id="ç»ƒä¹ ï¼ŒDOMæŸ¥è¯¢ç»ƒä¹ "><a href="#ç»ƒä¹ ï¼ŒDOMæŸ¥è¯¢ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ ï¼ŒDOMæŸ¥è¯¢ç»ƒä¹ "></a>ç»ƒä¹ ï¼ŒDOMæŸ¥è¯¢ç»ƒä¹ </h5><h2 id="jQury"><a href="#jQury" class="headerlink" title="jQury"></a>jQury</h2><h3 id="jQuryä»‹ç»"><a href="#jQuryä»‹ç»" class="headerlink" title="jQuryä»‹ç»"></a>jQuryä»‹ç»</h3><p><strong>ä»€ä¹ˆæ˜¯ jQuery ?</strong><br>jQueryï¼Œé¡¾åæ€ä¹‰ï¼Œä¹Ÿå°±æ˜¯ JavaScript å’ŒæŸ¥è¯¢ï¼ˆQueryï¼‰ï¼Œå®ƒå°±æ˜¯è¾…åŠ© JavaScript å¼€å‘çš„ js ç±»åº“ã€‚</p><p><strong>jQuery æ ¸å¿ƒæ€æƒ³ï¼ï¼ï¼</strong><br>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ write less,do more(å†™å¾—æ›´å°‘,åšå¾—æ›´å¤š)ï¼Œæ‰€ä»¥å®ƒå®ç°äº†å¾ˆå¤šæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ã€‚</p><p><strong>jQuery æµè¡Œç¨‹åº¦</strong><br>jQuery ç°åœ¨å·²ç»æˆä¸ºæœ€æµè¡Œçš„ JavaScript åº“ï¼Œåœ¨ä¸–ç•Œå‰ 10000 ä¸ªè®¿é—®æœ€å¤šçš„ç½‘ç«™ä¸­ï¼Œæœ‰è¶…è¿‡ 55%åœ¨ä½¿ç”¨<br>jQueryã€‚</p><p><strong>jQuery å¥½å¤„ï¼ï¼ï¼</strong><br>jQuery æ˜¯å…è´¹ã€å¼€æºçš„ï¼ŒjQuery çš„è¯­æ³•è®¾è®¡å¯ä»¥ä½¿å¼€å‘æ›´åŠ ä¾¿æ·ï¼Œä¾‹å¦‚æ“ä½œæ–‡æ¡£å¯¹è±¡ã€é€‰æ‹© DOM å…ƒç´ ã€<br>åˆ¶ä½œåŠ¨ç”»æ•ˆæœã€äº‹ä»¶å¤„ç†ã€ä½¿ç”¨ <code>Ajax</code> ä»¥åŠå…¶ä»–åŠŸèƒ½</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥jq jaråŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../script/jquery-1.7.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">/*window.onload = function () &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">var buttonObj = document.getElementById(&quot;btnId&quot;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">buttonObj.onclick = function () &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">alert(&quot;è¿™æ˜¯é€šè¿‡jså®ç°çš„æŒ‰é’®ç‚¹å‡»å“åº”æ•ˆæœ&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">&#125;*/</span></span></span><br><span class="line"><span class="language-javascript">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œ ç›¸å½“äº  window.onload = function () &#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> $btnObj= $(<span class="string">&quot;#btnId&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">$btnObj.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;jqå®ç°å“åº”æ•ˆæœ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnId&quot;</span>&gt;</span>SayHello<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¸¸è§é—®é¢˜ï¼Ÿ</strong><br>1ã€ä½¿ç”¨jQueryä¸€å®šè¦å¼•å…¥jQueryåº“å—ï¼Ÿç­”æ¡ˆï¼šæ˜¯ï¼Œå¿…é¡»</p><p>2ã€jQueryä¸­çš„<code>$</code>åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ ç­”æ¡ˆï¼š å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°</p><p>3ã€æ€ä¹ˆä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»å“åº”å‡½æ•°çš„ï¼Ÿ</p><p>ç­”æ¡ˆï¼š</p><p>1ã€ä½¿ç”¨jQueryæŸ¥è¯¢åˆ°æ ‡ç­¾å¯¹è±¡<br>2ã€ä½¿ç”¨æ ‡ç­¾å¯¹è±¡.clickï¼ˆ functionï¼ˆï¼‰{} ï¼‰ï¼›**</p><h3 id="jQuery-æ ¸å¿ƒå‡½æ•°"><a href="#jQuery-æ ¸å¿ƒå‡½æ•°" class="headerlink" title="jQuery æ ¸å¿ƒå‡½æ•°"></a>jQuery æ ¸å¿ƒå‡½æ•°</h3><p>$ æ˜¯ jQuery çš„æ ¸å¿ƒå‡½æ•°ï¼Œèƒ½å®Œæˆ jQuery çš„å¾ˆå¤šåŠŸèƒ½ã€‚$()å°±æ˜¯è°ƒç”¨$è¿™ä¸ªå‡½æ•°</p><p>1ã€ä¼ å…¥å‚æ•°ä¸º [ å‡½æ•° ] æ—¶ï¼š</p><p><code>$(function()&#123;&#125;);</code></p><p>è¡¨ç¤ºé¡µé¢åŠ è½½å®Œæˆä¹‹åã€‚ç›¸å½“äº window.onload &#x3D; function(){}</p><p>2ã€ä¼ å…¥å‚æ•°ä¸º [ HTML å­—ç¬¦ä¸² ] æ—¶ï¼š<br>ä¼šå¯¹æˆ‘ä»¬åˆ›å»ºè¿™ä¸ª html æ ‡ç­¾å¯¹è±¡</p><p>3ã€ä¼ å…¥å‚æ•°ä¸º [ é€‰æ‹©å™¨å­—ç¬¦ä¸² ] æ—¶ï¼š<br>$(â€œ#id å±æ€§å€¼â€); id é€‰æ‹©å™¨ï¼Œæ ¹æ® id æŸ¥è¯¢æ ‡ç­¾å¯¹è±¡<br>$(â€œæ ‡ç­¾åâ€); æ ‡ç­¾åé€‰æ‹©å™¨ï¼Œæ ¹æ®æŒ‡å®šçš„æ ‡ç­¾åæŸ¥è¯¢æ ‡ç­¾å¯¹è±¡<br>$(â€œ.class å±æ€§å€¼â€); ç±»å‹é€‰æ‹©å™¨ï¼Œå¯ä»¥æ ¹æ® class å±æ€§æŸ¥è¯¢æ ‡ç­¾å¯¹è±¡</p><p>4ã€ä¼ å…¥å‚æ•°ä¸º [ DOM å¯¹è±¡ ] æ—¶ï¼š<br>ä¼šæŠŠè¿™ä¸ª dom å¯¹è±¡è½¬æ¢ä¸º jQuery å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;../script/jquery-1.7.2.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//æ ¸å¿ƒå‡½æ•°çš„4ä¸ªä½œç”¨</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//ä¼ å…¥å‚æ•°ä¸º[å‡½æ•°]æ—¶ï¼šåœ¨æ–‡æ¡£åŠ è½½å®Œæˆåæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// $(function () &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//     alert(&quot;1111&quot;); //ç›¸å½“äº   window.onload = function()&#123;&#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//ä¼ å…¥å‚æ•°ä¸º[HTMLå­—ç¬¦ä¸²]æ—¶ï¼šæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²åˆ›å»ºå…ƒç´ èŠ‚ç‚¹å¯¹è±¡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $(<span class="string">&quot;&lt;div&gt;&quot;</span> +</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;        &lt;span&gt;div-spanæ ‡ç­¾1&lt;/span&gt;&quot;</span> +</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;        &lt;span&gt;div-spanæ ‡ç­¾2&lt;/span&gt;&quot;</span> +</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;    &lt;/div&gt;&quot;</span>).<span class="title function_">appendTo</span>(<span class="string">&quot;body&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//ä¼ å…¥å‚æ•°ä¸º[é€‰æ‹©å™¨å­—ç¬¦ä¸²]æ—¶ï¼šæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²æŸ¥æ‰¾å…ƒç´ èŠ‚ç‚¹å¯¹è±¡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//alert($(&quot;button&quot;).length);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//ä¼ å…¥å‚æ•°ä¸º[DOMå¯¹è±¡]æ—¶ï¼šå°†DOMå¯¹è±¡åŒ…è£…ä¸ºjQueryå¯¹è±¡è¿”å›</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> btnObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn01&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>($(btnObj))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br></pre></td></tr></table></figure><h3 id="jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡åŒºåˆ†"><a href="#jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡åŒºåˆ†" class="headerlink" title="jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡åŒºåˆ†"></a>jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡åŒºåˆ†</h3><h4 id="Dom-å¯¹è±¡"><a href="#Dom-å¯¹è±¡" class="headerlink" title="Dom å¯¹è±¡"></a>Dom å¯¹è±¡</h4><p>1.é€šè¿‡ getElementById()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ˜¯ Dom å¯¹è±¡</p><p>2.é€šè¿‡ getElementsByName()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ˜¯ Dom å¯¹è±¡</p><p>3.é€šè¿‡ getElementsByTagName()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ˜¯ Dom å¯¹è±¡</p><p>4.é€šè¿‡ createElement() æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ Dom å¯¹è±¡</p><p>DOM å¯¹è±¡ Alert å‡ºæ¥çš„æ•ˆæœæ˜¯ï¼š<code>[object HTML æ ‡ç­¾å Element]</code></p><h4 id="jQuery-å¯¹è±¡"><a href="#jQuery-å¯¹è±¡" class="headerlink" title="jQuery å¯¹è±¡"></a>jQuery å¯¹è±¡</h4><p>5.é€šè¿‡ JQuery æä¾›çš„ API åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ JQuery å¯¹è±¡</p><p>6.é€šè¿‡ JQuery åŒ…è£…çš„ Dom å¯¹è±¡ï¼Œä¹Ÿæ˜¯ JQuery å¯¹è±¡</p><p>7.é€šè¿‡ JQuery æä¾›çš„ API æŸ¥è¯¢åˆ°çš„å¯¹è±¡ï¼Œæ˜¯ JQuery å¯¹è±¡</p><p>jQuery å¯¹è±¡ Alert å‡ºæ¥çš„æ•ˆæœæ˜¯ï¼š<code>[object Object]</code></p><h4 id="é—®é¢˜ï¼šjQuery-å¯¹è±¡çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"><a href="#é—®é¢˜ï¼šjQuery-å¯¹è±¡çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="é—®é¢˜ï¼šjQuery å¯¹è±¡çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"></a>é—®é¢˜ï¼šjQuery å¯¹è±¡çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ</h4><p>jQuery å¯¹è±¡æ˜¯ dom å¯¹è±¡çš„æ•°ç»„ + jQuery æä¾›çš„ä¸€ç³»åˆ—åŠŸèƒ½</p><p>è¯´æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> $btns =$(<span class="string">&quot;button&quot;</span>); <span class="comment">//æœ‰ 4 ä¸ªbutton</span></span><br><span class="line"><span class="title function_">alert</span>($btns);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>$btns</code> å¯¹è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211114195606842.png" alt="image-20211114195606842"></p><h4 id="DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡ä½¿ç”¨åŒºåˆ«"><a href="#DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡ä½¿ç”¨åŒºåˆ«" class="headerlink" title="DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡ä½¿ç”¨åŒºåˆ«"></a>DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡ä½¿ç”¨åŒºåˆ«</h4><p>jQuery å¯¹è±¡ä¸èƒ½ä½¿ç”¨ DOM å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</p><p>DOM å¯¹è±¡ä¹Ÿä¸èƒ½ä½¿ç”¨ jQuery å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</p><h4 id="DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡äº’è½¬ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡äº’è½¬ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡äº’è½¬ï¼ˆï¼ï¼ï¼ï¼‰"></a>DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡äº’è½¬ï¼ˆï¼ï¼ï¼ï¼‰</h4><p><strong>1ã€dom å¯¹è±¡è½¬åŒ–ä¸º jQuery å¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰</strong><br>1ã€å…ˆæœ‰ DOM å¯¹è±¡<br>2ã€$( DOM å¯¹è±¡ ) å°±å¯ä»¥è½¬æ¢æˆä¸º jQuery å¯¹è±¡</p><p><strong>2ã€jQuery å¯¹è±¡è½¬ä¸º dom å¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰</strong><br>1ã€å…ˆæœ‰ jQuery å¯¹è±¡<br>2ã€jQuery å¯¹è±¡[ä¸‹æ ‡]å–å‡ºç›¸åº”çš„ DOM å¯¹è±¡</p><h3 id="jQueryé€‰æ‹©å™¨ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"><a href="#jQueryé€‰æ‹©å™¨ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰" class="headerlink" title="jQueryé€‰æ‹©å™¨ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰"></a>jQueryé€‰æ‹©å™¨ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</h3><h4 id="åŸºæœ¬é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#åŸºæœ¬é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="åŸºæœ¬é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰"></a>åŸºæœ¬é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰</h4><p><code>#ID é€‰æ‹©å™¨</code>ï¼šæ ¹æ® id æŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡</p><p><code>.class é€‰æ‹©å™¨</code>ï¼šæ ¹æ® class æŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡</p><p><code>element é€‰æ‹©å™¨</code>ï¼šæ ¹æ®æ ‡ç­¾åæŸ¥æ‰¾æ ‡ç­¾å¯¹è±¡</p><p><code>*é€‰æ‹©å™¨</code>ï¼šè¡¨ç¤ºä»»æ„çš„ï¼Œæ‰€æœ‰çš„å…ƒç´ </p><p><code>selector1ï¼Œselector2 ç»„åˆé€‰æ‹©å™¨</code>ï¼šåˆå¹¶é€‰æ‹©å™¨ 1ï¼Œé€‰æ‹©å™¨ 2 çš„ç»“æœå¹¶è¿”å›</p><p><code>p.myClass </code>  : è¡¨ç¤ºæ ‡ç­¾åå¿…é¡»æ˜¯ p æ ‡ç­¾ï¼Œè€Œä¸” class ç±»å‹è¿˜è¦æ˜¯ myClass</p><p>æ¼”ç¤ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../script/jquery-1.7.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//1.é€‰æ‹© id ä¸º one çš„å…ƒç´  &quot;background-color&quot;,&quot;#bbffaa&quot;</span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//jQueryå¯¹è±¡çš„cssæ–¹æ³•å¯ä»¥è®¾ç½®å’Œè·å–æ ·å¼</span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#one&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>,<span class="string">&quot;#bbffaa&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//2.é€‰æ‹© class ä¸º mini çš„æ‰€æœ‰å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;.mini&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>,<span class="string">&quot;#bbffaa&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//3.é€‰æ‹© å…ƒç´ åæ˜¯ div çš„æ‰€æœ‰å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>,<span class="string">&quot;#bbffaa&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//4.é€‰æ‹©æ‰€æœ‰çš„å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;*&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>,<span class="string">&quot;#bbffaa&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//5.é€‰æ‹©æ‰€æœ‰çš„ span å…ƒç´ å’Œidä¸ºtwoçš„å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;#btn5&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&quot;span,#two&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>,<span class="string">&quot;#bbffaa&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br></pre></td></tr></table></figure><h4 id="å±‚çº§é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#å±‚çº§é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="å±‚çº§é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰"></a>å±‚çº§é€‰æ‹©å™¨ï¼ˆï¼ï¼ï¼ï¼‰</h4><p>ancestor descendant åä»£é€‰æ‹©å™¨ ï¼šåœ¨ç»™å®šçš„ç¥–å…ˆå…ƒç´ ä¸‹åŒ¹é…æ‰€æœ‰çš„åä»£å…ƒç´ </p><p>parent &gt; child å­å…ƒç´ é€‰æ‹©å™¨ï¼šåœ¨ç»™å®šçš„çˆ¶å…ƒç´ ä¸‹åŒ¹é…æ‰€æœ‰çš„å­å…ƒç´ </p><p>prev + next ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨ï¼šåŒ¹é…æ‰€æœ‰ç´§æ¥åœ¨ prev å…ƒç´ åçš„ next å…ƒç´ </p><p>prev ~ sibings ä¹‹åçš„å…„å¼Ÿå…ƒç´ é€‰æ‹©å™¨ï¼šåŒ¹é… prev å…ƒç´ ä¹‹åçš„æ‰€æœ‰ siblings å…„å¼Ÿå…ƒç´ </p><p>æ¼”ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="comment">//è¿™ä¸ªæ˜¯ $( function()&#123;&#125; )çš„å…¨å†™</span></span><br><span class="line"><span class="comment">//1.é€‰æ‹© body å†…çš„æ‰€æœ‰ div å…ƒç´  </span></span><br><span class="line">$(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;body div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.åœ¨ body å†…, é€‰æ‹©divå­å…ƒç´   </span></span><br><span class="line">$(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;body &gt; div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é€‰æ‹© id ä¸º one çš„ä¸‹ä¸€ä¸ª div å…ƒç´  </span></span><br><span class="line">$(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;#one+div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é€‰æ‹© id ä¸º two çš„å…ƒç´ åé¢çš„æ‰€æœ‰ div å…„å¼Ÿå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;#two~div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="è¿‡æ»¤é€‰æ‹©å™¨"><a href="#è¿‡æ»¤é€‰æ‹©å™¨" class="headerlink" title="è¿‡æ»¤é€‰æ‹©å™¨"></a>è¿‡æ»¤é€‰æ‹©å™¨</h4><h5 id="åŸºæœ¬è¿‡æ»¤å™¨"><a href="#åŸºæœ¬è¿‡æ»¤å™¨" class="headerlink" title="åŸºæœ¬è¿‡æ»¤å™¨"></a>åŸºæœ¬è¿‡æ»¤å™¨</h5><p>:first è·å–ç¬¬ä¸€ä¸ªå…ƒç´ </p><p>:last è·å–æœ€åä¸ªå…ƒç´ </p><p>:not(selector) å»é™¤æ‰€æœ‰ä¸ç»™å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ </p><p>:even åŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¶æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°</p><p>:odd åŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¥‡æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°</p><p>:eq(index) åŒ¹é…ä¸€ä¸ªç»™å®šç´¢å¼•å€¼çš„å…ƒç´ </p><p>:gt(index) åŒ¹é…æ‰€æœ‰å¤§äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´ </p><p>:lt(index) åŒ¹é…æ‰€æœ‰å°äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´ </p><p>:header åŒ¹é…å¦‚ h1, h2, h3 ä¹‹ç±»çš„æ ‡é¢˜å…ƒç´ </p><p>:animated åŒ¹é…æ‰€æœ‰æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»æ•ˆæœçš„å…ƒç´ </p><h5 id="å†…å®¹è¿‡æ»¤å™¨"><a href="#å†…å®¹è¿‡æ»¤å™¨" class="headerlink" title="å†…å®¹è¿‡æ»¤å™¨"></a>å†…å®¹è¿‡æ»¤å™¨</h5><p>:contains(text) åŒ¹é…åŒ…å«ç»™å®šæ–‡æœ¬çš„å…ƒç´ </p><p>:empty åŒ¹é…æ‰€æœ‰ä¸åŒ…å«å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„ç©ºå…ƒç´ </p><p>:parent åŒ¹é…å«æœ‰å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„å…ƒç´ </p><p>:has(selector) åŒ¹é…å«æœ‰é€‰æ‹©å™¨æ‰€åŒ¹é…çš„å…ƒç´ çš„å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//1.é€‰æ‹© å«æœ‰æ–‡æœ¬ &#x27;di&#x27; çš„ div å…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;div:contains(di)&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.é€‰æ‹©ä¸åŒ…å«å­å…ƒç´ (æˆ–è€…æ–‡æœ¬å…ƒç´ ) çš„ div ç©ºå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;div:empty&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é€‰æ‹©å«æœ‰ class ä¸º mini å…ƒç´ çš„ div å…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;div:has(.mini)&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é€‰æ‹©å«æœ‰å­å…ƒç´ (æˆ–è€…æ–‡æœ¬å…ƒç´ )çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;div:parent&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="å±æ€§è¿‡æ»¤å™¨ï¼š"><a href="#å±æ€§è¿‡æ»¤å™¨ï¼š" class="headerlink" title="å±æ€§è¿‡æ»¤å™¨ï¼š"></a>å±æ€§è¿‡æ»¤å™¨ï¼š</h5><p>[attribute]       åŒ¹é…åŒ…å«ç»™å®šå±æ€§çš„å…ƒç´ ã€‚</p><p>[attribute&#x3D;value] åŒ¹é…ç»™å®šçš„å±æ€§æ˜¯æŸä¸ªç‰¹å®šå€¼çš„å…ƒç´ </p><p>[attribute!&#x3D;value] åŒ¹é…æ‰€æœ‰ä¸å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œæˆ–è€…å±æ€§ä¸ç­‰äºç‰¹å®šå€¼çš„å…ƒç´ ã€‚</p><p>[attribute^&#x3D;value] åŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥æŸäº›å€¼å¼€å§‹çš„å…ƒç´ </p><p>[attribute$&#x3D;value] åŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥æŸäº›å€¼ç»“å°¾çš„å…ƒç´ </p><p>[attribute*&#x3D;value] åŒ¹é…ç»™å®šçš„å±æ€§æ˜¯ä»¥åŒ…å«æŸäº›å€¼çš„å…ƒç´ </p><p><code>[attrSel1][attrSel2][attrSelN]</code> å¤åˆå±æ€§é€‰æ‹©å™¨ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶æ—¶ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">//1.é€‰å–å«æœ‰ å±æ€§title çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//2.é€‰å– å±æ€§titleå€¼ç­‰äº&#x27;test&#x27;çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title = &#x27;test&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3.é€‰å– å±æ€§titleå€¼ä¸ç­‰äº&#x27;test&#x27;çš„divå…ƒç´ (*æ²¡æœ‰å±æ€§titleçš„ä¹Ÿå°†è¢«é€‰ä¸­)</span></span><br><span class="line">$(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title !=&#x27;test&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4.é€‰å– å±æ€§titleå€¼ ä»¥&#x27;te&#x27;å¼€å§‹ çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title^=&#x27;te&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//5.é€‰å– å±æ€§titleå€¼ ä»¥&#x27;est&#x27;ç»“æŸ çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn5&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title $= &#x27;est&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//6.é€‰å– å±æ€§titleå€¼ å«æœ‰&#x27;es&#x27;çš„divå…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn6&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title *=&#x27;es&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//7.é¦–å…ˆé€‰å–æœ‰å±æ€§idçš„divå…ƒç´ ï¼Œç„¶ååœ¨ç»“æœä¸­ é€‰å–å±æ€§titleå€¼ å«æœ‰&#x27;es&#x27;çš„ div å…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn7&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[id][title *=&#x27;es&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//8.é€‰å– å«æœ‰ title å±æ€§å€¼, ä¸”title å±æ€§å€¼ä¸ç­‰äº test çš„ div å…ƒç´ </span></span><br><span class="line">$(<span class="string">&quot;#btn8&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;div[title][title != &#x27;test&#x27;]&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;#bbffaa&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="è¡¨å•è¿‡æ»¤å™¨"><a href="#è¡¨å•è¿‡æ»¤å™¨" class="headerlink" title="è¡¨å•è¿‡æ»¤å™¨"></a>è¡¨å•è¿‡æ»¤å™¨</h5><p>:input åŒ¹é…æ‰€æœ‰ input, textarea, select å’Œ button å…ƒç´ </p><p>:text åŒ¹é…æ‰€æœ‰ æ–‡æœ¬è¾“å…¥æ¡†</p><p>:password åŒ¹é…æ‰€æœ‰çš„å¯†ç è¾“å…¥æ¡†</p><p>:radio åŒ¹é…æ‰€æœ‰çš„å•é€‰æ¡†</p><p>:checkbox åŒ¹é…æ‰€æœ‰çš„å¤é€‰æ¡†</p><p>:submit åŒ¹é…æ‰€æœ‰æäº¤æŒ‰é’®</p><p>:image åŒ¹é…æ‰€æœ‰ img æ ‡ç­¾</p><p>:reset åŒ¹é…æ‰€æœ‰é‡ç½®æŒ‰é’®</p><p>:button åŒ¹é…æ‰€æœ‰ input type&#x3D;button æŒ‰é’®</p><p>:file åŒ¹é…æ‰€æœ‰ input type&#x3D;file æ–‡ä»¶ä¸Šä¼ </p><p>:hidden åŒ¹é…æ‰€æœ‰ä¸å¯è§å…ƒç´  display:none æˆ– input type&#x3D;hidden</p><h5 id="è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤å™¨"><a href="#è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤å™¨" class="headerlink" title="è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤å™¨"></a>è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤å™¨</h5><p>:enabled åŒ¹é…æ‰€æœ‰å¯ç”¨å…ƒç´ </p><p>:disabled åŒ¹é…æ‰€æœ‰ä¸å¯ç”¨å…ƒç´ </p><p>:checked åŒ¹é…æ‰€æœ‰é€‰ä¸­çš„å•é€‰ï¼Œå¤é€‰ï¼Œå’Œä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰ä¸­çš„ option æ ‡ç­¾å¯¹è±¡</p><p>:selected åŒ¹é…æ‰€æœ‰é€‰ä¸­çš„ option</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.å¯¹è¡¨å•å†… å¯ç”¨input èµ‹å€¼æ“ä½œ</span></span><br><span class="line">$(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// val()å¯ä»¥æ“ä½œè¡¨å•é¡¹çš„valueå±æ€§å€¼</span></span><br><span class="line"><span class="comment">// å®ƒå¯ä»¥è®¾ç½®å’Œè·å–</span></span><br><span class="line">$(<span class="string">&quot;:text&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;ä½ ä¹Ÿèƒ½å˜æˆå…‰&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//2.å¯¹è¡¨å•å†… ä¸å¯ç”¨input èµ‹å€¼æ“ä½œ</span></span><br><span class="line">$(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$(<span class="string">&quot;:text:disabled&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;Monster&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3.è·å–å¤šé€‰æ¡†é€‰ä¸­çš„ä¸ªæ•°  ä½¿ç”¨size()æ–¹æ³•è·å–é€‰å–åˆ°çš„å…ƒç´ é›†åˆçš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">$(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">alert</span>($(<span class="string">&quot;:checkbox:checked&quot;</span>).<span class="property">length</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4.è·å–å¤šé€‰æ¡†ï¼Œæ¯ä¸ªé€‰ä¸­çš„valueå€¼</span></span><br><span class="line">$(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//å…ˆè·å–å¤šé€‰æ¡†</span></span><br><span class="line"><span class="keyword">var</span> $checkboxes = $(<span class="string">&quot;:checkbox:checked&quot;</span>);</span><br><span class="line"><span class="comment">//éå†å¤šé€‰æ¡† ,ä½¿ç”¨ jqçš„eachæ–¹æ³•éå†</span></span><br><span class="line">$checkboxes.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//5.è·å–ä¸‹æ‹‰æ¡†é€‰ä¸­çš„å†…å®¹  </span></span><br><span class="line">$(<span class="string">&quot;#btn5&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> $selecteds = $(<span class="string">&quot;:selected:selected&quot;</span>);</span><br><span class="line">$selecteds.<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">innerText</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="jQuery-å…ƒç´ ç­›é€‰"><a href="#jQuery-å…ƒç´ ç­›é€‰" class="headerlink" title="jQuery å…ƒç´ ç­›é€‰"></a>jQuery å…ƒç´ ç­›é€‰</h4><p>eq() è·å–ç»™å®šç´¢å¼•çš„å…ƒç´  åŠŸèƒ½è·Ÿ :eq() ä¸€æ ·</p><p>first() è·å–ç¬¬ä¸€ä¸ªå…ƒç´  åŠŸèƒ½è·Ÿ :first ä¸€æ ·</p><p>last() è·å–æœ€åä¸€ä¸ªå…ƒç´  åŠŸèƒ½è·Ÿ :last ä¸€æ ·</p><p>filter(exp) ç•™ä¸‹åŒ¹é…çš„å…ƒç´ </p><p>is(exp) åˆ¤æ–­æ˜¯å¦åŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨ï¼Œåªè¦æœ‰ä¸€ä¸ªåŒ¹é…å°±è¿”å›ï¼Œtrue</p><p>has(exp) è¿”å›åŒ…å«æœ‰åŒ¹é…é€‰æ‹©å™¨çš„å…ƒç´ çš„å…ƒç´  åŠŸèƒ½è·Ÿ :has ä¸€æ ·</p><p>not(exp) åˆ é™¤åŒ¹é…é€‰æ‹©å™¨çš„å…ƒç´  åŠŸèƒ½è·Ÿ :not ä¸€æ ·</p><p>children(exp) è¿”å›åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„å­å…ƒç´  åŠŸèƒ½è·Ÿ parent&gt;child ä¸€æ ·</p><p>find(exp) è¿”å›åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„åä»£å…ƒç´  åŠŸèƒ½è·Ÿ ancestor descendant ä¸€æ ·</p><p>next() è¿”å›å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´  åŠŸèƒ½è·Ÿ prev + next åŠŸèƒ½ä¸€æ ·</p><p>nextAll() è¿”å›å½“å‰å…ƒç´ åé¢æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´  åŠŸèƒ½è·Ÿ prev ~ siblings åŠŸèƒ½ä¸€æ ·</p><p>nextUntil() è¿”å›å½“å‰å…ƒç´ åˆ°æŒ‡å®šåŒ¹é…çš„å…ƒç´ ä¸ºæ­¢çš„åé¢å…ƒç´ </p><p>parent() è¿”å›çˆ¶å…ƒç´ </p><p>prev(exp) è¿”å›å½“å‰å…ƒç´ çš„ä¸Šä¸€ä¸ªå…„å¼Ÿå…ƒç´ </p><p>prevAll() è¿”å›å½“å‰å…ƒç´ å‰é¢æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ </p><p>prevUnit(exp) è¿”å›å½“å‰å…ƒç´ åˆ°æŒ‡å®šåŒ¹é…çš„å…ƒç´ ä¸ºæ­¢çš„å‰é¢å…ƒç´ </p><p>siblings(exp) è¿”å›æ‰€æœ‰å…„å¼Ÿå…ƒç´ </p><p>add() æŠŠ add åŒ¹é…çš„é€‰æ‹©å™¨çš„å…ƒç´ æ·»åŠ åˆ°å½“å‰ jquery å¯¹è±¡ä¸­</p><p>:visible åŒ¹é…æ‰€æœ‰å¯è§å…ƒç´ </p><p>:hiddenåŒ¹é…æ‰€æœ‰ä¸å¯è§å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//(1)eq()  é€‰æ‹©ç´¢å¼•å€¼ä¸ºç­‰äº 3 çš„ div å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">eq</span>(<span class="number">3</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(2)first()é€‰æ‹©ç¬¬ä¸€ä¸ª div å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//first()   é€‰å–ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">first</span>().<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(3)last()é€‰æ‹©æœ€åä¸€ä¸ª div å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn3&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//last()  é€‰å–æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">last</span>().<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(4)filter()åœ¨divä¸­é€‰æ‹©ç´¢å¼•ä¸ºå¶æ•°çš„</span></span><br><span class="line">    $(<span class="string">&quot;#btn4&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//filter()  è¿‡æ»¤   ä¼ å…¥çš„æ˜¯é€‰æ‹©å™¨å­—ç¬¦ä¸²</span></span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">filter</span>(<span class="string">&quot;:even&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(5)is()åˆ¤æ–­#oneæ˜¯å¦ä¸º:emptyæˆ–:parent</span></span><br><span class="line">    <span class="comment">//isç”¨æ¥æ£€æµ‹jqå¯¹è±¡æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„é€‰æ‹©å™¨</span></span><br><span class="line">    $(<span class="string">&quot;#btn5&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>($(<span class="string">&quot;#one&quot;</span>).<span class="title function_">is</span>(<span class="string">&quot;:parent&quot;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//(6)has()é€‰æ‹©divä¸­åŒ…å«.miniçš„</span></span><br><span class="line">    $(<span class="string">&quot;#btn6&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//has(selector)  é€‰æ‹©å™¨å­—ç¬¦ä¸²    æ˜¯å¦åŒ…å«selector</span></span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">has</span>(<span class="string">&quot;.mini&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(7)not()é€‰æ‹©divä¸­classä¸ä¸ºoneçš„</span></span><br><span class="line">    $(<span class="string">&quot;#btn7&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//not(selector)  é€‰æ‹©ä¸æ˜¯selectorçš„å…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;div&quot;</span>).<span class="title function_">not</span>(<span class="string">&quot;.one&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(8)children()åœ¨bodyä¸­é€‰æ‹©æ‰€æœ‰classä¸ºoneçš„divå­å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn8&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//children()  é€‰å‡ºæ‰€æœ‰çš„å­å…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;body&quot;</span>).<span class="title function_">children</span>(<span class="string">&quot;div.one&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//(9)find()åœ¨bodyä¸­é€‰æ‹©æ‰€æœ‰classä¸ºminiçš„divå…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn9&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//find()  é€‰å‡ºæ‰€æœ‰çš„åä»£å…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;body&quot;</span>).<span class="title function_">find</span>(<span class="string">&quot;div.mini&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(10)next() #oneçš„ä¸‹ä¸€ä¸ªdiv</span></span><br><span class="line">    $(<span class="string">&quot;#btn10&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//next()  é€‰æ‹©ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;#one&quot;</span>).<span class="title function_">next</span>(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(11)nextAll() #oneåé¢æ‰€æœ‰çš„spanå…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn11&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//nextAll()   é€‰å‡ºåé¢æ‰€æœ‰çš„å…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;#one&quot;</span>).<span class="title function_">nextAll</span>(<span class="string">&quot;span&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(12)nextUntil() #oneå’Œspanä¹‹é—´çš„å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn12&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        $(<span class="string">&quot;#one&quot;</span>).<span class="title function_">nextUntil</span>(<span class="string">&quot;span&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(13)parent() .miniçš„çˆ¶å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn13&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="string">&quot;.mini&quot;</span>).<span class="title function_">parent</span>().<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(14)prev() #twoçš„ä¸Šä¸€ä¸ªdiv</span></span><br><span class="line">    $(<span class="string">&quot;#btn14&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//prev()</span></span><br><span class="line">        $(<span class="string">&quot;#two&quot;</span>).<span class="title function_">prev</span>(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(15)prevAll() spanå‰é¢æ‰€æœ‰çš„div</span></span><br><span class="line">    $(<span class="string">&quot;#btn15&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//prevAll()   é€‰å‡ºå‰é¢æ‰€æœ‰çš„å…ƒç´ </span></span><br><span class="line">        $(<span class="string">&quot;span&quot;</span>).<span class="title function_">prevAll</span>(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(16)prevUntil() spanå‘å‰ç›´åˆ°#oneçš„å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn16&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//prevUntil(exp)   æ‰¾åˆ°ä¹‹å‰æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ ç›´åˆ°æ‰¾åˆ°expåœæ­¢</span></span><br><span class="line">        $(<span class="string">&quot;span&quot;</span>).<span class="title function_">prevUntil</span>(<span class="string">&quot;#one&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//(17)siblings() #twoçš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn17&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//siblings()    æ‰¾åˆ°æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ ï¼ŒåŒ…æ‹¬å‰é¢çš„å’Œåé¢çš„</span></span><br><span class="line">        $(<span class="string">&quot;#two&quot;</span>).<span class="title function_">siblings</span>().<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//(18)add()é€‰æ‹©æ‰€æœ‰çš„ span å…ƒç´ å’Œidä¸ºtwoçš„å…ƒç´ </span></span><br><span class="line">    $(<span class="string">&quot;#btn18&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//   $(&quot;span,#two,.mini,#one&quot;)</span></span><br><span class="line">        $(<span class="string">&quot;span&quot;</span>).<span class="title function_">add</span>(<span class="string">&quot;#two&quot;</span>)</span><br><span class="line">           .<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, <span class="string">&quot;#bfa&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="jQueryå±æ€§æ“ä½œ"><a href="#jQueryå±æ€§æ“ä½œ" class="headerlink" title="jQueryå±æ€§æ“ä½œ"></a>jQueryå±æ€§æ“ä½œ</h3><p>html() å®ƒå¯ä»¥è®¾ç½®å’Œè·å–èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹ã€‚ è·Ÿ dom å±æ€§ innerHTML ä¸€æ ·ã€‚</p><p>text() å®ƒå¯ä»¥è®¾ç½®å’Œè·å–èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ã€‚ è·Ÿ dom å±æ€§ innerText ä¸€æ ·ã€‚</p><p>val() å®ƒå¯ä»¥è®¾ç½®å’Œè·å–è¡¨å•é¡¹çš„ value å±æ€§å€¼ã€‚ è·Ÿ dom å±æ€§ value ä¸€æ ·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">// ä¸ä¼ å‚æ•°ï¼Œæ˜¯è·å–ï¼Œä¼ é€’å‚æ•°æ˜¯è®¾ç½®</span></span><br><span class="line">          <span class="comment">// alert( $(&quot;div&quot;).html() );// è·å–</span></span><br><span class="line">          <span class="comment">// $(&quot;div&quot;).html(&quot;&lt;h1&gt;æˆ‘æ˜¯divä¸­çš„æ ‡é¢˜ 1&lt;/h1&gt;&quot;);// è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// ä¸ä¼ å‚æ•°ï¼Œæ˜¯è·å–ï¼Œä¼ é€’å‚æ•°æ˜¯è®¾ç½®</span></span><br><span class="line">          <span class="comment">// alert( $(&quot;div&quot;).text() ); // è·å–</span></span><br><span class="line">          <span class="comment">// $(&quot;div&quot;).text(&quot;&lt;h1&gt;æˆ‘æ˜¯divä¸­çš„æ ‡é¢˜ 1&lt;/h1&gt;&quot;); // è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// ä¸ä¼ å‚æ•°ï¼Œæ˜¯è·å–ï¼Œä¼ é€’å‚æ•°æ˜¯è®¾ç½®</span></span><br><span class="line">          $(<span class="string">&quot;button&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">              <span class="title function_">alert</span>($(<span class="string">&quot;#username&quot;</span>).<span class="title function_">val</span>());<span class="comment">//è·å–</span></span><br><span class="line">              $(<span class="string">&quot;#username&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;è¶…çº§ç¨‹åºçŒ¿&quot;</span>);<span class="comment">// è®¾ç½®</span></span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure><p>val æ–¹æ³•åŒæ—¶è®¾ç½®å¤šä¸ªè¡¨å•é¡¹çš„é€‰ä¸­çŠ¶æ€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            // æ‰¹é‡æ“ä½œå•é€‰</span></span><br><span class="line"><span class="comment">            $(&quot;:radio&quot;).val([&quot;radio2&quot;]);</span></span><br><span class="line"><span class="comment">            // æ‰¹é‡æ“ä½œç­›é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="comment">            $(&quot;:checkbox&quot;).val([&quot;checkbox3&quot;,&quot;checkbox2&quot;]);</span></span><br><span class="line"><span class="comment">            // æ‰¹é‡æ“ä½œå¤šé€‰çš„ä¸‹æ‹‰æ¡†é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="comment">            $(&quot;#multiple&quot;).val([&quot;mul2&quot;,&quot;mul3&quot;,&quot;mul4&quot;]);</span></span><br><span class="line"><span class="comment">            // æ“ä½œå•é€‰çš„ä¸‹æ‹‰æ¡†é€‰ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="comment">            $(&quot;#single&quot;).val([&quot;sin2&quot;]);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">            $(<span class="string">&quot;#multiple,#single,:radio,:checkbox&quot;</span>).<span class="title function_">val</span>([<span class="string">&quot;radio2&quot;</span>,<span class="string">&quot;checkbox1&quot;</span>,<span class="string">&quot;checkbox3&quot;</span>,<span class="string">&quot;mul1&quot;</span>,<span class="string">&quot;mul4&quot;</span>,<span class="string">&quot;sin3&quot;</span>]);</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><p>attr() å¯ä»¥è®¾ç½®å’Œè·å–å±æ€§çš„å€¼ï¼Œä¸æ¨èæ“ä½œ checkedã€readOnlyã€selectedã€disabled ç­‰ç­‰</p><p>â€‹attr æ–¹æ³•è¿˜å¯ä»¥æ“ä½œéæ ‡å‡†çš„å±æ€§ã€‚æ¯”å¦‚è‡ªå®šä¹‰å±æ€§ï¼šabc,bbj</p><p>prop() å¯ä»¥è®¾ç½®å’Œè·å–å±æ€§çš„å€¼,åªæ¨èæ“ä½œ checkedã€readOnlyã€selectedã€disabled ç­‰</p><h3 id="jQueryç»ƒä¹ "><a href="#jQueryç»ƒä¹ " class="headerlink" title="jQueryç»ƒä¹ "></a>jQueryç»ƒä¹ </h3><p>2.å…¨é€‰ï¼Œå…¨ä¸é€‰ï¼Œåé€‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../script/jquery-1.7.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å…¨é€‰æŒ‰é’®å•å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#checkedAllBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;:checkbox&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å…¨ä¸é€‰æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#checkedNoBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;:checkbox&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åé€‰æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#checkedRevBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;:checkbox[name=&#x27;items&#x27;]&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">checked</span> = !<span class="variable language_">this</span>.<span class="property">checked</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//åˆ¤å®šæ˜¯å¦æ»¡é€‰ï¼Œæ“ä½œ å…¨é€‰/å…¨ä¸é€‰ å¤é€‰æ¡†</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> $all = $(<span class="string">&quot;:checkbox[name =&#x27;items&#x27;]&quot;</span>).<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> $selected = $(<span class="string">&quot;:checkbox[name = &#x27;items&#x27;]:checked&quot;</span>).<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#checkedAllBox&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, $all === $selected);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æäº¤æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#sendBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//è·å–é€‰ä¸­çš„å¤é€‰æ¡†çš„æ–‡æœ¬ä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">                 $(<span class="string">&quot;:checkbox[name = &#x27;items&#x27;]:checked&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">                 &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//  å…¨é€‰/å…¨ä¸é€‰å¤é€‰æ¡†ç»‘å®šå•å‡»äº‹ä»¶(å¦™!)</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#checkedAllBox&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;:checkbox[name = &#x27;items&#x27;]&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>,<span class="variable language_">this</span>.<span class="property">checked</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»™å…¨éƒ¨çƒç±»ç»‘å®šå•å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;:checkbox[name = &#x27;items&#x27;]&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//åˆ¤å®šæ˜¯å¦æ»¡é€‰ï¼Œæ“ä½œ å…¨é€‰/å…¨ä¸é€‰ å¤é€‰æ¡†</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> $all = $(<span class="string">&quot;:checkbox[name =&#x27;items&#x27;]&quot;</span>).<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> $selected = $(<span class="string">&quot;:checkbox[name = &#x27;items&#x27;]:checked&quot;</span>).<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#checkedAllBox&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, $all === $selected);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ä½ çˆ±å¥½çš„è¿åŠ¨æ˜¯ï¼Ÿ<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkedAllBox&quot;</span>/&gt;</span>å…¨é€‰/å…¨ä¸é€‰</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;items&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¶³çƒ&quot;</span>/&gt;</span>è¶³çƒ</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;items&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¯®çƒ&quot;</span>/&gt;</span>ç¯®çƒ</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;items&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¾½æ¯›çƒ&quot;</span>/&gt;</span>ç¾½æ¯›çƒ</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;items&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¹’ä¹“çƒ&quot;</span>/&gt;</span>ä¹’ä¹“çƒ</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkedAllBtn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å…¨ã€€é€‰&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkedNoBtn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å…¨ä¸é€‰&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkedRevBtn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åã€€é€‰&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sendBtn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æã€€äº¤&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Domçš„å¢åˆ æ”¹"><a href="#Domçš„å¢åˆ æ”¹" class="headerlink" title="Domçš„å¢åˆ æ”¹"></a>Domçš„å¢åˆ æ”¹</h3><h4 id="å†…éƒ¨æ’å…¥ï¼š"><a href="#å†…éƒ¨æ’å…¥ï¼š" class="headerlink" title="å†…éƒ¨æ’å…¥ï¼š"></a>å†…éƒ¨æ’å…¥ï¼š</h4><p>appendTo() a.appendTo(b) æŠŠ a æ’å…¥åˆ° b å­å…ƒç´ æœ«å°¾ï¼Œæˆä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ <br>prependTo()   a.prependTo(b)    æŠŠ a æ’åˆ° b æ‰€æœ‰å­å…ƒç´ å‰é¢ï¼Œæˆä¸ºç¬¬ä¸€ä¸ªå­å…ƒç´ **</p><h4 id="å¤–éƒ¨æ’å…¥ï¼š"><a href="#å¤–éƒ¨æ’å…¥ï¼š" class="headerlink" title="å¤–éƒ¨æ’å…¥ï¼š"></a>å¤–éƒ¨æ’å…¥ï¼š</h4><p>insertAfter()a.insertAfter(b) å¾—åˆ° ba<br>insertBefore() a.insertBefore(b)  å¾—åˆ° ab**</p><h4 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢:"></a>æ›¿æ¢:</h4><p>replaceWith() a.replaceWith(b) ç”¨ b æ›¿æ¢æ‰ a ,å¹¶ä¸”å¤šä¸ªaåªè¢«æ›¿æ¢æˆ1ä¸ªb<br>replaceAll() a.replaceAll(b) ç”¨ a æ›¿æ¢æ‰æ‰€æœ‰ bï¼Œå¤šä¸ªbå¯ä»¥è¢«å¤šä¸ªaæ›¿æ¢æ‰**</p><h4 id="åˆ é™¤ï¼š"><a href="#åˆ é™¤ï¼š" class="headerlink" title="åˆ é™¤ï¼š"></a>åˆ é™¤ï¼š</h4><p>remove() a.remove(); åˆ é™¤ a æ ‡ç­¾<br>empty()    a.empty();  æ¸…ç©º a æ ‡ç­¾é‡Œçš„å†…å®¹**</p><h3 id="jQueryç»ƒä¹ äºŒ"><a href="#jQueryç»ƒä¹ äºŒ" class="headerlink" title="jQueryç»ƒä¹ äºŒ"></a>jQueryç»ƒä¹ äºŒ</h3><h4 id="2-ä»å·¦åˆ°å³ï¼Œä»å³åˆ°å·¦"><a href="#2-ä»å·¦åˆ°å³ï¼Œä»å³åˆ°å·¦" class="headerlink" title="2.ä»å·¦åˆ°å³ï¼Œä»å³åˆ°å·¦"></a>2.ä»å·¦åˆ°å³ï¼Œä»å³åˆ°å·¦</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// ç»™é€‰ä¸­æ·»åŠ åˆ°å³è¾¹æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button:eq(0)&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">//è·å–é€‰ä¸­çš„é€‰é¡¹</span></span><br><span class="line"><span class="comment">//æŠŠé€‰ä¸­çš„é€‰é¡¹appendToåˆ° å³è¾¹</span></span><br><span class="line">$(<span class="string">&quot;select:eq(0) option:selected&quot;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;select:eq(1)&quot;</span>));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™ å…¨éƒ¨æ·»åŠ åˆ°å³è¾¹(ç¬¬äºŒä¸ªæŒ‰é’®) æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button:eq(1)&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;select:eq(0) option&quot;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;select:eq(1)&quot;</span>));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™ é€‰ä¸­æ·»åŠ åˆ°å·¦è¾¹(ç¬¬ä¸‰ä¸ªæŒ‰é’®) æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button:eq(2)&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;select:eq(1) option:selected&quot;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;select:eq(0)&quot;</span>));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™ å…¨éƒ¨æ·»åŠ åˆ°å·¦è¾¹(ç¬¬å››ä¸ªæŒ‰é’®) æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button:eq(3)&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">$(<span class="string">&quot;select:eq(1) option&quot;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;select:eq(0)&quot;</span>));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€æ·»åŠ ã€åˆ é™¤è¡¨æ ¼è®°å½•ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#åŠ¨æ€æ·»åŠ ã€åˆ é™¤è¡¨æ ¼è®°å½•ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="åŠ¨æ€æ·»åŠ ã€åˆ é™¤è¡¨æ ¼è®°å½•ï¼ˆï¼ï¼ï¼ï¼‰"></a>åŠ¨æ€æ·»åŠ ã€åˆ é™¤è¡¨æ ¼è®°å½•ï¼ˆï¼ï¼ï¼ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªåˆ é™¤å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> deleteFun = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// åœ¨äº‹ä»¶å“åº”çš„functionå‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªthiså¯¹è±¡ã€‚è¿™ä¸ªthiså¯¹è±¡æ˜¯å½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„domå¯¹è±¡ã€‚</span></span><br><span class="line">        <span class="keyword">var</span> $trObj = $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">parent</span>();</span><br><span class="line">        <span class="keyword">var</span> $name = $trObj.<span class="title function_">find</span>(<span class="string">&quot;td:first&quot;</span>).<span class="title function_">text</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * confirm æ˜¯JavaScriptè¯­è¨€æä¾›çš„ä¸€ä¸ªç¡®è®¤æç¤ºæ¡†å‡½æ•°ã€‚ä½ ç»™å®ƒä¼ ä»€ä¹ˆï¼Œå®ƒå°±æç¤ºä»€ä¹ˆ&lt;br/&gt;</span></span><br><span class="line"><span class="comment">         * å½“ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®šï¼Œå°±è¿”å›trueã€‚å½“ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆï¼Œå°±è¿”å›false</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">confirm</span>(<span class="string">&quot;ä½ ç¡®å®šè¦åˆ é™¤[&quot;</span> + $name + <span class="string">&quot;]è¿™ä¸ªæ•°æ®å—&quot;</span>)) &#123;</span><br><span class="line">            $trObj.<span class="title function_">remove</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// return false å¯ä»¥é˜»æ­¢é»˜è®¤è¡Œä¸º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ è®°å½•</span></span><br><span class="line">    $(<span class="string">&quot;#addEmpButton&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//è·å–æ·»åŠ è¡¨æ ¼çš„è¾“å…¥æ¡†ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">var</span> name = $(<span class="string">&quot;#empName&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">        <span class="keyword">var</span> email = $(<span class="string">&quot;#email&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">        <span class="keyword">var</span> salary = $(<span class="string">&quot;#salary&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¡¨æ ¼æ·»åŠ åˆ°tableè¡¨æ ¼æœ€å</span></span><br><span class="line">        <span class="keyword">var</span> $trObj = $(<span class="string">&quot;&lt;tr&gt;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;td&gt;&quot;</span> + name + <span class="string">&quot;&lt;/td&gt;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;td&gt;&quot;</span> + email + <span class="string">&quot;&lt;/td&gt;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;td&gt;&quot;</span> + salary + <span class="string">&quot;&lt;/td&gt;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;td&gt;&lt;a href=\&quot;deleteEmp?id=001\&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;/tr&gt;&quot;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;#employeeTable&quot;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ è®°å½•åè¦ç»™deleteç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">        <span class="comment">// ç»™æ·»åŠ çš„è¡Œçš„aæ ‡ç­¾ç»‘ä¸Šäº‹ä»¶</span></span><br><span class="line">        $trObj.<span class="title function_">find</span>(<span class="string">&quot;a&quot;</span>).<span class="title function_">click</span>(deleteFun);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤è®°å½•</span></span><br><span class="line">    $(<span class="string">&quot;a&quot;</span>).<span class="title function_">click</span>(deleteFun);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="CSSæ ·å¼æ“ä½œ"><a href="#CSSæ ·å¼æ“ä½œ" class="headerlink" title="CSSæ ·å¼æ“ä½œ"></a>CSSæ ·å¼æ“ä½œ</h3><p>addClass() æ·»åŠ æ ·å¼</p><p>removeClass() åˆ é™¤æ ·å¼</p><p>toggleClass() æœ‰å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ æ ·å¼ã€‚</p><p>offset() è·å–å’Œè®¾ç½®å…ƒç´ çš„åæ ‡ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css">//css</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">height</span>:<span class="number">260px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.border</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border</span>: <span class="number">2px</span> white solid;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.redDiv</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.blackDiv</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border</span>: <span class="number">5px</span> blue solid;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;script/jquery-1.7.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">CSS</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">css(name|pro|[,val|fn])       è¯»å†™åŒ¹é…å…ƒç´ çš„æ ·å¼å±æ€§ã€‚ </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">a.css(&#x27;color&#x27;)å–å‡ºaå…ƒç´ çš„color</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">a.css(&#x27;color&#x27;,&quot;red&quot;)è®¾ç½®aå…ƒç´ çš„colorä¸ºred</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">CSS ç±»</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">addClass(class|fn) ä¸ºå…ƒç´ æ·»åŠ ä¸€ä¸ªclasså€¼;&lt;div class=&quot;mini big&quot;&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">removeClass([class|fn]) åˆ é™¤å…ƒç´ çš„classå€¼ï¼›ä¼ é€’ä¸€ä¸ªå…·ä½“çš„classå€¼ï¼Œå°±ä¼šåˆ é™¤å…·ä½“çš„æŸä¸ªclass</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">a.removeClass()ï¼šç§»é™¤æ‰€æœ‰çš„classå€¼</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">**/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> $divEle = $(<span class="string">&#x27;div:first&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#btn01&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//addClass() - å‘è¢«é€‰å…ƒç´ æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªç±»</span></span></span><br><span class="line"><span class="language-javascript">$divEle.<span class="title function_">addClass</span>(<span class="string">&quot;redDiv blackDiv&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#btn02&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//removeClass() - ä»è¢«é€‰å…ƒç´ åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç±» </span></span></span><br><span class="line"><span class="language-javascript">$divEle.<span class="title function_">removeClass</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#btn03&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//toggleClass() - å¯¹è¢«é€‰å…ƒç´ è¿›è¡Œæ·»åŠ /åˆ é™¤ç±»çš„åˆ‡æ¢æ“ä½œ </span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//åˆ‡æ¢å°±æ˜¯å¦‚æœå…·æœ‰è¯¥ç±»é‚£ä¹ˆåˆ é™¤ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆæ·»åŠ ä¸Š</span></span></span><br><span class="line"><span class="language-javascript">$divEle.<span class="title function_">toggleClass</span>(<span class="string">&quot;redDiv&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#btn04&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//offset() - è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ ç›¸å¯¹äºæ–‡æ¡£çš„ä½ç½®ã€‚</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> os = $divEle.<span class="title function_">offset</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//æ³¨æ„é€šè¿‡offsetè·å–åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§topè¡¨ç¤ºé¡¶è¾¹è·ï¼Œleftè¡¨ç¤ºå·¦è¾¹è·</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;é¡¶è¾¹è·ï¼š&quot;</span>+os.<span class="property">top</span>+<span class="string">&quot; å·¦è¾¹è·ï¼š&quot;</span>+os.<span class="property">left</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//è°ƒç”¨offsetè®¾ç½®å…ƒç´ ä½ç½®æ—¶ï¼Œä¹Ÿéœ€è¦ä¼ é€’ä¸€ä¸ªjså¯¹è±¡ï¼Œå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§topå’Œleft</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//offset(&#123; top: 10, left: 30 &#125;);</span></span></span><br><span class="line"><span class="language-javascript"> $divEle.<span class="title function_">offset</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"> <span class="attr">top</span>:<span class="number">50</span>,</span></span><br><span class="line"><span class="language-javascript"> <span class="attr">left</span>:<span class="number">60</span></span></span><br><span class="line"><span class="language-javascript"> &#125;); </span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="jQueryåŠ¨ç”»"><a href="#jQueryåŠ¨ç”»" class="headerlink" title="jQueryåŠ¨ç”»"></a>jQueryåŠ¨ç”»</h3><h4 id="åŸºæœ¬åŠ¨ç”»"><a href="#åŸºæœ¬åŠ¨ç”»" class="headerlink" title="åŸºæœ¬åŠ¨ç”»"></a>åŸºæœ¬åŠ¨ç”»</h4><p>show() å°†éšè—çš„å…ƒç´ æ˜¾ç¤º<br>hide() å°†å¯è§çš„å…ƒç´ éšè—ã€‚<br>toggle() å¯è§å°±éšè—ï¼Œä¸å¯è§å°±æ˜¾ç¤ºã€‚</p><ul><li><p>ä»¥ä¸ŠåŠ¨ç”»æ–¹æ³•éƒ½å¯ä»¥æ·»åŠ å‚æ•°ã€‚</p><ul><li><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŠ¨ç”» æ‰§è¡Œçš„æ—¶é•¿ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŠ¨ç”»çš„å›è°ƒå‡½æ•° (åŠ¨ç”»å®Œæˆåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°)</p></li></ul></li></ul><h4 id="æ·¡å…¥æ·¡å‡ºåŠ¨ç”»"><a href="#æ·¡å…¥æ·¡å‡ºåŠ¨ç”»" class="headerlink" title="æ·¡å…¥æ·¡å‡ºåŠ¨ç”»"></a>æ·¡å…¥æ·¡å‡ºåŠ¨ç”»</h4><p>fadeIn() æ·¡å…¥ï¼ˆæ…¢æ…¢å¯è§ï¼‰</p><p>fadeOut() æ·¡å‡ºï¼ˆæ…¢æ…¢æ¶ˆå¤±ï¼‰</p><p>fadeTo() åœ¨æŒ‡å®šæ—¶é•¿å†…æ…¢æ…¢çš„å°†é€æ˜åº¦ä¿®æ”¹åˆ°æŒ‡å®šçš„å€¼ã€‚0 é€æ˜ï¼Œ1 å®Œæˆå¯è§ï¼Œ0.5 åŠé€æ˜</p><p>fadeToggle() æ·¡å…¥&#x2F;æ·¡å‡º åˆ‡æ¢</p><ul><li><p>ä»¥ä¸ŠåŠ¨ç”»æ–¹æ³•éƒ½å¯ä»¥æ·»åŠ å‚æ•°ã€‚</p><ul><li><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŠ¨ç”» æ‰§è¡Œçš„æ—¶é•¿ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŠ¨ç”»çš„å›è°ƒå‡½æ•° (åŠ¨ç”»å®Œæˆåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°)</p></li></ul></li></ul><h4 id="ç»ƒä¹ -06ã€CSS-åŠ¨ç”»-å“ç‰Œå±•"><a href="#ç»ƒä¹ -06ã€CSS-åŠ¨ç”»-å“ç‰Œå±•" class="headerlink" title="ç»ƒä¹  06ã€CSS_åŠ¨ç”» å“ç‰Œå±•"></a>ç»ƒä¹  06ã€CSS_åŠ¨ç”» å“ç‰Œå±•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯¦è§ideaæ¨¡å—</span><br></pre></td></tr></table></figure><h3 id="jQueryäº‹ä»¶æ“ä½œ"><a href="#jQueryäº‹ä»¶æ“ä½œ" class="headerlink" title="jQueryäº‹ä»¶æ“ä½œ"></a>jQueryäº‹ä»¶æ“ä½œ</h3><h4 id="function-å’Œ-window-onload-x3D-function-çš„åŒºåˆ«ï¼Ÿ"><a href="#function-å’Œ-window-onload-x3D-function-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="$( function(){} );  å’Œ  window.onload &#x3D; function(){}  çš„åŒºåˆ«ï¼Ÿ"></a>$( function(){} );  å’Œ  window.onload &#x3D; function(){}  çš„åŒºåˆ«ï¼Ÿ</h4><p><strong>ä»–ä»¬åˆ†åˆ«æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿ</strong><br>1ã€jQuery çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åæ˜¯æµè§ˆå™¨çš„å†…æ ¸è§£æå®Œé¡µé¢çš„æ ‡ç­¾åˆ›å»ºå¥½ DOM å¯¹è±¡ä¹‹åå°±ä¼šé©¬ä¸Šæ‰§è¡Œã€‚</p><p>2ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œé™¤äº†è¦ç­‰æµè§ˆå™¨å†…æ ¸è§£æå®Œæ ‡ç­¾åˆ›å»ºå¥½ DOM å¯¹è±¡ï¼Œ</p><p>â€‹è¿˜è¦ç­‰æ ‡ç­¾æ˜¾ç¤ºæ—¶éœ€è¦çš„å†…å®¹åŠ è½½å®Œæˆã€‚</p><p><strong>ä»–ä»¬è§¦å‘çš„é¡ºåºï¼Ÿ</strong><br>1ã€jQuery é¡µé¢åŠ è½½å®Œæˆä¹‹åå…ˆæ‰§è¡Œ</p><p>2ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹å</p><p><strong>ä»–ä»¬æ‰§è¡Œçš„æ¬¡æ•°ï¼Ÿ</strong><br>1ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œåªä¼šæ‰§è¡Œæœ€åä¸€æ¬¡çš„èµ‹å€¼å‡½æ•°ï¼ˆå‰é¢çš„éƒ½è¢«è¦†ç›–äº†jsæ²¡æœ‰é‡è½½ï¼‰ã€‚</p><p>2ã€jQuery çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åæ˜¯å…¨éƒ¨æŠŠæ³¨å†Œçš„ function å‡½æ•°ï¼Œä¾æ¬¡é¡ºåºå…¨éƒ¨æ‰§è¡Œã€‚</p><h4 id="jQueryä¸­å…¶ä»–äº‹ä»¶çš„å¤„ç†æ–¹æ³•"><a href="#jQueryä¸­å…¶ä»–äº‹ä»¶çš„å¤„ç†æ–¹æ³•" class="headerlink" title="jQueryä¸­å…¶ä»–äº‹ä»¶çš„å¤„ç†æ–¹æ³•"></a>jQueryä¸­å…¶ä»–äº‹ä»¶çš„å¤„ç†æ–¹æ³•</h4><p><code>click() </code>å®ƒå¯ä»¥ç»‘å®šå•å‡»äº‹ä»¶ï¼Œä»¥åŠè§¦å‘å•å‡»äº‹ä»¶</p><p><code>mouseover()</code> é¼ æ ‡ç§»å…¥äº‹ä»¶</p><p><code>mouseout() </code>  é¼ æ ‡ç§»å‡ºäº‹ä»¶</p><p><code>bind() </code>   å¯ä»¥ç»™å…ƒç´ ä¸€æ¬¡æ€§ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶ã€‚</p><p><strong>ä¾‹ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;h5&quot;).bind(&quot;click mouseover mouseout&quot;,function () &#123; //functionä¹‹é—´å¯ä»¥ä¼ ä¸€ä¸ªæˆ–å¤šä¸ªç»‘å®šäº‹ä»¶</span><br><span class="line">      console.log(&quot;è¿™æ˜¯bindç»‘å®šçš„äº‹ä»¶&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>one() </code>ä½¿ç”¨ä¸Šè·Ÿ bind ä¸€æ ·ã€‚ä½†æ˜¯ one æ–¹æ³•ç»‘å®šçš„äº‹ä»¶åªä¼šå“åº”ä¸€æ¬¡ã€‚</p><p><code>unbind() </code>è·Ÿ bind æ–¹æ³•ç›¸åçš„æ“ä½œï¼Œè§£é™¤äº‹ä»¶çš„ç»‘å®š</p><p><code>live() </code>ä¹Ÿæ˜¯ç”¨æ¥ç»‘å®šäº‹ä»¶ã€‚å®ƒå¯ä»¥ç”¨æ¥ç»‘å®šé€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰å…ƒç´ çš„äº‹ä»¶ã€‚</p><p>â€‹          å“ªæ€•è¿™ä¸ªå…ƒç´ æ˜¯åé¢åŠ¨æ€åˆ›å»ºå‡ºæ¥çš„ä¹Ÿæœ‰æ•ˆ</p><h4 id="äº‹ä»¶çš„å†’æ³¡"><a href="#äº‹ä»¶çš„å†’æ³¡" class="headerlink" title="äº‹ä»¶çš„å†’æ³¡"></a>äº‹ä»¶çš„å†’æ³¡</h4><p><strong>ä»€ä¹ˆæ˜¯äº‹ä»¶çš„å†’æ³¡ï¼Ÿ</strong></p><p>äº‹ä»¶çš„å†’æ³¡æ˜¯æŒ‡ï¼Œçˆ¶å­å…ƒç´ åŒæ—¶ç›‘å¬åŒä¸€ä¸ªäº‹ä»¶ã€‚å½“è§¦å‘å­å…ƒç´ çš„äº‹ä»¶çš„æ—¶å€™ï¼Œ</p><p>åŒä¸€ä¸ªäº‹ä»¶ä¹Ÿè¢«ä¼ é€’åˆ°äº†çˆ¶å…ƒç´ çš„äº‹ä»¶é‡Œå» å“åº”ã€‚</p><p><strong>é‚£ä¹ˆå¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å‘¢ï¼Ÿ</strong></p><p>åœ¨å­å…ƒç´ äº‹ä»¶å‡½æ•°ä½“å†…ï¼Œ<code>return false;  </code>   å¯ä»¥é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ä¼ é€’ã€‚**</p><h4 id="JavaScriptäº‹ä»¶å¯¹è±¡"><a href="#JavaScriptäº‹ä»¶å¯¹è±¡" class="headerlink" title="JavaScriptäº‹ä»¶å¯¹è±¡"></a>JavaScriptäº‹ä»¶å¯¹è±¡</h4><p>äº‹ä»¶å¯¹è±¡ï¼Œæ˜¯å°è£…æœ‰è§¦å‘çš„äº‹ä»¶ä¿¡æ¯çš„ä¸€ä¸ª javascript å¯¹è±¡ã€‚<br>æˆ‘ä»¬é‡ç‚¹å…³å¿ƒçš„æ˜¯æ€ä¹ˆæ‹¿åˆ°è¿™ä¸ª javascript çš„äº‹ä»¶å¯¹è±¡ã€‚ä»¥åŠä½¿ç”¨ã€‚</p><p><strong>å¦‚ä½•è·å–å‘¢ javascript äº‹ä»¶å¯¹è±¡å‘¢ï¼Ÿ</strong><br>åœ¨ç»™å…ƒç´ ç»‘å®šäº‹ä»¶çš„æ—¶å€™ï¼Œåœ¨äº‹ä»¶çš„ function( event ) å‚æ•°åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œ</p><p>è¿™ä¸ªå‚æ•°åï¼Œæˆ‘ä»¬ä¹ æƒ¯å–åä¸º eventã€‚<br>è¿™ä¸ª event å°±æ˜¯ javascript ä¼ é€’å‚äº‹ä»¶å¤„ç†å‡½æ•°çš„äº‹ä»¶å¯¹è±¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//1.åŸç”Ÿjavascriptè·å– äº‹ä»¶å¯¹è±¡</span><br><span class="line">/*window.onload = function () &#123;</span><br><span class="line">   document.getElementById(&quot;areaDiv&quot;).onclick = function (event) &#123;</span><br><span class="line">      console.log(event);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;*/</span><br><span class="line">//2.JQueryä»£ç è·å– äº‹ä»¶å¯¹è±¡</span><br><span class="line">/*$(function () &#123;</span><br><span class="line">   $(&quot;#areaDiv&quot;).click(function (event) &#123;</span><br><span class="line">         console.log(event);</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)*/</span><br><span class="line">//3.ä½¿ç”¨bindåŒæ—¶å¯¹å¤šä¸ªäº‹ä»¶ç»‘å®šåŒä¸€ä¸ªå‡½æ•°ã€‚æ€ä¹ˆè·å–å½“å‰æ“ä½œæ˜¯ä»€ä¹ˆäº‹ä»¶ã€‚</span><br><span class="line">   $(function () &#123;</span><br><span class="line">      $(&quot;#areaDiv&quot;).bind(&quot;mouseover mouseout&quot;,function (event) &#123;</span><br><span class="line">         if (event.type==&quot;mouseover&quot;)&#123;</span><br><span class="line">            console.log(&quot;bindç»‘å®šé¼ æ ‡ç§»å…¥äº‹ä»¶&quot;)</span><br><span class="line">         &#125;else &#123;</span><br><span class="line">            console.log(&quot;bindç»‘å®šé¼ æ ‡ç§»å‡ºäº‹ä»¶&quot;)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><h4 id="ç»ƒä¹ -äº‹ä»¶-å›¾ç‰‡è·Ÿéš"><a href="#ç»ƒä¹ -äº‹ä»¶-å›¾ç‰‡è·Ÿéš" class="headerlink" title="ç»ƒä¹  äº‹ä»¶ å›¾ç‰‡è·Ÿéš"></a>ç»ƒä¹  äº‹ä»¶ å›¾ç‰‡è·Ÿéš</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   $(<span class="string">&quot;#small&quot;</span>).<span class="title function_">bind</span>(<span class="string">&quot;mouseover mouseout mousemove&quot;</span>,<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">type</span>==<span class="string">&quot;mouseover&quot;</span>)&#123;</span><br><span class="line">         $(<span class="string">&quot;#showBig&quot;</span>).<span class="title function_">show</span>()</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">type</span>==<span class="string">&quot;mouseout&quot;</span>)&#123;</span><br><span class="line">         $(<span class="string">&quot;#showBig&quot;</span>).<span class="title function_">hide</span>()</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">type</span>==<span class="string">&quot;mousemove&quot;</span>) &#123;</span><br><span class="line">         $(<span class="string">&quot;#showBig&quot;</span>).<span class="title function_">offset</span>(&#123;<span class="comment">//pageXå’Œ pageYéƒ½æ˜¯ eventçš„å±æ€§</span></span><br><span class="line">            <span class="attr">left</span>: event.<span class="property">pageX</span>+<span class="number">10</span>,</span><br><span class="line">            <span class="attr">top</span>:event.<span class="property">pageY</span>+<span class="number">10</span></span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="xml"><a href="#xml" class="headerlink" title="xml"></a>xml</h2><p>ï¼ˆå…¶ä»–è¯¦è§ç¬”è®°ï¼‰</p><h3 id="xmlè§£ææŠ€æœ¯ä»‹ç»"><a href="#xmlè§£ææŠ€æœ¯ä»‹ç»" class="headerlink" title="xmlè§£ææŠ€æœ¯ä»‹ç»"></a>xmlè§£ææŠ€æœ¯ä»‹ç»</h3><p>ç¬¬ä¸‰æ–¹çš„è§£æï¼š</p><p>jdom åœ¨ dom åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£… ã€</p><p>dom4j åˆå¯¹ jdom è¿›è¡Œäº†å°è£…ã€‚</p><p>pull ä¸»è¦ç”¨åœ¨ Android æ‰‹æœºå¼€å‘ï¼Œæ˜¯åœ¨è·Ÿ sax éå¸¸ç±»ä¼¼éƒ½æ˜¯äº‹ä»¶æœºåˆ¶è§£æ xml æ–‡ä»¶</p><p>è¿™ä¸ª Dom4j å®ƒæ˜¯ç¬¬ä¸‰æ–¹çš„è§£ææŠ€æœ¯<strong>ã€‚</strong></p><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»™æˆ‘ä»¬æä¾›å¥½çš„ç±»åº“æ‰å¯ä»¥è§£æ xml æ–‡ä»¶ã€‚</p><h3 id="dom4jè§£ææŠ€æœ¯ï¼ˆï¼ï¼ï¼ï¼‰"><a href="#dom4jè§£ææŠ€æœ¯ï¼ˆï¼ï¼ï¼ï¼‰" class="headerlink" title="dom4jè§£ææŠ€æœ¯ï¼ˆï¼ï¼ï¼ï¼‰"></a>dom4jè§£ææŠ€æœ¯ï¼ˆï¼ï¼ï¼ï¼‰</h3><p>éœ€è¦åˆ†å››æ­¥æ“ä½œ:<br>ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡åˆ›å»º SAXReader å¯¹è±¡ã€‚æ¥è¯»å– xml æ–‡ä»¶ï¼Œè·å– Document å¯¹è±¡<br>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡ Document å¯¹è±¡ã€‚æ‹¿åˆ° XML çš„æ ¹å…ƒç´ å¯¹è±¡<br>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡æ ¹å…ƒç´ å¯¹è±¡ã€‚è·å–æ‰€æœ‰çš„ book æ ‡ç­¾å¯¹è±¡<br>ç¬¬å››æ­¥ï¼Œéå†æ¯ä¸ª book æ ‡ç­¾å¯¹è±¡ã€‚ç„¶åè·å–åˆ° book æ ‡ç­¾å¯¹è±¡å†…çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå†é€šè¿‡ getText() æ–¹æ³•æ‹¿åˆ°èµ·å§‹æ ‡ç­¾å’Œç»“<br>æŸæ ‡ç­¾ä¹‹é—´çš„æ–‡æœ¬å†…å®¹&#x2F;elementText()æ–¹æ³•å¯ä»¥ç›´æ¥è·å¾—æŒ‡å®šæ ‡ç­¾æ–‡æœ¬å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.izumi.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dom4jTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªSaxReaderè¾“å…¥æµ,å»è¯»å–xmlé…ç½®æ–‡ä»¶ï¼Œè·å¾—documentå¯¹è±¡</span></span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(<span class="string">&quot;src/books.xml&quot;</span>);</span><br><span class="line">        System.out.println(document);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªSaxReaderè¾“å…¥æµ,å»è¯»å–xmlé…ç½®æ–‡ä»¶ï¼Œè·å¾—documentå¯¹è±¡</span></span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="comment">//å†JUnitæµ‹è¯•ä¸­ï¼Œç›¸å¯¹è·¯å¾„æ˜¯ä»æ¨¡å—åå¼€å§‹ç®—</span></span><br><span class="line">        <span class="comment">//è·å¾— documentå¯¹è±¡</span></span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(<span class="string">&quot;src/books.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//é€šè¿‡ documentå¯¹è±¡è·å–æ ¹å…ƒç´ </span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">rootElement</span> <span class="operator">=</span> document.getRootElement();</span><br><span class="line">        <span class="comment">//element()å’Œ elements()éƒ½æ˜¯é€šè¿‡æ ‡ç­¾åæŸ¥æ‰¾å­å…ƒç´ </span></span><br><span class="line">        List&lt;Element&gt; books = rootElement.elements(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">        <span class="comment">//éå†ï¼Œå¤„ç†æ¯ä¸ªbookæ ‡ç­¾è½¬åŒ–ä¸ºBookç±»</span></span><br><span class="line">        <span class="keyword">for</span> (Element book : books) &#123;</span><br><span class="line">            <span class="comment">//asXml()æ–¹æ³•æŠŠæ ‡ç­¾å¯¹è±¡è½¬åŒ–ä¸ºæ ‡ç­¾å­—ç¬¦ä¸²</span></span><br><span class="line">           <span class="comment">// System.out.println(book.asXML());</span></span><br><span class="line">            <span class="type">Element</span> <span class="variable">nameElement</span> <span class="operator">=</span> book.element(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            <span class="comment">//System.out.println(nameElement.asXML());</span></span><br><span class="line">            <span class="comment">//getTest()å¯ä»¥å¾—åˆ°æ ‡ç­¾æ–‡æœ¬å†…å®¹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nameElement.getText();</span><br><span class="line">            <span class="comment">//System.out.println(text);</span></span><br><span class="line">            <span class="comment">//elementText()æ–¹æ³•å¯ä»¥ç›´æ¥è·å¾—æŒ‡å®šæ ‡ç­¾æ–‡æœ¬å†…å®¹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">author</span> <span class="operator">=</span> book.elementText(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">price</span> <span class="operator">=</span> book.elementText(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">            <span class="comment">//attributeValue()å¯ä»¥è·å¾—æ ‡ç­¾å±æ€§çš„å€¼</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> book.attributeValue(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            <span class="type">Book</span> <span class="variable">book1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(id, name, author, Double.parseDouble(price));</span><br><span class="line">            System.out.println(book1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h2><h3 id="JavaWebåŸºæœ¬ä»‹ç»"><a href="#JavaWebåŸºæœ¬ä»‹ç»" class="headerlink" title="JavaWebåŸºæœ¬ä»‹ç»"></a>JavaWebåŸºæœ¬ä»‹ç»</h3><h4 id="ä»€ä¹ˆæ˜¯JavaWeb"><a href="#ä»€ä¹ˆæ˜¯JavaWeb" class="headerlink" title="ä»€ä¹ˆæ˜¯JavaWeb"></a>ä»€ä¹ˆæ˜¯JavaWeb</h4><p>JavaWeb æ˜¯æŒ‡ï¼Œæ‰€æœ‰é€šè¿‡ Java è¯­è¨€ç¼–å†™å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®çš„ç¨‹åºçš„æ€»ç§°ï¼Œå« JavaWebã€‚</p><p>JavaWeb æ˜¯åŸºäºè¯·æ±‚å’Œå“åº”æ¥å¼€å‘çš„ã€‚**</p><h4 id="ä»€ä¹ˆæ˜¯è¯·æ±‚"><a href="#ä»€ä¹ˆæ˜¯è¯·æ±‚" class="headerlink" title="ä»€ä¹ˆæ˜¯è¯·æ±‚"></a>ä»€ä¹ˆæ˜¯è¯·æ±‚</h4><p>è¯·æ±‚æ˜¯æŒ‡å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œå«è¯·æ±‚request</p><h4 id="ä»€ä¹ˆæ˜¯å“åº”"><a href="#ä»€ä¹ˆæ˜¯å“åº”" class="headerlink" title="ä»€ä¹ˆæ˜¯å“åº”"></a>ä»€ä¹ˆæ˜¯å“åº”</h4><p>å“åº”æ˜¯æŒ‡æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®ï¼Œå«å“åº”response</p><h4 id="è¯·æ±‚å’Œå“åº”çš„å…³ç³»"><a href="#è¯·æ±‚å’Œå“åº”çš„å…³ç³»" class="headerlink" title="è¯·æ±‚å’Œå“åº”çš„å…³ç³»"></a>è¯·æ±‚å’Œå“åº”çš„å…³ç³»</h4><p>è¯·æ±‚å’Œå“åº”æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæœ‰è¯·æ±‚å°±æœ‰å“åº”ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220130110032735.png" alt="image-20220130110032735"></p><h3 id="Webèµ„æºçš„åˆ†ç±»"><a href="#Webèµ„æºçš„åˆ†ç±»" class="headerlink" title="Webèµ„æºçš„åˆ†ç±»"></a>Webèµ„æºçš„åˆ†ç±»</h3><p>web èµ„æºæŒ‰å®ç°çš„æŠ€æœ¯å’Œå‘ˆç°çš„æ•ˆæœçš„ä¸åŒï¼Œåˆåˆ†ä¸ºé™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºä¸¤ç§ã€‚</p><p>é™æ€èµ„æºï¼š htmlã€cssã€jsã€txtã€mp4 è§†é¢‘ , jpg å›¾ç‰‡</p><p>åŠ¨æ€èµ„æºï¼š jsp é¡µé¢ã€Servlet ç¨‹åº</p><h3 id="å¸¸è§çš„WebæœåŠ¡å™¨"><a href="#å¸¸è§çš„WebæœåŠ¡å™¨" class="headerlink" title="å¸¸è§çš„WebæœåŠ¡å™¨"></a>å¸¸è§çš„WebæœåŠ¡å™¨</h3><ul><li><p>Tomcatï¼šç”± Apache ç»„ç»‡æä¾›çš„ä¸€ç§ Web æœåŠ¡å™¨ï¼Œæä¾›å¯¹ jsp å’Œ Servlet çš„æ”¯æŒã€‚å®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„ javaWeb å®¹å™¨ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œä¹Ÿæ˜¯å½“å‰åº”ç”¨æœ€å¹¿çš„ JavaWeb æœåŠ¡å™¨ï¼ˆå…è´¹ï¼‰ã€‚</p></li><li><p>Jbossï¼šæ˜¯ä¸€ä¸ªéµä» JavaEE è§„èŒƒçš„ã€å¼€æ”¾æºä»£ç çš„ã€çº¯ Java çš„ EJB æœåŠ¡å™¨ï¼Œå®ƒæ”¯æŒæ‰€æœ‰çš„ JavaEE è§„èŒƒï¼ˆå…è´¹ï¼‰ã€‚</p></li><li><p>GlassFishï¼š ç”± Oracle å…¬å¸å¼€å‘çš„ä¸€æ¬¾ JavaWeb æœåŠ¡å™¨ï¼Œæ˜¯ä¸€æ¬¾å¼ºå¥çš„å•†ä¸šæœåŠ¡å™¨ï¼Œè¾¾åˆ°äº§å“çº§è´¨é‡ï¼ˆåº”ç”¨å¾ˆå°‘ï¼‰ã€‚</p></li><li><p>Resinï¼šæ˜¯ CAUCHO å…¬å¸çš„äº§å“ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æœåŠ¡å™¨ï¼Œå¯¹ servlet å’Œ JSP æä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼Œ<br>æ€§èƒ½ä¹Ÿæ¯”è¾ƒä¼˜è‰¯ï¼Œresin è‡ªèº«é‡‡ç”¨ JAVA è¯­è¨€å¼€å‘ï¼ˆæ”¶è´¹ï¼Œåº”ç”¨æ¯”è¾ƒå¤šï¼‰ã€‚</p></li><li><p>WebLogicï¼šæ˜¯ Oracle å…¬å¸çš„äº§å“ï¼Œæ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„ Web æœåŠ¡å™¨ï¼Œæ”¯æŒ JavaEE è§„èŒƒï¼Œ<br>è€Œä¸”ä¸æ–­çš„å®Œå–„ä»¥é€‚åº”æ–°çš„å¼€å‘è¦æ±‚ï¼Œé€‚åˆå¤§å‹é¡¹ç›®ï¼ˆæ”¶è´¹ï¼Œç”¨çš„ä¸å¤šï¼Œé€‚åˆå¤§å…¬å¸ï¼‰ã€‚</p></li></ul><h3 id="TomCatæœåŠ¡å™¨å’ŒServletç‰ˆæœ¬çš„å¯¹åº”å…³ç³»"><a href="#TomCatæœåŠ¡å™¨å’ŒServletç‰ˆæœ¬çš„å¯¹åº”å…³ç³»" class="headerlink" title="TomCatæœåŠ¡å™¨å’ŒServletç‰ˆæœ¬çš„å¯¹åº”å…³ç³»"></a>TomCatæœåŠ¡å™¨å’ŒServletç‰ˆæœ¬çš„å¯¹åº”å…³ç³»</h3><p>å½“å‰ä¼ä¸šå¸¸ç”¨çš„ç‰ˆæœ¬ <code>7.*</code>ã€<code>8.*</code></p><p>Servlet ç¨‹åºä» 2.5 ç‰ˆæœ¬æ˜¯ç°åœ¨ä¸–é¢ä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬ï¼ˆxml é…ç½®ï¼‰</p><p>åˆ°äº† Servlet3.0 ä¹‹åã€‚å°±æ˜¯æ³¨è§£ç‰ˆæœ¬çš„ Servlet ä½¿ç”¨ã€‚ ä»¥ 2.5 ç‰ˆæœ¬ä¸ºä¸»çº¿è®²è§£ Servlet ç¨‹åº</p><h3 id="TomCatçš„ä½¿ç”¨"><a href="#TomCatçš„ä½¿ç”¨" class="headerlink" title="TomCatçš„ä½¿ç”¨"></a>TomCatçš„ä½¿ç”¨</h3><h4 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h4><p>bin ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨çš„å¯æ‰§è¡Œç¨‹åº<br>conf ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tocmat æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶<br>lib ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨çš„ jar åŒ…<br>logs  ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcat æœåŠ¡å™¨è¿è¡Œæ—¶è¾“å‡ºçš„æ—¥è®°ä¿¡æ¯<br>temp    ä¸“é—¨ç”¨æ¥å­˜æ”¾ Tomcdat è¿è¡Œæ—¶äº§ç”Ÿçš„ä¸´æ—¶æ•°æ®<br>webapps ä¸“é—¨ç”¨æ¥å­˜æ”¾éƒ¨ç½²çš„ Web å·¥ç¨‹ã€‚<br>work æ˜¯ Tomcat å·¥ä½œæ—¶çš„ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾ Tomcat è¿è¡Œæ—¶ jsp ç¿»è¯‘ä¸º Servlet çš„æºç ï¼Œå’Œ Session é’åŒ–çš„ç›®å½•ã€‚</p><h4 id="å¦‚ä½•å¯åŠ¨TomCat"><a href="#å¦‚ä½•å¯åŠ¨TomCat" class="headerlink" title="å¦‚ä½•å¯åŠ¨TomCat"></a>å¦‚ä½•å¯åŠ¨TomCat</h4><p>æ‰¾åˆ° Tomcat ç›®å½•ä¸‹çš„ bin ç›®å½•ä¸‹çš„ startup.bat æ–‡ä»¶ï¼ŒåŒå‡»ï¼Œå°±å¯ä»¥å¯åŠ¨ Tomcat æœåŠ¡å™¨ã€‚</p><p>å¦‚ä½•æµ‹è¯• Tomcat æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Ÿï¼Ÿï¼Ÿ</p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€æµ‹è¯•ï¼š</p><p>1ã€<a href="http://localhost:8080/">http://localhost:8080</a></p><p>2ã€<a href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p><p>3ã€http:&#x2F;&#x2F;çœŸå® ip:8080</p><p>å½“å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯´æ˜ Tomcat æœåŠ¡å™¨å¯åŠ¨</p><h4 id="å¸¸è§çš„å¯åŠ¨å¤±è´¥åŸå› åˆ†æ"><a href="#å¸¸è§çš„å¯åŠ¨å¤±è´¥åŸå› åˆ†æ" class="headerlink" title="å¸¸è§çš„å¯åŠ¨å¤±è´¥åŸå› åˆ†æ"></a>å¸¸è§çš„å¯åŠ¨å¤±è´¥åŸå› åˆ†æ</h4><p>å¸¸è§çš„å¯åŠ¨å¤±è´¥çš„æƒ…å†µæœ‰ï¼ŒåŒå‡» startup.bat æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªå°é»‘çª—å£ä¸€é—ªè€Œæ¥ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå¤±è´¥çš„åŸå› åŸºæœ¬ä¸Šéƒ½æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®å¥½ JAVA_HOME ç¯å¢ƒå˜é‡</p><h4 id="å¦ä¸€ç§å¯åŠ¨tomcatæœåŠ¡å™¨çš„æ–¹æ³•"><a href="#å¦ä¸€ç§å¯åŠ¨tomcatæœåŠ¡å™¨çš„æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§å¯åŠ¨tomcatæœåŠ¡å™¨çš„æ–¹æ³•"></a>å¦ä¸€ç§å¯åŠ¨tomcatæœåŠ¡å™¨çš„æ–¹æ³•</h4><p>1ã€æ‰“å¼€å‘½ä»¤è¡Œ</p><p>2ã€cd åˆ° ä½ çš„ Tomcat çš„ bin ç›®å½•ä¸‹</p><p>3ã€æ•²å…¥å¯åŠ¨å‘½ä»¤ï¼š catalina run</p><p>å¹¶ä¸”å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œæ§åˆ¶å°ä¼šæç¤ºé”™è¯¯åŸå› </p><h4 id="Tomcatçš„åœæ­¢"><a href="#Tomcatçš„åœæ­¢" class="headerlink" title="Tomcatçš„åœæ­¢"></a>Tomcatçš„åœæ­¢</h4><p>1ã€ç‚¹å‡» tomcat æœåŠ¡å™¨çª—å£çš„ x å…³é—­æŒ‰é’®</p><p>2ã€æŠŠ Tomcat æœåŠ¡å™¨çª—å£ç½®ä¸ºå½“å‰çª—å£ï¼Œç„¶åæŒ‰å¿«æ·é”® Ctrl+C</p><p>3ã€æ‰¾åˆ° Tomcat çš„ bin ç›®å½•ä¸‹çš„ shutdown.bat åŒå‡»ï¼Œå°±å¯ä»¥åœæ­¢ Tomcat æœåŠ¡å™¨</p><h4 id="å¦‚ä½•ä¿®æ”¹tomcatçš„æœåŠ¡å™¨ç«¯å£å·"><a href="#å¦‚ä½•ä¿®æ”¹tomcatçš„æœåŠ¡å™¨ç«¯å£å·" class="headerlink" title="å¦‚ä½•ä¿®æ”¹tomcatçš„æœåŠ¡å™¨ç«¯å£å·"></a>å¦‚ä½•ä¿®æ”¹tomcatçš„æœåŠ¡å™¨ç«¯å£å·</h4><p>Mysql é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š3306</p><p>Tomcat é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š8080</p><p>æ‰¾åˆ° Tomcat ç›®å½•ä¸‹çš„ conf ç›®å½•ï¼Œæ‰¾åˆ° server.xml é…ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117101922161.png" alt="image-20211117101922161" style="zoom:80%;" />-</p><p>å¹³æ—¶ä¸Šç™¾åº¦ï¼š<a href="http://www.baidu.com/">http://www.baidu.com:80</a></p><p>HTTP åè®®é»˜è®¤çš„ç«¯å£å·æ˜¯ï¼š80ç«¯å£ä¼šé»˜è®¤éšè—</p><h4 id="å¦‚ä½•éƒ¨ç½²webå·¥ç¨‹åˆ°Tomcatä¸­"><a href="#å¦‚ä½•éƒ¨ç½²webå·¥ç¨‹åˆ°Tomcatä¸­" class="headerlink" title="å¦‚ä½•éƒ¨ç½²webå·¥ç¨‹åˆ°Tomcatä¸­"></a>å¦‚ä½•éƒ¨ç½²webå·¥ç¨‹åˆ°Tomcatä¸­</h4><h5 id="ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•ï¼š"><a href="#ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•ï¼š" class="headerlink" title="ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•ï¼š"></a><strong>ç¬¬ä¸€ç§éƒ¨ç½²æ–¹æ³•ï¼š</strong></h5><p>åªéœ€è¦æŠŠ web å·¥ç¨‹çš„ç›®å½•æ‹·è´åˆ° Tomcat çš„ webapps ç›®å½•ä¸‹ å³å¯ã€‚</p><ul><li><p><strong>å¦‚ä½•è®¿é—®Tomcatä¸‹çš„webå·¥ç¨‹</strong></p><ul><li><p>åªéœ€è¦åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è®¿é—®åœ°å€æ ¼å¼å¦‚ä¸‹ï¼š</p><p><a href="http://ip:port/å·¥ç¨‹å/ç›®å½•ä¸‹/æ–‡ä»¶å">http://ip:port/å·¥ç¨‹å/ç›®å½•ä¸‹/æ–‡ä»¶å</a></p></li></ul></li></ul><h5 id="ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•"><a href="#ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•" class="headerlink" title="ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•"></a>ç¬¬äºŒç§éƒ¨ç½²æ–¹æ³•</h5><p>æ‰¾åˆ° Tomcat ä¸‹çš„ conf ç›®å½•\Catalina\localhost\ ä¸‹,åˆ›å»ºå¦‚ä¸‹çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Context è¡¨ç¤ºä¸€ä¸ªå·¥ç¨‹ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">path è¡¨ç¤ºå·¥ç¨‹çš„è®¿é—®è·¯å¾„:/abcä¸è¦ç”¨ä¸­æ–‡</span></span><br><span class="line"><span class="comment">docBase è¡¨ç¤ºä½ çš„å·¥ç¨‹ç›®å½•åœ¨å“ªé‡Œ</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/abc&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;E:\book&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®è¿™ä¸ªå·¥ç¨‹çš„è·¯å¾„å¦‚ä¸‹:<a href="http://ip:port/abc/">http://ip:port/abc/</a> å°±è¡¨ç¤ºè®¿é—® E:\book ç›®å½•</p><h4 id="æ‰‹æ‰˜-html-é¡µé¢åˆ°æµè§ˆå™¨å’Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥-http-ip-ç«¯å£å·-å·¥ç¨‹å-è®¿é—®çš„åŒºåˆ«"><a href="#æ‰‹æ‰˜-html-é¡µé¢åˆ°æµè§ˆå™¨å’Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥-http-ip-ç«¯å£å·-å·¥ç¨‹å-è®¿é—®çš„åŒºåˆ«" class="headerlink" title="æ‰‹æ‰˜ html é¡µé¢åˆ°æµè§ˆå™¨å’Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://ip:ç«¯å£å·/å·¥ç¨‹å/è®¿é—®çš„åŒºåˆ«"></a>æ‰‹æ‰˜ html é¡µé¢åˆ°æµè§ˆå™¨å’Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://ip:ç«¯å£å·/å·¥ç¨‹å/è®¿é—®çš„åŒºåˆ«">http://ip:ç«¯å£å·/å·¥ç¨‹å/è®¿é—®çš„åŒºåˆ«</a></h4><ul><li><p>æ‰‹æ‰˜htmlé¡µé¢çš„åŸç†ï¼š</p><ul><li><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117103856370.png" alt="image-20211117103856370" style="zoom:80%;" />-</li></ul></li><li><p>è¾“å…¥è®¿é—®åœ°å€è®¿é—®çš„åŸç†ï¼š</p><ul><li><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117104008444.png" alt="image-20211117104008444" style="zoom: 67%;" />-</li></ul></li></ul><h4 id="ROOT-çš„å·¥ç¨‹çš„è®¿é—®ï¼Œä»¥åŠ-é»˜è®¤-index-html-é¡µé¢çš„è®¿-é—®"><a href="#ROOT-çš„å·¥ç¨‹çš„è®¿é—®ï¼Œä»¥åŠ-é»˜è®¤-index-html-é¡µé¢çš„è®¿-é—®" class="headerlink" title="ROOT çš„å·¥ç¨‹çš„è®¿é—®ï¼Œä»¥åŠ é»˜è®¤ index.html é¡µé¢çš„è®¿ é—®"></a>ROOT çš„å·¥ç¨‹çš„è®¿é—®ï¼Œä»¥åŠ é»˜è®¤ index.html é¡µé¢çš„è®¿ é—®</h4><ul><li><p><strong>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥è®¿é—®åœ°å€å¦‚ä¸‹</strong>ï¼š</p><p><a href="http://ip:port/">http://ip:port/</a> &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; æ²¡æœ‰å·¥ç¨‹åçš„æ—¶å€™ï¼Œé»˜è®¤è®¿é—®çš„æ˜¯ ROOT å·¥ç¨‹ã€‚</p></li><li><p><strong>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥çš„è®¿é—®åœ°å€å¦‚ä¸‹ï¼š</strong></p><p><a href="http://ip:port/å·¥ç¨‹å/">http://ip:port/å·¥ç¨‹å/</a> &#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt; æ²¡æœ‰èµ„æºåï¼Œé»˜è®¤è®¿é—® index.html</p></li></ul><h3 id="Ideaæ•´åˆTomcatæœåŠ¡å™¨"><a href="#Ideaæ•´åˆTomcatæœåŠ¡å™¨" class="headerlink" title="Ideaæ•´åˆTomcatæœåŠ¡å™¨"></a>Ideaæ•´åˆTomcatæœåŠ¡å™¨</h3><p>æ“ä½œçš„èœå•å¦‚ä¸‹ï¼šFile | Settings | Build, Execution, Deployment | Application Servers</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117105045539.png" alt="image-20211117105045539" style="zoom:67%;" />-</p><h3 id="IDEA-ä¸­åŠ¨æ€-web-å·¥ç¨‹çš„æ“ä½œ"><a href="#IDEA-ä¸­åŠ¨æ€-web-å·¥ç¨‹çš„æ“ä½œ" class="headerlink" title="IDEA ä¸­åŠ¨æ€ web å·¥ç¨‹çš„æ“ä½œ"></a>IDEA ä¸­åŠ¨æ€ web å·¥ç¨‹çš„æ“ä½œ</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117113525185.png" alt="image-20211117113525185" style="zoom:67%;" />-</p><h4 id="webå·¥ç¨‹ç›®å½•ä»‹ç»"><a href="#webå·¥ç¨‹ç›®å½•ä»‹ç»" class="headerlink" title="webå·¥ç¨‹ç›®å½•ä»‹ç»"></a>webå·¥ç¨‹ç›®å½•ä»‹ç»</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117114146158.png" alt="image-20211117114146158"></p><h4 id="å¦‚ä½•ç»™åŠ¨æ€-web-å·¥ç¨‹æ·»åŠ é¢å¤–-jar-åŒ…"><a href="#å¦‚ä½•ç»™åŠ¨æ€-web-å·¥ç¨‹æ·»åŠ é¢å¤–-jar-åŒ…" class="headerlink" title="å¦‚ä½•ç»™åŠ¨æ€ web å·¥ç¨‹æ·»åŠ é¢å¤– jar åŒ…"></a>å¦‚ä½•ç»™åŠ¨æ€ web å·¥ç¨‹æ·»åŠ é¢å¤– jar åŒ…</h4><p>é™¤äº†å¸¸è§çš„é‚£ç§ å³é”® add as librariesæ–¹æ³•ï¼Œè¿˜æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š</p><p>1ã€å¯ä»¥æ‰“å¼€é¡¹ç›®ç»“æ„èœå•æ“ä½œç•Œé¢ï¼Œæ·»åŠ ä¸€ä¸ªè‡ªå·±çš„ç±»åº“ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117124113444.png" alt="image-20211117124113444"></p><p>2ã€æ·»åŠ ä½ ä½ ç±»åº“éœ€è¦çš„ jar åŒ…æ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117124440089.png" alt="image-20211117124440089" style="zoom:67%;" />-</p><p>3ã€é€‰æ‹©ä½ æ·»åŠ çš„ç±»åº“ï¼Œç»™å“ªä¸ªæ¨¡å—ä½¿ç”¨ï¼š</p><p>4ã€é€‰æ‹© Artifacts é€‰é¡¹ï¼Œå°†ç±»åº“ï¼Œæ·»åŠ åˆ°æ‰“åŒ…éƒ¨ç½²ä¸­ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117124729994.png" alt="image-20211117124729994" style="zoom: 67%;" />-</p><h4 id="å¦‚ä½•åœ¨-IDEA-ä¸­éƒ¨ç½²å·¥ç¨‹åˆ°-Tomcat-ä¸Šè¿è¡Œ"><a href="#å¦‚ä½•åœ¨-IDEA-ä¸­éƒ¨ç½²å·¥ç¨‹åˆ°-Tomcat-ä¸Šè¿è¡Œ" class="headerlink" title="å¦‚ä½•åœ¨ IDEA ä¸­éƒ¨ç½²å·¥ç¨‹åˆ° Tomcat ä¸Šè¿è¡Œ"></a>å¦‚ä½•åœ¨ IDEA ä¸­éƒ¨ç½²å·¥ç¨‹åˆ° Tomcat ä¸Šè¿è¡Œ</h4><p>1ã€å»ºè®®ä¿®æ”¹ web å·¥ç¨‹å¯¹åº”çš„ Tomcat è¿è¡Œå®ä¾‹åç§°ï¼š</p><p>â€‹ä½ è¿˜å¯ä»¥ä¿®æ”¹ä½ çš„ Tomcat å®ä¾‹å¯åŠ¨åé»˜è®¤çš„è®¿é—®åœ°å€ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117130306228.png" alt="image-20211117130306228" style="zoom: 67%;" />-</p><p>2ã€ç¡®è®¤ä½ çš„ Tomcat å®ä¾‹ä¸­æœ‰ä½ è¦éƒ¨ç½²è¿è¡Œçš„ web å·¥ç¨‹æ¨¡å—</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117130435481.png" alt="image-20211117130435481" style="zoom: 80%;" />-</p><p>3.é‡å¯tomcatå®ä¾‹</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117130653089.png" alt="image-20211117130653089" style="zoom: 67%;" />-</p><h4 id="ä¿®æ”¹å·¥ç¨‹è®¿é—®è·¯å¾„"><a href="#ä¿®æ”¹å·¥ç¨‹è®¿é—®è·¯å¾„" class="headerlink" title="ä¿®æ”¹å·¥ç¨‹è®¿é—®è·¯å¾„"></a>ä¿®æ”¹å·¥ç¨‹è®¿é—®è·¯å¾„</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117131230250.png" alt="image-20211117131230250" style="zoom:80%;" />-</p><h4 id="ä¿®æ”¹è¿è¡Œçš„ç«¯å£å·"><a href="#ä¿®æ”¹è¿è¡Œçš„ç«¯å£å·" class="headerlink" title="ä¿®æ”¹è¿è¡Œçš„ç«¯å£å·"></a>ä¿®æ”¹è¿è¡Œçš„ç«¯å£å·</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117131419956.png" alt="image-20211117131419956" style="zoom:80%;" />-</p><h4 id="ä¿®æ”¹è¿è¡Œä½¿ç”¨çš„æµè§ˆå™¨"><a href="#ä¿®æ”¹è¿è¡Œä½¿ç”¨çš„æµè§ˆå™¨" class="headerlink" title="ä¿®æ”¹è¿è¡Œä½¿ç”¨çš„æµè§ˆå™¨"></a>ä¿®æ”¹è¿è¡Œä½¿ç”¨çš„æµè§ˆå™¨</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117131452730.png" alt="image-20211117131452730" style="zoom:80%;" />-</p><h4 id="é…ç½®èµ„æºçƒ­éƒ¨ç½²"><a href="#é…ç½®èµ„æºçƒ­éƒ¨ç½²" class="headerlink" title="é…ç½®èµ„æºçƒ­éƒ¨ç½²"></a>é…ç½®èµ„æºçƒ­éƒ¨ç½²</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117131520450.png" alt="image-20211117131520450" style="zoom:80%;" />-</p><h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><h3 id="ServletæŠ€æœ¯"><a href="#ServletæŠ€æœ¯" class="headerlink" title="ServletæŠ€æœ¯"></a>ServletæŠ€æœ¯</h3><h4 id="ä»€ä¹ˆæ˜¯Servlet"><a href="#ä»€ä¹ˆæ˜¯Servlet" class="headerlink" title="ä»€ä¹ˆæ˜¯Servlet"></a>ä»€ä¹ˆæ˜¯Servlet</h4><p>1ã€Servlet æ˜¯ JavaEE è§„èŒƒä¹‹ä¸€ã€‚è§„èŒƒå°±æ˜¯æ¥å£</p><p>2ã€Servlet æ˜¯ JavaWeb ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼š</p><p>â€‹Servlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘å¬å™¨ã€‚</p><p>3ã€Servlet æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ª java å°ç¨‹åºï¼Œ</p><p>â€‹å®ƒå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚</p><h4 id="æ‰‹åŠ¨å®ç°-Servlet-ç¨‹åº"><a href="#æ‰‹åŠ¨å®ç°-Servlet-ç¨‹åº" class="headerlink" title="æ‰‹åŠ¨å®ç° Servlet ç¨‹åº"></a>æ‰‹åŠ¨å®ç° Servlet ç¨‹åº</h4><p>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Servlet æ¥å£</p><p>2ã€å®ç° service æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®</p><p>3ã€åˆ° web.xml ä¸­å»é…ç½® servlet ç¨‹åºçš„è®¿é—®åœ°å€</p><ul><li><strong>ç¼–å†™ä¸€ä¸ªç±»å®ç°Servletæ¥å£å¹¶å®ç°serviceæ–¹æ³•</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span>  <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//serviceæ–¹æ³•æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HelloServletè¢«æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>åˆ° web.xml ä¸­å»é…ç½® servlet ç¨‹åºçš„è®¿é—®åœ°å€</strong></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    servletæ ‡ç­¾ç»™Tomcaté…ç½®Servletç¨‹åº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        servlet-nameæ ‡ç­¾ ç»™Servletç¨‹åºèµ·ä¸€ä¸ªåˆ«åï¼ˆä¸€èˆ¬ç”¨ç±»åï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--      servlet-classæ˜¯Servletçš„å…¨ç±»å  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.izumi.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  servlet-mappingæ ‡ç­¾ ç»™servletç¨‹åºé…ç½®è®¿é—®åœ°å€  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  servlet-name æ ‡ç­¾æ˜¯å‘Šè¯‰ æœåŠ¡å™¨ï¼Œæˆ‘å½“å‰é…ç½®çš„åœ°å€ç»™å“ªä¸ªservletç¨‹åºä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    url-pattern æ ‡ç­¾é…ç½®è®¿é—®åœ°å€</span></span><br><span class="line"><span class="comment">        / è¡¨ç¤ºåœ¨æœåŠ¡å™¨è§£æçš„æ—¶å€™ï¼Œè¡¨ç¤ºåœ°å€ä¸ºï¼š http://ip:port//å·¥ç¨‹è·¯å¾„</span></span><br><span class="line"><span class="comment">        /helloè¡¨ç¤ºåœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„/hello--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h5><ul><li>å¸¸è§çš„é”™è¯¯ 1ï¼šurl-pattern ä¸­é…ç½®çš„è·¯å¾„æ²¡æœ‰ä»¥æ–œæ æ‰“å¤´ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117185353788.png" alt="image-20211117185353788" style="zoom:80%;" />-</p><ul><li>å¸¸è§é”™è¯¯ 2ï¼šservlet-name é…ç½®çš„å€¼ä¸å­˜åœ¨ï¼šï¼ˆè¿™ç§é”™è¯¯åœ¨ideaä¸­ï¼Œç¼–è¯‘å™¨ä¼šå‘ç°ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117185422173.png" alt="image-20211117185422173" style="zoom:80%;" />-</p><ul><li>å¸¸è§é”™è¯¯ 3ï¼šservlet-class æ ‡ç­¾çš„å…¨ç±»åé…ç½®é”™è¯¯ï¼šï¼ˆè¿™ç§é”™è¯¯åœ¨ideaä¸­ï¼Œç¼–è¯‘å™¨ä¼šå‘ç°ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117185549494.png" alt="image-20211117185549494" style="zoom:80%;" />-</p><h4 id="url-åœ°å€åˆ°-Servlet-ç¨‹åºçš„è®¿é—®ï¼ˆåŸç†å›¾ï¼‰"><a href="#url-åœ°å€åˆ°-Servlet-ç¨‹åºçš„è®¿é—®ï¼ˆåŸç†å›¾ï¼‰" class="headerlink" title="url åœ°å€åˆ° Servlet ç¨‹åºçš„è®¿é—®ï¼ˆåŸç†å›¾ï¼‰"></a>url åœ°å€åˆ° Servlet ç¨‹åºçš„è®¿é—®ï¼ˆåŸç†å›¾ï¼‰</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117190049749.png" alt="image-20211117190049749" style="zoom:80%;" />-</p><h4 id="Servletçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Servletçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Servletçš„ç”Ÿå‘½å‘¨æœŸ"></a>Servletçš„ç”Ÿå‘½å‘¨æœŸ</h4><p>1ã€æ‰§è¡Œ Servlet æ„é€ å™¨æ–¹æ³•</p><p>2ã€æ‰§è¡Œ init åˆå§‹åŒ–æ–¹æ³•</p><p>â€‹ç¬¬ä¸€ã€äºŒæ­¥ï¼Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œçš„æ—¶å€™åˆ›å»º Servlet ç¨‹åºä¼šè°ƒç”¨ã€‚</p><p>3ã€æ‰§è¡Œ service æ–¹æ³•</p><p>â€‹ç¬¬ä¸‰æ­¥ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šè°ƒç”¨ã€‚</p><p>4ã€æ‰§è¡Œ destroy é”€æ¯æ–¹æ³•</p><p>â€‹ç¬¬å››æ­¥ï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™è°ƒç”¨</p><h4 id="GETå’ŒPOSTè¯·æ±‚çš„åˆ†å‘å¤„ç†"><a href="#GETå’ŒPOSTè¯·æ±‚çš„åˆ†å‘å¤„ç†" class="headerlink" title="GETå’ŒPOSTè¯·æ±‚çš„åˆ†å‘å¤„ç†"></a>GETå’ŒPOSTè¯·æ±‚çš„åˆ†å‘å¤„ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//å°†ServletRequestæ¥å£ç±»å‹å‘ä¸‹è½¬å‹ä¸º HttpRequestæ¥å£ç±»å‹è°ƒç”¨ getMethodæ–¹æ³•</span></span><br><span class="line">       <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">       <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> httpServletRequest.getMethod();</span><br><span class="line">       System.out.println(<span class="string">&quot;3.HelloServletè¢«æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line">           doPost();</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;GET&quot;</span>.equals(method)) &#123;</span><br><span class="line">           doGet();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;postè¯·æ±‚&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;getè¯·æ±‚&quot;</span>);</span><br><span class="line">       </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡ç»§æ‰¿-HttpServlet-å®ç°-Servlet-ç¨‹åº"><a href="#é€šè¿‡ç»§æ‰¿-HttpServlet-å®ç°-Servlet-ç¨‹åº" class="headerlink" title="é€šè¿‡ç»§æ‰¿ HttpServlet å®ç° Servlet ç¨‹åº"></a>é€šè¿‡ç»§æ‰¿ HttpServlet å®ç° Servlet ç¨‹åº</h4><p>ä¸€èˆ¬åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œéƒ½æ˜¯ä½¿ç”¨ç»§æ‰¿ HttpServlet ç±»çš„æ–¹å¼å»å®ç° Servlet ç¨‹åºã€‚</p><p>1ã€ç¼–å†™ä¸€ä¸ªç±»å»ç»§æ‰¿ HttpServlet ç±»</p><p>2ã€æ ¹æ®ä¸šåŠ¡éœ€è¦é‡å†™ doGet æˆ– doPost æ–¹æ³•</p><p>3ã€åˆ° web.xml ä¸­çš„é…ç½® Servlet ç¨‹åºçš„è®¿é—®åœ°å€</p><ul><li><strong>æ–°åˆ›å»ºä¸€ä¸ª HelloServlet02ï¼Œç»§æ‰¿ HttpServletç±»</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.izumi.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨getè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;com.izumi.servlet.HelloServlet02 doGetæ–¹æ³•è¢«è°ƒç”¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨postè¯·æ±‚çš„æ—¶å€™è°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;com.izumi.servlet.HelloServlet02 doPostæ–¹æ³•è¢«è°ƒç”¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>åˆ° web.xml ä¸­çš„é…ç½® Servlet ç¨‹åºçš„è®¿é—®åœ°å€</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">       &lt;servlet-name&gt;HelloServlet02&lt;/servlet-name&gt;</span><br><span class="line">       &lt;servlet-class&gt;com.izumi.servlet.HelloServlet02&lt;/servlet-class&gt;</span><br><span class="line">   &lt;/servlet&gt;</span><br><span class="line">   &lt;servlet-mapping&gt;</span><br><span class="line">       &lt;servlet-name&gt;HelloServlet02&lt;/servlet-name&gt;</span><br><span class="line">       &lt;url-pattern&gt;/hello02&lt;/url-pattern&gt;</span><br><span class="line">   &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨Ideaåˆ›å»ºservletç¨‹åºï¼ˆæ–¹ä¾¿å¿«æ·ï¼‰"><a href="#ä½¿ç”¨Ideaåˆ›å»ºservletç¨‹åºï¼ˆæ–¹ä¾¿å¿«æ·ï¼‰" class="headerlink" title="ä½¿ç”¨Ideaåˆ›å»ºservletç¨‹åºï¼ˆæ–¹ä¾¿å¿«æ·ï¼‰"></a>ä½¿ç”¨Ideaåˆ›å»ºservletç¨‹åºï¼ˆæ–¹ä¾¿å¿«æ·ï¼‰</h4><p>èœå•ï¼šnew -&gt;Servlet ç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117203747471.png" alt="image-20211117203747471" style="zoom:67%;" />-</p><p>é…ç½®servletä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117204204218.png" alt="image-20211117204204218" style="zoom:80%;" />-</p><p>å¦‚æœnewæ²¡æœ‰ servleçš„è§£å†³æ–¹æ¡ˆ</p><p>2.1.å°†srcæ ‡è®°æˆSourcesæ–‡ä»¶</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117203928687.png" alt="image-20211117203928687" style="zoom: 67%;" /><p>2.2.åœ¨facetsé…ç½®ä¸­çš„sources rootçš„ï¼Œå°†srcå‹¾é€‰ä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117204033796.png" alt="image-20211117204033796" style="zoom: 67%;" />-</p><h4 id="Servlet-ç±»çš„ç»§æ‰¿ä½“ç³»"><a href="#Servlet-ç±»çš„ç»§æ‰¿ä½“ç³»" class="headerlink" title="Servlet ç±»çš„ç»§æ‰¿ä½“ç³»"></a>Servlet ç±»çš„ç»§æ‰¿ä½“ç³»</h4><p>ç®€å•çš„æºç åˆ†æï¼ˆ129pï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117205718599.png" alt="image-20211117205718599"></p><h3 id="ServletConfigç±»"><a href="#ServletConfigç±»" class="headerlink" title="ServletConfigç±»"></a>ServletConfigç±»</h3><p>ServletConfig ç±»ä»ç±»åä¸Šæ¥çœ‹ï¼Œå°±çŸ¥é“æ˜¯ Servlet ç¨‹åºçš„é…ç½®ä¿¡æ¯ç±»ã€‚</p><p>Servlet ç¨‹åºå’Œ ServletConfig å¯¹è±¡éƒ½æ˜¯ç”± Tomcat è´Ÿè´£åˆ›å»ºï¼Œæˆ‘ä»¬è´Ÿè´£ä½¿ç”¨ã€‚</p><p>Servlet ç¨‹åºé»˜è®¤æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»ºï¼ŒServletConfig æ˜¯æ¯ä¸ª Servlet ç¨‹åºåˆ›å»ºæ—¶ï¼Œ</p><p>å°±åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ServletConfig å¯¹ è±¡ã€‚</p><h4 id="ServletConfigçš„ä¸‰å¤§ä½œç”¨"><a href="#ServletConfigçš„ä¸‰å¤§ä½œç”¨" class="headerlink" title="ServletConfigçš„ä¸‰å¤§ä½œç”¨"></a>ServletConfigçš„ä¸‰å¤§ä½œç”¨</h4><p>1ã€å¯ä»¥è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼</p><p>2ã€è·å–åˆå§‹åŒ–å‚æ•° init-param (éœ€è¦åˆ°web.xmlé‡Œé¢å¢æ·»ç›¸å…³é…ç½®ä¿¡æ¯)</p><p>3ã€è·å– ServletContext å¯¹è±¡</p><ul><li><p><strong>web.xmlé…ç½®</strong></p><p>åœ¨å®ç°servletç¨‹åºçš„ç±»ä¸­çš„ <code>&lt;servlet&gt;</code> æ ‡ç­¾åŠ å…¥ä»¥ä¸‹æ ‡ç­¾</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        ini-param æ˜¯åˆå§‹åŒ–å‚æ•° å¯ä»¥é…ç½®å¤šä¸ª--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--            æ˜¯å‚æ•°å--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>userName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--            æ˜¯å‚æ•°å€¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql//localhost:3306/test<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>servletä¸­çš„ä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;2. initæ–¹æ³•è¢«è°ƒç”¨&quot;</span>);</span><br><span class="line"><span class="comment">//        1ã€å¯ä»¥è·å– Servlet ç¨‹åºçš„åˆ«å servlet-name çš„å€¼</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HelloServletçš„åˆ«åæ˜¯ï¼š&quot;</span>+servletConfig.getServletName());</span><br><span class="line"><span class="comment">//        2ã€è·å–åˆå§‹åŒ–å‚æ•° init-param</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HelloServletçš„åˆå§‹åŒ–å‚æ•° userName:&quot;</span>+servletConfig.getInitParameter(<span class="string">&quot;userName&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;HelloServletçš„åˆå§‹åŒ–å‚æ•°url:&quot;</span>+servletConfig.getInitParameter(<span class="string">&quot;url&quot;</span>));</span><br><span class="line"><span class="comment">//        3ã€è·å– ServletContext å¯¹è±¡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å– ServletContextå¯¹è±¡ï¼š&quot;</span>+servletConfig.getServletContext());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="ServletConfigçš„ä¸€äº›ç»†èŠ‚ï¼š"><a href="#ServletConfigçš„ä¸€äº›ç»†èŠ‚ï¼š" class="headerlink" title="ServletConfigçš„ä¸€äº›ç»†èŠ‚ï¼š"></a>ServletConfigçš„ä¸€äº›ç»†èŠ‚ï¼š</h4><ul><li><p>ç»§æ‰¿ HttpServlet çš„ servletç±»ï¼š</p><p>å¯ä»¥åœ¨å…¶ä»–ä½ç½®ä½¿ç”¨ <code>getServletConfig()</code>æ–¹æ³•è·å¾— <code>ServletConfig</code>å¯¹è±¡</p><p>(å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ GenericServlet <code>getServletConfig()</code>æ–¹æ³•)</p></li><li><p>é‡å†™ initæ–¹æ³•é‡Œé¢ä¸€å®šè¦è°ƒç”¨çˆ¶ç±»çš„initæ“ä½œ</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211117223746491.png" alt="image-20211117223746491" style="zoom:80%;" />-</p><p>â€‹å› ä¸º è¯¥æ–¹æ³•åœ¨ HttpServlet çš„çˆ¶ç±» GennericServletä¸­æœ‰å®šä¹‰ï¼Œ</p><p>â€‹è¿™é‡Œé‡å†™ä¸è°ƒç”¨çˆ¶ç±»çš„initæ–¹æ³•å°±ä¼šä¸¢å¤± configé€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//GennericServletç±»çš„ initæ–¹æ³•</span><br><span class="line">public void init(ServletConfig config) throws ServletException &#123;</span><br><span class="line">    this.config = config;</span><br><span class="line">    this.init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ServletContext-ç±»"><a href="#ServletContext-ç±»" class="headerlink" title="ServletContext ç±»"></a>ServletContext ç±»</h3><h4 id="ä»€ä¹ˆæ˜¯ServletContextï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ServletContextï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ServletContextï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ServletContextï¼Ÿ</h4><p>1ã€ServletContext æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒè¡¨ç¤º Servlet ä¸Šä¸‹æ–‡å¯¹è±¡</p><p>2ã€ä¸€ä¸ª web å·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ª ServletContext å¯¹è±¡å®ä¾‹ã€‚</p><p>3ã€ServletContext å¯¹è±¡æ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡*ã€‚</p><p>4ã€ServletContext æ˜¯åœ¨ web å·¥ç¨‹éƒ¨ç½²å¯åŠ¨çš„æ—¶å€™åˆ›å»ºã€‚åœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯</p><h5 id="ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŸŸå¯¹è±¡ï¼Ÿ</h5><p>åŸŸå¯¹è±¡ï¼Œæ˜¯å¯ä»¥åƒ Map ä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡ï¼Œå«åŸŸå¯¹è±¡ã€‚</p><p>è¿™é‡Œçš„åŸŸæŒ‡çš„æ˜¯å­˜å–æ•°æ®çš„æ“ä½œèŒƒå›´ï¼Œæ•´ä¸ª web å·¥ç¨‹ã€‚</p><table><thead><tr><th></th><th>å­˜æ•°æ®</th><th>å–æ•°æ®</th><th>åˆ é™¤æ•°æ®</th></tr></thead><tbody><tr><td>map</td><td>put()</td><td>get()</td><td>remove()</td></tr><tr><td>åŸŸå¯¹è±¡</td><td>putAttribute()</td><td>getAttribute()</td><td>removeAttribute()</td></tr></tbody></table><h4 id="ServletContextçš„å››å¤§ä½œç”¨"><a href="#ServletContextçš„å››å¤§ä½œç”¨" class="headerlink" title="ServletContextçš„å››å¤§ä½œç”¨"></a>ServletContextçš„å››å¤§ä½œç”¨</h4><p>â€‹ServletContextå¯¹è±¡ ï¼ˆå¯ä»¥é€šè¿‡<code>getServletContext</code>æ–¹æ³•ç›´æ¥è·å–åˆ°ï¼‰</p><p>1ã€<font title = "blue">è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•°</font> context-param</p><p>â€‹è°ƒç”¨æ–¹æ³• <code>getInitParameter()</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    context-paramæ˜¯ä¸Šä¸‹æ–‡å‚æ•°ï¼ˆå®ƒå±äºæ•´ä¸ªwebå·¥ç¨‹ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>www.baidu.com<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€<font title = "blue">è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„</font>æ ¼å¼: &#x2F;å·¥ç¨‹è·¯å¾„</p><p>â€‹è°ƒç”¨æ–¹æ³•<code>getContextPath()</code></p><p>3ã€<font title = "blue">è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„ </font>  ServletContextå¯¹è±¡è°ƒç”¨æ–¹æ³•<code>getRealtPath()</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">1</span>ã€è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletConfig().getServletContext();</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–context-param: &quot;</span>+servletContext.getInitParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–context-param: &quot;</span>+servletContext.getInitParameter(<span class="string">&quot;url&quot;</span>));</span><br><span class="line"><span class="comment">//        2ã€è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œæ ¼å¼: /å·¥ç¨‹è·¯å¾„</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–å½“å‰å·¥ç¨‹çš„è·¯å¾„ï¼š&quot;</span>+servletContext.getContextPath()); <span class="comment">// å¾—åˆ°/servlet</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        3ã€è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">        <span class="comment">//å¾—åˆ°F:\IdeaProjects\JavaWeb\out\artifacts\servelet_war_exploded\</span></span><br><span class="line">        <span class="comment">// é‡å¯tomcatæœåŠ¡å¯ä»¥çœ‹åˆ°idea æ‹·è´çš„tomcatçš„æ•°æ®ï¼š</span></span><br><span class="line">        <span class="comment">// C:\Users\Pixar\AppData\Local\JetBrains\IntelliJIdea2020.1\tomcat\Tomcat_8_0_50_JavaWeb_2</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        / / æ–œæ è¢«æœåŠ¡å™¨è§£æåœ°å€ä¸º:http://ip:port/å·¥ç¨‹å/ æ˜ å°„åˆ° IDEA ä»£ç çš„webç›®å½•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨ç¡¬ç›˜çš„ç»å¯¹è·¯å¾„ï¼š&quot;</span>+servletContext.getRealPath(<span class="string">&quot;/&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–å·¥ç¨‹éƒ¨ç½²åcssåœ¨ç¡¬ç›˜çš„ç»å¯¹è·¯å¾„ï¼š&quot;</span>+servletContext.getRealPath(<span class="string">&quot;/css&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–å·¥ç¨‹éƒ¨ç½²åimgsåœ¨ç¡¬ç›˜çš„ç»å¯¹è·¯å¾„ï¼š&quot;</span>+servletContext.getRealPath(<span class="string">&quot;/imgs&quot;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4ã€åƒ Map ä¸€æ ·å­˜å–æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4ã€åƒ Map ä¸€æ ·å­˜å–æ•°æ®</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;keyä¸º idçš„ value= &quot;</span>+ servletContext.getAttribute(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;keyä¸º idçš„ value= &quot;</span>+ servletContext.getAttribute(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;keyä¸º idçš„ value= &quot;</span>+ servletContext.getAttribute(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;keyä¸º idçš„ value= &quot;</span>+ servletContext.getAttribute(<span class="string">&quot;id&quot;</span>));</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContext02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        System.out.println(servletContext.getAttribute(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="comment">//å› ä¸ºattributeæ•°æ®æ˜¯åŸŸå¯¹è±¡ï¼Œæ˜¯webå·¥ç¨‹ä¸‹æ‰€æœ‰servletç¨‹åºå…±åŒæ‹¥æœ‰ï¼Œè€Œå­˜æ•°æ®çš„æ“ä½œåœ¨ ServletContextä¸­ï¼Œæ‰€ä»¥å¿…é¡»å…ˆè¿è¡Œ ServletContextï¼Œæ‰èƒ½è·å–åˆ°æ•°æ®</span></span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…³äºideaéƒ¨ç½²Servletçš„ä¸€äº›ç»†èŠ‚"><a href="#å…³äºideaéƒ¨ç½²Servletçš„ä¸€äº›ç»†èŠ‚" class="headerlink" title="å…³äºideaéƒ¨ç½²Servletçš„ä¸€äº›ç»†èŠ‚"></a>å…³äºideaéƒ¨ç½²Servletçš„ä¸€äº›ç»†èŠ‚</h4><p>é€šè¿‡ ContextServletå¯¹è±¡çš„<code>getRealPath</code>å¾—åˆ°çš„çœŸå®è·¯å¾„åœ°å€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// idea æ‹·è´çš„tomcatçš„æ•°æ®ï¼š(é‡å¯tomcatæœåŠ¡å¯ä»¥çœ‹åˆ°)</span></span><br><span class="line"><span class="comment">/* C:\Users\Pixar\AppData\Local\JetBrains\IntelliJIdea2020.1\tomcat\Tomcat_8_0_50_JavaWeb_2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>å†è¿›å…¥åˆ° conf\Catalina\localhostä¸‹å¯ä»¥çœ‹åˆ°xmlé…ç½®æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p>å¯ä»¥çœ‹åˆ°ï¼Œideaçš„tomcatæœåŠ¡é…ç½®æ˜¯ä¸Šé¢ä»‹ç»çš„ å¦‚ä½•å°†webå·¥ç¨‹éƒ¨ç½²åˆ°tomcatæœåŠ¡å™¨çš„ç¬¬äºŒç§æ–¹æ³•ï¼š</p><p><code>&lt;Context path=&quot;/servlet&quot; docBase=&quot;F:\IdeaProjects\JavaWeb\out\artifacts\servelet_war_exploded&quot; /&gt;</code></p><h3 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h3><h4 id="ä»€ä¹ˆæ˜¯HTTTPåè®®"><a href="#ä»€ä¹ˆæ˜¯HTTTPåè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯HTTTPåè®®"></a>ä»€ä¹ˆæ˜¯HTTTPåè®®</h4><p>ä»€ä¹ˆæ˜¯åè®®ï¼Ÿ</p><p>åè®®å°±æ˜¯æŒ‡åŒæ–¹ï¼Œæˆ–å¤šæ–¹ï¼Œç›¸äº’çº¦å®šï¼Œå¤§å®¶éƒ½è¦éµå®ˆçš„è§„åˆ™ï¼Œå°±å«åè®®</p><p>HTTPåè®®ï¼š</p><p>å°±æ˜¯æŒ‡ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´é€šè¡Œæ—¶ï¼Œå‘é€çš„æ•°æ®ï¼Œéœ€è¦éµå®ˆçš„è§„åˆ™ï¼Œå°±å«HTTPåè®®ã€‚</p><p>HTTPåè®®ä¸­çš„æ•°æ®åˆå«æŠ¥æ–‡</p><h4 id="è¯·æ±‚çš„HTTPåè®®"><a href="#è¯·æ±‚çš„HTTPåè®®" class="headerlink" title="è¯·æ±‚çš„HTTPåè®®"></a>è¯·æ±‚çš„HTTPåè®®</h4><p>å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ•°æ®å«è¯·æ±‚ã€‚</p><p>æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®å«å“åº”ã€‚</p><p>è¯·æ±‚åˆåˆ†ä¸º GET è¯·æ±‚ï¼Œå’Œ POST è¯·æ±‚ä¸¤ç§</p><h5 id="GETè¯·æ±‚"><a href="#GETè¯·æ±‚" class="headerlink" title="GETè¯·æ±‚"></a>GETè¯·æ±‚</h5><p>1ã€è¯·æ±‚è¡Œ</p><p>â€‹(1) è¯·æ±‚çš„æ–¹å¼ GET</p><p>â€‹(2) è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]</p><p>â€‹(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å· HTTP&#x2F;1.1</p><p>2ã€è¯·æ±‚å¤´</p><p>â€‹ key : value ç»„æˆ ä¸åŒçš„é”®å€¼å¯¹ï¼Œè¡¨ç¤ºä¸åŒçš„å«ä¹‰</p><p>å›¾è§£ï¼š</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118124329257.png" alt="image-20211118124329257" style="zoom: 80%;" /><h5 id="Postè¯·æ±‚"><a href="#Postè¯·æ±‚" class="headerlink" title="Postè¯·æ±‚"></a>Postè¯·æ±‚</h5><p>1ã€è¯·æ±‚è¡Œ</p><p>â€‹(1) è¯·æ±‚çš„æ–¹å¼ POST</p><p>â€‹(2) è¯·æ±‚çš„èµ„æºè·¯å¾„[+?+è¯·æ±‚å‚æ•°]</p><p>â€‹(3) è¯·æ±‚çš„åè®®çš„ç‰ˆæœ¬å· HTTP&#x2F;1.1</p><p>2ã€è¯·æ±‚å¤´</p><p>â€‹key : value ç»„æˆ ä¸åŒçš„é”®å€¼å¯¹ï¼Œè¡¨ç¤ºä¸åŒçš„å«ä¹‰</p><p>3ã€ç©ºè¡Œ</p><p>â€‹è¯·æ±‚ä½“ &#x3D;&#x3D;&#x3D;&gt;&gt;&gt; å°±æ˜¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118125147592.png" alt="image-20211118125147592"></p><h5 id="å¸¸è§çš„è¯·æ±‚å¤´è¯´æ˜"><a href="#å¸¸è§çš„è¯·æ±‚å¤´è¯´æ˜" class="headerlink" title="å¸¸è§çš„è¯·æ±‚å¤´è¯´æ˜"></a>å¸¸è§çš„è¯·æ±‚å¤´è¯´æ˜</h5><p>â€‹Accept: è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹</p><p>â€‹Accpet-Languege: è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„è¯­è¨€ç±»å‹</p><p>â€‹User-Agent: è¡¨ç¤ºå®¢æˆ·ç«¯æµè§ˆå™¨çš„ä¿¡æ¯</p><p>â€‹Hostï¼š è¡¨ç¤ºè¯·æ±‚æ—¶çš„æœåŠ¡å™¨ ip å’Œç«¯å£å·</p><h5 id="å“ªäº›æ˜¯-GET-è¯·æ±‚ï¼Œå“ªäº›æ˜¯-POST-è¯·æ±‚"><a href="#å“ªäº›æ˜¯-GET-è¯·æ±‚ï¼Œå“ªäº›æ˜¯-POST-è¯·æ±‚" class="headerlink" title="å“ªäº›æ˜¯ GET è¯·æ±‚ï¼Œå“ªäº›æ˜¯ POST è¯·æ±‚"></a>å“ªäº›æ˜¯ GET è¯·æ±‚ï¼Œå“ªäº›æ˜¯ POST è¯·æ±‚</h5><p>â€‹GET è¯·æ±‚æœ‰å“ªäº›ï¼š</p><p>â€‹   1ã€form æ ‡ç­¾ method&#x3D;get</p><p>â€‹    2ã€a æ ‡ç­¾</p><p>â€‹ 3ã€link æ ‡ç­¾å¼•å…¥ css</p><pre><code>                 4ã€Script æ ‡ç­¾å¼•å…¥ js æ–‡ä»¶ </code></pre><p>â€‹ 5ã€img æ ‡ç­¾å¼•å…¥å›¾ç‰‡</p><p>â€‹6ã€iframe å¼•å…¥ html é¡µé¢</p><p>â€‹7ã€åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥åœ°å€åæ•²å›è½¦</p><p>POST è¯·æ±‚æœ‰å“ªäº›ï¼š</p><p>â€‹8ã€form æ ‡ç­¾ method&#x3D;post</p><h4 id="å“åº”çš„HTTPåè®®æ ¼å¼"><a href="#å“åº”çš„HTTPåè®®æ ¼å¼" class="headerlink" title="å“åº”çš„HTTPåè®®æ ¼å¼"></a>å“åº”çš„HTTPåè®®æ ¼å¼</h4><p>1ã€å“åº”è¡Œ</p><p>(1) å“åº”çš„åè®®å’Œç‰ˆæœ¬å·</p><p>(2) å“åº”çŠ¶æ€ç </p><p>(3) å“åº”çŠ¶æ€æè¿°ç¬¦</p><p>2ã€å“åº”å¤´</p><p>(1) key : value ä¸åŒçš„å“åº”å¤´ï¼Œæœ‰å…¶ä¸åŒå«ä¹‰</p><p>â€”ç©ºè¡Œ â€“</p><p>7</p><p>3ã€å“åº”ä½“ â€”-&gt;&gt;&gt; å°±æ˜¯å›ä¼ ç»™å®¢æˆ·ç«¯çš„æ•°æ®</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118130408184.png" alt="image-20211118130408184" style="zoom:80%;" /><h5 id="å¸¸ç”¨çš„å“åº”ç è¯´æ˜"><a href="#å¸¸ç”¨çš„å“åº”ç è¯´æ˜" class="headerlink" title="å¸¸ç”¨çš„å“åº”ç è¯´æ˜"></a>å¸¸ç”¨çš„å“åº”ç è¯´æ˜</h5><p>â€‹ 200 è¡¨ç¤ºè¯·æ±‚æˆåŠŸ</p><p>â€‹ 302 è¡¨ç¤ºè¯·æ±‚é‡å®šå‘</p><p>â€‹ 404 è¡¨ç¤ºè¯·æ±‚æœåŠ¡å™¨å·²ç»æ”¶åˆ°äº†ï¼Œä½†æ˜¯ä½ è¦çš„æ•°æ®ä¸å­˜åœ¨ï¼ˆè¯·æ±‚åœ°å€é”™è¯¯ï¼‰</p><p>â€‹ 500 è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼ˆä»£ç é”™è¯¯ï¼‰</p><h5 id="MIMEç±»å‹è¯´æ˜"><a href="#MIMEç±»å‹è¯´æ˜" class="headerlink" title="MIMEç±»å‹è¯´æ˜"></a>MIMEç±»å‹è¯´æ˜</h5><p>MIME æ˜¯ HTTP åè®®ä¸­æ•°æ®ç±»å‹ã€‚</p><p>MIME çš„è‹±æ–‡å…¨ç§°æ˜¯â€Multipurpose Internet Mail Extensionsâ€ å¤šåŠŸèƒ½ Internet é‚®ä»¶æ‰©å……æœåŠ¡ã€‚</p><p>MIME ç±»å‹çš„æ ¼å¼æ˜¯â€œå¤§ç±»å‹&#x2F;å° ç±»å‹â€ï¼Œå¹¶ä¸æŸä¸€ç§æ–‡ä»¶çš„æ‰©å±•åç›¸å¯¹åº”ã€‚</p><ul><li>å¸¸è§çš„MIMEç±»å‹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118131334873.png" alt="image-20211118131334873"></p><ul><li>è°·æ­Œæµè§ˆå™¨æŸ¥çœ‹httpåè®®</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118131715384.png" alt="image-20211118131715384" style="zoom:80%;" />-</p><h3 id="HttpServletRequestç±»"><a href="#HttpServletRequestç±»" class="headerlink" title="HttpServletRequestç±»"></a>HttpServletRequestç±»</h3><h4 id="HttpServletRequestæœ‰ä»€ä¹ˆç”¨"><a href="#HttpServletRequestæœ‰ä»€ä¹ˆç”¨" class="headerlink" title="HttpServletRequestæœ‰ä»€ä¹ˆç”¨"></a>HttpServletRequestæœ‰ä»€ä¹ˆç”¨</h4><p>æ¯æ¬¡åªè¦æœ‰è¯·æ±‚è¿›å…¥ Tomcat æœåŠ¡å™¨ï¼ŒTomcat æœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è¿‡æ¥çš„ HTTP åè®®ä¿¡æ¯</p><p>è§£æå¥½å°è£…åˆ° Request å¯¹è±¡ä¸­ã€‚ ç„¶åä¼ é€’åˆ° service æ–¹æ³•ï¼ˆdoGet å’Œ doPostï¼‰</p><p>ä¸­ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ HttpServletRequest å¯¹è±¡ï¼Œè·å–åˆ°æ‰€æœ‰è¯·æ±‚çš„ ä¿¡æ¯</p><h4 id="HttpServletRequestç±»å¸¸ç”¨æ–¹æ³•"><a href="#HttpServletRequestç±»å¸¸ç”¨æ–¹æ³•" class="headerlink" title="HttpServletRequestç±»å¸¸ç”¨æ–¹æ³•"></a>HttpServletRequestç±»å¸¸ç”¨æ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">i. getRequestURI() è·å–è¯·æ±‚çš„èµ„æºè·¯å¾„</span><br><span class="line">ii. getRequestURL() è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰</span><br><span class="line">iii. getRemoteHost() è·å–å®¢æˆ·ç«¯çš„ ip åœ°å€</span><br><span class="line">iv. getHeader() è·å–è¯·æ±‚å¤´</span><br><span class="line">v. getParameter() è·å–è¯·æ±‚çš„å‚æ•°</span><br><span class="line">vi. getParameterValues() è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆå¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ï¼‰</span><br><span class="line">vii. getMethod() è·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST</span><br><span class="line">viii. setAttribute(key, value); è®¾ç½®åŸŸæ•°æ®</span><br><span class="line">ix. getAttribute(key); è·å–åŸŸæ•°æ®</span><br><span class="line">x. getRequestDispatcher() è·å–è¯·æ±‚è½¬å‘å¯¹è±¡</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨ API ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        i. getRequestURI() è·å–è¯·æ±‚çš„èµ„æºè·¯å¾„</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·æ±‚çš„èµ„æºè·¯å¾„æ˜¯ï¼š&quot;</span>+request.getRequestURI());</span><br><span class="line"><span class="comment">//        ii. getRequestURL() è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼‰</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼š&quot;</span>+request.getRequestURL());</span><br><span class="line"><span class="comment">//        iii. getRemoteHost() è·å–å®¢æˆ·ç«¯çš„ ip åœ°å€</span></span><br><span class="line"><span class="comment">//        //ä½¿ç”¨ localhost å»è®¿é—®ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯IPåœ°å€æ˜¯ï¼š 127.0.0.1</span></span><br><span class="line"><span class="comment">//        //ä½¿ç”¨ 127.0.0.1 å»è®¿é—®ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯IPåœ°å€æ˜¯ï¼š 127.0.0.1</span></span><br><span class="line"><span class="comment">//        //ä½¿ç”¨ ipåœ°å€ï¼ˆ10.184.7.190ï¼‰ å»è®¿é—®ï¼Œå¾—åˆ°çš„å®¢æˆ·ç«¯IPåœ°å€æ˜¯ï¼š 10.184.7.190</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–å®¢æˆ·ç«¯çš„ipåœ°å€ï¼š&quot;</span>+request.getRemoteHost());</span><br><span class="line"><span class="comment">//        iv. getHeader() è·å–è¯·æ±‚å¤´</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–è¯·æ±‚å¤´ï¼šUser-Agent&quot;</span>+request.getHeader(<span class="string">&quot;User-Agent&quot;</span>));</span><br><span class="line"><span class="comment">//       getMethod() è·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–è¯·æ±‚å‚æ•°ï¼š&quot;</span>+request.getMethod());</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="comment">è¯·æ±‚çš„èµ„æºè·¯å¾„æ˜¯ï¼š/servlet/request</span></span><br><span class="line"><span class="comment">è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆç»å¯¹è·¯å¾„ï¼šhttp://localhost:8080/servlet/request</span></span><br><span class="line"><span class="comment">è·å–å®¢æˆ·ç«¯çš„ipåœ°å€ï¼š127.0.0.1</span></span><br><span class="line"><span class="comment">è·å–è¯·æ±‚å¤´ï¼šUser-AgentMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36</span></span><br><span class="line"><span class="comment">è·å–è¯·æ±‚å‚æ•°ï¼šGET</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="å¦‚ä½•è·å–è¯·æ±‚å‚æ•°"><a href="#å¦‚ä½•è·å–è¯·æ±‚å‚æ•°" class="headerlink" title="å¦‚ä½•è·å–è¯·æ±‚å‚æ•°"></a>å¦‚ä½•è·å–è¯·æ±‚å‚æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å¾—è¡¨å•ç”¨æˆ·å:&quot;</span>+request.getParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å¾—è¡¨å•å¯†ç :&quot;</span>+request.getParameter(<span class="string">&quot;pwd&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å¾—è¡¨å•çˆ±å¥½:&quot;</span>+ Arrays.toString(request.getParameterValues(<span class="string">&quot;hobby&quot;</span>)) );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>Postè¯·æ±‚åªéœ€è¦æ³¨æ„ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‹¥è¯·æ±‚å†…å®¹æœ‰ä¸­æ–‡ ä¼šå‡ºç°ä¹±ç </span></span><br><span class="line">     <span class="comment">// æ‰€ä»¥éœ€è¦è®¾ç½®å­—ç¬¦é›†ç¼–ç  æ³¨æ„ï¼šè¯¥æ–¹æ³•éœ€è¦åœ¨è·å–å‚æ•°è¯·æ±‚ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span></span><br><span class="line"> request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚çš„è½¬å‘"><a href="#è¯·æ±‚çš„è½¬å‘" class="headerlink" title="è¯·æ±‚çš„è½¬å‘"></a>è¯·æ±‚çš„è½¬å‘</h4><p>ä»€ä¹ˆæ˜¯è¯·æ±‚çš„è½¬å‘?</p><p>è¯·æ±‚è½¬å‘æ˜¯æŒ‡ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œ</p><p>ä»ä¸€æ¬¡èµ„æºè·³è½¬åˆ°å¦ä¸€ä¸ªèµ„æºçš„æ“ä½œå«è¯·æ±‚è½¬å‘ã€‚</p><p>ä¸å¯ä»¥è®¿é—®å·¥ç¨‹ä»¥å¤–çš„èµ„æº</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118203011852.png" alt="image-20211118203011852"></p><p>ä»£ç æ¼”ç¤ºï¼š</p><p>servlet1ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆåŠäº‹çš„ææ–™ï¼‰æŸ¥çœ‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åœ¨ servlet1æŸ¥çœ‹å‚æ•°ï¼ˆææ–™ï¼‰ï¼š&quot;</span>+username);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ï¼ˆç»™ææ–™ç›–ç« ï¼‰ï¼Œä¼ åˆ°servlet2</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;servlet1çš„ç›–ç« &quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯·æ±‚è½¬å‘ ç»™ servlet2</span></span><br><span class="line">        <span class="comment">// é—®è·¯ï¼šServlet2ï¼ˆæŸœå° 2ï¼‰æ€ä¹ˆèµ°</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¯·æ±‚è½¬å‘å¿…é¡»è¦ä»¥æ–œæ æ‰“å¤´ï¼Œ/ æ–œæ è¡¨ç¤ºåœ°å€ä¸ºï¼šhttp://ip:port/å·¥ç¨‹å/ ,</span></span><br><span class="line"><span class="comment">         * æ˜ å°„åˆ° IDEA ä»£ç çš„ web ç›®å½•</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        RequestDispatcher requestDispatcher = request.getRequestDispatcher(&quot;/servlet2&quot;);</span></span><br><span class="line">        <span class="comment">//å¯ä»¥è½¬å‘åˆ° WEB-INFç›®å½•ä¸‹</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/form.html&quot;</span>);</span><br><span class="line">        <span class="comment">//// èµ°å‘ Sevlet2ï¼ˆæŸœå° 2ï¼‰</span></span><br><span class="line">        requestDispatcher.forward(request,response);</span><br><span class="line">     <span class="comment">//ä¸èƒ½è·³è½¬åˆ°å¤–éƒ¨åœ°å€ åŸå› ï¼šé‡‡ç”¨è¯¥æ–¹æ³•è·³è½¬çš„åœ°å€æ˜¯ï¼š//http://localhost:8080/servlet/www.baidu.com</span></span><br><span class="line">       <span class="comment">// request.getRequestDispatcher(&quot;www.baidu.com&quot;).forward(request,response);</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>servlet2ä»£ç <strong>ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//æ¥åˆ° servlet2</span></span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆåŠäº‹çš„ææ–™ï¼‰æŸ¥çœ‹</span></span><br><span class="line">        System.out.println(<span class="string">&quot;åœ¨ servlet2ä¸­æŸ¥çœ‹å‚æ•°ï¼šï¼ˆusernameï¼‰&quot;</span>+request.getParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥çœ‹ servlet 1 æ˜¯å¦æœ‰ç›–ç«  attribute</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥çœ‹ servlet 1 æ˜¯å¦æœ‰ç›–ç«  :&quot;</span>+request.getAttribute(<span class="string">&quot;key1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤„ç†è‡ªå·±çš„ä¸šåŠ¡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;servlet2å¤„ç†è‡ªå·±çš„ä¸šåŠ¡&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="baseæ ‡ç­¾çš„ä½œç”¨"><a href="#baseæ ‡ç­¾çš„ä½œç”¨" class="headerlink" title="baseæ ‡ç­¾çš„ä½œç”¨"></a>baseæ ‡ç­¾çš„ä½œç”¨</h4><blockquote><p>baseæ ‡ç­¾å¯ä»¥è®¾ç½®å½“å‰é¡µé¢ä¸­æ‰€æœ‰ç›¸å¯¹è·¯å¾„å·¥ä½œæ—¶ï¼Œå‚ç…§å“ªä¸ªè·¯å¾„æ¥è¿›è¡Œè·³è½¬</p></blockquote><p>ForwardCä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»è¿‡ ForwardC~~~~&quot;</span>);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/a/b/c.html&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118222513160.png" alt="image-20211118222513160"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211118222308452.png" alt="image-20211118222308452" style="zoom:80%;" />-</p><h4 id="Webä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"><a href="#Webä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„" class="headerlink" title="Webä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"></a>Webä¸­çš„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</h4><p>åœ¨javawebä¸­ï¼Œè·¯å¾„åˆ†ä¸ºç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</p><ul><li><p>ç›¸å¯¹è·¯å¾„ï¼š</p><ul><li><code>.</code>  è¡¨ç¤ºå½“å‰ç›®å½•</li><li><code>..</code>     è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•</li><li>èµ„æºåï¼š è¡¨ç¤ºå½“å‰ç›®å½•&#x2F;èµ„æºå</li></ul></li><li><p>ç»å¯¹è·¯å¾„</p><ul><li>http&#x2F;&#x2F;localhost:8080&#x2F;å·¥ç¨‹è·¯å¾„&#x2F;èµ„æºè·¯å¾„</li></ul></li><li><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œè·¯å¾„éƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œè€Œä¸ç®€å•çš„ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚</p><p>1ã€ç»å¯¹è·¯å¾„ 2ã€base+ç›¸å¯¹</p></li></ul><h4 id="Webä¸­æ–œæ ï¼ˆ-x2F-çš„ä¸åŒæ„ä¹‰"><a href="#Webä¸­æ–œæ ï¼ˆ-x2F-çš„ä¸åŒæ„ä¹‰" class="headerlink" title="Webä¸­æ–œæ ï¼ˆ&#x2F;)çš„ä¸åŒæ„ä¹‰"></a>Webä¸­æ–œæ ï¼ˆ&#x2F;)çš„ä¸åŒæ„ä¹‰</h4><p>åœ¨ web ä¸­ &#x2F; æ–œæ  æ˜¯ä¸€ç§ç»å¯¹è·¯å¾„ã€‚</p><p>&#x2F; æ–œæ  å¦‚æœè¢«æµè§ˆå™¨è§£æï¼Œå¾—åˆ°çš„åœ°å€æ˜¯ï¼š<a href="http://ip:port/">http://ip:port/</a></p><p><code>&lt;a href=&quot;/&quot;&gt;æ–œæ &lt;/a&gt;</code></p><p>&#x2F; æ–œæ  å¦‚æœè¢«æœåŠ¡å™¨è§£æï¼Œå¾—åˆ°çš„åœ°å€æ˜¯ï¼š<a href="http://ip:port/å·¥ç¨‹è·¯å¾„">http://ip:port/å·¥ç¨‹è·¯å¾„</a></p><p><code>&lt;url-pattern&gt;/forwardC&lt;/url-pattern&gt;</code></p><p><code>servletRequest.getRealPath(&quot;/&quot;)</code></p><p><code>request.getRequestDispatcher(&quot;/&quot;)</code></p><p>ç‰¹æ®Šæƒ…å†µï¼š<code>response.sendRediect(â€œ/â€);</code>   æŠŠæ–œæ å‘é€ç»™æµè§ˆå™¨è§£æã€‚å¾—åˆ° <a href="http://ip:port">http://ip:port</a></p><h3 id="HttpServletResponseç±»"><a href="#HttpServletResponseç±»" class="headerlink" title="HttpServletResponseç±»"></a>HttpServletResponseç±»</h3><h4 id="HttpServletResponseçš„ä½œç”¨"><a href="#HttpServletResponseçš„ä½œç”¨" class="headerlink" title="HttpServletResponseçš„ä½œç”¨"></a>HttpServletResponseçš„ä½œç”¨</h4><p>HttpServletResponse ç±»å’Œ HttpServletRequest ç±»ä¸€æ ·ã€‚æ¯æ¬¡è¯·æ±‚è¿›æ¥ï¼Œ</p><p>Tomcat æœåŠ¡å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Response å¯¹è±¡ä¼  é€’ç»™ Servlet ç¨‹åºå»ä½¿ç”¨ã€‚<br>HttpServletRequest è¡¨ç¤ºè¯·æ±‚è¿‡æ¥çš„ä¿¡æ¯ï¼ŒHttpServletResponse</p><p>è¡¨ç¤ºæ‰€æœ‰å“åº”çš„ä¿¡æ¯ï¼Œ æˆ‘ä»¬å¦‚æœéœ€è¦è®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œ</p><p>éƒ½å¯ä»¥é€šè¿‡HttpServletResponse å¯¹è±¡æ¥è¿›è¡Œè®¾ç½®</p><h4 id="ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜"><a href="#ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜" class="headerlink" title="ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜"></a>ä¸¤ä¸ªè¾“å‡ºæµçš„è¯´æ˜</h4><ul><li>å­—èŠ‚æµ<ul><li>é€šè¿‡ getOutputStream()è·å– å¸¸ç”¨äºä¸‹è½½ï¼ˆä¼ é€’äºŒè¿›åˆ¶æ•°æ®ï¼‰</li></ul></li><li>å­—ç¬¦æµ<ul><li>é€šè¿‡ getWriter()è·å–å¸¸ç”¨äºå›ä¼ å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰</li></ul></li></ul><p>ä¸¤ä¸ªæµåŒæ—¶åªèƒ½ä½¿ç”¨ä¸€ä¸ªã€‚ ä½¿ç”¨äº†å­—èŠ‚æµï¼Œå°±ä¸èƒ½å†ä½¿ç”¨å­—ç¬¦æµï¼Œåä¹‹äº¦ç„¶ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211120145954071.png" alt="image-20211120145954071" style="zoom:80%;" />-</p><h4 id="å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®"><a href="#å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®" class="headerlink" title="å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®"></a>å¦‚ä½•å¾€å®¢æˆ·ç«¯å›ä¼ æ•°æ®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseIOServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,IOException &#123;</span><br><span class="line"><span class="comment">// è¦æ±‚ ï¼š å¾€å®¢æˆ·ç«¯å›ä¼  å­—ç¬¦ä¸² æ•°æ®ã€‚</span></span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">writer.write(<span class="string">&quot;response&#x27;s content!!!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å“åº”ä¹±ç è§£å†³"><a href="#å“åº”ä¹±ç è§£å†³" class="headerlink" title="å“åº”ä¹±ç è§£å†³"></a>å“åº”ä¹±ç è§£å†³</h4><ul><li><p><strong>æ–¹æ¡ˆä¸€(ä¸æ¨èä½¿ç”¨)</strong></p><ul><li>&#96;&#96;&#96;java</li></ul><p>  &#x2F;&#x2F; è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†ä¸º UTF-8<br>  resp.setCharacterEncoding(â€œUTF-8â€);<br>  &#x2F;&#x2F; é€šè¿‡å“åº”å¤´ï¼Œè®¾ç½®æµè§ˆå™¨ä¹Ÿä½¿ç”¨ UTF-8 å­—ç¬¦é›†<br>  resp.setHeader(â€œContent-Typeâ€, â€œtext&#x2F;html;<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **æ–¹æ¡ˆäºŒ(æ¨èä½¿ç”¨)**</span><br><span class="line"></span><br><span class="line">    - ```java</span><br><span class="line">    // å®ƒä¼šåŒæ—¶è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨ UTF-8 å­—ç¬¦é›†ï¼Œè¿˜è®¾ç½®äº†å“åº”å¤´</span><br><span class="line">    // æ­¤æ–¹æ³•ä¸€å®šè¦åœ¨è·å–æµå¯¹è±¡ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span><br><span class="line">    resp.setContentType(&quot;text/html; charset=UTF-8&quot;);</span><br></pre></td></tr></table></figure></p></li></ul><h4 id="è¯·æ±‚é‡å®šå‘"><a href="#è¯·æ±‚é‡å®šå‘" class="headerlink" title="è¯·æ±‚é‡å®šå‘"></a>è¯·æ±‚é‡å®šå‘</h4><p>è¯·æ±‚é‡å®šå‘ï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯è¯´ã€‚æˆ‘ç»™ä½ ä¸€äº›åœ°å€ã€‚</p><p>ä½ å»æ–°åœ°å€è®¿é—®ã€‚å«è¯·æ±‚ é‡å®šå‘ï¼ˆå› ä¸ºä¹‹å‰çš„åœ°å€å¯èƒ½å·²ç»è¢«åºŸå¼ƒï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211120151105871.png" alt="image-20211120151105871"  /><p>è¯·æ±‚é‡å®šå‘çš„ç‰¹ç‚¹ï¼š</p><p>1ã€æµè§ˆå™¨åœ°å€æ ä¼šå‘ç”Ÿå˜åŒ–<br>2ã€ä¸¤æ¬¡è¯·æ±‚<br>3ã€ä¸å…±äº«RequeståŸŸä¸­æ•°æ®<br>4ã€ä¸èƒ½è®¿é—®WEB-INFä¸‹çš„èµ„æº<br>5ã€å¯ä»¥è®¿é—®å·¥ç¨‹å¤–çš„èµ„æº**</p><ul><li><p><strong>è¯·æ±‚é‡å®šå‘æ–¹å¼ä¸€ï¼š</strong></p><ul><li>&#96;&#96;&#96;java<br>  &#x2F;&#x2F;è®¾ç½®è¯·æ±‚é‡å®šå‘<br>  &#x2F;&#x2F;1.è®¾ç½®å“åº”çŠ¶æ€ç  ä¸º302<br>response.setStatus(302);<br>  &#x2F;&#x2F;2.è®¾ç½®å“åº”å¤´ï¼Œè¯´æ˜æ–°çš„åœ°å€åœ¨å“ªé‡Œ<br>response.setHeader(â€œLocationâ€,â€<a href="http://localhost:8080/servlet02/response2">http://localhost:8080/servlet02/response2</a>â€œ);  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **è¯·æ±‚é‡å®šå‘æ–¹å¼äºŒï¼š**</span><br><span class="line"></span><br><span class="line">    - ```java</span><br><span class="line">        //è¯·æ±‚é‡å®šå‘æ–¹å¼äºŒï¼ˆæ¨èä½¿ç”¨ï¼‰</span><br><span class="line">        response.sendRedirect(&quot;http://localhost:8080/servlet02/response2&quot;);</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å…³äºä¸­æ–‡ä¹±ç çš„è§£å†³æ€»ç»“"><a href="#å…³äºä¸­æ–‡ä¹±ç çš„è§£å†³æ€»ç»“" class="headerlink" title="å…³äºä¸­æ–‡ä¹±ç çš„è§£å†³æ€»ç»“"></a>å…³äºä¸­æ–‡ä¹±ç çš„è§£å†³æ€»ç»“</h3><p>requestçš„postè¯·æ±‚å®¹æ˜“å‡ºç°ä¹±ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‹¥è¯·æ±‚å†…å®¹æœ‰ä¸­æ–‡ ä¼šå‡ºç°ä¹±ç </span></span><br><span class="line">     <span class="comment">// æ‰€ä»¥éœ€è¦è®¾ç½®å­—ç¬¦é›†ç¼–ç  æ³¨æ„ï¼šè¯¥æ–¹æ³•éœ€è¦åœ¨è·å–å‚æ•°è¯·æ±‚ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span></span><br><span class="line"> request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><p>responseçš„å“åº”å‡ºç°ä¹±ç ï¼šä¸¤ç§æ–¹æ¡ˆï¼š</p><p>1ã€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æœåŠ¡å™¨å­—ç¬¦é›†ä¸º UTF-8</span></span><br><span class="line">resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// é€šè¿‡å“åº”å¤´ï¼Œè®¾ç½®æµè§ˆå™¨ä¹Ÿä½¿ç”¨ UTF-8 å­—ç¬¦é›†</span></span><br><span class="line">resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html; </span></span><br></pre></td></tr></table></figure><p>2ã€æ¨èä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ƒä¼šåŒæ—¶è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨ UTF-8 å­—ç¬¦é›†ï¼Œè¿˜è®¾ç½®äº†å“åº”å¤´</span></span><br><span class="line"><span class="comment">// æ­¤æ–¹æ³•ä¸€å®šè¦åœ¨è·å–æµå¯¹è±¡ä¹‹å‰è°ƒç”¨æ‰æœ‰æ•ˆ</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="ä¹¦åŸé¡¹ç›®â€“ç¬¬äºŒé˜¶æ®µ"><a href="#ä¹¦åŸé¡¹ç›®â€“ç¬¬äºŒé˜¶æ®µ" class="headerlink" title="ä¹¦åŸé¡¹ç›®â€“ç¬¬äºŒé˜¶æ®µ"></a>ä¹¦åŸé¡¹ç›®â€“ç¬¬äºŒé˜¶æ®µ</h2><h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><ul><li><p>éœ€æ±‚ 1ï¼šç”¨æˆ·æ³¨å†Œ<br>éœ€æ±‚å¦‚ä¸‹ï¼š<br>1ï¼‰è®¿é—®æ³¨å†Œé¡µé¢<br>2ï¼‰å¡«å†™æ³¨å†Œä¿¡æ¯ï¼Œæäº¤ç»™æœåŠ¡å™¨<br>3ï¼‰æœåŠ¡å™¨åº”è¯¥ä¿å­˜ç”¨æˆ·<br>4ï¼‰å½“ç”¨æˆ·å·²ç»å­˜åœ¨â€”-æç¤ºç”¨æˆ·æ³¨å†Œ å¤±è´¥ï¼Œç”¨æˆ·åå·²å­˜åœ¨<br>5ï¼‰å½“ç”¨æˆ·ä¸å­˜åœ¨â€”â€“æ³¨å†ŒæˆåŠŸ</p></li><li><p>éœ€æ±‚ 2ï¼šç”¨æˆ·ç™»é™†<br>éœ€æ±‚å¦‚ä¸‹ï¼š<br>1ï¼‰è®¿é—®ç™»é™†é¡µé¢<br>2ï¼‰å¡«å†™ç”¨æˆ·åå¯†ç åæäº¤<br>3ï¼‰æœåŠ¡å™¨åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨<br>4ï¼‰å¦‚æœç™»é™†å¤±è´¥ â€”&gt;&gt;&gt;&gt; è¿”å›ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ä¿¡æ¯<br>5ï¼‰å¦‚æœç™»å½•æˆåŠŸ â€”&gt;&gt;&gt;&gt; è¿”å›ç™»é™†æˆåŠŸ ä¿¡æ¯</p></li></ul><h3 id="JavaEEçš„ä¸‰å±‚æ¶æ„"><a href="#JavaEEçš„ä¸‰å±‚æ¶æ„" class="headerlink" title="JavaEEçš„ä¸‰å±‚æ¶æ„"></a>JavaEEçš„ä¸‰å±‚æ¶æ„</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211120174608782.png" alt="image-20211120174608782"></p><p>åˆ†å±‚çš„ç›®çš„æ˜¯ä¸ºäº†è§£è€¦ã€‚è§£è€¦å°±æ˜¯ä¸ºäº†é™ä½ä»£ç çš„è€¦åˆåº¦ã€‚æ–¹ä¾¿é¡¹ç›®åæœŸçš„ç»´æŠ¤å’Œå‡çº§ã€‚</p><p>web å±‚ com.izumi.web&#x2F;servlet&#x2F;controller<br>service å±‚ com.izumi.service Serviceæ¥å£åŒ…<br>com.izumi.service.impl Service æ¥å£å®ç°ç±»<br>dao æŒä¹…å±‚ com.izumi.dao Dao æ¥å£åŒ…<br>com.izumi.dao.impl Dao æ¥å£å®ç°ç±»<br>å®ä½“ bean å¯¹è±¡ com.izumi.pojo&#x2F;entity&#x2F;domain&#x2F;bean JavaBean ç±»<br>æµ‹è¯•åŒ… com.izumi.test&#x2F;junit<br>å·¥å…·ç±» com.izumi.utils</p><h3 id="1ã€åˆ›å»ºä¹¦åŸé¡¹ç›®æ•°æ®åº“æ‰€éœ€è¦çš„è¡¨"><a href="#1ã€åˆ›å»ºä¹¦åŸé¡¹ç›®æ•°æ®åº“æ‰€éœ€è¦çš„è¡¨" class="headerlink" title="1ã€åˆ›å»ºä¹¦åŸé¡¹ç›®æ•°æ®åº“æ‰€éœ€è¦çš„è¡¨"></a>1ã€åˆ›å»ºä¹¦åŸé¡¹ç›®æ•°æ®åº“æ‰€éœ€è¦çš„è¡¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE book;</span><br><span class="line"></span><br><span class="line">CREATE TABLE t_user(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">username VARCHAR(20) NOT NULL UNIQUE,</span><br><span class="line">`password` VARCHAR(32) NOT NULL,</span><br><span class="line">email VARCHAR(200));</span><br><span class="line"></span><br><span class="line">INSERT INTO t_user(username,`password`,email) VALUES(&#x27;admin&#x27;,&#x27;admin&#x27;,&#x27;admin@163.com&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM t_user;</span><br></pre></td></tr></table></figure><h3 id="2ã€ç¼–å†™æ•°æ®åº“å¯¹åº”çš„JavaBean"><a href="#2ã€ç¼–å†™æ•°æ®åº“å¯¹åº”çš„JavaBean" class="headerlink" title="2ã€ç¼–å†™æ•°æ®åº“å¯¹åº”çš„JavaBean"></a>2ã€ç¼–å†™æ•°æ®åº“å¯¹åº”çš„JavaBean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€ç¼–å†™å·¥å…·ç±»JdbcUtils"><a href="#3ã€ç¼–å†™å·¥å…·ç±»JdbcUtils" class="headerlink" title="3ã€ç¼–å†™å·¥å…·ç±»JdbcUtils"></a>3ã€ç¼–å†™å·¥å…·ç±»JdbcUtils</h3><h4 id="å¯¼å…¥éœ€è¦çš„jaråŒ…"><a href="#å¯¼å…¥éœ€è¦çš„jaråŒ…" class="headerlink" title="å¯¼å…¥éœ€è¦çš„jaråŒ…"></a>å¯¼å…¥éœ€è¦çš„jaråŒ…</h4><p>â€‹druid-1.1.9.jar</p><p>â€‹mysql-connector-java-5.1.7-bin.jar</p><h4 id="åœ¨-src-æºç ç›®å½•ä¸‹ç¼–å†™-jdbc-properties-å±æ€§é…ç½®æ–‡ä»¶ï¼š"><a href="#åœ¨-src-æºç ç›®å½•ä¸‹ç¼–å†™-jdbc-properties-å±æ€§é…ç½®æ–‡ä»¶ï¼š" class="headerlink" title="åœ¨ src æºç ç›®å½•ä¸‹ç¼–å†™ jdbc.properties å±æ€§é…ç½®æ–‡ä»¶ï¼š"></a>åœ¨ src æºç ç›®å½•ä¸‹ç¼–å†™ jdbc.properties å±æ€§é…ç½®æ–‡ä»¶ï¼š</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">zzt</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/book</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™-JdbcUtilsç±»"><a href="#ç¼–å†™-JdbcUtilsç±»" class="headerlink" title="ç¼–å†™ JdbcUtilsç±»"></a>ç¼–å†™ JdbcUtilsç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//é€šè¿‡åå°„è·å–è¿æ¥propertiesè·¯å¾„</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">loadStream</span> <span class="operator">=</span> JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line">            properties.load(loadStream);</span><br><span class="line">            <span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">            dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">    <span class="comment">//å¦‚æœè¿”å›nullï¼Œè¯´æ˜è·å–è¿æ¥å¤±è´¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             connection = dataSource.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="JdbcUtilsæµ‹è¯•"><a href="#JdbcUtilsæµ‹è¯•" class="headerlink" title="JdbcUtilsæµ‹è¯•"></a>JdbcUtilsæµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.izumi.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.izumi.utils.JdbcUtils;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="comment">//æµ‹è¯• JdbcUtils</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtilsTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JdbcUtils.getConnection();</span><br><span class="line">            System.out.println(connection);</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™BaseDao"><a href="#ç¼–å†™BaseDao" class="headerlink" title="ç¼–å†™BaseDao"></a>ç¼–å†™BaseDao</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BasicDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å®ç°å¢æ”¹åˆ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql ä¼ å…¥ çš„ update sqlè¯­å¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args    sqlå¯¹åº”çš„å‚æ•°å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›-1è¯´æ˜å¤±è´¥ï¼Œè¿”å›å…¶ä»–å€¼å³è¡¨ç¤ºå½±å“çš„è¡Œæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(String sql,Object...args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JdbcUtils.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="keyword">return</span>  queryRunner.update(connection,sql,args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.close(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢è¿”å›ä¸€ä¸ªJavaBeançš„ sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type è¿”å›çš„å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql   æ‰§è¡Œçš„sqlè¯­å¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args  sqlå¯¹åº”çš„å‚æ•°å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;   è¿”å›çš„ç±»å‹çš„æ³›å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">queryForOne</span><span class="params">(Class&lt;T&gt; type,String sql,Object...args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JdbcUtils.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>   queryRunner.query(connection,sql,<span class="keyword">new</span> <span class="title class_">BeanHandler</span>&lt;T&gt;(type),args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.close(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢è¿”å›å¤šä¸ªJavaBeançš„ sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type è¿”å›çš„å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql   æ‰§è¡Œçš„sqlè¯­å¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args  sqlå¯¹åº”çš„å‚æ•°å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;   è¿”å›çš„ç±»å‹çš„æ³›å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">queryForList</span><span class="params">(Class&lt;T&gt; type, String sql, Object...args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JdbcUtils.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>   queryRunner.query(connection,sql,<span class="keyword">new</span> <span class="title class_">BeanListHandler</span>&lt;T&gt;(type),args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.close(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œè¿”å›ä¸€è¡Œä¸€åˆ—çš„ æŸ¥è¯¢ è¯­å¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">queryForSingValue</span><span class="params">(String sql,Object...args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JdbcUtils.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>   queryRunner.query(connection,sql,<span class="keyword">new</span> <span class="title class_">ScalarHandler</span>(),args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.close(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™UserDaoå’Œæµ‹è¯•"><a href="#ç¼–å†™UserDaoå’Œæµ‹è¯•" class="headerlink" title="ç¼–å†™UserDaoå’Œæµ‹è¯•"></a><strong>ç¼–å†™</strong>UserDaoå’Œæµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BasicDao</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where username = ?&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> queryForOne(User.class,sql,username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserByUsernameAndPwd</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where username = ? and password = ?&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> queryForOne(User.class,sql,username,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">saveUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user (username,password,email) values(?,?,?);&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> update(sql,user.getUsername(),user.getPassword(),user.getEmail());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™UserServiceå’Œæµ‹è¯•"><a href="#ç¼–å†™UserServiceå’Œæµ‹è¯•" class="headerlink" title="ç¼–å†™UserServiceå’Œæµ‹è¯•"></a>ç¼–å†™UserServiceå’Œæµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">         userDao.saveUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>   userDao.queryUserByUsernameAndPwd(user.getUsername(),user.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">exitsUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.queryUserByUsername(username);</span><br><span class="line">        <span class="keyword">if</span> (user==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//è¯´æ˜æ²¡æœ‰æŸ¥åˆ°ï¼Œç”¨æˆ·åä¸å­˜åœ¨ï¼Œå³å¯ä»¥ä½¿ç”¨</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™webå±‚"><a href="#ç¼–å†™webå±‚" class="headerlink" title="ç¼–å†™webå±‚"></a>ç¼–å†™webå±‚</h3><h4 id="å®ç°ç”¨æˆ·æ³¨å†Œçš„åŠŸèƒ½"><a href="#å®ç°ç”¨æˆ·æ³¨å†Œçš„åŠŸèƒ½" class="headerlink" title="å®ç°ç”¨æˆ·æ³¨å†Œçš„åŠŸèƒ½"></a>å®ç°ç”¨æˆ·æ³¨å†Œçš„åŠŸèƒ½</h4><ul><li>å›¾è§£åˆ†æï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211120214837725.png" alt="image-20211120214837725"></p><h5 id="ä¿®æ”¹-regist-html-å’Œ-regist-success-html-é¡µé¢"><a href="#ä¿®æ”¹-regist-html-å’Œ-regist-success-html-é¡µé¢" class="headerlink" title="ä¿®æ”¹ regist.html å’Œ regist_success.html é¡µé¢"></a>ä¿®æ”¹ regist.html å’Œ regist_success.html é¡µé¢</h5><p><strong>1ã€æ·»åŠ  base æ ‡ç­¾</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    baseæ ‡ç­¾ï¼Œæ°¸è¿œå›ºå®šbaseæ ‡ç­¾çš„è·³è½¬ç»“æœ  ä¸€èˆ¬å†™åˆ° å·¥ç¨‹è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/book/&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2ã€ä¿®æ”¹ base æ ‡ç­¾å¯¹é¡µé¢ä¸­æ‰€æœ‰ç›¸å¯¹è·¯å¾„çš„å½±å“ï¼ˆæµè§ˆå™¨ F12ï¼Œå“ªä¸ªæŠ¥çº¢ï¼Œæ”¹å“ªä¸ª)</strong></p><p>â€‹ä»¥ä¸‹æ˜¯å‡ ä¸ªä¿®æ”¹ç¤ºä¾‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;static/css/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;static/script/jquery-1.7.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3ã€ä¿®æ”¹æ³¨å†Œè¡¨å•çš„æäº¤åœ°å€å’Œè¯·æ±‚æ–¹å¼</strong></p><p><code>&lt;form action=&quot;registerServlet&quot; method=&quot;post&quot;&gt;</code></p><h4 id="ç”¨æˆ·ç™»å½•åŠŸèƒ½çš„å®ç°"><a href="#ç”¨æˆ·ç™»å½•åŠŸèƒ½çš„å®ç°" class="headerlink" title="ç”¨æˆ·ç™»å½•åŠŸèƒ½çš„å®ç°"></a>ç”¨æˆ·ç™»å½•åŠŸèƒ½çš„å®ç°</h4><ul><li>å›¾è§£ç”¨æˆ·ç™»å½•</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211120223908767.png" alt="image-20211120223908767"></p><h5 id="ä¿®æ”¹-login-html-é¡µé¢å’Œ-login-success-html-é¡µé¢"><a href="#ä¿®æ”¹-login-html-é¡µé¢å’Œ-login-success-html-é¡µé¢" class="headerlink" title="ä¿®æ”¹ login.html é¡µé¢å’Œ login_success.html é¡µé¢"></a>ä¿®æ”¹ login.html é¡µé¢å’Œ login_success.html é¡µé¢</h5><p>å’Œä¿®æ”¹ regist.html å’Œ regist_success.html é¡µé¢ç±»ä¼¼ï¼Œè¿™é‡Œä¸å†èµ˜è¿°</p><h5 id="ä¿®æ”¹-login-html-è¡¨å•çš„-æäº¤åœ°å€-å’Œ-è¯·æ±‚æ–¹å¼"><a href="#ä¿®æ”¹-login-html-è¡¨å•çš„-æäº¤åœ°å€-å’Œ-è¯·æ±‚æ–¹å¼" class="headerlink" title="ä¿®æ”¹ login.html è¡¨å•çš„ æäº¤åœ°å€ å’Œ è¯·æ±‚æ–¹å¼"></a>ä¿®æ”¹ login.html è¡¨å•çš„ æäº¤åœ°å€ å’Œ è¯·æ±‚æ–¹å¼</h5><p><code>&lt;form action=&quot;loginServlet&quot; method=&quot;post&quot;&gt;</code></p><h5 id="LoginServletç¨‹åº"><a href="#LoginServletç¨‹åº" class="headerlink" title="LoginServletç¨‹åº"></a>LoginServletç¨‹åº</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        1ã€è·å–è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="comment">//        2ã€è°ƒç”¨XxxService.xxx0å¤„ç†ä¸šåŠ¡</span></span><br><span class="line"><span class="comment">//        userService.login()ç™»å½•</span></span><br><span class="line">        <span class="comment">//        3ã€æ ¹æ®login()æ–¹æ³•è¿”å›ç»“æœåˆ¤æ–­ç™»æœ€æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="comment">//                æˆåŠŸ</span></span><br><span class="line"><span class="comment">//        è·³åˆ°æˆåŠŸé¡µé¢loginsuccess. html</span></span><br><span class="line"> <span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> userService.login(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>, username, password, <span class="literal">null</span>)); </span><br><span class="line">        <span class="keyword">if</span>(loginUser==<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç™»é™†å¤±è´¥&quot;</span>);</span><br><span class="line">            <span class="comment">//                å¤±è´¥</span></span><br><span class="line">            <span class="comment">//        è·³å›ç™»å½•é¡µé¢</span></span><br><span class="line">            System.out.println(<span class="string">&quot;ç”¨æˆ·åå¯†ç é”™è¯¯ï¼ï¼ï¼&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/pages/user/login.html&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°æˆåŠŸé¡µé¢</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/pages/user/login_success.html&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="jsp"><a href="#jsp" class="headerlink" title="jsp"></a>jsp</h2><h3 id="ä»€ä¹ˆæ˜¯jspï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯jspï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯jspï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯jspï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>jsp çš„å…¨æ¢æ˜¯ java server pagesã€‚Java çš„æœåŠ¡å™¨é¡µé¢ã€‚</p><p>jsp çš„ä¸»è¦ä½œç”¨æ˜¯ä»£æ›¿ Servlet ç¨‹åºå›ä¼  html é¡µé¢çš„æ•°æ®ã€‚</p><p>å› ä¸º Servlet ç¨‹åºå›ä¼  html é¡µé¢æ•°æ®æ˜¯ä¸€ä»¶éå¸¸ç¹é”çš„äº‹æƒ…ã€‚å¼€å‘æˆæœ¬å’Œç»´æŠ¤æˆæœ¬éƒ½æé«˜ã€‚</p><p>2ã€jsp å¦‚ä½•è®¿é—®ï¼š</p><p>jsp é¡µé¢å’Œ html é¡µé¢ä¸€æ ·ï¼Œéƒ½æ˜¯å­˜æ”¾åœ¨ web ç›®å½•ä¸‹ã€‚è®¿é—®ä¹Ÿè·Ÿè®¿é—® html é¡µé¢ä¸€æ ·ã€‚</p><p>æ¯”å¦‚ï¼š åœ¨ web ç›®å½•ä¸‹æœ‰å¦‚ä¸‹çš„æ–‡ä»¶ï¼š</p><p>web ç›®å½•</p><p>a.html é¡µé¢ è®¿é—®åœ°å€æ˜¯ &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/å·¥ç¨‹è·¯å¾„/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/a.html</a></p><p>b.jsp é¡µé¢ è®¿é—®åœ°å€æ˜¯ &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&gt;&gt;&gt;&gt;&gt; <a href="http://ip:port/å·¥ç¨‹è·¯å¾„/b.jsp">http://ip:port/å·¥ç¨‹è·¯å¾„/b.jsp</a></p><h3 id="jspçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"><a href="#jspçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="jspçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"></a>jspçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ</h3><p>jsp é¡µé¢<font title = "blue">æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servlet ç¨‹åº</font>ã€‚ å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—® jsp é¡µé¢çš„æ—¶å€™ã€‚</p><p><span alt="underline">Tomcat æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠ jsp é¡µé¢ç¿»è¯‘æˆä¸ºä¸€ä¸ª java æºæ–‡ä»¶ã€‚</span></p><p>å¹¶ä¸”å¯¹å®ƒè¿›è¡Œç¼–è¯‘æˆ ä¸º.class å­—èŠ‚ç ç¨‹åºã€‚æˆ‘ä»¬æ‰“å¼€ java æºæ–‡ä»¶ä¸éš¾å‘ç°å…¶é‡Œé¢çš„å†…å®¹æ˜¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211121114836668.png" alt="image-20211121114836668 "  style="zoom:80%;" />-</p><p>æˆ‘ä»¬è·Ÿè¸ªåŸä»£ç å‘ç°ï¼ŒHttpJspBase ç±»ã€‚å®ƒç›´æ¥åœ°ç»§æ‰¿äº† HttpServlet ç±»ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ã€‚jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»ï¼Œå®ƒé—´æ¥äº†ç»§ æ‰¿äº† HttpServlet ç±»ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç¿»è¯‘å‡ºæ¥çš„æ˜¯ä¸€ä¸ª Servlet</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211121145858168.png" alt="image-20211121145858168" style="zoom:80%;" />-</p><p><font title = "green">æ€»ç»“ï¼š</font>  é€šè¿‡ç¿»è¯‘çš„ java æºä»£ç æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ç»“æœï¼šjsp å°±æ˜¯ Servlet ç¨‹åºã€‚</p><p>å¤§å®¶ä¹Ÿå¯ä»¥å»è§‚å¯Ÿç¿»è¯‘å‡ºæ¥çš„ Servlet ç¨‹åºçš„æºä»£ç ï¼Œä¸éš¾å‘ç°ã€‚</p><p>å…¶åº•å±‚å®ç°ï¼Œä¹Ÿæ˜¯é€šè¿‡è¾“å‡ºæµã€‚æŠŠ html é¡µé¢æ•°æ®å›ä¼  ç»™å®¢æˆ·ç«¯</p><h3 id="jspçš„ä¸‰ç§è¯­æ³•"><a href="#jspçš„ä¸‰ç§è¯­æ³•" class="headerlink" title="jspçš„ä¸‰ç§è¯­æ³•"></a>jspçš„ä¸‰ç§è¯­æ³•</h3><h4 id="a-jsp-å¤´éƒ¨çš„-page-æŒ‡ä»¤"><a href="#a-jsp-å¤´éƒ¨çš„-page-æŒ‡ä»¤" class="headerlink" title="a)jsp å¤´éƒ¨çš„ page æŒ‡ä»¤"></a>a)jsp å¤´éƒ¨çš„ page æŒ‡ä»¤</h4><p>jsp çš„ page æŒ‡ä»¤å¯ä»¥ä¿®æ”¹ jsp é¡µé¢ä¸­ä¸€äº›é‡è¦çš„å±æ€§ï¼Œæˆ–è€…è¡Œä¸ºã€‚</p><p><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot;&gt;</code></p><p>i. language å±æ€§è¡¨ç¤º jsp ç¿»è¯‘åæ˜¯ä»€ä¹ˆè¯­è¨€æ–‡ä»¶ã€‚æš‚æ—¶åªæ”¯æŒ javaã€‚</p><p>ii. contentType å±æ€§ è¡¨ç¤º jsp è¿”å›çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆã€‚ä¹Ÿæ˜¯æºç ä¸­ response.setContentType()å‚æ•°å€¼</p><p>iii. pageEncoding å±æ€§ è¡¨ç¤ºå½“å‰ jsp é¡µé¢æ–‡ä»¶æœ¬èº«çš„å­—ç¬¦é›†ã€‚</p><p>iv. import å±æ€§ è·Ÿ java æºä»£ç ä¸­ä¸€æ ·ã€‚ç”¨äºå¯¼åŒ…ï¼Œå¯¼ç±»ã€‚</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<span alt = "hollow">ä¸¤ä¸ªå±æ€§æ˜¯ç»™ out è¾“å‡ºæµä½¿ç”¨</span>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>v. autoFlush å±æ€§ è®¾ç½®å½“ out è¾“å‡ºæµç¼“å†²åŒºæ»¡äº†ä¹‹åï¼Œæ˜¯å¦è‡ªåŠ¨åˆ·æ–°å†²çº§åŒºã€‚é»˜è®¤å€¼æ˜¯ trueã€‚</p><p>vi. buffer å±æ€§è®¾ç½® out ç¼“å†²åŒºçš„å¤§å°ã€‚é»˜è®¤æ˜¯ 8kb</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<span alt = "hollow">ä¸¤ä¸ªå±æ€§æ˜¯ç»™ out è¾“å‡ºæµä½¿ç”¨</span>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>vii. errorPage å±æ€§ è®¾ç½®å½“ jsp é¡µé¢è¿è¡Œæ—¶å‡ºé”™ï¼Œè‡ªåŠ¨è·³è½¬å»çš„é”™è¯¯é¡µé¢è·¯å¾„ã€‚</p><!--errorPage è¡¨ç¤ºé”™è¯¯åè‡ªåŠ¨è·³è½¬å»çš„è·¯å¾„ <br/>è¿™ä¸ªè·¯å¾„ä¸€èˆ¬éƒ½æ˜¯ä»¥æ–œæ æ‰“å¤´ï¼Œå®ƒè¡¨ç¤ºè¯·æ±‚åœ°å€ä¸º http://ip:port/å·¥ç¨‹è·¯å¾„/æ˜ å°„åˆ°ä»£ç çš„ Web ç›®å½•--><p>viii. isErrorPage å±æ€§ è®¾ç½®å½“å‰ jsp é¡µé¢æ˜¯å¦æ˜¯é”™è¯¯ä¿¡æ¯é¡µé¢ã€‚</p><p>â€‹é»˜è®¤æ˜¯ falseã€‚å¦‚æœæ˜¯ true å¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯ã€‚</p><p>ix. session å±æ€§ è®¾ç½®è®¿é—®å½“å‰ jsp é¡µé¢ï¼Œæ˜¯å¦ä¼šåˆ›å»º HttpSession å¯¹è±¡ã€‚é»˜è®¤æ˜¯ trueã€‚</p><p>x. extends å±æ€§ è®¾ç½® jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»é»˜è®¤ç»§æ‰¿è°ã€‚</p><h4 id="b-jspä¸­å¸¸ç”¨è„šæœ¬"><a href="#b-jspä¸­å¸¸ç”¨è„šæœ¬" class="headerlink" title="b)jspä¸­å¸¸ç”¨è„šæœ¬"></a>b)jspä¸­å¸¸ç”¨è„šæœ¬</h4><h5 id="å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰"><a href="#å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰" class="headerlink" title="å£°æ˜è„šæœ¬ï¼ˆæå°‘ä½¿ç”¨ï¼‰"></a>å£°æ˜è„šæœ¬ï¼ˆ<font title ="gray">æå°‘ä½¿ç”¨</font>ï¼‰</h5><blockquote><p>å£°æ˜è„šæœ¬çš„æ ¼å¼æ˜¯ï¼š</p><p><code>&lt;%! å£°æ˜ java ä»£ç  %&gt;</code></p><p>ä½œç”¨ï¼šå¯ä»¥ç»™ jsp ç¿»è¯‘å‡ºæ¥çš„ java ç±»å®šä¹‰å±æ€§å’Œæ–¹æ³•ç”šè‡³æ˜¯é™æ€ä»£ç å—ã€‚å†…éƒ¨ç±»ç­‰ã€‚</p></blockquote><p><font title ="blue">ç¤ºä¾‹ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; map;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h5 id="è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰"><a href="#è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="è¡¨è¾¾å¼è„šæœ¬ï¼ˆå¸¸ç”¨ï¼‰"></a>è¡¨è¾¾å¼è„šæœ¬ï¼ˆ<font title ="gray">å¸¸ç”¨</font>ï¼‰</h5><blockquote><p>è¡¨è¾¾å¼è„šæœ¬çš„æ ¼å¼æ˜¯ï¼š<code>&lt;%=è¡¨è¾¾å¼%&gt;</code></p><p>è¡¨è¾¾å¼è„šæœ¬çš„ä½œç”¨æ˜¯ï¼šåœ¨jsp é¡µé¢ä¸Šè¾“å‡ºæ•°æ®ã€‚</p></blockquote><p><strong>è¡¨è¾¾å¼è„šæœ¬çš„ç‰¹ç‚¹ï¼š</strong><br>1ã€æ‰€æœ‰çš„è¡¨è¾¾å¼è„šæœ¬éƒ½ä¼šè¢«ç¿»è¯‘åˆ°<code>_jspService()</code> æ–¹æ³•ä¸­_<br>2ã€è¡¨è¾¾å¼è„šæœ¬éƒ½ä¼šè¢«ç¿»è¯‘æˆä¸º out.print()è¾“å‡ºåˆ°é¡µé¢ä¸Š<br>3ã€ç”±äºè¡¨è¾¾å¼è„šæœ¬ç¿»è¯‘çš„å†…å®¹éƒ½åœ¨<code>_jspService() </code>æ–¹æ³•ä¸­,<br>â€‹æ‰€ä»¥<code>_jspService()</code>æ–¹æ³•ä¸­çš„å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨,å¦‚requestå¯¹è±¡ã€‚<br>4ã€è¡¨è¾¾å¼è„šæœ¬ä¸­çš„è¡¨è¾¾å¼ä¸èƒ½ä»¥åˆ†å·ç»“æŸã€‚</p><p><font title ="blue">ä»£ç ç¤ºä¾‹:</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%=<span class="number">12</span>%&gt;</span><br><span class="line">&lt;%=<span class="number">12.22</span>%&gt;</span><br><span class="line">&lt;%=<span class="string">&quot;æˆ‘æ˜¯å­—ç¬¦ä¸²&quot;</span>%&gt;</span><br><span class="line">&lt;%=request.getParameter(<span class="string">&quot;username&quot;</span>)%&gt;</span><br></pre></td></tr></table></figure><h5 id="ä»£ç è„šæœ¬"><a href="#ä»£ç è„šæœ¬" class="headerlink" title="ä»£ç è„šæœ¬"></a>ä»£ç è„šæœ¬</h5><blockquote><p>ä»£ç è„šæœ¬çš„æ ¼å¼æ˜¯ï¼š</p><p><code>&lt;%javaè¯­å¥%&gt;</code></p><p>ä»£ç è„šæœ¬çš„ä½œç”¨æ˜¯ï¼šå¯ä»¥åœ¨ jsp é¡µé¢ä¸­ï¼Œç¼–å†™æˆ‘ä»¬è‡ªå·±éœ€è¦çš„åŠŸèƒ½ï¼ˆå†™çš„æ˜¯ java è¯­å¥ï¼‰ã€‚</p></blockquote><p>ä»£ç è„šæœ¬çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ol><li>ä»£ç è„šæœ¬ç¿»è¯‘ä¹‹åéƒ½åœ¨<code>_jspService</code> æ–¹æ³•ä¸­</li><li>ä»£ç è„šæœ¬ç”±äºç¿»è¯‘åˆ°<code>_jspService()</code>æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥åœ¨<code>_jspService()</code>æ–¹æ³•ä¸­çš„ç°æœ‰å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>è¿˜å¯ä»¥ç”±å¤šä¸ªä»£ç è„šæœ¬å—ç»„åˆå®Œæˆä¸€ä¸ªå®Œæ•´çš„ java è¯­å¥ã€‚</li><li>ä»£ç è„šæœ¬è¿˜å¯ä»¥å’Œè¡¨è¾¾å¼è„šæœ¬ä¸€èµ·ç»„åˆä½¿ç”¨ï¼Œåœ¨ jsp é¡µé¢ä¸Šè¾“å‡ºæ•°æ®</li></ol><p>ç»ƒä¹ ï¼š</p><ol><li>ä»£ç è„šæœ¬â€”-if è¯­å¥</li><li>ä»£ç è„šæœ¬â€”-for å¾ªç¯è¯­å¥</li><li>ç¿»è¯‘å java æ–‡ä»¶ä¸­_jspService æ–¹æ³•å†…çš„ä»£ç éƒ½å¯ä»¥å†™</li></ol><p><font title ="blue">ä»£ç ç¤ºä¾‹:</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--<span class="number">1.</span> ä»£ç è„šæœ¬----<span class="keyword">if</span> è¯­å¥--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">13</span>;</span><br><span class="line">    <span class="keyword">if</span> (i&gt;<span class="number">12</span>)&#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;ä½ èµ¢äº†ï¼ï¼&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;ä½ è¾“äº†ï¼ï¼ï¼&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">&lt;%--<span class="number">2.</span> ä»£ç è„šæœ¬----<span class="keyword">for</span> å¾ªç¯è¯­å¥--%&gt;</span><br><span class="line">&lt;table border=<span class="string">&quot;1&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;ç¬¬ &lt;%=j + <span class="number">1</span>%&gt;è¡Œ&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;%--<span class="number">3.</span> ç¿»è¯‘å java æ–‡ä»¶ä¸­_jspService æ–¹æ³•å†…çš„ä»£ç éƒ½å¯ä»¥å†™--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;ç”¨æˆ·åçš„è¯·æ±‚å‚æ•°å€¼æ˜¯ï¼š&quot;</span> + username);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h4 id="c-jspä¸­çš„ä¸‰ç§æ³¨é‡Š"><a href="#c-jspä¸­çš„ä¸‰ç§æ³¨é‡Š" class="headerlink" title="c)jspä¸­çš„ä¸‰ç§æ³¨é‡Š"></a>c)jspä¸­çš„ä¸‰ç§æ³¨é‡Š</h4><h5 id="i-html-æ³¨é‡Š"><a href="#i-html-æ³¨é‡Š" class="headerlink" title="i. html æ³¨é‡Š"></a>i. html æ³¨é‡Š</h5><blockquote><!-- è¿™æ˜¯ html æ³¨é‡Š --><p>html æ³¨é‡Šä¼šè¢«ç¿»è¯‘åˆ° java æºä»£ç ä¸­ã€‚åœ¨_jspService æ–¹æ³•é‡Œï¼Œä»¥ out.writer è¾“å‡ºåˆ°å®¢æˆ·ç«¯ã€‚</p></blockquote><h5 id="ii-java-æ³¨é‡Š"><a href="#ii-java-æ³¨é‡Š" class="headerlink" title="ii. java æ³¨é‡Š"></a>ii. java æ³¨é‡Š</h5><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">// å•è¡Œ java æ³¨é‡Š</span><br><span class="line">/* å¤šè¡Œ java æ³¨é‡Š */</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p>java æ³¨é‡Šä¼šè¢«ç¿»è¯‘åˆ° java æºä»£ç ä¸­ã€‚</p></blockquote><h5 id="iii-jsp-æ³¨é‡Š"><a href="#iii-jsp-æ³¨é‡Š" class="headerlink" title="iii. jsp æ³¨é‡Š"></a>iii. jsp æ³¨é‡Š</h5><blockquote><p><code>&lt;%-- è¿™æ˜¯ jsp æ³¨é‡Š --%&gt;</code><br>jsp æ³¨é‡Šå¯ä»¥æ³¨æ‰ï¼Œjsp é¡µé¢ä¸­æ‰€æœ‰ä»£ç </p></blockquote><h3 id="jspä¹å¤§å†…ç½®å¯¹è±¡"><a href="#jspä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="jspä¹å¤§å†…ç½®å¯¹è±¡"></a>jspä¹å¤§å†…ç½®å¯¹è±¡</h3><blockquote><p> jsp ä¸­çš„å†…ç½®å¯¹è±¡ï¼Œæ˜¯æŒ‡ Tomcat åœ¨ç¿»è¯‘ jsp é¡µé¢æˆä¸º Servlet æºä»£ç åï¼Œ</p><p> å†…éƒ¨æä¾›çš„ä¹å¤§å¯¹è±¡ï¼Œå«å†…ç½®å¯¹è±¡ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211121185134388.png" alt="image-20211121185134388"></p><h3 id="å››å¤§åŸŸå¯¹è±¡"><a href="#å››å¤§åŸŸå¯¹è±¡" class="headerlink" title="å››å¤§åŸŸå¯¹è±¡"></a>å››å¤§åŸŸå¯¹è±¡</h3><blockquote><p>å››ä¸ªåŸŸå¯¹è±¡åˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>pageContext(PageContextImplç±»)å½“å‰jspé¡µé¢èŒƒå›´å†…æœ‰æ•ˆ</p></li><li><p>request (HttpServletRequestç±»)ä¸€æ¬¡è¯·æ±‚å†…æœ‰æ•ˆ</p></li><li><p>session(HttpSessionç±»)ä¸€æ¬¡ä¼šè¯èŒƒå›´å†…æœ‰æ•ˆï¼ˆæ‰“å¼€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œç›´åˆ°å…³é—­æœåŠ¡å™¨ï¼‰</p></li><li><p>application (ServletContextç±»)æ•´ä¸ªwebå·¥ç¨‹èŒƒå›´å†…æœ‰æ•ˆï¼ˆåªè¦webå·¥ç¨‹ä¸åœæ­¢ï¼Œæ•°æ®éƒ½åœ¨ï¼‰</p></li></ul></blockquote><p>åŸŸå¯¹è±¡å¯ä»¥åƒMapä¸€æ ·å­˜å–æ•°æ®çš„å¯¹è±¡ã€‚å››ä¸ªåŸŸå¯¹è±¡åŠŸèƒ½ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯å®ƒä»¬æ•°æ®çš„å­˜å–èŒƒå›´ã€‚</p><p>è™½ç„¶åŸŸå¯¹è±¡å¯ä»¥å­˜å–æ•°æ®ã€‚åœ¨ä½¿ç”¨ä¸Šå®ƒä»¬æ˜¯æœ‰ä¼˜å…ˆé¡ºåºçš„ã€‚</p><p>å››ä¸ªåŸŸå¯¹è±¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼˜å…ˆé¡ºåºåˆ†åˆ«æ˜¯ï¼Œå®ƒä»¬ä»å°åˆ°å¤§çš„é¡ºåºï¼š</p><p>pageContextâ€”&gt; requestâ€“&gt;sessionâ€“&gt;application</p><p><font title ="blue">scope.jspç¤ºä¾‹:</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//å¾€å››ä¸ªåŸŸä¸­åˆ†åˆ«ä¿å­˜æ•°æ®</span></span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;pageContext&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;request&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;session&quot;</span>);</span><br><span class="line">    application.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;application&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">pageContext æ˜¯å¦æœ‰å€¼ï¼š&lt;%=pageContext.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">request æ˜¯å¦æœ‰å€¼ï¼š&lt;%=request.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">session æ˜¯å¦æœ‰å€¼ï¼š&lt;%=session.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">application æ˜¯å¦æœ‰å€¼ï¼š&lt;%=application.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.getRequestDispatcher(<span class="string">&quot;/scope2.jsp&quot;</span>).forward(request,response);</span><br><span class="line">    <span class="comment">//è·³è½¬åˆ° scope2å–å€¼ï¼ŒpageContextå–å‡ºçš„å€¼ä¸ºnull</span></span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><font title ="blue">scope2.jspç¤ºä¾‹:</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;scope2.jsp é¡µé¢&lt;/h1&gt;</span><br><span class="line">pageContext åŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=pageContext.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt; &lt;br&gt;</span><br><span class="line">request åŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=request.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt; &lt;br&gt;</span><br><span class="line">session åŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=session.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt; &lt;br&gt;</span><br><span class="line">application åŸŸæ˜¯å¦æœ‰å€¼ï¼š&lt;%=application.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt; &lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><font title ="green">è¯´æ˜ï¼š</font></p><ol><li>å½“æ‰§è¡Œåˆ°è¯·æ±‚è·³è½¬åˆ°scope2åï¼ŒpageContextåŸŸä¸ºnull</li><li>å½“å†æ¬¡è¯·æ±‚scope2æ—¶ï¼Œrequestä¸ºnull</li><li>å½“å…³é—­æµè§ˆå™¨ï¼Œåœ¨è®¿é—®scope2ï¼Œsessionä¸ºnull</li><li>å½“é‡æ–°éƒ¨ç½²é¡¹ç›®ï¼Œå†è®¿é—®scope2ï¼Œapplicationä¸ºnull</li></ol><h3 id="jsp-ä¸­çš„-out-è¾“å‡ºå’Œ-response-getWriter-è¾“å‡ºçš„åŒº-åˆ«"><a href="#jsp-ä¸­çš„-out-è¾“å‡ºå’Œ-response-getWriter-è¾“å‡ºçš„åŒº-åˆ«" class="headerlink" title="jsp ä¸­çš„ out è¾“å‡ºå’Œ response.getWriter è¾“å‡ºçš„åŒº åˆ«"></a>jsp ä¸­çš„ out è¾“å‡ºå’Œ response.getWriter è¾“å‡ºçš„åŒº åˆ«</h3><blockquote><p>response ä¸­è¡¨ç¤ºå“åº”ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨äºè®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹ï¼ˆè¾“å‡ºï¼‰</p><p>out ä¹Ÿæ˜¯ç»™ç”¨æˆ·åšè¾“å‡ºä½¿ç”¨çš„ã€‚</p></blockquote><p><strong>output1ç¤ºä¾‹ï¼š</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--    è‡ªè¡Œè°ƒç”¨ out.flushéªŒè¯--%&gt;</span><br><span class="line">&lt;%-- å‘ç° response è¾“å‡ºåœ¨æœ€å‰é¢</span><br><span class="line">          åŸå› æ˜¯ å½“jspé¡µé¢æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæˆåä¼šæ‰§è¡Œ out.flushæ–¹æ³•ï¼Œä¼šæŠŠoutç¼“å†²åŒºçš„æ•°æ®è¿½åŠ åˆ°</span><br><span class="line">          response ç¼“å†²åŒºæœ«å°¾--%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        JspWriter</span><br><span class="line">        out.print(<span class="string">&quot;outè¾“å‡º1&quot;</span>);</span><br><span class="line">        <span class="comment">//out.flush();//outè¾“å‡º1 responseè¾“å‡º1 responseè¾“å‡º2 outè¾“å‡º2</span></span><br><span class="line">        out.print(<span class="string">&quot;outè¾“å‡º2&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;responseè¾“å‡º1&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;responseè¾“å‡º2&quot;</span>);</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211121223520138.png" alt="image-20211121223520138"></p><p><strong>output2ç¤ºä¾‹ï¼š</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">        out.print(<span class="number">12</span>);<span class="comment">//åº•å±‚è°ƒç”¨ writeæ–¹æ³•ï¼Œå¹¶å…¨éƒ¨è½¬æˆäº†å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line">        out.write(<span class="number">12</span>);<span class="comment">//æ˜¾ç¤ºä¸æ­£å¸¸ï¼ŒåŸå› æ˜¯åº•å±‚é‡‡ç”¨ (char)è½¬åŒ–</span></span><br><span class="line">    %&gt;</span><br></pre></td></tr></table></figure><h3 id="jspå¸¸ç”¨æ ‡ç­¾"><a href="#jspå¸¸ç”¨æ ‡ç­¾" class="headerlink" title="jspå¸¸ç”¨æ ‡ç­¾"></a>jspå¸¸ç”¨æ ‡ç­¾</h3><h4 id="a-jsp-é™æ€åŒ…å«"><a href="#a-jsp-é™æ€åŒ…å«" class="headerlink" title="a)jsp é™æ€åŒ…å«"></a>a)jsp é™æ€åŒ…å«</h4><p><code>&lt;%@include file=&quot;&quot; %&gt;å°±æ˜¯é™æ€åŒ…å«</code></p><p><font title = "blue">ä¸»é¢˜includeç¤ºä¾‹</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--   &lt;%<span class="meta">@include</span> file=<span class="string">&quot;&quot;</span> %&gt;å°±æ˜¯é™æ€åŒ…å«</span><br><span class="line">        file å±æ€§æŒ‡å®šä½ è¦åŒ…å«çš„jspé¡µé¢çš„è·¯å¾„</span><br><span class="line">        åœ°å€ä¸­ç¬¬ä¸€ä¸ªæ–œæ  / è¡¨ç¤ºä¸º http:<span class="comment">//ip:port/å·¥ç¨‹è·¯å¾„/ æ˜ å°„åˆ°ä»£ç çš„webç›®å½•</span></span><br><span class="line">        --%&gt;</span><br><span class="line">        å¤´éƒ¨ä¿¡æ¯&lt;br&gt;</span><br><span class="line">        ä¸»é¢˜å†…å®¹&lt;br&gt;</span><br><span class="line">&lt;%--é™æ€åŒ…å«çš„ç‰¹ç‚¹ï¼š</span><br><span class="line"><span class="number">1</span>ï¼Œé™æ€åŒ…å«ä¸ä¼šç¿»è¯‘è¢«åŒ…å«çš„jspé¡µé¢ã€‚</span><br><span class="line"><span class="number">2</span>ï¼Œé™æ€åŒ…å«å…¶å®æ˜¯æŠŠè¢«åŒ…å«çš„jspé¡µé¢çš„ä»£ç æ‹·è´åˆ°åŒ…å«çš„ä½ç½®æ‰§è¡Œè¾“å‡ºã€‚--%&gt;</span><br><span class="line">&lt;%@ include file=<span class="string">&quot;/main/footer.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p><font title = "blue">é¡µè„šfooter.jspç¤ºä¾‹</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">        é¡µè„šä¿¡æ¯å‡çº§ä¿®æ”¹ç‰ˆ&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="b-jsp-åŠ¨æ€åŒ…å«"><a href="#b-jsp-åŠ¨æ€åŒ…å«" class="headerlink" title="b)jsp åŠ¨æ€åŒ…å«"></a>b)jsp åŠ¨æ€åŒ…å«</h4><blockquote><p><code>&lt;jsp:include page=&quot;&quot;&gt;&lt;/jsp:include&gt; è¿™æ˜¯åŠ¨æ€åŒ…å«</code><br>page å±æ€§æ˜¯æŒ‡å®šä½ è¦åŒ…å«çš„ jsp é¡µé¢çš„è·¯å¾„<br>åŠ¨æ€åŒ…å«ä¹Ÿå¯ä»¥åƒé™æ€åŒ…å«ä¸€æ ·ã€‚æŠŠè¢«åŒ…å«çš„å†…å®¹æ‰§è¡Œè¾“å‡ºåˆ°åŒ…å«ä½ç½®</p></blockquote><p>åŠ¨æ€åŒ…å«çš„ç‰¹ç‚¹ï¼š<br>1ã€åŠ¨æ€åŒ…å«ä¼šæŠŠåŒ…å«çš„ jsp é¡µé¢ä¹Ÿç¿»è¯‘æˆä¸º java ä»£ç <br>2ã€åŠ¨æ€åŒ…å«åº•å±‚ä»£ç ä½¿ç”¨å¦‚ä¸‹ä»£ç å»è°ƒç”¨è¢«åŒ…å«çš„ jsp é¡µé¢æ‰§è¡Œè¾“å‡ºã€‚<br>JspRuntimeLibrary.include(request, response, â€œ&#x2F;include&#x2F;footer.jspâ€, out, false);<br>3ã€åŠ¨æ€åŒ…å«ï¼Œè¿˜å¯ä»¥ä¼ é€’å‚æ•°</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=<span class="string">&quot;/main/footer.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;zzt&quot;</span>/&gt;</span><br><span class="line">&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure><p><font title = "green">åŠ¨æ€åŒ…å«çš„åº•å±‚åŸç†</font></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211122180736702.png" alt="image-20211122180736702"></p><h4 id="c-jsp-æ ‡ç­¾-è½¬å‘"><a href="#c-jsp-æ ‡ç­¾-è½¬å‘" class="headerlink" title="c)jsp æ ‡ç­¾-è½¬å‘"></a>c)jsp æ ‡ç­¾-è½¬å‘</h4><blockquote><p><code>&lt;jsp:forward:page=&quot;&quot;&gt;&lt;/jsp:forward&gt;</code> æ˜¯è¯·æ±‚è½¬å‘æ ‡ç­¾ï¼Œå®ƒçš„åŠŸèƒ½å°±æ˜¯è¯·æ±‚è½¬å‘</p><p>page å±æ€§è®¾ç½®è¯·æ±‚è½¬å‘çš„è·¯å¾„</p><p><code>&lt;jsp:forward page=&quot;/scope2.jsp&quot;&gt;&lt;/jsp:forward&gt;</code></p></blockquote><h3 id="ç»ƒä¹ äºŒï¼šjsp-è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰-10-ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚"><a href="#ç»ƒä¹ äºŒï¼šjsp-è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰-10-ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚" class="headerlink" title="ç»ƒä¹ äºŒï¼šjsp è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰ 10 ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚"></a>ç»ƒä¹ äºŒï¼šjsp è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰ 10 ä¸ªå­¦ç”Ÿä¿¡æ¯ã€‚</h3><p>åˆ©ç”¨è¯·æ±‚é‡å®šå‘ï¼Œhtmlâ€“ã€‹servletâ€“ã€‹jspâ€“ã€‹å®¢æˆ·ç«¯</p><p><font title = "blue">SearchStudent.html</font></p><p><code>&lt;a href=&quot;http://localhost:8080/jsp/searchServlet&quot;&gt;è·å–å­¦ç”Ÿæ•°æ®&lt;/a&gt;</code></p><p><font title = "blue">Studentç±»</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(Integer id, String name, <span class="type">int</span> age, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><font title = "blue">SearchServlet</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//è·å–è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">    <span class="comment">// å‘ sql è¯­å¥æŸ¥è¯¢å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ for å¾ªç¯ç”ŸæˆæŸ¥è¯¢åˆ°çš„æ•°æ®åšæ¨¡æ‹Ÿ</span></span><br><span class="line">    List&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> i+<span class="number">1</span>;</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(t,<span class="string">&quot;student&quot;</span>+t,t+<span class="number">10</span>,<span class="string">&quot;address&quot;</span>+t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¿å­˜æŸ¥è¯¢åˆ°çš„ç»“æœï¼ˆå­¦ç”Ÿä¿¡æ¯ï¼‰åˆ° request åŸŸä¸­</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;studentsList&quot;</span>,students);</span><br><span class="line">    <span class="comment">//è¯·æ±‚è½¬å‘ç»™ SearchStudent.jsp</span></span><br><span class="line">    request.getRequestDispatcher(<span class="string">&quot;/test/SearchStudent.jsp&quot;</span>).forward(request,response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font title = "blue">SearchStudent.jsp é¡µé¢</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.izumi.test.Student&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Pixar</span><br><span class="line">  Date: <span class="number">2021</span>/<span class="number">11</span>/<span class="number">22</span></span><br><span class="line">  Time: <span class="number">18</span>:<span class="number">41</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">        table&#123;</span><br><span class="line">            border: black 1px solid;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">            width: 650px;</span><br><span class="line">        &#125;</span><br><span class="line">        tr,td&#123;</span><br><span class="line">            border: black 1px solid;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--    ç»ƒä¹ äºŒï¼šjsp è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œé‡Œé¢æœ‰ <span class="number">10</span> ä¸ªå­¦ç”Ÿä¿¡æ¯--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    List&lt;Student&gt; students = (List&lt;Student&gt;) request.getAttribute(<span class="string">&quot;studentsList&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;å­¦å·&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;å§“å&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;å¹´é¾„&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;åœ°å€&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;%<span class="keyword">for</span> (Student student : students) &#123;%&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=student.getId()%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=student.getName()%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=student.getAge()%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=student.getAddress()%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;ä¿®æ”¹ã€åˆ é™¤&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">   &lt;% &#125;%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯Listennerç›‘å¬å™¨"><a href="#ä»€ä¹ˆæ˜¯Listennerç›‘å¬å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯Listennerç›‘å¬å™¨"></a>ä»€ä¹ˆæ˜¯Listennerç›‘å¬å™¨</h3><p>1ã€Listener ç›‘å¬å™¨å®ƒæ˜¯ JavaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚</p><p>JavaWeb çš„ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Filter è¿‡æ»¤å™¨ã€Listener ç›‘ å¬å™¨ã€‚</p><p>2ã€Listener å®ƒæ˜¯ JavaEE çš„è§„èŒƒï¼Œå°±æ˜¯æ¥å£</p><p>3ã€ç›‘å¬å™¨çš„ä½œç”¨æ˜¯ï¼Œç›‘å¬æŸç§äº‹ç‰©çš„å˜åŒ–ã€‚ç„¶åé€šè¿‡å›è°ƒå‡½æ•°ï¼Œ</p><p>åé¦ˆç»™å®¢æˆ·ï¼ˆç¨‹åºï¼‰å»åšä¸€äº›ç›¸åº”çš„å¤„ç†ã€‚</p><h4 id="ServletContextListenerç›‘å¬"><a href="#ServletContextListenerç›‘å¬" class="headerlink" title="ServletContextListenerç›‘å¬"></a>ServletContextListenerç›‘å¬</h4><p>ServletContextListener å®ƒå¯ä»¥ç›‘å¬ ServletContext å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚</p><p>ServletContext å¯¹è±¡åœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶å€™é”€æ¯ã€‚</p><p>ç›‘å¬åˆ°åˆ›å»ºå’Œé”€æ¯ä¹‹åéƒ½ä¼šåˆ†åˆ«è°ƒç”¨ ServletContextListener ç›‘å¬å™¨çš„æ–¹æ³•åé¦ˆã€‚</p><p>ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletContextListener</span> <span class="keyword">extends</span> <span class="title class_">EventListener</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨ ServletContext å¯¹è±¡åˆ›å»ºä¹‹åé©¬ä¸Šè°ƒç”¨ï¼Œåšåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨ ServletContext å¯¹è±¡é”€æ¯ä¹‹åè°ƒç”¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•ä½¿ç”¨ ServletContextListener ç›‘å¬å™¨ç›‘å¬ ServletContext å¯¹è±¡ã€‚</p><p><font title = "green">ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š </font></p><ol><li>ç¼–å†™ä¸€ä¸ªç±»å»å®ç° <span alt ="emp">ServletContextListener</span></li><li>å®ç°å…¶ä¸¤ä¸ªå›è°ƒæ–¹æ³•</li><li>åˆ° web.xml ä¸­å»é…ç½®ç›‘å¬å™¨</li></ol><p>å®ç°ServletContextListener  å¹¶å®ç°å…¶ä¸¤ä¸ªå›è°ƒæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServletContextListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;listenerè¢«åˆ›å»º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;listenerè¢«é”€æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ° web.xml ä¸­å»é…ç½®ç›‘å¬å™¨</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®ç›‘å¬å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.izumi.listener.MyServletContextListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ELè¡¨è¾¾å¼"><a href="#ELè¡¨è¾¾å¼" class="headerlink" title="ELè¡¨è¾¾å¼"></a>ELè¡¨è¾¾å¼</h2><h3 id="a-ä»€ä¹ˆæ˜¯-EL-è¡¨è¾¾å¼ï¼ŒEL-è¡¨è¾¾å¼çš„ä½œç”¨"><a href="#a-ä»€ä¹ˆæ˜¯-EL-è¡¨è¾¾å¼ï¼ŒEL-è¡¨è¾¾å¼çš„ä½œç”¨" class="headerlink" title="a)ä»€ä¹ˆæ˜¯ EL è¡¨è¾¾å¼ï¼ŒEL è¡¨è¾¾å¼çš„ä½œç”¨?"></a>a)ä»€ä¹ˆæ˜¯ EL è¡¨è¾¾å¼ï¼ŒEL è¡¨è¾¾å¼çš„ä½œç”¨?</h3><blockquote><p>EL è¡¨è¾¾å¼çš„å…¨ç§°æ˜¯ï¼šExpression Languageã€‚æ˜¯è¡¨è¾¾å¼è¯­è¨€ã€‚<br>EL è¡¨è¾¾å¼æœ‰ä»€ä¹ˆä½œç”¨ï¼šEL è¡¨è¾¾å¼ä¸»è¦æ˜¯ä»£æ›¿ jsp é¡µé¢ä¸­çš„è¡¨è¾¾å¼è„šæœ¬åœ¨ jsp é¡µé¢ä¸­è¿›è¡Œæ•°æ®çš„è¾“å‡ºã€‚<br>å› ä¸º EL è¡¨è¾¾å¼åœ¨è¾“å‡ºæ•°æ®çš„æ—¶å€™ï¼Œè¦æ¯” jsp çš„è¡¨è¾¾å¼è„šæœ¬è¦ç®€æ´å¾ˆå¤š</p></blockquote><p><font>ELè¡¨è¾¾å¼çš„æ ¼å¼</font>ï¼š <code>$&#123;è¡¨è¾¾å¼&#125;</code></p><p>EL è¡¨è¾¾å¼åœ¨è¾“å‡º null å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯ç©ºä¸²ã€‚jsp è¡¨è¾¾å¼è„šæœ¬è¾“å‡º null å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯ null</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">        è¾“å‡ºå€¼</span><br><span class="line">        &lt;%  request.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;å€¼&quot;</span>);%&gt;&lt;br&gt;</span><br><span class="line">        jspè¾“å‡ºï¼š&lt;%=request.getAttribute(<span class="string">&quot;key&quot;</span>)%&gt;</span><br><span class="line">        ELè¡¨è¾¾å¼è¾“å‡ºï¼š$&#123;key&#125;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="b-EL-è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº"><a href="#b-EL-è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº" class="headerlink" title="b)EL è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº"></a>b)EL è¡¨è¾¾å¼æœç´¢åŸŸæ•°æ®çš„é¡ºåº</h3><blockquote><p>EL è¡¨è¾¾å¼ä¸»è¦æ˜¯åœ¨ jsp é¡µé¢ä¸­è¾“å‡ºæ•°æ®ã€‚ ä¸»è¦æ˜¯è¾“å‡ºåŸŸå¯¹è±¡ä¸­çš„æ•°æ®ã€‚ å½“å››ä¸ªåŸŸä¸­éƒ½æœ‰ç›¸åŒçš„ key çš„æ•°æ®çš„æ—¶å€™ï¼ŒEL è¡¨è¾¾å¼ä¼šæŒ‰ç…§å››ä¸ªåŸŸçš„ä»å°åˆ°å¤§çš„é¡ºåºå»è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°å°±è¾“å‡º</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">            pageContext.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;pageContext&quot;</span>);</span><br><span class="line">            request.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;request&quot;</span>);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;session&quot;</span>);</span><br><span class="line">            application.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;application&quot;</span>);</span><br><span class="line">        %&gt;</span><br><span class="line">        $&#123;key&#125;</span><br></pre></td></tr></table></figure><h3 id="c-EL-è¡¨è¾¾å¼è¾“å‡º-Bean-çš„æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚List-é›†-åˆå±æ€§ï¼Œmap-é›†åˆå±æ€§"><a href="#c-EL-è¡¨è¾¾å¼è¾“å‡º-Bean-çš„æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚List-é›†-åˆå±æ€§ï¼Œmap-é›†åˆå±æ€§" class="headerlink" title="c)EL è¡¨è¾¾å¼è¾“å‡º Bean çš„æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚List é›† åˆå±æ€§ï¼Œmap é›†åˆå±æ€§"></a>c)EL è¡¨è¾¾å¼è¾“å‡º Bean çš„æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚List é›† åˆå±æ€§ï¼Œmap é›†åˆå±æ€§</h3><p>Personç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String[] phone;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; cities;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; map;</span><br><span class="line">    ...</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--i. éœ€æ±‚â€”â€”è¾“å‡º Person ç±»ä¸­æ™®é€šå±æ€§ï¼Œæ•°ç»„å±æ€§ã€‚list é›†åˆå±æ€§å’Œ map é›†åˆå±æ€§ã€‚--%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        person.setName(<span class="string">&quot;Goose House&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ä¸Šæµ·&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;æ·±åœ³&quot;</span>);</span><br><span class="line">        person.setCities(list);</span><br><span class="line">        String [] strings =&#123;<span class="string">&quot;163&quot;</span>,<span class="string">&quot;185&quot;</span>,<span class="string">&quot;123&quot;</span>&#125;;</span><br><span class="line">        person.setPhone(strings);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;key2&quot;</span>,<span class="string">&quot;value2&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;key3&quot;</span>,<span class="string">&quot;value3&quot;</span>);</span><br><span class="line">        person.setMap(map);</span><br><span class="line"></span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;p&quot;</span>,person);</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;%--è¾“å‡ºå†…å®¹--%&gt;</span><br><span class="line">è¾“å‡ºpersonï¼š$&#123;p&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡ºpersonçš„åå­—ï¼š$&#123;p.name&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡ºpersonçš„æ‰€æœ‰åŸå¸‚(Listé›†åˆ)ï¼š$&#123;p.cities&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡ºpersonçš„ä¸ªåˆ«åŸå¸‚(Listé›†åˆ)ï¼š$&#123;p.cities[<span class="number">0</span>]&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡ºpersonçš„mapï¼š$&#123;p.map&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡ºpersonçš„ä¸ªåˆ«mapï¼š$&#123;p.map.key2&#125;&lt;br&gt;</span><br><span class="line">&lt;%--è¿™é‡Œå¯ä»¥çœ‹å‡ºåªè¦ beanç±»é‡Œé¢æœ‰ getæ–¹æ³•ï¼Œå°±å¯ä»¥å–åˆ°å€¼--%&gt;</span><br><span class="line">è¾“å‡ºpersonçš„ageï¼š$&#123;p.age&#125;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="d-EL-è¡¨è¾¾å¼â€”â€”è¿ç®—"><a href="#d-EL-è¡¨è¾¾å¼â€”â€”è¿ç®—" class="headerlink" title="d)EL è¡¨è¾¾å¼â€”â€”è¿ç®—"></a>d)EL è¡¨è¾¾å¼â€”â€”è¿ç®—</h3><h4 id="1ï¼‰å…³ç³»è¿ç®—"><a href="#1ï¼‰å…³ç³»è¿ç®—" class="headerlink" title="1ï¼‰å…³ç³»è¿ç®—"></a>1ï¼‰å…³ç³»è¿ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211123110119533.png" alt="image-20211123110119533"></p><h4 id="2ï¼‰é€»è¾‘è¿ç®—"><a href="#2ï¼‰é€»è¾‘è¿ç®—" class="headerlink" title="2ï¼‰é€»è¾‘è¿ç®—"></a>2ï¼‰é€»è¾‘è¿ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211123110158336.png" alt="image-20211123110158336"></p><h4 id="3ï¼‰ç®—æœ¯è¿ç®—"><a href="#3ï¼‰ç®—æœ¯è¿ç®—" class="headerlink" title="3ï¼‰ç®—æœ¯è¿ç®—"></a>3ï¼‰ç®—æœ¯è¿ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211123110240007.png" alt="image-20211123110240007"></p><h4 id="i-empty-è¿ç®—"><a href="#i-empty-è¿ç®—" class="headerlink" title="i. empty è¿ç®—"></a>i. empty è¿ç®—</h4><blockquote><p>empty è¿ç®—å¯ä»¥åˆ¤æ–­ä¸€ä¸ªæ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™è¾“å‡º true,ä¸ä¸ºç©ºè¾“å‡º falseã€‚</p></blockquote><p><font title = "blue">ä»¥ä¸‹å‡ ç§æƒ…å†µä¸ºç©ºï¼š </font></p><p>1ã€å€¼ä¸º null å€¼çš„æ—¶å€™ï¼Œä¸ºç©º</p><p>2ã€å€¼ä¸ºç©ºä¸²çš„æ—¶å€™ï¼Œä¸ºç©º</p><p>3ã€å€¼æ˜¯ Object ç±»å‹æ•°ç»„ï¼Œé•¿åº¦ä¸ºé›¶çš„æ—¶å€™</p><p>4ã€list é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</p><p>5ã€map é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="comment">// 1ã€å€¼ä¸º null å€¼çš„æ—¶å€™ï¼Œä¸ºç©º</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;emptyNull&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="comment">// 2ã€å€¼ä¸ºç©ºä¸²çš„æ—¶å€™ï¼Œä¸ºç©º</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;emptyStr&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// 3ã€å€¼æ˜¯ Object ç±»å‹æ•°ç»„ï¼Œé•¿åº¦ä¸ºé›¶çš„æ—¶å€™</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;emptyArr&quot;</span>, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;&#125;);</span><br><span class="line"><span class="comment">// 4ã€list é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// list.add(&quot;abc&quot;);</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;emptyList&quot;</span>, list);</span><br><span class="line"><span class="comment">// 5ã€map é›†åˆï¼Œå…ƒç´ ä¸ªæ•°ä¸ºé›¶</span></span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line"><span class="comment">// map.put(&quot;key1&quot;, &quot;value1&quot;);</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;emptyMap&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">$&#123; empty emptyNull &#125; &lt;br/&gt;</span><br><span class="line">$&#123; empty emptyStr &#125; &lt;br/&gt;</span><br><span class="line">$&#123; empty emptyArr &#125; &lt;br/&gt;</span><br><span class="line">$&#123; empty emptyList &#125; &lt;br/&gt;</span><br><span class="line">$&#123; empty emptyMap &#125; &lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="ii-ä¸‰å…ƒè¿ç®—"><a href="#ii-ä¸‰å…ƒè¿ç®—" class="headerlink" title="ii. ä¸‰å…ƒè¿ç®—"></a>ii. ä¸‰å…ƒè¿ç®—</h4><blockquote><p>è¡¨è¾¾å¼ 1ï¼Ÿè¡¨è¾¾å¼ 2ï¼šè¡¨è¾¾å¼ 3</p></blockquote><p>å¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºçœŸï¼Œè¿”å›è¡¨è¾¾å¼ 2 çš„å€¼ï¼Œå¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºå‡ï¼Œè¿”å›è¡¨è¾¾å¼ 3 çš„å€¼</p><p><code>$&#123;12==12?&quot;ä½ èµ¢äº†ï¼&quot;:&quot;ä½ è¾“äº†&quot;&#125;</code></p><h4 id="iii-â€œ-â€ç‚¹è¿ç®—-å’Œ-ä¸­æ‹¬å·è¿ç®—ç¬¦"><a href="#iii-â€œ-â€ç‚¹è¿ç®—-å’Œ-ä¸­æ‹¬å·è¿ç®—ç¬¦" class="headerlink" title="iii. â€œ.â€ç‚¹è¿ç®— å’Œ [] ä¸­æ‹¬å·è¿ç®—ç¬¦"></a>iii. â€œ.â€ç‚¹è¿ç®— å’Œ [] ä¸­æ‹¬å·è¿ç®—ç¬¦</h4><blockquote><p>.ç‚¹è¿ç®—ï¼Œå¯ä»¥è¾“å‡º Bean å¯¹è±¡ä¸­æŸä¸ªå±æ€§çš„å€¼ã€‚</p><p>[]ä¸­æ‹¬å·è¿ç®—ï¼Œå¯ä»¥è¾“å‡ºæœ‰åºé›†åˆä¸­æŸä¸ªå…ƒç´ çš„å€¼ã€‚</p><p>å¹¶ä¸”[]ä¸­æ‹¬å·è¿ç®—ï¼Œè¿˜å¯ä»¥è¾“å‡º map é›†åˆä¸­ key é‡Œå«æœ‰ç‰¹æ®Šå­—ç¬¦çš„ key,</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">&quot;a.a.a&quot;</span>, <span class="string">&quot;aaaValue&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;b+b+b&quot;</span>, <span class="string">&quot;bbbValue&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;c-c-c&quot;</span>, <span class="string">&quot;cccValue&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;map&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">  </span><br><span class="line">$&#123; map[<span class="string">&#x27;a.a.a&#x27;</span>] &#125; &lt;br&gt;</span><br><span class="line">$&#123; map[<span class="string">&quot;b+b+b&quot;</span>] &#125; &lt;br&gt;</span><br><span class="line">$&#123; map[<span class="string">&#x27;c-c-c&#x27;</span>] &#125; &lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="e-EL-è¡¨è¾¾å¼çš„-11-ä¸ªéšå«å¯¹è±¡"><a href="#e-EL-è¡¨è¾¾å¼çš„-11-ä¸ªéšå«å¯¹è±¡" class="headerlink" title="e)EL è¡¨è¾¾å¼çš„ 11 ä¸ªéšå«å¯¹è±¡"></a>e)EL è¡¨è¾¾å¼çš„ 11 ä¸ªéšå«å¯¹è±¡</h3><p>EL ä¸ªè¾¾å¼ä¸­ 11 ä¸ªéšå«å¯¹è±¡ï¼Œæ˜¯ ELè¡¨è¾¾å¼è‡ªå·±å®šä¹‰çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡                       ç±»å‹                 ä½œç”¨</span><br><span class="line">pageContext         PageContextImpl          å®ƒå¯ä»¥è·å– jsp ä¸­çš„ä¹å¤§å†…ç½®å¯¹è±¡</span><br><span class="line"></span><br><span class="line">pageScope           Map&lt;String,Object&gt;       å®ƒå¯ä»¥è·å– pageContext åŸŸä¸­çš„æ•°æ®</span><br><span class="line">requestScope        Map&lt;String,Object&gt;       å®ƒå¯ä»¥è·å– Request åŸŸä¸­çš„æ•°æ®</span><br><span class="line">sessionScope        Map&lt;String,Object&gt;       å®ƒå¯ä»¥è·å– Session åŸŸä¸­çš„æ•°æ®</span><br><span class="line">applicationScope    Map&lt;String,Object&gt;       å®ƒå¯ä»¥è·å– ServletContext åŸŸä¸­çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">param               Map&lt;String,String&gt;       å®ƒå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼</span><br><span class="line">paramValues         Map&lt;String,String[]&gt;     å®ƒä¹Ÿå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼ï¼Œè·å–å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line">header              Map&lt;String,String&gt;       å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯</span><br><span class="line">headerValues        Map&lt;String,String[]&gt;     å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯ï¼Œå®ƒå¯ä»¥è·å–å¤šä¸ªå€¼çš„æƒ…å†µ</span><br><span class="line"></span><br><span class="line">cookie              Map&lt;String,Cookie&gt;       å®ƒå¯ä»¥è·å–å½“å‰è¯·æ±‚çš„ Cookie ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">initParam           Map&lt;String,String&gt;  å®ƒå¯ä»¥è·å–åœ¨ web.xml ä¸­é…ç½®çš„&lt;context-param&gt;ä¸Šä¸‹æ–‡å‚æ•°</span><br></pre></td></tr></table></figure><h4 id="ELè·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§"><a href="#ELè·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§" class="headerlink" title="ELè·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§"></a>ELè·å–å››ä¸ªç‰¹å®šåŸŸä¸­çš„å±æ€§</h4><p>pageScope&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; pageContext åŸŸ</p><p>requestScope &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Request åŸŸ</p><p>sessionScope &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Session åŸŸ</p><p>applicationScope &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ServletContext åŸŸ</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;pageContext&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;request&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;session&quot;</span>);</span><br><span class="line">    application.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;application&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--ä½¿ç”¨XXXScopeè·å–å››ç§åŸŸçš„å±æ€§å¯ä»¥è§£å†³ å½“åŸŸå¯¹è±¡çš„keyç›¸åŒæ—¶ï¼Œé€šè¿‡åŸŸå¯¹è±¡è·å–å€¼æ—¶é»˜è®¤å–æœ€å°åŸŸèŒƒå›´çš„å±æ€§çš„å€¼çš„é—®é¢˜--%&gt;</span><br><span class="line">$&#123;applicationScope.key1&#125;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="ii-pageContext-å¯¹è±¡çš„ä½¿ç”¨"><a href="#ii-pageContext-å¯¹è±¡çš„ä½¿ç”¨" class="headerlink" title="ii. pageContext å¯¹è±¡çš„ä½¿ç”¨"></a>ii. pageContext å¯¹è±¡çš„ä½¿ç”¨</h4><ol><li>åè®®ï¼š</li><li>æœåŠ¡å™¨ ipï¼š</li><li>æœåŠ¡å™¨ç«¯å£ï¼š</li><li>è·å–å·¥ç¨‹è·¯å¾„ï¼š</li><li>è·å–è¯·æ±‚æ–¹æ³•ï¼š</li><li>è·å–å®¢æˆ·ç«¯ ip åœ°å€ï¼š</li><li>è·å–ä¼šè¯çš„ id ç¼–å·</li></ol><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--    request.getScheme();è·å–è¯·æ±‚çš„åè®®</span><br><span class="line">        request.getServerName()è·å–æœåŠ¡å™¨çš„ipæˆ–åŸŸå</span><br><span class="line">        request.getServerPort()è·å–æœåŠ¡å™¨</span><br><span class="line">        request.getContextPath() è·å–å·¥ç¨‹è·¯å¾„</span><br><span class="line">        request.getMethod() è·å–è¯·æ±‚æ–¹æ³•</span><br><span class="line">        request.getMethod() è·å–è¯·æ±‚æ–¹æ³•</span><br><span class="line">        request.getRemoteHost() è·å–å®¢æˆ·ç«¯ipåœ°å€</span><br><span class="line">        session.getId() è·å–ä¼šè¯idç¼–å·</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%=request.getRemoteHost()%&gt;&lt;br&gt;</span><br><span class="line">&lt;%=session.getId()%&gt;&lt;br&gt;</span><br><span class="line"><span class="number">1.</span> åè®®ï¼š$&#123;pageContext.request.scheme&#125;&lt;br&gt;</span><br><span class="line"><span class="number">2.</span> æœåŠ¡å™¨ ipï¼š$&#123;pageContext.request.serverName&#125;&lt;br&gt;</span><br><span class="line"><span class="number">3.</span> æœåŠ¡å™¨ç«¯å£ï¼š$&#123;pageContext.request.serverPort&#125;&lt;br&gt;</span><br><span class="line"><span class="number">4.</span> è·å–å·¥ç¨‹è·¯å¾„ï¼š$&#123;pageContext.request.contextPath&#125;&lt;br&gt;</span><br><span class="line"><span class="number">5.</span> è·å–è¯·æ±‚æ–¹æ³•ï¼š$&#123;pageContext.request.method&#125;&lt;br&gt;</span><br><span class="line"><span class="number">6.</span> è·å–å®¢æˆ·ç«¯ ip åœ°å€ï¼š$&#123;pageContext.request.remoteHost&#125;&lt;br&gt;</span><br><span class="line"><span class="number">7.</span> è·å–ä¼šè¯çš„ id ç¼–å·$&#123;pageContext.session.id&#125;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h4 id="ELå…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨"><a href="#ELå…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨" class="headerlink" title="ELå…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨"></a>ELå…¶ä»–éšå«å¯¹è±¡çš„ä½¿ç”¨</h4><p>param Map&lt;String,String&gt; å®ƒå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼</p><p>paramValues Map&lt;String,String[]&gt;å®ƒä¹Ÿå¯ä»¥è·å–è¯·æ±‚å‚æ•°çš„å€¼ï¼Œè·å–å¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ã€‚</p><p><strong>è¯·æ±‚åœ°å€ï¼š</strong></p><p><a href="http://localhost:8080/EL_JSTL/EL_other_obj.jsp?username=root&password=1234&hobby=java&hobby=cpp">http://localhost:8080/EL_JSTL/EL_other_obj.jsp?username=root&amp;password=1234&amp;hobby=java&amp;hobby=cpp</a></p><p><font title = "blue">ç¤ºä¾‹ä»£ç ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºè¯·æ±‚å‚æ•°usernameçš„å€¼ï¼š$&#123;param.username&#125;&lt;br&gt;</span><br><span class="line">  è¾“å‡ºè¯·æ±‚å‚æ•°passwordçš„å€¼ï¼š$&#123;param.password&#125;&lt;br&gt;</span><br><span class="line">  è¾“å‡ºè¯·æ±‚å‚æ•°passwordçš„å€¼ï¼š$&#123;paramValues.password[<span class="number">0</span>]&#125;&lt;br&gt;</span><br><span class="line">  è¾“å‡ºè¯·æ±‚å‚æ•°hobbyçš„å€¼ï¼š$&#123;paramValues.hobby[<span class="number">0</span>]&#125;&lt;br&gt;</span><br><span class="line">  è¾“å‡ºè¯·æ±‚å‚æ•°hobbyçš„å€¼ï¼š$&#123;paramValues.hobby[<span class="number">1</span>]&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure><hr><p>â€‹header Map&lt;String,String&gt; å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯</p><p>headerValues  Map&lt;String,String[]&gt; å®ƒå¯ä»¥è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯ï¼Œå®ƒå¯ä»¥è·å–å¤šä¸ªå€¼çš„æƒ…å†µ</p><p><font title = "blue">ç¤ºä¾‹ä»£ç ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è·å–è¯·æ±‚å¤´ã€User-Agentã€‘$&#123;header[<span class="string">&#x27;User-Agent&#x27;</span>]&#125;&lt;br&gt;</span><br><span class="line">è·å–è¯·æ±‚å¤´ã€Accept-Languageã€‘$&#123;header[<span class="string">&#x27;Accept-Language&#x27;</span>]&#125;&lt;br&gt;</span><br><span class="line">è·å–è¯·æ±‚å¤´ã€Accept-Languageã€‘$&#123;headerValues[<span class="string">&#x27;Accept-Language&#x27;</span>][<span class="number">0</span>]&#125;</span><br></pre></td></tr></table></figure><hr><p>cookie Map&lt;String,Cookie&gt;å®ƒå¯ä»¥è·å–å½“å‰è¯·æ±‚çš„ Cookie</p><p><font title = "blue">ç¤ºä¾‹ä»£ç ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å– cookie çš„ nameï¼š$&#123;cookie.JSESSIONID.name&#125; &lt;br&gt;</span><br><span class="line">è·å– cookie çš„ valueï¼š$&#123;cookie.JSESSIONID.value&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure><hr><p>initParam Map&lt;String,String&gt; å®ƒå¯ä»¥è·å–åœ¨ web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° web.xml ä¸­çš„é…ç½®ï¼š</p><p><font title="yellow">é…ç½®web.xml</font></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>ip<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font title = "blue">ç¤ºä¾‹ä»£ç ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡º&amp;lt;Context-param&amp;gt;çš„ usernameçš„å€¼ï¼š$&#123;initParam.username&#125;&lt;br&gt;</span><br><span class="line">è¾“å‡º&amp;lt;Context-param&amp;gt;çš„ ipçš„å€¼ï¼š$&#123;initParam.ip&#125;</span><br></pre></td></tr></table></figure><h2 id="JSTLæ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼ï¼ï¼‰"><a href="#JSTLæ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼ï¼ï¼‰" class="headerlink" title="JSTLæ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼ï¼ï¼‰"></a>JSTLæ ‡ç­¾åº“ï¼ˆæ¬¡é‡ç‚¹ï¼ï¼ï¼‰</h2><blockquote><p>JSTL æ ‡ç­¾åº“ å…¨ç§°æ˜¯æŒ‡ JSP Standard Tag Library JSP æ ‡å‡†æ ‡ç­¾åº“ã€‚æ˜¯ä¸€ä¸ªä¸æ–­å®Œå–„çš„å¼€æ”¾æºä»£ç çš„ JSP æ ‡ ç­¾åº“ã€‚ EL è¡¨è¾¾å¼ä¸»è¦æ˜¯ä¸ºäº†æ›¿æ¢ jsp ä¸­çš„è¡¨è¾¾å¼è„šæœ¬ï¼Œè€Œæ ‡ç­¾åº“åˆ™æ˜¯ä¸ºäº†æ›¿æ¢ä»£ç è„šæœ¬ã€‚è¿™æ ·ä½¿å¾—æ•´ä¸ª jsp é¡µé¢ å˜å¾—æ›´ä½³ç®€æ´</p></blockquote><p>JSTL ç”±äº”ä¸ªä¸åŒåŠŸèƒ½çš„æ ‡ç­¾åº“ç»„æˆã€‚</p><table><thead><tr><th>åŠŸèƒ½èŒƒå›´</th><th>URI</th><th>å‰ç¼€</th></tr></thead><tbody><tr><td>æ ¸å¿ƒæ ‡ç­¾åº“â€“é‡ç‚¹</td><td><a href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a></td><td>c</td></tr><tr><td>æ ¼å¼åŒ–</td><td><a href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a></td><td>fmt</td></tr><tr><td>å‡½æ•°</td><td><a href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a></td><td>fn</td></tr><tr><td>æ•°æ®åº“(ä¸ä½¿ç”¨)</td><td><a href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a></td><td>sql</td></tr><tr><td>XML(ä¸ä½¿ç”¨)</td><td><a href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a></td><td>x</td></tr></tbody></table><p>åœ¨ jsp æ ‡ç­¾åº“ä¸­ä½¿ç”¨ taglib æŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“ (ideaä¼šè‡ªåŠ¨å¯¼å…¥)</p><p><font>CORE æ ‡ç­¾åº“</font><br><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code><br><font>XML æ ‡ç­¾åº“</font><br><code>&lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://java.sun.com/jsp/jstl/xml&quot; %&gt;</code><br><font>FMT æ ‡ç­¾åº“</font><br><code>&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;</code><br><font>SQL æ ‡ç­¾åº“</font><br><code>&lt;%@ taglib prefix=&quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&gt;</code><br><font>FUNCTIONS æ ‡ç­¾åº“</font><br><code>&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %</code></p><h3 id="f-JSTL-æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤"><a href="#f-JSTL-æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="f) JSTL æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤"></a>f) JSTL æ ‡ç­¾åº“çš„ä½¿ç”¨æ­¥éª¤</h3><p>1ã€å…ˆå¯¼å…¥ jstl æ ‡ç­¾åº“çš„ jar åŒ…ã€‚</p><p>taglibs-standard-impl-1.2.1.jar</p><p>taglibs-standard-spec-1.2.1.jar</p><p>2ã€ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨ taglib æŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“ï¼ˆideaä¼šè‡ªåŠ¨å¯¼å…¥ï¼‰ã€‚</p><h3 id="core-æ ¸å¿ƒåº“ä½¿ç”¨"><a href="#core-æ ¸å¿ƒåº“ä½¿ç”¨" class="headerlink" title="core æ ¸å¿ƒåº“ä½¿ç”¨"></a>core æ ¸å¿ƒåº“ä½¿ç”¨</h3><p>i. <code>&lt;c:set /&gt;</code>ï¼ˆä½¿ç”¨å¾ˆå°‘ï¼‰</p><p>ä½œç”¨ï¼šset æ ‡ç­¾å¯ä»¥å¾€åŸŸä¸­ä¿å­˜æ•°æ®</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">i.&lt;c:set /&gt;</span><br><span class="line">ä½œç”¨ï¼šset æ ‡ç­¾å¯ä»¥å¾€åŸŸä¸­ä¿å­˜æ•°æ®</span><br><span class="line">åŸŸå¯¹è±¡.setAttribute(key,value);</span><br><span class="line">scope å±æ€§è®¾ç½®ä¿å­˜åˆ°å“ªä¸ªåŸŸ</span><br><span class="line">page è¡¨ç¤º PageContext åŸŸï¼ˆé»˜è®¤å€¼ï¼‰</span><br><span class="line">request è¡¨ç¤º Request åŸŸ</span><br><span class="line">session è¡¨ç¤º Session åŸŸ</span><br><span class="line">application è¡¨ç¤º ServletContext åŸŸ</span><br><span class="line"><span class="keyword">var</span> å±æ€§è®¾ç½® key æ˜¯å¤šå°‘</span><br><span class="line">value å±æ€§è®¾ç½®å€¼</span><br><span class="line">--%&gt;</span><br><span class="line">ä¿å­˜ä¹‹å‰ï¼š$&#123; sessionScope.abc &#125; &lt;br&gt;</span><br><span class="line">ä¿å­˜ä¹‹å‰ï¼š$&#123; requestScope.key&#125; &lt;br&gt;</span><br><span class="line">&lt;c:set scope=<span class="string">&quot;session&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;abc&quot;</span> value=<span class="string">&quot;abcValue&quot;</span>/&gt;</span><br><span class="line">&lt;c:set scope=<span class="string">&quot;request&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;key&quot;</span> value=<span class="string">&quot;keyValue&quot;</span>/&gt;</span><br><span class="line">ä¿å­˜ä¹‹åï¼š$&#123; sessionScope.abc &#125; &lt;br&gt;</span><br><span class="line">ä¿å­˜ä¹‹åï¼š$&#123; requestScope.key&#125; &lt;br&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ii. <code>&lt;c:if /&gt;</code> if æ ‡ç­¾</p><p>ç”¨æ¥åš if åˆ¤æ–­</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">ii.&lt;c:<span class="keyword">if</span> /&gt;</span><br><span class="line"><span class="keyword">if</span> æ ‡ç­¾ç”¨æ¥åš <span class="keyword">if</span> åˆ¤æ–­ã€‚</span><br><span class="line">test å±æ€§è¡¨ç¤ºåˆ¤æ–­çš„æ¡ä»¶ï¼ˆä½¿ç”¨ EL è¡¨è¾¾å¼è¾“å‡ºï¼‰</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123; 12 == 12 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;h1&gt;<span class="number">12</span> ç­‰äº <span class="number">12</span>&lt;/h1&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123; 12 != 12 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;h1&gt;<span class="number">12</span> ä¸ç­‰äº <span class="number">12</span>&lt;/h1&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br></pre></td></tr></table></figure><p>iii. <code>&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;</code>æ ‡ç­¾</p><p>ä½œç”¨ï¼šå¤šè·¯åˆ¤æ–­ã€‚è·Ÿ switch â€¦ case â€¦. default éå¸¸æ¥è¿‘</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">iii.&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;æ ‡ç­¾</span><br><span class="line">ä½œç”¨ï¼šå¤šè·¯åˆ¤æ–­ã€‚è·Ÿ <span class="keyword">switch</span> ... <span class="keyword">case</span> .... <span class="keyword">default</span> éå¸¸æ¥è¿‘</span><br><span class="line">choose æ ‡ç­¾å¼€å§‹é€‰æ‹©åˆ¤æ–­</span><br><span class="line">when æ ‡ç­¾è¡¨ç¤ºæ¯ä¸€ç§åˆ¤æ–­æƒ…å†µ</span><br><span class="line">test å±æ€§è¡¨ç¤ºå½“å‰è¿™ç§åˆ¤æ–­æƒ…å†µçš„å€¼</span><br><span class="line">otherwise æ ‡ç­¾è¡¨ç¤ºå‰©ä¸‹çš„æƒ…å†µ</span><br><span class="line">&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;æ ‡ç­¾ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</span><br><span class="line"><span class="number">1</span>ã€æ ‡ç­¾é‡Œä¸èƒ½ä½¿ç”¨ html æ³¨é‡Šï¼Œè¦ä½¿ç”¨ jsp æ³¨é‡Š</span><br><span class="line"><span class="number">2</span>ã€when æ ‡ç­¾çš„çˆ¶æ ‡ç­¾ä¸€å®šè¦æ˜¯ choose æ ‡ç­¾</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">request.setAttribute(<span class="string">&quot;height&quot;</span>, <span class="number">180</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">&lt;%-- ä¸èƒ½ä½¿ç”¨ html æ³¨é‡Šï¼Œåªèƒ½ä½¿ç”¨jspæ³¨é‡Š --%&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123; requestScope.height &gt; 190 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;h2&gt;å°å·¨äºº&lt;/h2&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123; requestScope.height &gt; 180 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;h2&gt;å¾ˆé«˜&lt;/h2&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123; requestScope.height &gt; 170 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;h2&gt;è¿˜å¯ä»¥&lt;/h2&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.height &gt; 160&#125;&quot;</span>&gt;</span><br><span class="line">&lt;h3&gt;å¤§äº <span class="number">160</span>&lt;/h3&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.height &gt; 150&#125;&quot;</span>&gt;</span><br><span class="line">&lt;h3&gt;å¤§äº <span class="number">150</span>&lt;/h3&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.height &gt; 140&#125;&quot;</span>&gt;</span><br><span class="line">&lt;h3&gt;å¤§äº <span class="number">140</span>&lt;/h3&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">å…¶ä»–å°äº <span class="number">140</span></span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure><p>iv.  <code>&lt;c:forEach&gt;</code></p><p>ä½œç”¨ï¼šéå†è¾“å‡ºä½¿ç”¨ã€‚</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--<span class="number">1.</span>éå† <span class="number">1</span> åˆ° <span class="number">10</span>ï¼Œè¾“å‡º</span><br><span class="line">begin å±æ€§è®¾ç½®å¼€å§‹çš„ç´¢å¼•</span><br><span class="line">end å±æ€§è®¾ç½®ç»“æŸçš„ç´¢å¼•</span><br><span class="line"><span class="keyword">var</span> å±æ€§è¡¨ç¤ºå¾ªç¯çš„å˜é‡(ä¹Ÿæ˜¯å½“å‰æ­£åœ¨éå†åˆ°çš„æ•°æ®)</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;table border=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">&lt;c:forEach begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;10&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;ç¬¬$&#123;i&#125;è¡Œ&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure><p>2ã€ éå† Object æ•°ç»„</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">%-- <span class="number">2.</span>éå† Object æ•°ç»„</span><br><span class="line"><span class="keyword">for</span> (Object item: arr)</span><br><span class="line">items è¡¨ç¤ºéå†çš„æ•°æ®æºï¼ˆéå†çš„é›†åˆï¼‰</span><br><span class="line"><span class="keyword">var</span> è¡¨ç¤ºå½“å‰éå†åˆ°çš„æ•°æ®</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">request.setAttribute(<span class="string">&quot;arr&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;18610541354&quot;</span>,<span class="string">&quot;18688886666&quot;</span>,<span class="string">&quot;18699998888&quot;</span>&#125;);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123; requestScope.arr &#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;item&quot;</span>&gt;</span><br><span class="line">$&#123; item &#125; &lt;br&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure><p>3ã€ éå† Map é›†åˆ</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;value1&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;key2&quot;</span>, <span class="string">&quot;value2&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;key3&quot;</span>, <span class="string">&quot;value3&quot;</span>);</span><br><span class="line"><span class="comment">// for ( Map.Entry&lt;String,Object&gt; entry : map.entrySet()) &#123;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;map&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123; requestScope.map &#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;entry&quot;</span>&gt;</span><br><span class="line">&lt;h1&gt;$&#123;entry.key&#125; = $&#123;entry.value&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure><p>4ã€éå† List é›†åˆâ€”list ä¸­å­˜æ”¾ Student ç±»ï¼Œæœ‰å±æ€§ï¼šç¼–å·ï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œå¹´é¾„ï¼Œ ç”µè¯ä¿¡æ¯</p><p>cssè¡¨æ ¼æ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    <span class="selector-tag">table</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">        <span class="attribute">border</span>: solid <span class="number">1px</span>;</span><br><span class="line">        <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">th</span>,<span class="selector-tag">td</span>&#123;</span><br><span class="line">        <span class="attribute">border</span>: solid <span class="number">1px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>éå†listä»£ç ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--éå†list--%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">    ArrayList&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Student&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(i,<span class="string">&quot;student&quot;</span>+i,<span class="string">&quot;pwd&quot;</span>+i,i+<span class="number">10</span>,<span class="string">&quot;phone&quot;</span>+i));</span><br><span class="line">    &#125;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;list&quot;</span>,students);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ç¼–å·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å¯†ç &lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ç”µè¯&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;requestScope.list&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;list.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;list.username&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;list.password&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;list.age&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;list.phone&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;ä¿®æ”¹ã€åˆ é™¤&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure><p><font>è¡¥å……è¯´æ˜ï¼š</font></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">items è¡¨ç¤ºéå†çš„é›†åˆ</span><br><span class="line"><span class="keyword">var</span> è¡¨ç¤ºéå†åˆ°çš„æ•°æ®</span><br><span class="line">begin è¡¨ç¤ºéå†çš„å¼€å§‹ç´¢å¼•å€¼</span><br><span class="line">end è¡¨ç¤ºç»“æŸçš„ç´¢å¼•å€¼</span><br><span class="line">step å±æ€§è¡¨ç¤ºéå†çš„æ­¥é•¿å€¼ <span class="number">2</span>å°±è¡¨ç¤º i+=<span class="number">2</span>; ï¼Œé»˜è®¤æ˜¯<span class="number">1</span></span><br><span class="line">varStatus å±æ€§è¡¨ç¤ºå½“å‰éå†åˆ°çš„æ•°æ®çš„çŠ¶æ€</span><br><span class="line"><span class="keyword">for</span>ï¼ˆ<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">10</span>; i+=<span class="number">2</span>ï¼‰</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:forEach begin=<span class="string">&quot;2&quot;</span> end=<span class="string">&quot;7&quot;</span> step=<span class="string">&quot;2&quot;</span> varStatus=<span class="string">&quot;status&quot;</span> items=<span class="string">&quot;$&#123;requestScope.stus&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;stu&quot;</span></span><br></pre></td></tr></table></figure><p>varStatus &#x3D; â€œstatusâ€è¯´æ˜ï¼š</p><p>javax.servlet.jsp.jstl.core.LoopTagSupport$1Status</p><p>class Status implements  LoopTagStatus</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211123202009762.png" alt="image-20211123202009762"></p><h2 id="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼ˆï¼ï¼ï¼é‡ç‚¹ï¼‰"><a href="#æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼ˆï¼ï¼ï¼é‡ç‚¹ï¼‰" class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼ˆï¼ï¼ï¼é‡ç‚¹ï¼‰"></a>æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼ˆï¼ï¼ï¼é‡ç‚¹ï¼‰</h2><h3 id="æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»"><a href="#æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»" class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»"></a>æ–‡ä»¶çš„ä¸Šä¼ ä»‹ç»</h3><p>1ã€è¦æœ‰ä¸€ä¸ª form æ ‡ç­¾ï¼Œmethod&#x3D;post è¯·æ±‚<br>2ã€form æ ‡ç­¾çš„ encType å±æ€§å€¼å¿…é¡»ä¸º multipart&#x2F;form-data å€¼<br>3ã€åœ¨ form æ ‡ç­¾ä¸­ä½¿ç”¨ input type&#x3D;file æ·»åŠ ä¸Šä¼ çš„æ–‡ä»¶<br>4ã€ç¼–å†™æœåŠ¡å™¨ä»£ç ï¼ˆServlet ç¨‹åºï¼‰æ¥æ”¶ï¼Œå¤„ç†ä¸Šä¼ çš„æ•°æ®ã€‚</p><p>encType&#x3D;multipart&#x2F;form-data è¡¨ç¤ºæäº¤çš„æ•°æ®ï¼Œä»¥å¤šæ®µï¼ˆæ¯ä¸€ä¸ªè¡¨å•é¡¹ä¸€ä¸ªæ•°æ®æ®µï¼‰çš„å½¢å¼è¿›è¡Œæ‹¼<br>æ¥ï¼Œç„¶åä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼å‘é€ç»™æœåŠ¡å™¨</p><h4 id="æ–‡ä»¶ä¸Šä¼ -HTTPåè®®çš„è¯´æ˜"><a href="#æ–‡ä»¶ä¸Šä¼ -HTTPåè®®çš„è¯´æ˜" class="headerlink" title="æ–‡ä»¶ä¸Šä¼  HTTPåè®®çš„è¯´æ˜"></a>æ–‡ä»¶ä¸Šä¼  HTTPåè®®çš„è¯´æ˜</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211123204925008.png" alt="image-20211123204925008"></p><h4 id="commons-fileupload-jar-å¸¸ç”¨-API-ä»‹ç»è¯´æ˜"><a href="#commons-fileupload-jar-å¸¸ç”¨-API-ä»‹ç»è¯´æ˜" class="headerlink" title="commons-fileupload.jar å¸¸ç”¨ API ä»‹ç»è¯´æ˜"></a>commons-fileupload.jar å¸¸ç”¨ API ä»‹ç»è¯´æ˜</h4><p>commons-fileupload.jar éœ€è¦ä¾èµ– commons-io.jar è¿™ä¸ªåŒ…ï¼Œ</p><p>æ‰€ä»¥ä¸¤ä¸ªåŒ…æˆ‘ä»¬éƒ½è¦å¼•å…¥ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯éœ€è¦å¯¼å…¥ä¸¤ä¸ª jar åŒ…ï¼š</p><p>commons-fileupload-1.2.1.jar</p><p>commons-io-1.4.jar</p><p>ServletFileUpload ç±»ï¼Œç”¨äºè§£æä¸Šä¼ çš„æ•°æ®ã€‚</p><p>FileItem ç±»ï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªè¡¨å•é¡¹ã€‚</p><p>åˆ¤æ–­å½“å‰ä¸Šä¼ çš„æ•°æ®æ ¼å¼æ˜¯å¦æ˜¯å¤šæ®µçš„æ ¼å¼ã€‚</p><p>boolean ServletFileUpload.isMultipartContent(HttpServletRequest request);</p><p><strong>è§£æä¸Šä¼ çš„æ•°æ®</strong><br>public List<FileItem> parseRequest(HttpServletRequest request)</p><p><strong>åˆ¤æ–­å½“å‰è¿™ä¸ªè¡¨å•é¡¹ï¼Œæ˜¯å¦æ˜¯æ™®é€šçš„è¡¨å•é¡¹ã€‚è¿˜æ˜¯ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹</strong></p><p>boolean FileItem.isFormField()<br>true è¡¨ç¤ºæ™®é€šç±»å‹çš„è¡¨å•é¡¹<br>false è¡¨ç¤ºä¸Šä¼ çš„æ–‡ä»¶ç±»å‹</p><p><strong>è·å–è¡¨å•é¡¹çš„ name å±æ€§å€¼</strong><br>String FileItem.getFieldName()</p><p><strong>è·å–å½“å‰è¡¨å•é¡¹çš„å€¼ã€‚</strong><br>String FileItem.getString()</p><p><strong>è·å–ä¸Šä¼ çš„æ–‡ä»¶å</strong><br>String FileItem.getName();</p><p><strong>å°†ä¸Šä¼ çš„æ–‡ä»¶å†™åˆ° å‚æ•° file æ‰€æŒ‡å‘æŠ½ç¡¬ç›˜ä½ç½® ã€‚</strong><br>void FileItem.write( file );</p><h4 id="fileupload-ç±»åº“çš„ä½¿ç”¨ï¼š"><a href="#fileupload-ç±»åº“çš„ä½¿ç”¨ï¼š" class="headerlink" title="fileupload ç±»åº“çš„ä½¿ç”¨ï¼š"></a>fileupload ç±»åº“çš„ä½¿ç”¨ï¼š</h4><p>ä¸Šä¼ æ–‡ä»¶çš„è¡¨å•</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://localhost:8080/EL_JSTL/uploadServlet&quot;</span> method=<span class="string">&quot;post&quot;</span> encType=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    ç”¨æˆ·å&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;&lt;br&gt;</span><br><span class="line">    å¤´åƒï¼š&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;photo&quot;</span> &gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p><font title="blue">è§£æä¸Šä¼ çš„æ•°æ®çš„ä»£ç ï¼š</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//1 å…ˆåˆ¤æ–­ä¸Šä¼ çš„æ•°æ®æ˜¯å¦å¤šæ®µæ•°æ®ï¼ˆåªæœ‰æ˜¯å¤šæ®µçš„æ•°æ®ï¼Œæ‰æ˜¯æ–‡ä»¶ä¸Šä¼ çš„ï¼‰</span></span><br><span class="line">       <span class="keyword">if</span> (ServletFileUpload.isMultipartContent(request))&#123;</span><br><span class="line">           <span class="comment">// åˆ›å»º FileItemFactory å·¥å‚å®ç°ç±»</span></span><br><span class="line">           <span class="type">FileItemFactory</span> <span class="variable">fileItemFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItemFactory</span>();</span><br><span class="line">           <span class="comment">// åˆ›å»ºç”¨äºè§£æä¸Šä¼ æ•°æ®çš„å·¥å…·ç±» ServletFileUpload</span></span><br><span class="line">           <span class="type">ServletFileUpload</span> <span class="variable">servletFileUpload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletFileUpload</span>(fileItemFactory);</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// è§£æä¸Šä¼ çš„æ•°æ®ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªè¡¨å•é¡¹ FileItem</span></span><br><span class="line">               List&lt;FileItem&gt; list = servletFileUpload.parseRequest(request);</span><br><span class="line">               <span class="comment">// å¾ªç¯åˆ¤æ–­ï¼Œæ¯ä¸€ä¸ªè¡¨å•é¡¹ï¼Œæ˜¯æ™®é€šç±»å‹ï¼Œè¿˜æ˜¯ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">               <span class="keyword">for</span> (FileItem fileItem : list) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (fileItem.isFormField())&#123; <span class="comment">//æ™®é€šè¡¨å•é¡¹</span></span><br><span class="line">                       System.out.println(<span class="string">&quot;è¡¨å•é¡¹nameå±æ€§å€¼ï¼š&quot;</span>+fileItem.getFieldName());</span><br><span class="line">                       <span class="comment">//è§£å†³ä¹±ç é—®é¢˜ï¼Œä¼ å…¥ å‚æ•° UTF-8</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;è¡¨å•é¡¹çš„valueå±æ€§å€¼&quot;</span>+fileItem.getString(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                       <span class="comment">//ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">                   System.out.println(<span class="string">&quot;è¡¨å•é¡¹çš„ name å±æ€§å€¼ï¼š&quot;</span> + fileItem.getFieldName());</span><br><span class="line">                       System.out.println(<span class="string">&quot;ä¸Šä¼ çš„æ–‡ä»¶åï¼š&quot;</span> + fileItem.getName());</span><br><span class="line">                       fileItem.write(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\&quot;</span> + fileItem.getName()));</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h3><h4 id="æ–‡ä»¶ä¸‹è½½æ“ä½œ"><a href="#æ–‡ä»¶ä¸‹è½½æ“ä½œ" class="headerlink" title="æ–‡ä»¶ä¸‹è½½æ“ä½œ"></a>æ–‡ä»¶ä¸‹è½½æ“ä½œ</h4><p><strong>ä¸‹è½½çš„å¸¸ç”¨ API è¯´æ˜ï¼š</strong></p><p>response.getOutputStream();</p><p>servletContext.getResourceAsStream();</p><p>servletContext.getMimeType();</p><p>response.setContentType();</p><p><code>response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; fileName=1.jpg&quot;); </code></p><p>response.setHeader(â€œContent-Dispositionâ€, â€œattachment; fileName&#x3D;1.jpgâ€);<br>è¿™ä¸ªå“åº”å¤´å‘Šè¯‰æµè§ˆå™¨ã€‚è¿™æ˜¯éœ€è¦ä¸‹è½½çš„ã€‚è€Œ attachment è¡¨ç¤ºé™„ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸‹è½½çš„ä¸€ä¸ªæ–‡ä»¶ã€‚fileName&#x3D;åé¢ï¼Œè¡¨ç¤ºä¸‹è½½çš„æ–‡ä»¶åã€‚</p><p>å®Œæˆä¸Šé¢çš„ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸‹è½½æ–‡ä»¶æ˜¯æ²¡é—®é¢˜äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦ä¸‹è½½çš„æ–‡ä»¶æ˜¯ä¸­æ–‡åçš„è¯ã€‚ä½ ä¼šå‘ç°ï¼Œä¸‹è½½æ— æ³•æ­£ç¡®æ˜¾ç¤ºå‡ºæ­£ç¡®çš„ä¸­æ–‡åã€‚<br>åŸå› æ˜¯åœ¨å“åº”å¤´ä¸­ï¼Œä¸èƒ½åŒ…å«æœ‰ä¸­æ–‡å­—ç¬¦ï¼Œåªèƒ½åŒ…å« ASCII ç </p><p><font title="blue">æ–‡ä»¶ä¸‹è½½ä»£ç ï¼š</font></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Download</span>  <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">downloadFileName</span> <span class="operator">=</span> <span class="string">&quot;hero.png&quot;</span>;</span><br><span class="line">        <span class="comment">// 2ã€è¯»å–è¦ä¸‹è½½çš„æ–‡ä»¶å†…å®¹ (é€šè¿‡ ServletContext å¯¹è±¡å¯ä»¥è¯»å–)</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// è·å–è¦ä¸‹è½½çš„æ–‡ä»¶ç±»</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> servletContext.getMimeType(<span class="string">&quot;/file/&quot;</span> + downloadFileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸‹è½½çš„æ–‡ä»¶ç±»å‹ï¼š&quot;</span>+mimeType);</span><br><span class="line">        <span class="comment">// 4ã€åœ¨å›ä¼ å‰ï¼Œé€šè¿‡å“åº”å¤´å‘Šè¯‰å®¢æˆ·ç«¯è¿”å›çš„æ•°æ®ç±»å‹</span></span><br><span class="line">        resp.setContentType(mimeType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5ã€è¿˜è¦å‘Šè¯‰å®¢æˆ·ç«¯æ”¶åˆ°çš„æ•°æ®æ˜¯ç”¨äºä¸‹è½½ä½¿ç”¨ï¼ˆè¿˜æ˜¯ä½¿ç”¨å“åº”å¤´ï¼‰</span></span><br><span class="line">        <span class="comment">// Content-Disposition å“åº”å¤´ï¼Œè¡¨ç¤ºæ”¶åˆ°çš„æ•°æ®æ€ä¹ˆå¤„ç†</span></span><br><span class="line">        <span class="comment">// attachment è¡¨ç¤ºé™„ä»¶ï¼Œè¡¨ç¤ºä¸‹è½½ä½¿ç”¨</span></span><br><span class="line">        <span class="comment">// filename= è¡¨ç¤ºæŒ‡å®šä¸‹è½½çš„æ–‡ä»¶å</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+downloadFileName);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * /æ–œæ è¢«æœåŠ¡å™¨è§£æè¡¨ç¤ºåœ°å€ä¸º http://ip:prot/å·¥ç¨‹å/ æ˜ å°„ åˆ°ä»£ç çš„ Web ç›®å½•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> servletContext.getResourceAsStream(<span class="string">&quot;/file/&quot;</span> + downloadFileName);</span><br><span class="line">        <span class="comment">//è·å–å“åº”è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        <span class="comment">// 3ã€æŠŠä¸‹è½½çš„æ–‡ä»¶å†…å®¹å›ä¼ ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="comment">// è¯»å–è¾“å…¥æµä¸­å…¨éƒ¨çš„æ•°æ®ï¼Œå¤åˆ¶ç»™è¾“å‡ºæµï¼Œè¾“å‡ºç»™å®¢æˆ·ç«¯</span></span><br><span class="line">        IOUtils.copy(inputStream,outputStream);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š"><a href="#é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š"></a>é™„ä»¶ä¸­æ–‡åä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š</h4><h5 id="æ–¹æ¡ˆä¸€ï¼šURLEncoder-è§£å†³-IE-å’Œè°·æ­Œæµè§ˆå™¨çš„-é™„ä»¶ä¸­-æ–‡åé—®é¢˜ã€‚-æŒæ¡"><a href="#æ–¹æ¡ˆä¸€ï¼šURLEncoder-è§£å†³-IE-å’Œè°·æ­Œæµè§ˆå™¨çš„-é™„ä»¶ä¸­-æ–‡åé—®é¢˜ã€‚-æŒæ¡" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šURLEncoder è§£å†³ IE å’Œè°·æ­Œæµè§ˆå™¨çš„ é™„ä»¶ä¸­ æ–‡åé—®é¢˜ã€‚(æŒæ¡)"></a>æ–¹æ¡ˆä¸€ï¼šURLEncoder è§£å†³ IE å’Œè°·æ­Œæµè§ˆå™¨çš„ é™„ä»¶ä¸­ æ–‡åé—®é¢˜ã€‚(æŒæ¡)</h5><blockquote><p> å¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ˜¯ IE æµè§ˆå™¨ æˆ–è€… æ˜¯è°·æ­Œæµè§ˆå™¨ã€‚(ç«ç‹ç°åœ¨å·²ç»æ”¯æŒ)<br> æˆ‘ä»¬éœ€è¦ä½¿ç”¨ URLEncoder ç±»å…ˆå¯¹ä¸­æ–‡åè¿›è¡Œ UTF-8 çš„ç¼–ç  æ“ä½œã€‚<br> å› ä¸º IE æµè§ˆå™¨å’Œè°·æ­Œæµè§ˆå™¨æ”¶åˆ°å«æœ‰ç¼–ç åçš„å­—ç¬¦ä¸²åä¼šä»¥ UTF-8 å­—ç¬¦é›†è¿›è¡Œè§£ç æ˜¾ç¤ºã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠŠä¸­æ–‡åè¿›è¡Œ UTF-8 ç¼–ç æ“ä½œã€‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="string">&quot;ä¸­æ–‡.jpg&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// ç„¶åæŠŠç¼–ç åçš„å­—ç¬¦ä¸²è®¾ç½®åˆ°å“åº”å¤´ä¸­</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, str);</span><br></pre></td></tr></table></figure><h5 id="æ–¹æ¡ˆäºŒï¼šï¼ˆäº†è§£ï¼‰BASE64-ç¼–è§£ç -è§£å†³-ç«ç‹æµè§ˆå™¨çš„é™„ä»¶ä¸­æ–‡åé—®-é¢˜-ç°åœ¨ç«ç‹æµè§ˆå™¨å·²æ”¯æŒ-URLEncode"><a href="#æ–¹æ¡ˆäºŒï¼šï¼ˆäº†è§£ï¼‰BASE64-ç¼–è§£ç -è§£å†³-ç«ç‹æµè§ˆå™¨çš„é™„ä»¶ä¸­æ–‡åé—®-é¢˜-ç°åœ¨ç«ç‹æµè§ˆå™¨å·²æ”¯æŒ-URLEncode" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šï¼ˆäº†è§£ï¼‰BASE64 ç¼–è§£ç  è§£å†³ ç«ç‹æµè§ˆå™¨çš„é™„ä»¶ä¸­æ–‡åé—® é¢˜(ç°åœ¨ç«ç‹æµè§ˆå™¨å·²æ”¯æŒ URLEncode)"></a>æ–¹æ¡ˆäºŒï¼šï¼ˆäº†è§£ï¼‰BASE64 ç¼–è§£ç  è§£å†³ ç«ç‹æµè§ˆå™¨çš„é™„ä»¶ä¸­æ–‡åé—® é¢˜(ç°åœ¨ç«ç‹æµè§ˆå™¨å·²æ”¯æŒ URLEncode)</h5><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ˜¯ç«ç‹æµè§ˆå™¨ã€‚ é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¯¹ä¸­æ–‡åè¿›è¡Œ BASE64 çš„ç¼–ç æ“ä½œã€‚</span><br><span class="line">è¿™æ—¶å€™éœ€è¦æŠŠè¯·æ±‚å¤´ Content-Disposition: attachment; filename=ä¸­æ–‡å</span><br><span class="line">ç¼–ç æˆä¸ºï¼šContent-Disposition: attachment; filename==?charset?B?xxxxx?=</span><br><span class="line"></span><br><span class="line">=?charset?B?xxxxx?= ç°åœ¨æˆ‘ä»¬å¯¹è¿™æ®µå†…å®¹è¿›è¡Œä¸€ä¸‹è¯´æ˜ã€‚</span><br><span class="line">=? è¡¨ç¤ºç¼–ç å†…å®¹çš„å¼€å§‹</span><br><span class="line">charset è¡¨ç¤ºå­—ç¬¦é›†</span><br><span class="line">B è¡¨ç¤º BASE64 ç¼–ç </span><br><span class="line">xxxx è¡¨ç¤ºæ–‡ä»¶å BASE64 ç¼–ç åçš„å†…å®¹</span><br><span class="line">?= è¡¨ç¤ºç¼–ç å†…å®¹çš„ç»“æŸ</span><br></pre></td></tr></table></figure><p><strong>Base64ç¼–è§£ç æ“ä½œ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;è¿™æ˜¯éœ€è¦ Base64 ç¼–ç çš„å†…å®¹&quot;</span>;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª Base64 ç¼–ç å™¨</span></span><br><span class="line"><span class="type">BASE64Encoder</span> <span class="variable">base64Encoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>();</span><br><span class="line"><span class="comment">// æ‰§è¡Œ Base64 ç¼–ç æ“ä½œ</span></span><br><span class="line"><span class="type">String</span> <span class="variable">encodedString</span> <span class="operator">=</span> base64Encoder.encode(content.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">System.out.println( encodedString );</span><br><span class="line"><span class="comment">// åˆ›å»º Base64 è§£ç å™¨</span></span><br><span class="line"><span class="type">BASE64Decoder</span> <span class="variable">base64Decoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BASE64Decoder</span>();</span><br><span class="line"><span class="comment">// è§£ç æ“ä½œ</span></span><br><span class="line"><span class="type">byte</span>[] bytes = base64Decoder.decodeBuffer(encodedString);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">System.out.println(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å› ä¸ºç«ç‹ä½¿ç”¨çš„æ˜¯ BASE64 çš„ç¼–è§£ç æ–¹å¼è¿˜åŸå“åº”ä¸­çš„æ±‰å­—ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ BASE64Encoder ç±»è¿›è¡Œç¼–ç æ“ä½œã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡Œ BASE64 ç¼–ç å</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;attachment; fileName=&quot;</span> + <span class="string">&quot;=?utf-8?B?&quot;</span></span><br><span class="line">+ <span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>().encode(<span class="string">&quot;ä¸­æ–‡.jpg&quot;</span>.getBytes(<span class="string">&quot;utf-8&quot;</span>)) + <span class="string">&quot;?=&quot;</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®åˆ°å“åº”å¤´ä¸­</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, str);</span><br></pre></td></tr></table></figure><p><strong>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³ä¸Šé¢ä¸¤ç§ä¸åŒç¼–è§£ç æ–¹å¼å‘¢ã€‚æˆ‘ä»¬åªéœ€è¦é€šè¿‡åˆ¤æ–­è¯·æ±‚å¤´ä¸­ User-Agent è¿™ä¸ªè¯·æ±‚å¤´æºå¸¦è¿‡æ¥çš„ æµè§ˆå™¨ä¿¡æ¯å³å¯åˆ¤æ–­å‡ºæ˜¯ä»€ä¹ˆæµè§ˆå™¨ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ua</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;User-Agent&quot;</span>);</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç«ç‹æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">if</span> (ua.contains(<span class="string">&quot;Firefox&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼è¿›è¡Œ BASE64 ç¼–ç å</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;attachment; fileName=&quot;</span> + <span class="string">&quot;=?utf-8?B?&quot;</span></span><br><span class="line">+ <span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>().encode(<span class="string">&quot;ä¸­æ–‡.jpg&quot;</span>.getBytes(<span class="string">&quot;utf-8&quot;</span>)) + <span class="string">&quot;?=&quot;</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®åˆ°å“åº”å¤´ä¸­</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, str);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// æŠŠä¸­æ–‡åè¿›è¡Œ UTF-8 ç¼–ç æ“ä½œã€‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;attachment; fileName=&quot;</span> + URLEncoder.encode(<span class="string">&quot;ä¸­æ–‡.jpg&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// ç„¶åæŠŠç¼–ç åçš„å­—ç¬¦ä¸²è®¾ç½®åˆ°å“åº”å¤´ä¸­</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, str);</span><br></pre></td></tr></table></figure><h2 id="ä¹¦åŸé¡¹ç›®-ç¬¬ä¸‰é˜¶æ®µ"><a href="#ä¹¦åŸé¡¹ç›®-ç¬¬ä¸‰é˜¶æ®µ" class="headerlink" title="ä¹¦åŸé¡¹ç›®-ç¬¬ä¸‰é˜¶æ®µ"></a>ä¹¦åŸé¡¹ç›®-ç¬¬ä¸‰é˜¶æ®µ</h2><h3 id="a-é¡µé¢-jsp-åŠ¨æ€åŒ–"><a href="#a-é¡µé¢-jsp-åŠ¨æ€åŒ–" class="headerlink" title="a)é¡µé¢ jsp åŠ¨æ€åŒ–"></a>a)é¡µé¢ jsp åŠ¨æ€åŒ–</h3><p>1ã€åœ¨ html é¡µé¢é¡¶è¡Œæ·»åŠ  page æŒ‡ä»¤ã€‚</p><p>2ã€ä¿®æ”¹æ–‡ä»¶åç¼€åä¸ºï¼š.jsp</p><p>3ã€ä½¿ç”¨ IDEA æœç´¢æ›¿æ¢.html ä¸º.jsp(å¿«æ·é”®ï¼šCtrl+Shift+R)</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211124124720963.png" alt="image-20211124124720963"></p><h3 id="b-æŠ½å–é¡µé¢ä¸­ç›¸åŒçš„å†…å®¹"><a href="#b-æŠ½å–é¡µé¢ä¸­ç›¸åŒçš„å†…å®¹" class="headerlink" title="b)æŠ½å–é¡µé¢ä¸­ç›¸åŒçš„å†…å®¹"></a>b)æŠ½å–é¡µé¢ä¸­ç›¸åŒçš„å†…å®¹</h3><p><strong>i. head ä¸­ cssã€jqueryã€base æ ‡ç­¾</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%</span><br><span class="line"><span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> request.getScheme()</span><br><span class="line">+ <span class="string">&quot;://&quot;</span></span><br><span class="line">+ request.getServerName()</span><br><span class="line">+ <span class="string">&quot;:&quot;</span></span><br><span class="line">+ request.getServerPort()</span><br><span class="line">+ request.getContextPath()</span><br><span class="line">+ <span class="string">&quot;/&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%=basePath%&gt;</span><br><span class="line">&lt;!--å†™ base æ ‡ç­¾ï¼Œæ°¸è¿œå›ºå®šç›¸å¯¹è·¯å¾„è·³è½¬çš„ç»“æœ--&gt;</span><br><span class="line">&lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;</span><br><span class="line">&lt;link type=<span class="string">&quot;text/css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;static/css/style.css&quot;</span> &gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;static/script/jquery-1.7.2.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>ii. æ¯ä¸ªé¡µé¢çš„é¡µè„š</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;bottom&quot;</span>&gt;</span><br><span class="line">&lt;span&gt;</span><br><span class="line">å°šç¡…è°·ä¹¦åŸ.Copyright &amp;copy;<span class="number">2015</span></span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>iii. ç™»å½•æˆåŠŸåçš„èœå•</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">&lt;span&gt;æ¬¢è¿&lt;span class=<span class="string">&quot;um_span&quot;</span>&gt;éŸ©æ€»&lt;/span&gt;å…‰ä¸´å°šç¡…è°·ä¹¦åŸ&lt;/span&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;../order/order.jsp&quot;</span>&gt;æˆ‘çš„è®¢å•&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;../../index.jsp&quot;</span>&gt;æ³¨é”€&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;a href=<span class="string">&quot;../../index.jsp&quot;</span>&gt;è¿”å›&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>iv. manager æ¨¡å—çš„èœå•</strong></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;book_manager.jsp&quot;</span>&gt;å›¾ä¹¦ç®¡ç†&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;order_manager.jsp&quot;</span>&gt;è®¢å•ç®¡ç†&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;../../index.jsp&quot;</span>&gt;è¿”å›å•†åŸ&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="c-ç™»å½•ï¼Œæ³¨å†Œé”™è¯¯æç¤ºï¼ŒåŠè¡¨å•å›æ˜¾"><a href="#c-ç™»å½•ï¼Œæ³¨å†Œé”™è¯¯æç¤ºï¼ŒåŠè¡¨å•å›æ˜¾" class="headerlink" title="c)ç™»å½•ï¼Œæ³¨å†Œé”™è¯¯æç¤ºï¼ŒåŠè¡¨å•å›æ˜¾"></a>c)ç™»å½•ï¼Œæ³¨å†Œé”™è¯¯æç¤ºï¼ŒåŠè¡¨å•å›æ˜¾</h3><p><strong>ä»¥ç™»å½•å›æ˜¾ä¸ºç¤ºä¾‹ï¼š Servlet ç¨‹åºç«¯éœ€è¦æ·»åŠ å›æ˜¾ä¿¡æ¯åˆ° Request</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(userService.login(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>,username,password,<span class="literal">null</span>))==<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(request.getRemoteHost()+<span class="string">&quot; ç™»é™†å¤±è´¥&quot;</span>);</span><br><span class="line">            <span class="comment">//                å¤±è´¥</span></span><br><span class="line">            <span class="comment">//å‘Šè¯‰å®¢æˆ·ç«¯é”™è¯¯ä¿¡æ¯ï¼Œå¹¶æŠŠç”¨æˆ·åå›æ˜¾</span></span><br><span class="line">            request.setAttribute(<span class="string">&quot;mes&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            request.setAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">            <span class="comment">//        è·³å›ç™»å½•é¡µé¢</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/pages/user/login.jsp&quot;</span>).forward(request,response);</span><br></pre></td></tr></table></figure><p><strong>jsp é¡µé¢ï¼Œéœ€è¦è¾“å‡ºå›æ˜¾ä¿¡æ¯</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211124154419501.png" alt="image-20211124154419501"></p><h3 id="d-BaseServlet-çš„æŠ½å–"><a href="#d-BaseServlet-çš„æŠ½å–" class="headerlink" title="d)BaseServlet çš„æŠ½å–"></a>d)BaseServlet çš„æŠ½å–</h3><p>åœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸€ä¸ªæ¨¡å—ï¼Œä¸€èˆ¬åªä½¿ç”¨ä¸€ä¸ª Servlet ç¨‹åº</p><p><strong>ä»£ç ä¼˜åŒ–ä¸€ï¼šä»£ç ä¼˜åŒ–ï¼šåˆå¹¶ LoginServlet å’Œ RegistServlet ç¨‹åºä¸º UserServlet ç¨‹åº</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211124160631231.png" alt="image-20211124160631231"></strong></p><p><strong>ä¼˜åŒ–ä»£ç äºŒï¼šä½¿ç”¨åå°„ä¼˜åŒ–å¤§é‡ else if ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">action</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// è·å– action ä¸šåŠ¡é‰´åˆ«å­—ç¬¦ä¸²ï¼Œè·å–ç›¸åº”çš„ä¸šåŠ¡ æ–¹æ³•åå°„å¯¹è±¡</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getDeclaredMethod(action, HttpServletRequest.class,</span><br><span class="line">HttpServletResponse.class);</span><br><span class="line"><span class="comment">// System.out.println(method);</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ç›®æ ‡ä¸šåŠ¡ æ–¹æ³•</span></span><br><span class="line">method.invoke(<span class="built_in">this</span>, req, resp);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»£ç ä¼˜åŒ–ä¸‰ï¼šæŠ½å– BaseServlet ç¨‹åºã€‚</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211124191432897.png" alt="image-20211124191432897"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">action</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// è·å– action ä¸šåŠ¡é‰´åˆ«å­—ç¬¦ä¸²ï¼Œè·å–ç›¸åº”çš„ä¸šåŠ¡ æ–¹æ³•åå°„å¯¹è±¡</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getDeclaredMethod(action, HttpServletRequest.class,</span><br><span class="line">HttpServletResponse.class);</span><br><span class="line"><span class="comment">// System.out.println(method);</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ç›®æ ‡ä¸šåŠ¡ æ–¹æ³•</span></span><br><span class="line">method.invoke(<span class="built_in">this</span>, req, resp);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å…¶ä»–servletç¨‹åºç»§æ‰¿å®ƒ</p><h3 id="e-æ•°æ®çš„å°è£…å’ŒæŠ½å–-BeanUtils-çš„ä½¿ç”¨"><a href="#e-æ•°æ®çš„å°è£…å’ŒæŠ½å–-BeanUtils-çš„ä½¿ç”¨" class="headerlink" title="e)æ•°æ®çš„å°è£…å’ŒæŠ½å– BeanUtils çš„ä½¿ç”¨"></a>e)æ•°æ®çš„å°è£…å’ŒæŠ½å– BeanUtils çš„ä½¿ç”¨</h3><p>BeanUtils å·¥å…·ç±»ï¼Œå®ƒå¯ä»¥ä¸€æ¬¡æ€§çš„æŠŠæ‰€æœ‰è¯·æ±‚çš„å‚æ•°æ³¨å…¥åˆ° JavaBean ä¸­ã€‚<br>BeanUtils å·¥å…·ç±»ï¼Œç»å¸¸ç”¨äºæŠŠ Map ä¸­çš„å€¼æ³¨å…¥åˆ° JavaBean ä¸­ï¼Œæˆ–è€…æ˜¯å¯¹è±¡å±æ€§å€¼çš„æ‹·è´æ“ä½œã€‚<br>BeanUtils å®ƒä¸æ˜¯ Jdk çš„ç±»ã€‚è€Œæ˜¯ç¬¬ä¸‰æ–¹çš„å·¥å…·ç±»ã€‚æ‰€ä»¥éœ€è¦å¯¼åŒ…ã€‚<br>1ã€å¯¼å…¥éœ€è¦çš„ jar åŒ…ï¼š<br>commons-beanutils-1.8.0.jar<br>commons-logging-1.1.1.jar<br>2ã€ç¼–å†™ WebUtils å·¥å…·ç±»ä½¿ç”¨ï¼š<br>WebUtils å·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebUtils</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŠŠ Map ä¸­çš„å€¼æ³¨å…¥åˆ°å¯¹åº”çš„ JavaBean å±æ€§ä¸­ã€‚</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> bean</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">copyParamToBean</span><span class="params">( Map value , T bean )</span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ³¨å…¥ä¹‹å‰ï¼š&quot;</span> + bean);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŠŠæ‰€æœ‰è¯·æ±‚çš„å‚æ•°éƒ½æ³¨å…¥åˆ° user å¯¹è±¡ä¸­</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">BeanUtils.populate(bean, value);</span><br><span class="line">System.out.println(<span class="string">&quot;æ³¨å…¥ä¹‹åï¼š&quot;</span> + bean);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹¦åŸ-ç¬¬å››é˜¶æ®µã€‚ä½¿ç”¨-ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾"><a href="#ä¹¦åŸ-ç¬¬å››é˜¶æ®µã€‚ä½¿ç”¨-ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾" class="headerlink" title="**ä¹¦åŸ-**ç¬¬å››é˜¶æ®µã€‚ä½¿ç”¨ ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾"></a>**ä¹¦åŸ-**ç¬¬å››é˜¶æ®µã€‚ä½¿ç”¨ ELè¡¨è¾¾å¼ä¿®æ”¹è¡¨å•å›æ˜¾</h3><h2 id="ä¹¦åŸ-ç¬¬äº”é˜¶æ®µ-å›¾ä¹¦æ¨¡å—"><a href="#ä¹¦åŸ-ç¬¬äº”é˜¶æ®µ-å›¾ä¹¦æ¨¡å—" class="headerlink" title="ä¹¦åŸ-ç¬¬äº”é˜¶æ®µ-å›¾ä¹¦æ¨¡å—"></a>ä¹¦åŸ-ç¬¬äº”é˜¶æ®µ-å›¾ä¹¦æ¨¡å—</h2><h3 id="1ã€MVC-æ¦‚å¿µ"><a href="#1ã€MVC-æ¦‚å¿µ" class="headerlink" title="1ã€MVC æ¦‚å¿µ"></a>1ã€MVC æ¦‚å¿µ</h3><p>MVC å…¨ç§°ï¼šModel æ¨¡å‹ã€ View è§†å›¾ã€ Controller æ§åˆ¶å™¨ã€‚<br>MVC æœ€æ—©å‡ºç°åœ¨ JavaEE ä¸‰å±‚ä¸­çš„ Web å±‚ï¼Œå®ƒå¯ä»¥æœ‰æ•ˆçš„æŒ‡å¯¼ Web å±‚çš„ä»£ç å¦‚ä½•æœ‰æ•ˆåˆ†ç¦»ï¼Œå•ç‹¬å·¥ä½œã€‚</p><p>View è§†å›¾ï¼šåªè´Ÿè´£æ•°æ®å’Œç•Œé¢çš„æ˜¾ç¤ºï¼Œä¸æ¥å—ä»»ä½•ä¸æ˜¾ç¤ºæ•°æ®æ— å…³çš„ä»£ç ï¼Œä¾¿äºç¨‹åºå‘˜å’Œç¾å·¥çš„åˆ†å·¥åˆä½œâ€”â€”JSP&#x2F;HTMLã€‚</p><p>Controller æ§åˆ¶å™¨ï¼šåªè´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚çš„ä»£ç å¤„ç†è¯·æ±‚ï¼Œç„¶åæ´¾å‘é¡µé¢ï¼Œæ˜¯ä¸€ä¸ªâ€œè°ƒåº¦è€…â€çš„è§’è‰²â€”â€”Servletã€‚ è½¬åˆ°æŸä¸ªé¡µé¢ã€‚æˆ–è€…æ˜¯é‡å®šå‘åˆ°æŸä¸ªé¡µé¢ã€‚</p><p>Model æ¨¡å‹ï¼šå°†ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æ•°æ®å°è£…ä¸ºå…·ä½“çš„ JavaBean ç±»ï¼Œå…¶ä¸­ä¸æºæ‚ä»»ä½•ä¸æ•°æ®å¤„ç†ç›¸å…³çš„ä»£ç â€”â€”JavaBean&#x2F;domain&#x2F;entity&#x2F;pojoã€‚</p><p><strong>MVC æ˜¯ä¸€ç§æ€æƒ³</strong></p><p><strong>MVC çš„ç†å¿µæ˜¯å°†è½¯ä»¶ä»£ç æ‹†åˆ†æˆä¸ºç»„ä»¶ï¼Œå•ç‹¬å¼€å‘ï¼Œç»„åˆä½¿ç”¨ï¼ˆç›®çš„è¿˜æ˜¯ä¸ºäº†é™ä½è€¦åˆåº¦ï¼‰ã€‚</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211124210503267.png" alt="image-20211124210503267" style="zoom:80%;" />MVC çš„ä½œç”¨è¿˜æ˜¯ä¸ºäº†é™ä½è€¦åˆã€‚è®©ä»£ç åˆç†åˆ†å±‚ã€‚æ–¹ä¾¿åæœŸå‡çº§å’Œç»´æŠ¤ã€‚</p><h3 id="1ã€å›¾ä¹¦æ¨¡å—"><a href="#1ã€å›¾ä¹¦æ¨¡å—" class="headerlink" title="1ã€å›¾ä¹¦æ¨¡å—"></a>1ã€å›¾ä¹¦æ¨¡å—</h3><h4 id="1-1ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨"><a href="#1-1ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨" class="headerlink" title="1.1ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨"></a>1.1ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„æ•°æ®åº“è¡¨</h4><p>è®¾è®¡å›¾ä¹¦æ•°æ®åº“è¡¨å¹¶æ’å…¥æµ‹è¯•æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">create TABLE t_book(</span><br><span class="line">id int PRIMARY KEY auto_increment,</span><br><span class="line">`name` VARCHAR(100),</span><br><span class="line">price DECIMAL(11,2),</span><br><span class="line">author VARCHAR(100),</span><br><span class="line">sales int,</span><br><span class="line">stock int,</span><br><span class="line">img_path VARCHAR(200)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">## æ’å…¥åˆå§‹åŒ–æµ‹è¯•æ•°æ®</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;java ä»å…¥é—¨åˆ°æ”¾å¼ƒ&#x27; , &#x27;å›½å“¥&#x27; , 80 , 9999 , 9 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æ•°æ®ç»“æ„ä¸ç®—æ³•&#x27; , &#x27;ä¸¥æ•å›&#x27; , 78.5 , 6 , 13 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æ€æ ·æ‹è·‘åˆ«äººçš„åª³å¦‡&#x27; , &#x27;é¾™ä¼&#x27; , 68, 99999 , 52 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æœ¨è™šè‚‰ç›–é¥­&#x27; , &#x27;å°èƒ–&#x27; , 16, 1000 , 50 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;C++ç¼–ç¨‹æ€æƒ³&#x27; , &#x27;åˆšå“¥&#x27; , 45.5 , 14 , 95 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;è›‹ç‚’é¥­&#x27; , &#x27;å‘¨æ˜Ÿæ˜Ÿ&#x27; , 9.9, 12 , 53 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;èµŒç¥&#x27; , &#x27;é¾™ä¼&#x27; , 66.5, 125 , 535 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;Java ç¼–ç¨‹æ€æƒ³&#x27; , &#x27;é˜³å“¥&#x27; , 99.5 , 47 , 36 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;JavaScript ä»å…¥é—¨åˆ°ç²¾é€š&#x27; , &#x27;å©·å§&#x27; , 9.9 , 85 , 95 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;cocos2d-x æ¸¸æˆç¼–ç¨‹å…¥é—¨&#x27; , &#x27;å›½å“¥&#x27; , 49, 52 , 62 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;C è¯­è¨€ç¨‹åºè®¾è®¡&#x27; , &#x27;è°­æµ©å¼º&#x27; , 28 , 52 , 74 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;Lua è¯­è¨€ç¨‹åºè®¾è®¡&#x27; , &#x27;é›·ä¸°é˜³&#x27; , 51.5 , 48 , 82 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;è¥¿æ¸¸è®°&#x27; , &#x27;ç½—è´¯ä¸­&#x27; , 12, 19 , 9999 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æ°´æµ’ä¼ &#x27; , &#x27;åä»”&#x27; , 33.05 , 22 , 88 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æ“ä½œç³»ç»ŸåŸç†&#x27; , &#x27;åˆ˜ä¼˜&#x27; , 133.05 , 122 , 188 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;æ•°æ®ç»“æ„ java ç‰ˆ&#x27; , &#x27;å°å¤§ç¥&#x27; , 173.15 , 21 , 81 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;UNIX é«˜çº§ç¯å¢ƒç¼–ç¨‹&#x27; , &#x27;ä¹å¤©&#x27; , 99.15 , 210 , 810 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;javaScript é«˜çº§ç¼–ç¨‹&#x27; , &#x27;å›½å“¥&#x27; , 69.15 , 210 , 810 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;å¤§è¯è®¾è®¡æ¨¡å¼&#x27; , &#x27;å›½å“¥&#x27; , 89.15 , 20 , 10 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line">insert into t_book(`id` , `name` , `author` , `price` , `sales` , `stock` , `img_path`)</span><br><span class="line">values(null , &#x27;äººæœˆç¥è¯&#x27; , &#x27;åˆšå“¥&#x27; , 88.15 , 20 , 80 , &#x27;static/img/default.jpg&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * from t_book;</span><br></pre></td></tr></table></figure><h4 id="1-2ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-JavaBean"><a href="#1-2ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-JavaBean" class="headerlink" title="1.2ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ JavaBean"></a>1.2ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ JavaBean</h4><h4 id="1-3ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Dao-å’Œæµ‹è¯•-Dao"><a href="#1-3ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Dao-å’Œæµ‹è¯•-Dao" class="headerlink" title="1.3ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Dao å’Œæµ‹è¯• Dao"></a>1.3ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Dao å’Œæµ‹è¯• Dao</h4><h4 id="1-4ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Service-å’Œæµ‹è¯•-Service"><a href="#1-4ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Service-å’Œæµ‹è¯•-Service" class="headerlink" title="1.4ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Service å’Œæµ‹è¯• Service"></a>1.4ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Service å’Œæµ‹è¯• Service</h4><h4 id="1-5ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Web-å±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•"><a href="#1-5ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„-Web-å±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•" class="headerlink" title="1.5ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Web å±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•"></a>1.5ã€ç¼–å†™å›¾ä¹¦æ¨¡å—çš„ Web å±‚ï¼Œå’Œé¡µé¢è”è°ƒæµ‹è¯•</h4><h5 id="1-5-1ã€å›¾ä¹¦åˆ—è¡¨åŠŸèƒ½çš„å®ç°"><a href="#1-5-1ã€å›¾ä¹¦åˆ—è¡¨åŠŸèƒ½çš„å®ç°" class="headerlink" title="1.5.1ã€å›¾ä¹¦åˆ—è¡¨åŠŸèƒ½çš„å®ç°"></a>1.5.1ã€å›¾ä¹¦åˆ—è¡¨åŠŸèƒ½çš„å®ç°</h5><p>1ã€å›¾è§£åˆ—è¡¨åŠŸèƒ½æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125120133525.png" alt="image-20211125120133525"></p><p>2ã€BookServlet ç¨‹åºä¸­æ·»åŠ  list æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">//1 é€šè¿‡ BookService æŸ¥è¯¢å…¨éƒ¨å›¾ä¹¦</span></span><br><span class="line">List&lt;Book&gt; books = bookService.queryBooks();</span><br><span class="line"><span class="comment">//2 æŠŠå…¨éƒ¨å›¾ä¹¦ä¿å­˜åˆ° Request åŸŸä¸­</span></span><br><span class="line">req.setAttribute(<span class="string">&quot;books&quot;</span>, books);</span><br><span class="line"><span class="comment">//3ã€è¯·æ±‚è½¬å‘åˆ°/pages/manager/book_manager.jsp é¡µé¢</span></span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/pages/manager/book_manager.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€ä¿®æ”¹ã€å›¾ä¹¦ç®¡ç†ã€‘è¯·æ±‚åœ°å€</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125120223475.png" alt="image-20211125120223475"></p><p>4ã€ä¿®æ”¹ pages&#x2F;manager&#x2F;book_manager.jsp é¡µé¢çš„æ•°æ®éå†è¾“å‡º(ç•¥)</p><p>1.5.2ã€å‰åå°çš„ç®€å•ä»‹ç»</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125120307410.png" alt="image-20211125120307410" style="zoom:80%;"/>-</p><h5 id="1-5-3ã€æ·»åŠ å›¾ä¹¦åŠŸèƒ½çš„å®ç°"><a href="#1-5-3ã€æ·»åŠ å›¾ä¹¦åŠŸèƒ½çš„å®ç°" class="headerlink" title="1.5.3ã€æ·»åŠ å›¾ä¹¦åŠŸèƒ½çš„å®ç°"></a>1.5.3ã€æ·»åŠ å›¾ä¹¦åŠŸèƒ½çš„å®ç°</h5><p>æ·»åŠ å›¾ä¹¦æµç¨‹ç»†èŠ‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125125317106.png" alt="image-20211125125317106"></p><p><strong>1.5.3.2ã€é—®é¢˜è¯´æ˜ï¼š</strong></p><p>è¡¨å•é‡å¤æäº¤ï¼š å½“ç”¨æˆ·æäº¤å®Œè¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šè®°å½•ä¸‹æœ€åä¸€æ¬¡è¯·æ±‚çš„å…¨éƒ¨ä¿¡æ¯ã€‚</p><p>å½“ç”¨æˆ·æŒ‰ä¸‹åŠŸèƒ½é”® F5ï¼Œå°±ä¼šå‘èµ·æµè§ˆå™¨è®°å½•çš„æœ€åä¸€æ¬¡ è¯·æ±‚ã€‚</p><p><strong>1.5.3.3ã€BookServlet ç¨‹åºä¸­æ·»åŠ  add æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–è¯·æ±‚çš„å‚æ•°==å°è£…æˆä¸º Book å¯¹è±¡</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> WebUtils.copyParamToBean(req.getParameterMap(),<span class="keyword">new</span> <span class="title class_">Book</span>());</span><br><span class="line"><span class="comment">// 2ã€è°ƒç”¨ BookService.addBook()ä¿å­˜å›¾ä¹¦</span></span><br><span class="line">bookService.addBook(book);</span><br><span class="line"><span class="comment">// 3ã€è·³åˆ°å›¾ä¹¦åˆ—è¡¨é¡µé¢</span></span><br><span class="line"><span class="comment">// /manager/bookServlet?action=list</span></span><br><span class="line"><span class="comment">// req.getRequestDispatcher(&quot;/manager/bookServlet?action=list&quot;).forward(req, resp);</span></span><br><span class="line">resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/manager/bookServlet?action=list&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.5.3.4ã€ä¿®æ”¹ book_edit.jsp é¡µé¢</strong></p><p>ä¿®æ”¹è¡¨å•æäº¤åœ°å€</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;manager/bookServlet&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;add&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><h5 id="1-5-4ã€åˆ é™¤å›¾ä¹¦åŠŸèƒ½çš„å®ç°"><a href="#1-5-4ã€åˆ é™¤å›¾ä¹¦åŠŸèƒ½çš„å®ç°" class="headerlink" title="1.5.4ã€åˆ é™¤å›¾ä¹¦åŠŸèƒ½çš„å®ç°"></a>1.5.4ã€åˆ é™¤å›¾ä¹¦åŠŸèƒ½çš„å®ç°</h5><p>1.5.4.1ã€å›¾è§£åˆ é™¤æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125143512764.png" alt="image-20211125143512764"></p><p><strong>1.5.4.2ã€BookServlet ç¨‹åºä¸­çš„ delete æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–è¯·æ±‚çš„å‚æ•° idï¼Œå›¾ä¹¦ç¼–ç¨‹</span></span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;id&quot;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 2ã€è°ƒç”¨ bookService.deleteBookById();åˆ é™¤å›¾ä¹¦</span></span><br><span class="line">bookService.deleteBookById(id);</span><br><span class="line"><span class="comment">// 3ã€é‡å®šå‘å›å›¾ä¹¦åˆ—è¡¨ç®¡ç†é¡µé¢</span></span><br><span class="line"><span class="comment">// /book/manager/bookServlet?action=list</span></span><br><span class="line">resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/manager/bookServlet?action=list&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.5.4.3ã€ç»™ WebUtils å·¥å…·ç±»æ·»åŠ è½¬æ¢ int ç±»å‹çš„å·¥å…·æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸º int ç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> strInt</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> defaultValue</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">parseInt</span><span class="params">(String strInt,<span class="type">int</span> defaultValue)</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> Integer.parseInt(strInt);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> defaultValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.5.4.4ã€ä¿®æ”¹åˆ é™¤çš„è¿æ¥åœ°å€ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125143629913.png" alt="image-20211125143629913"></p><p><strong>1.5.4.5ã€ç»™åˆ é™¤æ·»åŠ ç¡®è®¤æç¤ºæ“ä½œï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// ç»™åˆ é™¤çš„ a æ ‡ç­¾ç»‘å®šå•å‡»äº‹ä»¶ï¼Œç”¨äºåˆ é™¤çš„ç¡®è®¤æç¤ºæ“ä½œ</span></span><br><span class="line">$(<span class="string">&quot;a.deleteClass&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// åœ¨äº‹ä»¶çš„ function å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ª this å¯¹è±¡ã€‚è¿™ä¸ª this å¯¹è±¡ï¼Œæ˜¯å½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„ dom å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* confirm æ˜¯ç¡®è®¤æç¤ºæ¡†å‡½æ•°</span></span><br><span class="line"><span class="comment">* å‚æ•°æ˜¯å®ƒçš„æç¤ºå†…å®¹</span></span><br><span class="line"><span class="comment">* å®ƒæœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªç¡®è®¤ï¼Œä¸€ä¸ªæ˜¯å–æ¶ˆã€‚</span></span><br><span class="line"><span class="comment">* è¿”å› true è¡¨ç¤ºç‚¹å‡»äº†ï¼Œç¡®è®¤ï¼Œè¿”å› false è¡¨ç¤ºç‚¹å‡»å–æ¶ˆã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_">confirm</span>(<span class="string">&quot;ä½ ç¡®å®šè¦åˆ é™¤ã€&quot;</span> + $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">parent</span>().<span class="title function_">find</span>(<span class="string">&quot;td:first&quot;</span>).<span class="title function_">text</span>() + <span class="string">&quot;ã€‘?&quot;</span>);</span><br><span class="line"><span class="comment">// return false// é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸º===ä¸æäº¤è¯·æ±‚</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="1-5-5ã€ä¿®æ”¹å›¾ä¹¦åŠŸèƒ½çš„å®ç°"><a href="#1-5-5ã€ä¿®æ”¹å›¾ä¹¦åŠŸèƒ½çš„å®ç°" class="headerlink" title="1.5.5ã€ä¿®æ”¹å›¾ä¹¦åŠŸèƒ½çš„å®ç°"></a><strong>1.5.5ã€ä¿®æ”¹å›¾ä¹¦åŠŸèƒ½çš„å®ç°</strong></h5><p><strong>1.5.5.1ï¼šå›¾è§£ä¿®æ”¹å›¾ä¹¦ç»†èŠ‚ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125152454744.png" alt="image-20211125152454744"></p><p><strong>1.5.5.2ã€æ›´æ–°ã€ä¿®æ”¹ã€‘çš„è¯·æ±‚åœ°å€ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125152534833.png" alt="image-20211125152534833"></p><p><strong>1.5.5.3ã€BookServlet ç¨‹åºä¸­æ·»åŠ  getBook æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getBook</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">//1 è·å–è¯·æ±‚çš„å‚æ•°å›¾ä¹¦ç¼–å·</span></span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;id&quot;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">//2 è°ƒç”¨ bookService.queryBookById æŸ¥è¯¢å›¾ä¹¦</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.queryBookById(id);</span><br><span class="line"><span class="comment">//3 ä¿å­˜åˆ°å›¾ä¹¦åˆ° Request åŸŸä¸­</span></span><br><span class="line">req.setAttribute(<span class="string">&quot;book&quot;</span>, book) ;</span><br><span class="line"><span class="comment">//4 è¯·æ±‚è½¬å‘åˆ°ã€‚pages/manager/book_edit.jsp é¡µé¢</span></span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/pages/manager/book_edit.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.5.5.4ã€åœ¨ book_edit.jsp é¡µé¢ä¸­æ˜¾ç¤ºä¿®æ”¹çš„æ•°æ®</strong></p><p>ï¼ˆç•¥ï¼‰</p><p><strong>1.5.5.5ã€åœ¨ BookServlet ç¨‹åºä¸­æ·»åŠ  update æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–è¯·æ±‚çš„å‚æ•°==å°è£…æˆä¸º Book å¯¹è±¡</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> WebUtils.copyParamToBean(req.getParameterMap(),<span class="keyword">new</span> <span class="title class_">Book</span>());</span><br><span class="line"><span class="comment">// 2ã€è°ƒç”¨ BookService.updateBook( book );ä¿®æ”¹å›¾ä¹¦</span></span><br><span class="line">bookService.updateBook(book);</span><br><span class="line"><span class="comment">// 3ã€é‡å®šå‘å›å›¾ä¹¦åˆ—è¡¨ç®¡ç†é¡µé¢</span></span><br><span class="line"><span class="comment">// åœ°å€ï¼š/å·¥ç¨‹å/manager/bookServlet?action=list</span></span><br><span class="line">resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/manager/bookServlet?action=list&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.5.5.6ã€è§£å†³ book_edit.jsp é¡µé¢ï¼Œå³è¦å®ç°æ·»åŠ ï¼Œåˆè¦å®ç°ä¿®æ”¹æ“ä½œã€‚</strong></p><p>è¿™é‡Œä½¿ç”¨å›¾è§£çš„ç¬¬ä¸€ç§æ–¹æ³•</p><p>book_edit.jsp</p><p><code>&lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;$&#123;param.method&#125;&quot;&gt;</code></p><p>book_manager.jsp å¢åŠ  method&#x3D;update</p><p><code>&lt;td&gt;&lt;a href=&quot;manager/bookServlet?action=getBook&amp;method=update&amp;id=$&#123;book.id&#125;&quot;&gt;ä¿®æ”¹&lt;/a&gt;&lt;/td&gt;</code></p><p><code>&lt;td&gt;&lt;a href=&quot;pages/manager/book_edit.jsp?method=add&quot;&gt;æ·»åŠ å›¾ä¹¦&lt;/a&gt;&lt;/td&gt;</code></p><h3 id="2ã€å›¾ä¹¦åˆ†é¡µ"><a href="#2ã€å›¾ä¹¦åˆ†é¡µ" class="headerlink" title="2ã€å›¾ä¹¦åˆ†é¡µ"></a>2ã€å›¾ä¹¦åˆ†é¡µ</h3><h4 id="1-åˆ†é¡µæ¨¡å—çš„åˆ†æ"><a href="#1-åˆ†é¡µæ¨¡å—çš„åˆ†æ" class="headerlink" title="1)åˆ†é¡µæ¨¡å—çš„åˆ†æ"></a>1)åˆ†é¡µæ¨¡å—çš„åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125184753779.png" alt="image-20211125184753779"></p><h4 id="2-åˆ†é¡µæ¨¡å‹-Page-çš„æŠ½å–ï¼ˆå½“å‰é¡µæ•°ï¼Œæ€»é¡µæ•°ï¼Œæ€»è®°å½•æ•°ï¼Œ-å½“å‰é¡µæ•°æ®ï¼Œæ¯é¡µè®°å½•æ•°ï¼‰"><a href="#2-åˆ†é¡µæ¨¡å‹-Page-çš„æŠ½å–ï¼ˆå½“å‰é¡µæ•°ï¼Œæ€»é¡µæ•°ï¼Œæ€»è®°å½•æ•°ï¼Œ-å½“å‰é¡µæ•°æ®ï¼Œæ¯é¡µè®°å½•æ•°ï¼‰" class="headerlink" title="2)åˆ†é¡µæ¨¡å‹ Page çš„æŠ½å–ï¼ˆå½“å‰é¡µæ•°ï¼Œæ€»é¡µæ•°ï¼Œæ€»è®°å½•æ•°ï¼Œ å½“å‰é¡µæ•°æ®ï¼Œæ¯é¡µè®°å½•æ•°ï¼‰"></a>2)åˆ†é¡µæ¨¡å‹ Page çš„æŠ½å–ï¼ˆå½“å‰é¡µæ•°ï¼Œæ€»é¡µæ•°ï¼Œæ€»è®°å½•æ•°ï¼Œ å½“å‰é¡µæ•°æ®ï¼Œæ¯é¡µè®°å½•æ•°ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Page æ˜¯åˆ†é¡µçš„æ¨¡å‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &lt;T&gt; æ˜¯å…·ä½“çš„æ¨¡å—çš„ javaBean ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Page</span>&lt;T&gt; &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">PAGE_SIZE</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="comment">// å½“å‰é¡µç </span></span><br><span class="line"><span class="keyword">private</span> Integer pageNo;</span><br><span class="line"><span class="comment">// æ€»é¡µç </span></span><br><span class="line"><span class="keyword">private</span> Integer pageTotal;</span><br><span class="line"><span class="comment">// å½“å‰é¡µæ˜¾ç¤ºæ•°é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> PAGE_SIZE;</span><br><span class="line"><span class="comment">// æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="keyword">private</span> Integer pageTotalCount;</span><br><span class="line"><span class="comment">// å½“å‰é¡µæ•°æ®</span></span><br><span class="line"><span class="keyword">private</span> List&lt;T&gt; items</span><br></pre></td></tr></table></figure><h4 id="3-åˆ†é¡µçš„åˆæ­¥å®ç°"><a href="#3-åˆ†é¡µçš„åˆæ­¥å®ç°" class="headerlink" title="3)åˆ†é¡µçš„åˆæ­¥å®ç°"></a>3)åˆ†é¡µçš„åˆæ­¥å®ç°</h4><p>bookDaoä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">queryForPageTotalCount</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line"><span class="type">Number</span> <span class="variable">count</span> <span class="operator">=</span> (Number) queryForSingleValue(sql);</span><br><span class="line"><span class="keyword">return</span> count.intValue();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">queryForPageItems</span><span class="params">(<span class="type">int</span> begin, <span class="type">int</span> pageSize)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select `id` , `name` , `author` , `price` , `sales` , `stock` , `img_path` imgPath</span></span><br><span class="line"><span class="string">from t_book limit ?,?&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> queryForList(Book.class,sql,begin,pageSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookService ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title function_">page</span><span class="params">(<span class="type">int</span> pageNo, <span class="type">int</span> pageSize)</span> &#123;</span><br><span class="line">Page&lt;Book&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;Book&gt;();</span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰é¡µç </span></span><br><span class="line">page.setPageNo(pageNo);</span><br><span class="line"><span class="comment">// è®¾ç½®æ¯é¡µæ˜¾ç¤ºçš„æ•°é‡</span></span><br><span class="line">page.setPageSize(pageSize);</span><br><span class="line"><span class="comment">// æ±‚æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">pageTotalCount</span> <span class="operator">=</span> bookDao.queryForPageTotalCount();</span><br><span class="line"><span class="comment">// è®¾ç½®æ€»è®°å½•æ•°</span></span><br><span class="line">page.setPageTotalCount(pageTotalCount);</span><br><span class="line"><span class="comment">// æ±‚æ€»é¡µç </span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">pageTotal</span> <span class="operator">=</span> pageTotalCount / pageSize;</span><br><span class="line"><span class="keyword">if</span> (pageTotalCount % pageSize &gt; <span class="number">0</span>) &#123;</span><br><span class="line">pageTotal+=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®¾ç½®æ€»é¡µç </span></span><br><span class="line">page.setPageTotal(pageTotal);</span><br><span class="line"><span class="comment">// æ±‚å½“å‰é¡µæ•°æ®çš„å¼€å§‹ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span> <span class="variable">begin</span> <span class="operator">=</span> (page.getPageNo() - <span class="number">1</span>) * pageSize;</span><br><span class="line"><span class="comment">// æ±‚å½“å‰é¡µæ•°æ®</span></span><br><span class="line">List&lt;Book&gt; items = bookDao.queryForPageItems(begin,pageSize);</span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰é¡µæ•°æ®</span></span><br><span class="line">page.setItems(items);</span><br><span class="line"><span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BookServletä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å¤„ç†åˆ†é¡µåŠŸèƒ½</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">page</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">//1 è·å–è¯·æ±‚çš„å‚æ•° pageNo å’Œ pageSize</span></span><br><span class="line"><span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;pageNo&quot;</span>), <span class="number">1</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;pageSize&quot;</span>), Page.PAGE_SIZE);</span><br><span class="line"><span class="comment">//2 è°ƒç”¨ BookService.page(pageNoï¼ŒpageSize)ï¼šPage å¯¹è±¡</span></span><br><span class="line">Page&lt;Book&gt; page = bookService.page(pageNo,pageSize);</span><br><span class="line"><span class="comment">//3 ä¿å­˜ Page å¯¹è±¡åˆ° Request åŸŸä¸­</span></span><br><span class="line">req.setAttribute(<span class="string">&quot;page&quot;</span>,page);</span><br><span class="line"><span class="comment">//4 è¯·æ±‚è½¬å‘åˆ° pages/manager/book_manager.jsp é¡µé¢</span></span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/pages/manager/book_manager.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>manager_menu.jsp ä¸­ã€å›¾ä¹¦ç®¡ç†ã€‘è¯·æ±‚åœ°å€çš„ä¿®æ”¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125220045693.png" alt="image-20211125220045693"></p><p>book_manager.jsp ä¿®æ”¹</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211125220232513.png" alt="image-20211125220232513" style="zoom:80%;" />-</p><p>åœ¨ tableåé¢åŠ ä¸Š åˆ†é¡µdiv</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;page_nav&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;ä¸Šä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">3</span>&lt;/a&gt;</span><br><span class="line">ã€$&#123; requestScope.page.pageNo &#125;ã€‘</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">5</span>&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;ä¸‹ä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;æœ«é¡µ&lt;/a&gt;</span><br><span class="line">å…±$&#123; requestScope.page.pageTotal &#125;é¡µï¼Œ$&#123; requestScope.page.pageTotalCount &#125;æ¡è®°å½•</span><br><span class="line">åˆ°ç¬¬&lt;input value=<span class="string">&quot;4&quot;</span> name=<span class="string">&quot;pn&quot;</span> id=<span class="string">&quot;pn_input&quot;</span>/&gt;é¡µ</span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;ç¡®å®š&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="4-é¦–é¡µã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µã€æœ«é¡µå®ç°"><a href="#4-é¦–é¡µã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µã€æœ«é¡µå®ç°" class="headerlink" title="4)é¦–é¡µã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µã€æœ«é¡µå®ç°"></a>4)é¦–é¡µã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µã€æœ«é¡µå®ç°</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;page_nav&quot;</span>&gt;</span><br><span class="line">&lt;%--å¤§äºé¦–é¡µï¼Œæ‰æ˜¾ç¤º--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;requestScope.page.pageNo &gt; 1&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=1&quot;</span>&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageNo-1&#125;&quot;</span>&gt;ä¸Šä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">3</span>&lt;/a&gt;</span><br><span class="line">ã€$&#123; requestScope.page.pageNo &#125;ã€‘</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">5</span>&lt;/a&gt;</span><br><span class="line">&lt;%-- å¦‚æœå·²ç» æ˜¯æœ€åä¸€é¡µï¼Œåˆ™ä¸æ˜¾ç¤ºä¸‹ä¸€é¡µï¼Œæœ«é¡µ --%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;requestScope.page.pageNo &lt; requestScope.page.pageTotal&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageNo+1&#125;&quot;</span>&gt;ä¸‹ä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageTotal&#125;&quot;</span>&gt;æœ«é¡µ&lt;/a&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">å…±$&#123; requestScope.page.pageTotal &#125;é¡µï¼Œ$&#123; requestScope.page.pageTotalCount &#125;æ¡è®°å½•</span><br><span class="line">åˆ°ç¬¬&lt;input value=<span class="string">&quot;4&quot;</span> name=<span class="string">&quot;pn&quot;</span> id=<span class="string">&quot;pn_input&quot;</span>/&gt;é¡µ</span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;ç¡®å®š&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="5-åˆ†é¡µæ¨¡å—ä¸­è·³è½¬åˆ°æŒ‡å®šé¡µæ•°åŠŸèƒ½å®ç°"><a href="#5-åˆ†é¡µæ¨¡å—ä¸­è·³è½¬åˆ°æŒ‡å®šé¡µæ•°åŠŸèƒ½å®ç°" class="headerlink" title="5)åˆ†é¡µæ¨¡å—ä¸­è·³è½¬åˆ°æŒ‡å®šé¡µæ•°åŠŸèƒ½å®ç°"></a>5)åˆ†é¡µæ¨¡å—ä¸­è·³è½¬åˆ°æŒ‡å®šé¡µæ•°åŠŸèƒ½å®ç°</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;page_nav&quot;</span>&gt;</span><br><span class="line">&lt;%--å¤§äºé¦–é¡µï¼Œæ‰æ˜¾ç¤º--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;requestScope.page.pageNo &gt; 1&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=1&quot;</span>&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageNo-1&#125;&quot;</span>&gt;ä¸Šä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">3</span>&lt;/a&gt;</span><br><span class="line">ã€$&#123; requestScope.page.pageNo &#125;ã€‘</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;<span class="number">5</span>&lt;/a&gt;</span><br><span class="line">&lt;%-- å¦‚æœå·²ç» æ˜¯æœ€åä¸€é¡µï¼Œåˆ™ä¸æ˜¾ç¤ºä¸‹ä¸€é¡µï¼Œæœ«é¡µ --%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;requestScope.page.pageNo &lt; requestScope.page.pageTotal&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageNo+1&#125;&quot;</span>&gt;ä¸‹ä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;requestScope.page.pageTotal&#125;&quot;</span>&gt;æœ«é¡µ&lt;/a&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">å…±$&#123; requestScope.page.pageTotal &#125;é¡µï¼Œ$&#123; requestScope.page.pageTotalCount &#125;æ¡è®°å½•</span><br><span class="line">åˆ°ç¬¬&lt;input value=<span class="string">&quot;$&#123;param.pageNo&#125;&quot;</span> name=<span class="string">&quot;pn&quot;</span> id=<span class="string">&quot;pn_input&quot;</span>/&gt;é¡µ</span><br><span class="line">&lt;input id=<span class="string">&quot;searchPageBtn&quot;</span> type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;ç¡®å®š&quot;</span>&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">$(function () &#123;</span><br><span class="line"><span class="comment">// è·³åˆ°æŒ‡å®šçš„é¡µç </span></span><br><span class="line">$(<span class="string">&quot;#searchPageBtn&quot;</span>).click(function () &#123;</span><br><span class="line"><span class="type">var</span> <span class="variable">pageNo</span> <span class="operator">=</span> $(<span class="string">&quot;#pn_input&quot;</span>).val();</span><br><span class="line">&lt;%--<span class="type">var</span> <span class="variable">pageTotal</span> <span class="operator">=</span> $&#123;requestScope.page.pageTotal&#125;;--%&gt;</span><br><span class="line">&lt;%--alert(pageTotal);--%&gt;</span><br><span class="line"><span class="comment">// javaScript è¯­è¨€ä¸­æä¾›äº†ä¸€ä¸ª location åœ°å€æ å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å®ƒæœ‰ä¸€ä¸ªå±æ€§å« href.å®ƒå¯ä»¥è·å–æµè§ˆå™¨åœ°å€æ ä¸­çš„åœ°å€</span></span><br><span class="line"><span class="comment">// href å±æ€§å¯è¯»ï¼Œå¯å†™</span></span><br><span class="line">location.href = <span class="string">&quot;$&#123;pageScope.basePath&#125;manager/bookServlet?action=page&amp;pageNo=&quot;</span> +</span><br><span class="line">pageNo;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>Page å¯¹è±¡ä¸­çš„ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPageNo</span><span class="params">(Integer pageNo)</span> &#123;</span><br><span class="line"><span class="comment">/* æ•°æ®è¾¹ç•Œçš„æœ‰æ•ˆæ£€æŸ¥ */</span></span><br><span class="line"><span class="keyword">if</span> (pageNo &lt; <span class="number">1</span>) &#123;</span><br><span class="line">pageNo = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (pageNo &gt; pageTotal) &#123;</span><br><span class="line">pageNo = pageTotal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">this</span>.pageNo = pageNo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-åˆ†é¡µæ¨¡å—ä¸­ï¼Œé¡µç -1-2-ã€3ã€‘-4-5-çš„æ˜¾ç¤ºï¼Œè¦æ˜¾ç¤º-5-ä¸ªé¡µ-ç ï¼Œå¹¶ä¸”é¡µç å¯ä»¥ç‚¹å‡»è·³è½¬ã€‚"><a href="#6-åˆ†é¡µæ¨¡å—ä¸­ï¼Œé¡µç -1-2-ã€3ã€‘-4-5-çš„æ˜¾ç¤ºï¼Œè¦æ˜¾ç¤º-5-ä¸ªé¡µ-ç ï¼Œå¹¶ä¸”é¡µç å¯ä»¥ç‚¹å‡»è·³è½¬ã€‚" class="headerlink" title="6)åˆ†é¡µæ¨¡å—ä¸­ï¼Œé¡µç  1,2,ã€3ã€‘,4,5 çš„æ˜¾ç¤ºï¼Œè¦æ˜¾ç¤º 5 ä¸ªé¡µ ç ï¼Œå¹¶ä¸”é¡µç å¯ä»¥ç‚¹å‡»è·³è½¬ã€‚"></a>6)åˆ†é¡µæ¨¡å—ä¸­ï¼Œé¡µç  1,2,ã€3ã€‘,4,5 çš„æ˜¾ç¤ºï¼Œè¦æ˜¾ç¤º 5 ä¸ªé¡µ ç ï¼Œå¹¶ä¸”é¡µç å¯ä»¥ç‚¹å‡»è·³è½¬ã€‚</h4><p>å°æƒ…å†µ 1ï¼šå½“å‰é¡µç ä¸ºå‰é¢ 3 ä¸ªï¼š1ï¼Œ2ï¼Œ3 çš„æƒ…å†µï¼Œé¡µç èŒƒå›´æ˜¯ï¼š1-5. ã€1ã€‘2ï¼Œ3ï¼Œ4ï¼Œ5<br>1ã€2ã€‘3ï¼Œ4ï¼Œ5<br>1ï¼Œ2ã€3ã€‘4ï¼Œ5</p><p>å°æƒ…å†µ 2ï¼šå½“å‰é¡µç ä¸ºæœ€å 3 ä¸ªï¼Œ8ï¼Œ9ï¼Œ10ï¼Œé¡µç èŒƒå›´æ˜¯ï¼šæ€»é¡µç å‡ 4 - æ€»é¡µç <br>6ï¼Œ7ã€8ã€‘9ï¼Œ10<br>6ï¼Œ7ï¼Œ8ã€9ã€‘10<br>6ï¼Œ7ï¼Œ8ï¼Œ9ã€10ã€‘<br>å°æƒ…å†µ 3ï¼š4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç å‡ 2 - å½“å‰é¡µç åŠ  2</p><p>2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6<br>3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7<br>4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8<br>5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--é¡µç è¾“å‡ºçš„å¼€å§‹--%&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">&lt;%--æƒ…å†µ <span class="number">1</span>ï¼šå¦‚æœæ€»é¡µç å°äºç­‰äº <span class="number">5</span> çš„æƒ…å†µï¼Œé¡µç çš„èŒƒå›´æ˜¯ï¼š<span class="number">1</span>-æ€»é¡µç --%&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123; requestScope.page.pageTotal &lt;= 5 &#125;&quot;</span>&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;begin&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;end&quot;</span> value=<span class="string">&quot;$&#123;requestScope.page.pageTotal&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;%--æƒ…å†µ <span class="number">2</span>ï¼šæ€»é¡µç å¤§äº <span class="number">5</span> çš„æƒ…å†µ--%&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.page.pageTotal &gt; 5&#125;&quot;</span>&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">&lt;%--å°æƒ…å†µ <span class="number">1</span>ï¼šå½“å‰é¡µç ä¸ºå‰é¢ <span class="number">3</span> ä¸ªï¼š<span class="number">1</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">3</span> çš„æƒ…å†µï¼Œé¡µç èŒƒå›´æ˜¯ï¼š<span class="number">1</span>-<span class="number">5.</span>--%&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.page.pageNo &lt;= 3&#125;&quot;</span>&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;begin&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;end&quot;</span> value=<span class="string">&quot;5&quot;</span>/&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;%--å°æƒ…å†µ <span class="number">2</span>ï¼šå½“å‰é¡µç ä¸ºæœ€å <span class="number">3</span> ä¸ªï¼Œ<span class="number">8</span>ï¼Œ<span class="number">9</span>ï¼Œ<span class="number">10</span>ï¼Œé¡µç èŒƒå›´æ˜¯ï¼šæ€»é¡µç å‡ <span class="number">4</span> - æ€»é¡µç --%&gt;</span><br><span class="line">&lt;c:when test=<span class="string">&quot;$&#123;requestScope.page.pageNo &gt; requestScope.page.pageTotal-3&#125;&quot;</span>&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;begin&quot;</span> value=<span class="string">&quot;$&#123;requestScope.page.pageTotal-4&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;end&quot;</span> value=<span class="string">&quot;$&#123;requestScope.page.pageTotal&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;%--å°æƒ…å†µ <span class="number">3</span>ï¼š<span class="number">4</span>ï¼Œ<span class="number">5</span>ï¼Œ<span class="number">6</span>ï¼Œ<span class="number">7</span>ï¼Œé¡µç èŒƒå›´æ˜¯ï¼šå½“å‰é¡µç å‡ <span class="number">2</span> - å½“å‰é¡µç åŠ  <span class="number">2</span>--%&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;begin&quot;</span> value=<span class="string">&quot;$&#123;requestScope.page.pageNo-2&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;end&quot;</span> value=<span class="string">&quot;$&#123;requestScope.page.pageNo+2&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;c:forEach begin=<span class="string">&quot;$&#123;begin&#125;&quot;</span> end=<span class="string">&quot;$&#123;end&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;i == requestScope.page.pageNo&#125;&quot;</span>&gt;</span><br><span class="line">ã€$&#123;i&#125;ã€‘</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;i != requestScope.page.pageNo&#125;&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;manager/bookServlet?action=page&amp;pageNo=$&#123;i&#125;&quot;</span>&gt;$&#123;i&#125;&lt;/a&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;%--é¡µç è¾“å‡ºçš„ç»“æŸ--%&gt;</span><br></pre></td></tr></table></figure><h4 id="7-ä¿®æ”¹åˆ†é¡µåï¼Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å›¾ä¹¦ä¿¡æ¯çš„å›æ˜¾é¡µé¢"><a href="#7-ä¿®æ”¹åˆ†é¡µåï¼Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å›¾ä¹¦ä¿¡æ¯çš„å›æ˜¾é¡µé¢" class="headerlink" title="7) ä¿®æ”¹åˆ†é¡µåï¼Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å›¾ä¹¦ä¿¡æ¯çš„å›æ˜¾é¡µé¢"></a>7) ä¿®æ”¹åˆ†é¡µåï¼Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å›¾ä¹¦ä¿¡æ¯çš„å›æ˜¾é¡µé¢</h4><p>ä»¥ä¿®æ”¹å›¾ä¹¦ä¸ºç¤ºä¾‹ï¼š 1ã€åœ¨ä¿®æ”¹çš„è¯·æ±‚åœ°å€ä¸Šè¿½åŠ å½“å‰é¡µç å‚æ•°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127094503621.png" alt="image-20211127094503621"></p><p>2ã€åœ¨ book_edit.jsp é¡µé¢ä¸­ä½¿ç”¨éšè—åŸŸè®°å½•ä¸‹ pageNo å‚æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127094527901.png" alt="image-20211127094527901"></p><p>3ã€åœ¨æœåŠ¡å™¨é‡å®šå‘çš„æ—¶å€™ï¼Œè·å–å½“å‰é¡µç è¿½åŠ ä¸Šè¿›è¡Œè·³è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€è·å–è¯·æ±‚çš„å‚æ•°==å°è£…æˆä¸º Book å¯¹è±¡</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> WebUtils.copyParamToBean(req.getParameterMap(),<span class="keyword">new</span> <span class="title class_">Book</span>());</span><br><span class="line"><span class="comment">// 2ã€è°ƒç”¨ BookService.updateBook( book );ä¿®æ”¹å›¾ä¹¦</span></span><br><span class="line">bookService.updateBook(book);</span><br><span class="line"><span class="comment">// 3ã€é‡å®šå‘å›å›¾ä¹¦åˆ—è¡¨ç®¡ç†é¡µé¢</span></span><br><span class="line"><span class="comment">// åœ°å€ï¼š/å·¥ç¨‹å/manager/bookServlet?action=list</span></span><br><span class="line">resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/manager/bookServlet?action=page&amp;pageNo=&quot;</span> +</span><br><span class="line">req.getParameter(<span class="string">&quot;pageNo&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€é¦–é¡µ-index-jsp-çš„è·³è½¬"><a href="#3ã€é¦–é¡µ-index-jsp-çš„è·³è½¬" class="headerlink" title="3ã€é¦–é¡µ index.jsp çš„è·³è½¬"></a>3ã€é¦–é¡µ index.jsp çš„è·³è½¬</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127113948909.png" alt="image-20211127113948909"></p><h3 id="4ã€åˆ†é¡µæ¡çš„æŠ½å–"><a href="#4ã€åˆ†é¡µæ¡çš„æŠ½å–" class="headerlink" title="4ã€åˆ†é¡µæ¡çš„æŠ½å–"></a>4ã€åˆ†é¡µæ¡çš„æŠ½å–</h3><h4 id="4-1ã€æŠ½å–åˆ†é¡µæ¡ä¸­è¯·æ±‚åœ°å€ä¸º-url-å˜é‡"><a href="#4-1ã€æŠ½å–åˆ†é¡µæ¡ä¸­è¯·æ±‚åœ°å€ä¸º-url-å˜é‡" class="headerlink" title="4.1ã€æŠ½å–åˆ†é¡µæ¡ä¸­è¯·æ±‚åœ°å€ä¸º url å˜é‡"></a>4.1ã€æŠ½å–åˆ†é¡µæ¡ä¸­è¯·æ±‚åœ°å€ä¸º url å˜é‡</h4><p>4.1.1.åœ¨ Pageç±»ä¸­æ·»åŠ å±æ€§ url</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µæ¡çš„è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="keyword">private</span> String url;</span><br></pre></td></tr></table></figure><p>4.1.2 åœ¨ Servlet ç¨‹åºçš„ page åˆ†é¡µæ–¹æ³•ä¸­è®¾ç½® url çš„åˆ†é¡µè¯·æ±‚åœ°å€</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127114131459.png" alt="image-20211127114131459"></p><p>4.1.3ã€ä¿®æ”¹åˆ†é¡µæ¡ä¸­è¯·æ±‚åœ°å€ä¸º url å˜é‡è¾“å‡º,å¹¶æŠ½å–ä¸€ä¸ªå•ç‹¬çš„ jsp é¡µé¢</p><p>å³å°† manager.jspé¡µé¢ä¸­çš„</p><p><code>manager/bookServlet?action=page</code></p><p>å’Œ clientä¸‹çš„ index.jspé¡µé¢ä¸­çš„</p><p><code>clent/bookServlet?action=page</code></p><p>æ›´æ”¹ä¸º</p><p><code>$&#123;requestScope.page.url&#125;</code></p><h3 id="5ã€é¦–é¡µä»·æ ¼æœç´¢"><a href="#5ã€é¦–é¡µä»·æ ¼æœç´¢" class="headerlink" title="5ã€é¦–é¡µä»·æ ¼æœç´¢"></a>5ã€é¦–é¡µä»·æ ¼æœç´¢</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127114729156.png" alt="image-20211127114729156"></p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="a-ä»€ä¹ˆæ˜¯-Cookie"><a href="#a-ä»€ä¹ˆæ˜¯-Cookie" class="headerlink" title="a)ä»€ä¹ˆæ˜¯ Cookie?"></a>a)ä»€ä¹ˆæ˜¯ Cookie?</h3><p>1ã€Cookie ç¿»è¯‘è¿‡æ¥æ˜¯é¥¼å¹²çš„æ„æ€ã€‚</p><p>2ã€Cookie æ˜¯æœåŠ¡å™¨é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜é”®å€¼å¯¹çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>3ã€å®¢æˆ·ç«¯æœ‰äº† Cookie åï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘é€ç»™æœåŠ¡å™¨ã€‚</p><p>4ã€æ¯ä¸ª Cookie çš„å¤§å°ä¸èƒ½è¶…è¿‡ 4kb</p><h3 id="b-å¦‚ä½•åˆ›å»º-Cookie"><a href="#b-å¦‚ä½•åˆ›å»º-Cookie" class="headerlink" title="b)å¦‚ä½•åˆ›å»º Cookie"></a>b)å¦‚ä½•åˆ›å»º Cookie</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127184123674.png" alt="image-20211127184123674"></p><p>Servlet ç¨‹åºä¸­çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">createCookie</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">//1 åˆ›å»º Cookie å¯¹è±¡</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key4&quot;</span>, <span class="string">&quot;value4&quot;</span>);</span><br><span class="line"><span class="comment">//2 é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookie</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line"><span class="comment">//1 åˆ›å»º Cookie å¯¹è±¡</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key5&quot;</span>, <span class="string">&quot;value5&quot;</span>);</span><br><span class="line"><span class="comment">//2 é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookie</span></span><br><span class="line">resp.addCookie(cookie1);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;Cookie åˆ›å»ºæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="c-æœåŠ¡å™¨å¦‚ä½•è·å–-Cookie"><a href="#c-æœåŠ¡å™¨å¦‚ä½•è·å–-Cookie" class="headerlink" title="c)æœåŠ¡å™¨å¦‚ä½•è·å– Cookie"></a>c)æœåŠ¡å™¨å¦‚ä½•è·å– Cookie</h3><p>æœåŠ¡å™¨è·å–å®¢æˆ·ç«¯çš„ Cookie åªéœ€è¦ä¸€è¡Œä»£ç ï¼š<code>req.getCookies():Cookie[]</code></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127211243868.png" alt="image-20211127211243868"></p><p>cookieçš„å·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieUtils</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥æ‰¾æŒ‡å®šåç§°çš„ Cookie å¯¹è±¡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> cookies</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Cookie <span class="title function_">findCookie</span><span class="params">(String name , Cookie[] cookies)</span>&#123;</span><br><span class="line"><span class="keyword">if</span> (name == <span class="literal">null</span> || cookies == <span class="literal">null</span> || cookies.length == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line"><span class="keyword">if</span> (name.equals(cookie.getName())) &#123;</span><br><span class="line"><span class="keyword">return</span> cookie;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Servlet ç¨‹åºä¸­çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getCookie</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line">Cookie[] cookies = req.getCookies();</span><br><span class="line"><span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line"><span class="comment">// getName æ–¹æ³•è¿”å› Cookie çš„ keyï¼ˆåï¼‰</span></span><br><span class="line"><span class="comment">// getValue æ–¹æ³•è¿”å› Cookie çš„ value å€¼</span></span><br><span class="line">resp.getWriter().write(<span class="string">&quot;Cookie[&quot;</span> + cookie.getName() + <span class="string">&quot;=&quot;</span> + cookie.getValue() + <span class="string">&quot;] &lt;br/&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Cookie</span> <span class="variable">iWantCookie</span> <span class="operator">=</span> CookieUtils.findCookie(<span class="string">&quot;key1&quot;</span>, cookies);</span><br><span class="line"><span class="comment">// for (Cookie cookie : cookies) &#123;</span></span><br><span class="line"><span class="comment">// if (&quot;key2&quot;.equals(cookie.getName())) &#123;</span></span><br><span class="line"><span class="comment">// iWantCookie = cookie;</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸ç­‰äº nullï¼Œè¯´æ˜èµ‹è¿‡å€¼ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†éœ€è¦çš„ Cookie</span></span><br><span class="line"><span class="keyword">if</span> (iWantCookie != <span class="literal">null</span>) &#123;</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;æ‰¾åˆ°äº†éœ€è¦çš„ Cookie&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="d-Cookie-å€¼çš„ä¿®æ”¹"><a href="#d-Cookie-å€¼çš„ä¿®æ”¹" class="headerlink" title="d)Cookie å€¼çš„ä¿®æ”¹"></a>d)Cookie å€¼çš„ä¿®æ”¹</h3><p>æ–¹æ¡ˆä¸€ï¼š</p><p>1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåï¼ˆæŒ‡çš„å°±æ˜¯ keyï¼‰çš„ Cookie å¯¹è±¡</p><p>2ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„ Cookie å€¼ã€‚</p><p>3ã€è°ƒç”¨ response.addCookie( Cookie );</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ¡ˆä¸€ï¼š</span></span><br><span class="line"><span class="comment">// 1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¦ä¿®æ”¹çš„åŒåçš„ Cookie å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 2ã€åœ¨æ„é€ å™¨ï¼ŒåŒæ—¶èµ‹äºæ–°çš„ Cookie å€¼ã€‚</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;newValue1&quot;</span>);</span><br><span class="line"><span class="comment">// 3ã€è°ƒç”¨ response.addCookie( Cookie ); é€šçŸ¥ å®¢æˆ·ç«¯ ä¿å­˜ä¿®æ”¹</span></span><br><span class="line">resp.addCookie(cookie);</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼š</p><p>1ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ Cookie å¯¹è±¡</p><p>2ã€è°ƒç”¨ setValue()æ–¹æ³•èµ‹äºæ–°çš„ Cookie å€¼ã€‚</p><p>3ã€è°ƒç”¨ response.addCookie()é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ¡ˆäºŒï¼š</span></span><br><span class="line"><span class="comment">// 1ã€å…ˆæŸ¥æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ Cookie å¯¹è±¡</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.findCookie(<span class="string">&quot;key2&quot;</span>, req.getCookies());</span><br><span class="line"><span class="keyword">if</span> (cookie != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// 2ã€è°ƒç”¨ setValue()æ–¹æ³•èµ‹äºæ–°çš„ Cookie å€¼ã€‚</span></span><br><span class="line">cookie.setValue(<span class="string">&quot;newValue2&quot;</span>);</span><br><span class="line"><span class="comment">// 3ã€è°ƒç”¨ response.addCookie()é€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ä¿®æ”¹</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="e-æµè§ˆå™¨æŸ¥çœ‹-Cookie"><a href="#e-æµè§ˆå™¨æŸ¥çœ‹-Cookie" class="headerlink" title="e)æµè§ˆå™¨æŸ¥çœ‹ Cookie"></a>e)æµè§ˆå™¨æŸ¥çœ‹ Cookie</h3><p>è°·æ­Œæµè§ˆå™¨æŸ¥çœ‹cookie</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127212910873.png" alt="image-20211127212910873"></p><p>ç«ç‹æµè§ˆå™¨æŸ¥çœ‹cookie</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127212927346.png" alt="image-20211127212927346"></p><h3 id="f-Cookie-ç”Ÿå‘½æ§åˆ¶"><a href="#f-Cookie-ç”Ÿå‘½æ§åˆ¶" class="headerlink" title="f) Cookie ç”Ÿå‘½æ§åˆ¶"></a>f) Cookie ç”Ÿå‘½æ§åˆ¶</h3><p>Cookie çš„ç”Ÿå‘½æ§åˆ¶æŒ‡çš„æ˜¯å¦‚ä½•ç®¡ç† Cookie ä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ï¼ˆåˆ é™¤ï¼‰</p><p>setMaxAge()</p><p>â€‹æ­£æ•°ï¼Œè¡¨ç¤ºåœ¨æŒ‡å®šçš„ç§’æ•°åè¿‡æœŸ<br>â€‹è´Ÿæ•°ï¼Œè¡¨ç¤ºæµè§ˆå™¨ä¸€å…³ï¼ŒCookie å°±ä¼šè¢«åˆ é™¤ï¼ˆé»˜è®¤å€¼æ˜¯-1ï¼‰<br>â€‹é›¶ï¼Œè¡¨ç¤ºé©¬ä¸Šåˆ é™¤ Cooki</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è®¾ç½®å­˜æ´» 1 ä¸ªå°æ—¶çš„ Cooie</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">life3600</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;life3600&quot;</span>, <span class="string">&quot;life3600&quot;</span>);</span><br><span class="line">cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span>); <span class="comment">// è®¾ç½® Cookie ä¸€å°æ—¶ä¹‹åè¢«åˆ é™¤ã€‚æ— æ•ˆ</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå­˜æ´»ä¸€å°æ—¶çš„ Cookie&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é©¬ä¸Šåˆ é™¤ä¸€ä¸ª Cookie</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">deleteNow</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// å…ˆæ‰¾åˆ°ä½ è¦åˆ é™¤çš„ Cookie å¯¹è±¡</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.findCookie(<span class="string">&quot;key4&quot;</span>, req.getCookies());</span><br><span class="line"><span class="keyword">if</span> (cookie != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// è°ƒç”¨ setMaxAge(0);</span></span><br><span class="line">cookie.setMaxAge(<span class="number">0</span>); <span class="comment">// è¡¨ç¤ºé©¬ä¸Šåˆ é™¤ï¼Œéƒ½ä¸éœ€è¦ç­‰å¾…æµè§ˆå™¨å…³é—­</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ response.addCookie(cookie);</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;key4 çš„ Cookie å·²ç»è¢«åˆ é™¤&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é»˜è®¤çš„ä¼šè¯çº§åˆ«çš„ Cookie</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">defaultLife</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;defalutLife&quot;</span>,<span class="string">&quot;defaultLife&quot;</span>);</span><br><span class="line">cookie.setMaxAge(-<span class="number">1</span>);<span class="comment">//è®¾ç½®å­˜æ´»æ—¶é—´</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="g-Cookie-æœ‰æ•ˆè·¯å¾„-Path-çš„è®¾ç½®"><a href="#g-Cookie-æœ‰æ•ˆè·¯å¾„-Path-çš„è®¾ç½®" class="headerlink" title="g)Cookie æœ‰æ•ˆè·¯å¾„ Path çš„è®¾ç½®"></a>g)Cookie æœ‰æ•ˆè·¯å¾„ Path çš„è®¾ç½®</h3><p>Cookie çš„ path å±æ€§å¯ä»¥æœ‰æ•ˆçš„è¿‡æ»¤å“ªäº› Cookie å¯ä»¥å‘é€ç»™æœåŠ¡å™¨ã€‚å“ªäº›ä¸å‘ã€‚<br>path å±æ€§æ˜¯é€šè¿‡è¯·æ±‚çš„åœ°å€æ¥è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ã€‚<br>CookieA path&#x3D;&#x2F;å·¥ç¨‹è·¯å¾„<br>CookieB path&#x3D;&#x2F;å·¥ç¨‹è·¯å¾„&#x2F;abc<br>è¯·æ±‚åœ°å€å¦‚ä¸‹ï¼š<br><a href="http://ip:port/å·¥ç¨‹è·¯å¾„/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/a.html</a><br>CookieA å‘é€<br>CookieB ä¸å‘é€<br><a href="http://ip:port/å·¥ç¨‹è·¯å¾„/abc/a.html">http://ip:port/å·¥ç¨‹è·¯å¾„/abc/a.html</a><br>CookieA å‘é€<br>CookieB å‘é€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">testPath</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;path1&quot;</span>, <span class="string">&quot;path1&quot;</span>);</span><br><span class="line"><span class="comment">// getContextPath() ===&gt;&gt;&gt;&gt; å¾—åˆ°å·¥ç¨‹è·¯å¾„</span></span><br><span class="line">cookie.setPath( req.getContextPath() + <span class="string">&quot;/abc&quot;</span> ); <span class="comment">// ===&gt;&gt;&gt;&gt; /å·¥ç¨‹è·¯å¾„/abc</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰ Path è·¯å¾„çš„ Cookie&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="h-Cookie-ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•"><a href="#h-Cookie-ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•" class="headerlink" title="h) Cookie ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•"></a>h) Cookie ç»ƒä¹ â€”å…è¾“å…¥ç”¨æˆ·åç™»å½•</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211127215728186.png" alt="image-20211127215728186"></p><p>login.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://localhost:8080/13_cookie_session/loginServlet&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">ç”¨æˆ·åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;cookie.username.value&#125;&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">å¯†ç ï¼š&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>servletç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;wzg168&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;123456&quot;</span>.equals(password)) &#123;</span><br><span class="line"><span class="comment">//ç™»å½• æˆåŠŸ</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>);<span class="comment">//å½“å‰ Cookie ä¸€å‘¨å†…æœ‰æ•ˆ</span></span><br><span class="line">resp.addCookie(cookie);</span><br><span class="line">System.out.println(<span class="string">&quot;ç™»å½• æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// ç™»å½• å¤±è´¥</span></span><br><span class="line">System.out.println(<span class="string">&quot;ç™»å½• å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€Session-ä¼šè¯"><a href="#2ã€Session-ä¼šè¯" class="headerlink" title="2ã€Session ä¼šè¯"></a>2ã€Session ä¼šè¯</h2><h3 id="i-ä»€ä¹ˆæ˜¯-Session-ä¼šè¯"><a href="#i-ä»€ä¹ˆæ˜¯-Session-ä¼šè¯" class="headerlink" title="i) ä»€ä¹ˆæ˜¯ Session ä¼šè¯"></a>i) ä»€ä¹ˆæ˜¯ Session ä¼šè¯</h3><p>1ã€Session å°±ä¸€ä¸ªæ¥å£ï¼ˆHttpSessionï¼‰ã€‚</p><p>2ã€Session å°±æ˜¯ä¼šè¯ã€‚å®ƒæ˜¯ç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å…³è”çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>3ã€æ¯ä¸ªå®¢æˆ·ç«¯éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ª Session ä¼šè¯ã€‚</p><p>4ã€<strong>Session ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨æ¥ä¿å­˜ç”¨æˆ·ç™»å½•ä¹‹åçš„ä¿¡æ¯</strong></p><h3 id="j-å¦‚ä½•åˆ›å»º-Session-å’Œè·å–-id-å·-æ˜¯å¦ä¸ºæ–°"><a href="#j-å¦‚ä½•åˆ›å»º-Session-å’Œè·å–-id-å·-æ˜¯å¦ä¸ºæ–°" class="headerlink" title="j) å¦‚ä½•åˆ›å»º Session å’Œè·å–(id å·,æ˜¯å¦ä¸ºæ–°"></a>j) å¦‚ä½•åˆ›å»º Session å’Œè·å–(id å·,æ˜¯å¦ä¸ºæ–°</h3><p>å¦‚ä½•åˆ›å»ºå’Œè·å– Sessionã€‚å®ƒä»¬çš„ API æ˜¯ä¸€æ ·çš„ã€‚<br><code>request.getSession()</code><br>ç¬¬ä¸€æ¬¡è°ƒç”¨æ˜¯ï¼šåˆ›å»º Session ä¼šè¯<br>ä¹‹åè°ƒç”¨éƒ½æ˜¯ï¼šè·å–å‰é¢åˆ›å»ºå¥½çš„ Session ä¼šè¯å¯¹è±¡ã€‚</p><p><code>isNew()</code> ; åˆ¤æ–­åˆ°åº•æ˜¯ä¸æ˜¯åˆšåˆ›å»ºå‡ºæ¥çš„ï¼ˆæ–°çš„ï¼‰<br>true è¡¨ç¤ºåˆšåˆ›å»º<br>false è¡¨ç¤ºè·å–ä¹‹å‰åˆ›å»º<br>æ¯ä¸ªä¼šè¯éƒ½æœ‰ä¸€ä¸ªèº«ä»½è¯å·ã€‚ä¹Ÿå°±æ˜¯ ID å€¼ã€‚è€Œä¸”è¿™ä¸ª ID æ˜¯å”¯ä¸€çš„ã€‚<br>getId() å¾—åˆ° Session çš„ä¼šè¯ id å€¼ã€‚</p><h3 id="k-Session-åŸŸæ•°æ®çš„å­˜å–"><a href="#k-Session-åŸŸæ•°æ®çš„å­˜å–" class="headerlink" title="k)Session åŸŸæ•°æ®çš„å­˜å–"></a>k)Session åŸŸæ•°æ®çš„å­˜å–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> å¾€ Session ä¸­ä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">setAttribute</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line">req.getSession().setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;value1&quot;</span>);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;å·²ç»å¾€ Session ä¸­ä¿å­˜äº†æ•°æ®&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> è·å– Session åŸŸä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getAttribute</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="type">Object</span> <span class="variable">attribute</span> <span class="operator">=</span> req.getSession().getAttribute(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;ä» Session ä¸­è·å–å‡º key1 çš„æ•°æ®æ˜¯ï¼š&quot;</span> + attribute);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="l-Session-ç”Ÿå‘½å‘¨æœŸæ§åˆ¶"><a href="#l-Session-ç”Ÿå‘½å‘¨æœŸæ§åˆ¶" class="headerlink" title="l) Session ç”Ÿå‘½å‘¨æœŸæ§åˆ¶"></a>l) Session ç”Ÿå‘½å‘¨æœŸæ§åˆ¶</h3><p>public void setMaxInactiveInterval(int interval) è®¾ç½® Session çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œè¶…è¿‡æŒ‡å®šçš„æ—¶é•¿ï¼ŒSession<br>å°±ä¼šè¢«é”€æ¯ã€‚<br>å€¼ä¸ºæ­£æ•°çš„æ—¶å€™ï¼Œè®¾å®š Session çš„è¶…æ—¶æ—¶é•¿ã€‚<br>è´Ÿæ•°è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ï¼ˆæå°‘ä½¿ç”¨ï¼‰<br>public int getMaxInactiveInterval()è·å– Session çš„è¶…æ—¶æ—¶é—´<br>public void invalidate() è®©å½“å‰ Session ä¼šè¯é©¬ä¸Šè¶…æ—¶æ— æ•ˆã€‚<br>Session é»˜è®¤çš„è¶…æ—¶æ—¶é•¿æ˜¯å¤šå°‘ï¼<br>Session é»˜è®¤çš„è¶…æ—¶æ—¶é—´é•¿ä¸º 30 åˆ†é’Ÿã€‚<br>å› ä¸ºåœ¨ Tomcat æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ web.xmlä¸­é»˜è®¤æœ‰ä»¥ä¸‹çš„é…ç½®ï¼Œå®ƒå°±è¡¨ç¤ºé…ç½®äº†å½“å‰ Tomcat æœåŠ¡å™¨ä¸‹æ‰€æœ‰çš„ Session<br>è¶…æ—¶é…ç½®é»˜è®¤æ—¶é•¿ä¸ºï¼š30 åˆ†é’Ÿ</p><p>å¦‚æœè¯´ã€‚ä½ å¸Œæœ›ä½ çš„ web å·¥ç¨‹ï¼Œé»˜è®¤çš„ Session çš„è¶…æ—¶æ—¶é•¿ä¸ºå…¶ä»–æ—¶é•¿ã€‚ä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„ web.xml é…ç½®æ–‡ä»¶ä¸­åš ä»¥ä¸Šç›¸åŒçš„é…ç½®ã€‚å°±å¯ä»¥ä¿®æ”¹ä½ çš„ web å·¥ç¨‹æ‰€æœ‰ Seession çš„é»˜è®¤è¶…æ—¶æ—¶é•¿ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è¡¨ç¤ºå½“å‰ web å·¥ç¨‹ã€‚åˆ›å»ºå‡ºæ¥ çš„æ‰€æœ‰ Session é»˜è®¤æ˜¯ 20 åˆ†é’Ÿ è¶…æ—¶æ—¶é•¿--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>20<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³åªä¿®æ”¹ä¸ªåˆ« Session çš„è¶…æ—¶æ—¶é•¿ã€‚å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ APIã€‚</p><p>setMaxInactiveInterval(int interval)æ¥è¿›è¡Œå•ç‹¬çš„è®¾ ç½®ã€‚</p><p>session.setMaxInactiveInterval(int interval)å•ç‹¬è®¾ç½®è¶…æ—¶æ—¶é•¿ã€‚</p><p>Session è¶…æ—¶çš„æ¦‚å¿µä»‹ç»ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128184457126.png" alt="image-20211128184457126" style="zoom: 67%;" />-</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">life3</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// å…ˆè·å– Session å¯¹è±¡</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰ Session3 ç§’åè¶…æ—¶</span></span><br><span class="line">session.setMaxInactiveInterval(<span class="number">3</span>);</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;å½“å‰ Session å·²ç»è®¾ç½®ä¸º 3 ç§’åè¶…æ—¶&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sessioné©¬ä¸Šè¶…æ—¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">deleteNow</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// å…ˆè·å– Session å¯¹è±¡</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"><span class="comment">// è®© Session ä¼šè¯é©¬ä¸Šè¶…æ—¶</span></span><br><span class="line">session.invalidate();</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;Session å·²ç»è®¾ç½®ä¸ºè¶…æ—¶ï¼ˆæ— æ•ˆï¼‰&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="m-æµè§ˆå™¨å’Œ-Session-ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•"><a href="#m-æµè§ˆå™¨å’Œ-Session-ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•" class="headerlink" title="m) æµè§ˆå™¨å’Œ Session ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•"></a>m) æµè§ˆå™¨å’Œ Session ä¹‹é—´å…³è”çš„æŠ€æœ¯å†…å¹•</h3><p>Session æŠ€æœ¯ï¼Œåº•å±‚å…¶å®æ˜¯åŸºäº Cookie æŠ€æœ¯æ¥å®ç°</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128190149458.png" alt="image-20211128190149458"></p><h2 id="é¡¹ç›®ç¬¬å…­é˜¶æ®µ"><a href="#é¡¹ç›®ç¬¬å…­é˜¶æ®µ" class="headerlink" title="é¡¹ç›®ç¬¬å…­é˜¶æ®µ"></a>é¡¹ç›®ç¬¬å…­é˜¶æ®µ</h2><h3 id="3-1ã€ç™»é™†â€”æ˜¾ç¤ºç”¨æˆ·å"><a href="#3-1ã€ç™»é™†â€”æ˜¾ç¤ºç”¨æˆ·å" class="headerlink" title="3.1ã€ç™»é™†â€”æ˜¾ç¤ºç”¨æˆ·å"></a>3.1ã€ç™»é™†â€”æ˜¾ç¤ºç”¨æˆ·å</h3><p>UserServlet ç¨‹åºä¸­ä¿å­˜ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯<img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128195448625.png" alt="image-20211128195448625"></p><p>ä¿®æ”¹ login_succuess_menu.jsp</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128195504375.png" alt="image-20211128195504375"></p><p>è¿˜è¦ä¿®æ”¹é¦–é¡µ index.jsp</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128195520910.png" alt="image-20211128195520910"></p><h3 id="3-2ã€ç™»å‡ºâ€”æ³¨é”€ç”¨æˆ·"><a href="#3-2ã€ç™»å‡ºâ€”æ³¨é”€ç”¨æˆ·" class="headerlink" title="3.2ã€ç™»å‡ºâ€”æ³¨é”€ç”¨æˆ·"></a>3.2ã€ç™»å‡ºâ€”æ³¨é”€ç”¨æˆ·</h3><p>1ã€é”€æ¯ Session ä¸­ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼ˆæˆ–è€…é”€æ¯ Sessionï¼‰</p><p>2ã€é‡å®šå‘åˆ°é¦–é¡µï¼ˆæˆ–ç™»å½•é¡µé¢ï¼‰ã€‚</p><p>UserServlet ç¨‹åºä¸­æ·»åŠ  logout æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ³¨é”€</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">logout</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// 1ã€é”€æ¯ Session ä¸­ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼ˆæˆ–è€…é”€æ¯ Sessionï¼‰</span></span><br><span class="line">req.getSession().invalidate();</span><br><span class="line"><span class="comment">// 2ã€é‡å®šå‘åˆ°é¦–é¡µï¼ˆæˆ–ç™»å½•é¡µé¢ï¼‰ã€‚</span></span><br><span class="line">resp.sendRedirect(req.getContextPath());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ã€æ³¨é”€ã€‘çš„èœå•åœ°å€</p><p><code>[æ³¨é”€](userServlet?action=logout)</code></p><h3 id="3-3ã€è¡¨å•é‡å¤æäº¤ä¹‹â€”â€“éªŒè¯ç "><a href="#3-3ã€è¡¨å•é‡å¤æäº¤ä¹‹â€”â€“éªŒè¯ç " class="headerlink" title="3.3ã€è¡¨å•é‡å¤æäº¤ä¹‹â€”â€“éªŒè¯ç "></a>3.3ã€è¡¨å•é‡å¤æäº¤ä¹‹â€”â€“éªŒè¯ç </h3><p>è¡¨å•é‡å¤æäº¤æœ‰ä¸‰ç§å¸¸è§çš„æƒ…å†µï¼š</p><p>ä¸€ï¼šæäº¤å®Œè¡¨å•ã€‚æœåŠ¡å™¨ä½¿ç”¨è¯·æ±‚è½¬æ¥è¿›è¡Œé¡µé¢è·³è½¬ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç”¨æˆ·æŒ‰ä¸‹åŠŸèƒ½é”® F5ï¼Œå°±ä¼šå‘èµ·æœ€åä¸€æ¬¡çš„è¯·æ±‚ã€‚ é€ æˆè¡¨å•é‡å¤æäº¤é—®é¢˜ã€‚è§£å†³æ–¹æ³•ï¼šä½¿ç”¨é‡å®šå‘æ¥è¿›è¡Œè·³è½¬</p><p>äºŒï¼šç”¨æˆ·æ­£å¸¸æäº¤æœåŠ¡å™¨ï¼Œä½†æ˜¯ç”±äºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œè¿Ÿè¿Ÿæœªæ”¶åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”¨æˆ·ä»¥ä¸ºæäº¤å¤±è´¥ï¼Œ å°±ä¼šç€æ€¥ï¼Œç„¶åå¤šç‚¹äº†å‡ æ¬¡æäº¤æ“ä½œï¼Œä¹Ÿä¼šé€ æˆè¡¨å•é‡å¤æäº¤ã€‚</p><p>ä¸‰ï¼šç”¨æˆ·æ­£å¸¸æäº¤æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ä¹Ÿæ²¡æœ‰å»¶è¿Ÿï¼Œä½†æ˜¯æäº¤å®Œæˆåï¼Œç”¨æˆ·å›é€€æµè§ˆå™¨ã€‚é‡æ–°æäº¤ã€‚ä¹Ÿä¼šé€ æˆè¡¨å•é‡å¤ æäº¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128204706741.png" alt="image-20211128204706741"></p><h3 id="3-4ã€è°·æ­Œ-kaptcha-å›¾ç‰‡éªŒè¯ç çš„ä½¿ç”¨"><a href="#3-4ã€è°·æ­Œ-kaptcha-å›¾ç‰‡éªŒè¯ç çš„ä½¿ç”¨" class="headerlink" title="3.4ã€è°·æ­Œ kaptcha å›¾ç‰‡éªŒè¯ç çš„ä½¿ç”¨"></a>3.4ã€è°·æ­Œ kaptcha å›¾ç‰‡éªŒè¯ç çš„ä½¿ç”¨</h3><p>è°·æ­ŒéªŒè¯ç  kaptcha ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ã€å¯¼å…¥è°·æ­ŒéªŒè¯ç çš„ jar åŒ… kaptcha-2.3.2.jar</p><p>2ã€åœ¨ web.xml ä¸­å»é…ç½®ç”¨äºç”ŸæˆéªŒè¯ç çš„ Servlet ç¨‹åº</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">servlet&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>KaptchaServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.google.code.kaptcha.servlet.KaptchaServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>KaptchaServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/kaptcha.jpg<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€åœ¨è¡¨å•ä¸­ä½¿ç”¨ img æ ‡ç­¾å»æ˜¾ç¤ºéªŒè¯ç å›¾ç‰‡å¹¶ä½¿ç”¨å®ƒ</p><p>4ã€åœ¨æœåŠ¡å™¨è·å–è°·æ­Œç”Ÿæˆçš„éªŒè¯ç å’Œå®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„éªŒè¯ç æ¯”è¾ƒä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;code&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–sessionä¸­çš„éªŒè¯ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> (String) request.getSession().getAttribute(KAPTCHA_SESSION_KEY);</span><br><span class="line">        <span class="comment">//é©¬ä¸Šåˆ é™¤sessionåŸŸä¸­çš„éªŒè¯ç </span></span><br><span class="line">        request.getSession().removeAttribute(KAPTCHA_SESSION_KEY);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥çœ‹éªŒè¯ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">if</span> (token != <span class="literal">null</span> &amp;&amp; token.equalsIgnoreCase(code)) &#123;</span><br><span class="line">            <span class="comment">//æ­£ç¡®</span></span><br><span class="line">            ...</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢éªŒè¯ç ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™éªŒè¯ç çš„å›¾ç‰‡ï¼Œç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;#code_img&quot;</span>).click(function () &#123;</span><br><span class="line"><span class="comment">// åœ¨äº‹ä»¶å“åº”çš„ function å‡½æ•°ä¸­æœ‰ä¸€ä¸ª this å¯¹è±¡ã€‚è¿™ä¸ª this å¯¹è±¡ï¼Œæ˜¯å½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„ dom å¯¹è±¡</span></span><br><span class="line"><span class="comment">// src å±æ€§è¡¨ç¤ºéªŒè¯ç  img æ ‡ç­¾çš„ å›¾ç‰‡è·¯å¾„ã€‚å®ƒå¯è¯»ï¼Œå¯å†™</span></span><br><span class="line"><span class="comment">// alert(this.src);</span></span><br><span class="line"><span class="built_in">this</span>.src = <span class="string">&quot;$&#123;basePath&#125;kaptcha.jpg?d=&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="1ã€é¡¹ç›®ç¬¬å…­é˜¶æ®µï¼šè´­ç‰©è½¦"><a href="#1ã€é¡¹ç›®ç¬¬å…­é˜¶æ®µï¼šè´­ç‰©è½¦" class="headerlink" title="1ã€é¡¹ç›®ç¬¬å…­é˜¶æ®µï¼šè´­ç‰©è½¦"></a>1ã€é¡¹ç›®ç¬¬å…­é˜¶æ®µï¼šè´­ç‰©è½¦</h3><h4 id="1-1ã€è´­ç‰©è½¦æ¨¡å—åˆ†æ"><a href="#1-1ã€è´­ç‰©è½¦æ¨¡å—åˆ†æ" class="headerlink" title="1.1ã€è´­ç‰©è½¦æ¨¡å—åˆ†æ"></a>1.1ã€è´­ç‰©è½¦æ¨¡å—åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211128222245216.png" alt="image-20211128222245216"></p><h4 id="1-2ã€è´­ç‰©è½¦æ¨¡å‹ç¼–å†™"><a href="#1-2ã€è´­ç‰©è½¦æ¨¡å‹ç¼–å†™" class="headerlink" title="1.2ã€è´­ç‰©è½¦æ¨¡å‹ç¼–å†™"></a>1.2ã€è´­ç‰©è½¦æ¨¡å‹ç¼–å†™</h4><p>1.2.1ã€è´­ç‰©è½¦æ¨¡å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è´­ç‰©è½¦çš„å•†å“é¡¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartItem</span> &#123;</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> Integer count;</span><br><span class="line"><span class="keyword">private</span> BigDecimal price;</span><br><span class="line"><span class="keyword">private</span> BigDecimal totalPrice;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è´­ç‰©è½¦å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cart</span> &#123;</span><br><span class="line"><span class="comment">// private Integer totalCount;</span></span><br><span class="line"><span class="comment">// private BigDecimal totalPrice;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* key æ˜¯å•†å“ç¼–å·ï¼Œ</span></span><br><span class="line"><span class="comment">* valueï¼Œæ˜¯å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">private</span> Map&lt;Integer,CartItem&gt; items = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;Integer,CartItem&gt;();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ·»åŠ å•†å“é¡¹</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> cartItem</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(CartItem cartItem)</span> &#123;</span><br><span class="line"><span class="comment">// å…ˆæŸ¥çœ‹è´­ç‰©è½¦ä¸­æ˜¯å¦å·²ç»æ·»åŠ è¿‡æ­¤å•†å“ï¼Œå¦‚æœå·²æ·»åŠ ï¼Œåˆ™æ•°é‡ç´¯åŠ ï¼Œæ€»é‡‘é¢æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ è¿‡ï¼Œç›´æ¥æ”¾åˆ°</span></span><br><span class="line">é›†åˆä¸­å³å¯</span><br><span class="line"><span class="type">CartItem</span> <span class="variable">item</span> <span class="operator">=</span> items.get(cartItem.getId());</span><br><span class="line"><span class="keyword">if</span> (item == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// ä¹‹å‰æ²¡æ·»åŠ è¿‡æ­¤å•†å“</span></span><br><span class="line">items.put(cartItem.getId(), cartItem);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// å·²ç» æ·»åŠ è¿‡çš„æƒ…å†µ</span></span><br><span class="line">item.setCount( item.getCount() + <span class="number">1</span> ); <span class="comment">// æ•°é‡ ç´¯åŠ </span></span><br><span class="line">item.setTotalPrice( item.getPrice().multiply(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>( item.getCount() )) ); <span class="comment">// æ›´</span></span><br><span class="line">æ–°æ€»é‡‘é¢</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ é™¤å•†å“é¡¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteItem</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">items.remove(id);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ¸…ç©ºè´­ç‰©è½¦</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">items.clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä¿®æ”¹å•†å“æ•°é‡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateCount</span><span class="params">(Integer id,Integer count)</span> &#123;</span><br><span class="line"><span class="comment">// å…ˆæŸ¥çœ‹è´­ç‰©è½¦ä¸­æ˜¯å¦æœ‰æ­¤å•†å“ã€‚å¦‚æœæœ‰ï¼Œä¿®æ”¹å•†å“æ•°é‡ï¼Œæ›´æ–°æ€»é‡‘é¢</span></span><br><span class="line"><span class="type">CartItem</span> <span class="variable">cartItem</span> <span class="operator">=</span> items.get(id);</span><br><span class="line"><span class="keyword">if</span> (cartItem != <span class="literal">null</span>) &#123;</span><br><span class="line">cartItem.setCount(count);<span class="comment">// ä¿®æ”¹å•†å“æ•°é‡</span></span><br><span class="line">cartItem.setTotalPrice( cartItem.getPrice().multiply(<span class="keyword">new</span></span><br><span class="line"><span class="title class_">BigDecimal</span>( cartItem.getCount() )) ); <span class="comment">// æ›´æ–°æ€»é‡‘é¢</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getTotalCount</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">totalCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer,CartItem&gt;entry : items.entrySet()) &#123;</span><br><span class="line">totalCount += entry.getValue().getCount();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> totalCount;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> BigDecimal <span class="title function_">getTotalPrice</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">totalPrice</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer,CartItem&gt;entry : items.entrySet()) &#123;</span><br><span class="line">totalPrice = totalPrice.add(entry.getValue().getTotalPrice());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> totalPrice;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Map&lt;Integer, CartItem&gt; <span class="title function_">getItems</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> items;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setItems</span><span class="params">(Map&lt;Integer, CartItem&gt; items)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.items = items;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Cart&#123;&quot;</span> +</span><br><span class="line"><span class="string">&quot;totalCount=&quot;</span> + getTotalCount() +</span><br><span class="line"><span class="string">&quot;, totalPrice=&quot;</span> + getTotalPrice() +</span><br><span class="line"><span class="string">&quot;, items=&quot;</span> + items +</span><br><span class="line"><span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3ã€åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½çš„å®ç°"><a href="#1-3ã€åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½çš„å®ç°" class="headerlink" title="1.3ã€åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½çš„å®ç°"></a>1.3ã€åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½çš„å®ç°</h4><p>cartServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åŠ å…¥è´­ç‰©è½¦</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException &#123;</span><br><span class="line"><span class="comment">// è·å–è¯·æ±‚çš„å‚æ•° å•†å“ç¼–å·</span></span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;id&quot;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// è°ƒç”¨ bookService.queryBookById(id):Book å¾—åˆ°å›¾ä¹¦çš„ä¿¡æ¯</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.queryBookById(id);</span><br><span class="line"><span class="comment">// æŠŠå›¾ä¹¦ä¿¡æ¯ï¼Œè½¬æ¢æˆä¸º CartItem å•†å“é¡¹</span></span><br><span class="line"><span class="type">CartItem</span> <span class="variable">cartItem</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CartItem</span>(book.getId(),book.getName(),<span class="number">1</span>,book.getPrice(),book.getPrice());</span><br><span class="line"><span class="comment">// è°ƒç”¨ Cart.addItem(CartItem);æ·»åŠ å•†å“é¡¹</span></span><br><span class="line"><span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> (Cart) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (cart == <span class="literal">null</span>) &#123;</span><br><span class="line">cart = <span class="keyword">new</span> <span class="title class_">Cart</span>();</span><br><span class="line">req.getSession().setAttribute(<span class="string">&quot;cart&quot;</span>,cart);</span><br><span class="line">&#125;</span><br><span class="line">cart.addItem(cartItem);</span><br><span class="line">System.out.println(cart);</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·æ±‚å¤´ Referer çš„å€¼ï¼š&quot;</span> + req.getHeader(<span class="string">&quot;Referer&quot;</span>));</span><br><span class="line"><span class="comment">// é‡å®šå‘å›åŸæ¥å•†å“æ‰€åœ¨çš„åœ°å€é¡µé¢</span></span><br><span class="line">resp.sendRedirect(req.getHeader(<span class="string">&quot;Referer&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.jsp é¡µé¢ js çš„ä»£ç ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129161320733.png" alt="image-20211129161320733"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Script</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// ç»™åŠ å…¥è´­ç‰©è½¦æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button.addToCart&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨äº‹ä»¶å“åº”çš„ function å‡½æ•° ä¸­ï¼Œæœ‰ä¸€ä¸ª this å¯¹è±¡ï¼Œè¿™ä¸ª this å¯¹è±¡ï¼Œæ˜¯å½“å‰æ­£åœ¨å“åº”äº‹ä»¶çš„ dom å¯¹è±¡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@type</span> &#123;<span class="type">jQuery</span>&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> bookId = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;bookId&quot;</span>);</span><br><span class="line">location.<span class="property">href</span> = <span class="string">&quot;http://localhost:8080/book/cartServlet?action=addItem&amp;id=&quot;</span> + bookId;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/<span class="title class_">Script</span>&gt;</span><br></pre></td></tr></table></figure><p>å›¾è§£è¯´æ˜ï¼Œå¦‚ä½•è·³å›æ·»åŠ å•†å“çš„é¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129161359500.png" alt="image-20211129161359500"></p><h4 id="1-4ã€è´­ç‰©è½¦çš„å±•ç¤º"><a href="#1-4ã€è´­ç‰©è½¦çš„å±•ç¤º" class="headerlink" title="1.4ã€è´­ç‰©è½¦çš„å±•ç¤º"></a>1.4ã€è´­ç‰©è½¦çš„å±•ç¤º</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129161508956.png" alt="image-20211129161508956"></p><h4 id="1-5ã€åˆ é™¤è´­ç‰©è½¦å•†å“é¡¹"><a href="#1-5ã€åˆ é™¤è´­ç‰©è½¦å•†å“é¡¹" class="headerlink" title="1.5ã€åˆ é™¤è´­ç‰©è½¦å•†å“é¡¹"></a>1.5ã€åˆ é™¤è´­ç‰©è½¦å•†å“é¡¹</h4><p>CartServlet ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ é™¤å•†å“é¡¹</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">deleteItem</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException&#123;</span><br><span class="line"><span class="comment">// è·å–å•†å“ç¼–å·</span></span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;id&quot;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// è·å–è´­ç‰©è½¦å¯¹è±¡</span></span><br><span class="line"><span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> (Cart) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (cart != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// åˆ é™¤ äº†è´­ç‰©è½¦å•†å“é¡¹</span></span><br><span class="line">cart.deleteItem(id);</span><br><span class="line"><span class="comment">// é‡å®šå‘å›åŸæ¥è´­ç‰©è½¦å±•ç¤ºé¡µé¢</span></span><br><span class="line">resp.sendRedirect(req.getHeader(<span class="string">&quot;Referer&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è´­ç‰©è½¦&#x2F;pages&#x2F;cart&#x2F;cart.jsp é¡µé¢çš„ä»£ç ï¼š</p><p>åˆ é™¤çš„è¯·æ±‚åœ°å€ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129200354110.png" alt="image-20211129200354110"></p><p>åˆ é™¤çš„ç¡®è®¤æç¤ºæ“ä½œï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129200410500.png" alt="image-20211129200410500"></p><h4 id="1-6ã€æ¸…ç©ºè´­ç‰©è½¦"><a href="#1-6ã€æ¸…ç©ºè´­ç‰©è½¦" class="headerlink" title="1.6ã€æ¸…ç©ºè´­ç‰©è½¦"></a>1.6ã€æ¸…ç©ºè´­ç‰©è½¦</h4><p>ç•¥</p><h4 id="1-7ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡"><a href="#1-7ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡" class="headerlink" title="1.7ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡"></a>1.7ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡</h4><p>CartServlet ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä¿®æ”¹å•†å“æ•°é‡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">updateCount</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">IOException&#123;</span><br><span class="line"><span class="comment">// è·å–è¯·æ±‚çš„å‚æ•° å•†å“ç¼–å· ã€å•†å“æ•°é‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;id&quot;</span>),<span class="number">0</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> WebUtils.parseInt(req.getParameter(<span class="string">&quot;count&quot;</span>), <span class="number">1</span>);</span><br><span class="line"><span class="comment">// è·å– Cart è´­ç‰©è½¦å¯¹è±¡</span></span><br><span class="line"><span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> (Cart) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (cart != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// ä¿®æ”¹å•†å“æ•°é‡</span></span><br><span class="line">cart.updateCount(id,count);</span><br><span class="line"><span class="comment">// é‡å®šå‘å›åŸæ¥è´­ç‰©è½¦å±•ç¤ºé¡µé¢</span></span><br><span class="line">resp.sendRedirect(req.getHeader(<span class="string">&quot;Referer&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ pages&#x2F;cart&#x2F;cart.jsp è´­ç‰©è½¦é¡µé¢</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129212121779.png" alt="image-20211129212121779"></p><p>ä¿®æ”¹å•†å“æ•°é‡ jsä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™è¾“å…¥æ¡†ç»‘å®š onchange å†…å®¹å‘ç”Ÿæ”¹å˜äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;.updateCount&quot;</span>).<span class="title function_">change</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// è·å–å•†å“åç§°</span></span><br><span class="line"><span class="keyword">var</span> name = $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">parent</span>().<span class="title function_">find</span>(<span class="string">&quot;td:first&quot;</span>).<span class="title function_">text</span>();</span><br><span class="line"><span class="keyword">var</span> id = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;bookId&#x27;</span>);</span><br><span class="line"><span class="comment">// è·å–å•†å“æ•°é‡</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="variable language_">this</span>.<span class="property">value</span>;</span><br><span class="line"><span class="keyword">if</span> ( <span class="title function_">confirm</span>(<span class="string">&quot;ä½ ç¡®å®šè¦å°†ã€&quot;</span> + name + <span class="string">&quot;ã€‘å•†å“ä¿®æ”¹æ•°é‡ä¸ºï¼š&quot;</span> + count + <span class="string">&quot; å—?&quot;</span>) ) &#123;</span><br><span class="line"><span class="comment">//å‘èµ·è¯·æ±‚ã€‚ç»™æœåŠ¡å™¨ä¿å­˜ä¿®æ”¹</span></span><br><span class="line">location.<span class="property">href</span> =</span><br><span class="line"><span class="string">&quot;http://localhost:8080/book/cartServlet?action=updateCount&amp;count=&quot;</span>+count+<span class="string">&quot;&amp;id=&quot;</span>+id;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// defaultValue å±æ€§æ˜¯è¡¨å•é¡¹ Dom å¯¹è±¡çš„å±æ€§ã€‚å®ƒè¡¨ç¤ºé»˜è®¤çš„ value å±æ€§å€¼ã€‚</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="property">defaultValue</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1-8ã€é¦–é¡µï¼Œè´­ç‰©è½¦æ•°æ®å›æ˜¾"><a href="#1-8ã€é¦–é¡µï¼Œè´­ç‰©è½¦æ•°æ®å›æ˜¾" class="headerlink" title="1.8ã€é¦–é¡µï¼Œè´­ç‰©è½¦æ•°æ®å›æ˜¾"></a>1.8ã€é¦–é¡µï¼Œè´­ç‰©è½¦æ•°æ®å›æ˜¾</h4><p>åœ¨æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦çš„æ—¶å€™ï¼Œä¿å­˜æœ€åä¸€ä¸ªæ·»åŠ çš„å•†å“åç§°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129213555886.png" alt="image-20211129213555886"></p><p>åœ¨ pages&#x2F;client&#x2F;index.jsp é¡µé¢ä¸­è¾“å‡ºè´­ç‰©è½¦ä¿¡æ¯ï¼š</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;text-align: center&quot;</span>&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;empty sessionScope.cart.items&#125;&quot;</span>&gt;</span><br><span class="line">&lt;%--è´­ç‰©è½¦ä¸ºç©ºçš„è¾“å‡º--%&gt;</span><br><span class="line">&lt;span&gt; &lt;/span&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;span style=<span class="string">&quot;color: red&quot;</span>&gt;å½“å‰è´­ç‰©è½¦ä¸ºç©º&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;not empty sessionScope.cart.items&#125;&quot;</span>&gt;</span><br><span class="line">&lt;%--è´­ç‰©è½¦éç©ºçš„è¾“å‡º--%&gt;</span><br><span class="line">&lt;span&gt;æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰ $&#123;sessionScope.cart.totalCount&#125; ä»¶å•†å“&lt;/span&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">æ‚¨åˆšåˆšå°†&lt;span style=<span class="string">&quot;color: red&quot;</span>&gt;$&#123;sessionScope.lastName&#125;&lt;/span&gt;åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2ã€é¡¹ç›®ç¬¬ä¸ƒé˜¶æ®µï¼šè®¢å•"><a href="#2ã€é¡¹ç›®ç¬¬ä¸ƒé˜¶æ®µï¼šè®¢å•" class="headerlink" title="2ã€é¡¹ç›®ç¬¬ä¸ƒé˜¶æ®µï¼šè®¢å•"></a>2ã€é¡¹ç›®ç¬¬ä¸ƒé˜¶æ®µï¼šè®¢å•</h2><h3 id="2-1ã€è®¢å•æ¨¡å—çš„åˆ†æï¼š"><a href="#2-1ã€è®¢å•æ¨¡å—çš„åˆ†æï¼š" class="headerlink" title="2.1ã€è®¢å•æ¨¡å—çš„åˆ†æï¼š"></a>2.1ã€è®¢å•æ¨¡å—çš„åˆ†æï¼š</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211129215246972.png" alt="image-20211129215246972"></p><h3 id="2-2ï¼šè®¢å•æ¨¡å—çš„å®ç°"><a href="#2-2ï¼šè®¢å•æ¨¡å—çš„å®ç°" class="headerlink" title="2.2ï¼šè®¢å•æ¨¡å—çš„å®ç°"></a>2.2ï¼šè®¢å•æ¨¡å—çš„å®ç°</h3><h4 id="2-2-1ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®åº“è¡¨"><a href="#2-2-1ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®åº“è¡¨" class="headerlink" title="2.2.1ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®åº“è¡¨"></a>2.2.1ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®åº“è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_order(</span><br><span class="line">`order_id` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">primary</span> key,</span><br><span class="line">`create_time` datetime,</span><br><span class="line">`price` <span class="type">decimal</span>(<span class="number">11</span>,<span class="number">2</span>),</span><br><span class="line">`status` <span class="type">int</span>,</span><br><span class="line">`user_id` <span class="type">int</span>,</span><br><span class="line"><span class="keyword">foreign</span> key(`user_id`) <span class="keyword">references</span> t_user(`id`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_order_item(</span><br><span class="line">`id` <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">`count` <span class="type">int</span>,</span><br><span class="line">`price` <span class="type">decimal</span>(<span class="number">11</span>,<span class="number">2</span>),</span><br><span class="line">`total_price` <span class="type">decimal</span>(<span class="number">11</span>,<span class="number">2</span>),</span><br><span class="line">`order_id` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line"><span class="keyword">foreign</span> key(`order_id`) <span class="keyword">references</span> t_order(`order_id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="2-2-2ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®æ¨¡å‹"><a href="#2-2-2ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®æ¨¡å‹" class="headerlink" title="2.2.2ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®æ¨¡å‹"></a>2.2.2ã€åˆ›å»ºè®¢å•æ¨¡å—çš„æ•°æ®æ¨¡å‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è®¢å•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String orderId;</span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"><span class="keyword">private</span> BigDecimal price;</span><br><span class="line"><span class="comment">// 0 æœªå‘è´§ï¼Œ1 å·²å‘è´§ï¼Œ2 è¡¨ç¤ºå·²ç­¾æ”¶</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> Integer userId;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è®¢å•é¡¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderItem</span> &#123;</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> Integer count;</span><br><span class="line"><span class="keyword">private</span> BigDecimal price;</span><br><span class="line"><span class="keyword">private</span> BigDecimal totalPrice;</span><br><span class="line"><span class="keyword">private</span> String orderId;</span><br></pre></td></tr></table></figure><h4 id="2-2-3ã€ç¼–å†™è®¢å•æ¨¡å—çš„-Dao-ç¨‹åºå’Œæµ‹è¯•"><a href="#2-2-3ã€ç¼–å†™è®¢å•æ¨¡å—çš„-Dao-ç¨‹åºå’Œæµ‹è¯•" class="headerlink" title="2.2.3ã€ç¼–å†™è®¢å•æ¨¡å—çš„ Dao ç¨‹åºå’Œæµ‹è¯•"></a>2.2.3ã€ç¼–å†™è®¢å•æ¨¡å—çš„ Dao ç¨‹åºå’Œæµ‹è¯•</h4><p>OrderDao æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">saveOrder</span><span class="params">(Order order)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OrderDao å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span> <span class="keyword">implements</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">saveOrder</span><span class="params">(Order order)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_order(`order_id`,`create_time`,`price`,`status`,`user_id`)</span></span><br><span class="line"><span class="string">values(?,?,?,?,?)&quot;</span>;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">update(sql,order.getOrderId(),order.getCreateTime(),order.getPrice(),order.getStatus(),order.getUs</span><br><span class="line"><span class="title function_">erId</span><span class="params">()</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>OrderItemDao æ¥å£å’Œå®ç°ç±»ä¼¼</p><h4 id="2-2-4ã€ç¼–å†™è®¢å•æ¨¡å—çš„-Service-å’Œæµ‹è¯•"><a href="#2-2-4ã€ç¼–å†™è®¢å•æ¨¡å—çš„-Service-å’Œæµ‹è¯•" class="headerlink" title="2.2.4ã€ç¼–å†™è®¢å•æ¨¡å—çš„ Service å’Œæµ‹è¯•"></a>2.2.4ã€ç¼–å†™è®¢å•æ¨¡å—çš„ Service å’Œæµ‹è¯•</h4><p>OrderService æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">createOrder</span><span class="params">(Cart cart,Integer userId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OrderService å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line"><span class="keyword">private</span> <span class="type">OrderItemDao</span> <span class="variable">orderItemDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderItemDaoImpl</span>();</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">createOrder</span><span class="params">(Cart cart, Integer userId)</span> &#123;</span><br><span class="line"><span class="comment">// è®¢å•å·===å”¯ä¸€æ€§</span></span><br><span class="line"><span class="type">String</span> <span class="variable">orderId</span> <span class="operator">=</span> System.currentTimeMillis()+<span class="string">&quot;&quot;</span>+userId;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè®¢å•å¯¹è±¡</span></span><br><span class="line"><span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>(orderId,<span class="keyword">new</span> <span class="title class_">Date</span>(),cart.getTotalPrice(), <span class="number">0</span>,userId);</span><br><span class="line"><span class="comment">// ä¿å­˜è®¢å•</span></span><br><span class="line">orderDao.saveOrder(order);</span><br><span class="line"><span class="comment">// éå†è´­ç‰©è½¦ä¸­æ¯ä¸€ä¸ªå•†å“é¡¹è½¬æ¢æˆä¸ºè®¢å•é¡¹ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer, CartItem&gt;entry : cart.getItems().entrySet())&#123;</span><br><span class="line"><span class="comment">// è·å–æ¯ä¸€ä¸ªè´­ç‰©è½¦ä¸­çš„å•†å“é¡¹</span></span><br><span class="line"><span class="type">CartItem</span> <span class="variable">cartItem</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºæ¯ä¸€ä¸ªè®¢å•é¡¹</span></span><br><span class="line"><span class="type">OrderItem</span> <span class="variable">orderItem</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">OrderItem</span>(<span class="literal">null</span>,cartItem.getName(),cartItem.getCount(),cartItem.getPrice(),cartItem.getTotalPrice(),</span><br><span class="line">orderId);</span><br><span class="line"><span class="comment">// ä¿å­˜è®¢å•é¡¹åˆ°æ•°æ®åº“</span></span><br><span class="line">orderItemDao.saveOrderItem(orderItem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¸…ç©ºè´­ç‰©è½¦</span></span><br><span class="line">cart.clear();</span><br><span class="line"><span class="keyword">return</span> orderId;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-5ã€ç¼–å†™è®¢å•æ¨¡å—çš„-webå’Œè”è°ƒ"><a href="#2-2-5ã€ç¼–å†™è®¢å•æ¨¡å—çš„-webå’Œè”è°ƒ" class="headerlink" title="2.2.5ã€ç¼–å†™è®¢å•æ¨¡å—çš„ webå’Œè”è°ƒ"></a>2.2.5ã€ç¼–å†™è®¢å•æ¨¡å—çš„ webå’Œè”è°ƒ</h4><p>ä¿®æ”¹ OrderService ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line"><span class="keyword">private</span> <span class="type">OrderItemDao</span> <span class="variable">orderItemDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderItemDaoImpl</span>();</span><br><span class="line"><span class="keyword">private</span> <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">createOrder</span><span class="params">(Cart cart, Integer userId)</span> &#123;</span><br><span class="line"><span class="comment">// è®¢å•å·===å”¯ä¸€æ€§</span></span><br><span class="line"><span class="type">String</span> <span class="variable">orderId</span> <span class="operator">=</span> System.currentTimeMillis()+<span class="string">&quot;&quot;</span>+userId;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè®¢å•å¯¹è±¡</span></span><br><span class="line"><span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>(orderId,<span class="keyword">new</span> <span class="title class_">Date</span>(),cart.getTotalPrice(), <span class="number">0</span>,userId);</span><br><span class="line"><span class="comment">// ä¿å­˜è®¢å•</span></span><br><span class="line">orderDao.saveOrder(order);</span><br><span class="line"><span class="comment">// éå†è´­ç‰©è½¦ä¸­æ¯ä¸€ä¸ªå•†å“é¡¹è½¬æ¢æˆä¸ºè®¢å•é¡¹ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer, CartItem&gt;entry : cart.getItems().entrySet())&#123;</span><br><span class="line"><span class="comment">// è·å–æ¯ä¸€ä¸ªè´­ç‰©è½¦ä¸­çš„å•†å“é¡¹</span></span><br><span class="line"><span class="type">CartItem</span> <span class="variable">cartItem</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºæ¯ä¸€ä¸ªè®¢å•é¡¹</span></span><br><span class="line"><span class="type">OrderItem</span> <span class="variable">orderItem</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">OrderItem</span>(<span class="literal">null</span>,cartItem.getName(),cartItem.getCount(),cartItem.getPrice(),cartItem.getTotalPrice(),</span><br><span class="line">orderId);</span><br><span class="line"><span class="comment">// ä¿å­˜è®¢å•é¡¹åˆ°æ•°æ®åº“</span></span><br><span class="line">orderItemDao.saveOrderItem(orderItem);</span><br><span class="line"><span class="comment">// æ›´æ–°åº“å­˜å’Œé”€é‡</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookDao.queryBookById(cartItem.getId());</span><br><span class="line">book.setSales( book.getSales() + cartItem.getCount() );</span><br><span class="line">book.setStock( book.getStock() - cartItem.getCount() );</span><br><span class="line">bookDao.updateBook(book);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¸…ç©ºè´­ç‰©è½¦</span></span><br><span class="line">cart.clear();</span><br><span class="line"><span class="keyword">return</span> orderId;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OrderServlet ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServlet</span> <span class="keyword">extends</span> <span class="title class_">BaseServlet</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">OrderService</span> <span class="variable">orderService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderServiceImpl</span>();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç”Ÿæˆè®¢å•</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">createOrder</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span></span><br><span class="line">ServletException, IOException &#123;</span><br><span class="line"><span class="comment">// å…ˆè·å– Cart è´­ç‰©è½¦å¯¹è±¡</span></span><br><span class="line"><span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> (Cart) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"><span class="comment">// è·å– Userid</span></span><br><span class="line"><span class="type">User</span> <span class="variable">loginUser</span> <span class="operator">=</span> (User) req.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (loginUser == <span class="literal">null</span>) &#123;</span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/pages/user/login.jsp&quot;</span>).forward(req,resp);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getId();</span><br><span class="line"><span class="comment">// è°ƒç”¨ orderService.createOrder(Cart,Userid);ç”Ÿæˆè®¢å•</span></span><br><span class="line"><span class="type">String</span> <span class="variable">orderId</span> <span class="operator">=</span> orderService.createOrder(cart, userId);</span><br><span class="line"><span class="comment">// req.setAttribute(&quot;orderId&quot;, orderId);</span></span><br><span class="line"><span class="comment">// è¯·æ±‚è½¬å‘åˆ°/pages/cart/checkout.jsp</span></span><br><span class="line"><span class="comment">// req.getRequestDispatcher(&quot;/pages/cart/checkout.jsp&quot;).forward(req, resp);</span></span><br><span class="line">req.getSession().setAttribute(<span class="string">&quot;orderId&quot;</span>,orderId);</span><br><span class="line">resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/pages/cart/checkout.jsp&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ pages&#x2F;cart&#x2F;cart.jsp é¡µé¢ï¼Œç»“è´¦çš„è¯·æ±‚åœ°å€</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130131548477.png" alt="image-20211130131548477"></p><p>ä¿®æ”¹ pages&#x2F;cart&#x2F;checkout.jsp é¡µé¢ï¼Œè¾“å‡ºè®¢å•å·</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130131605934.png" alt="image-20211130131605934"></p><h2 id="Filterè¿‡æ»¤å™¨"><a href="#Filterè¿‡æ»¤å™¨" class="headerlink" title="Filterè¿‡æ»¤å™¨"></a>Filterè¿‡æ»¤å™¨</h2><h3 id="1ã€Filter-ä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨"><a href="#1ã€Filter-ä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨" class="headerlink" title="1ã€Filter ä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨"></a>1ã€Filter ä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨</h3><p>1ã€Filter è¿‡æ»¤å™¨å®ƒæ˜¯ JavaWeb çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚</p><p>ä¸‰å¤§ç»„ä»¶åˆ†åˆ«æ˜¯ï¼šServlet ç¨‹åºã€Listener ç›‘å¬å™¨ã€Filter è¿‡æ»¤å™¨</p><p>2ã€Filter è¿‡æ»¤å™¨å®ƒæ˜¯ JavaEE çš„è§„èŒƒã€‚ä¹Ÿå°±æ˜¯æ¥å£</p><p>3ã€Filter è¿‡æ»¤å™¨å®ƒçš„ä½œç”¨æ˜¯ï¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿‡æ»¤å“åº”ã€‚</p><p>æ‹¦æˆªè¯·æ±‚å¸¸è§çš„åº”ç”¨åœºæ™¯æœ‰ï¼š</p><pre><code> 1ã€æƒé™æ£€æŸ¥ </code></pre><p>â€‹2ã€æ—¥è®°æ“ä½œ</p><p>â€‹3ã€äº‹åŠ¡ç®¡ç† â€¦â€¦ç­‰ç­‰</p><h3 id="2ã€Filter-çš„åˆä½“éªŒ"><a href="#2ã€Filter-çš„åˆä½“éªŒ" class="headerlink" title="2ã€Filter çš„åˆä½“éªŒ"></a>2ã€Filter çš„åˆä½“éªŒ</h3><p>è¦æ±‚ï¼šåœ¨ä½ çš„ web å·¥ç¨‹ä¸‹ï¼Œæœ‰ä¸€ä¸ª admin ç›®å½•ã€‚è¿™ä¸ª admin ç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºï¼ˆhtml é¡µé¢ã€jpg å›¾ç‰‡ã€jsp æ–‡ä»¶ã€ç­‰ç­‰ï¼‰éƒ½å¿… é¡»æ˜¯ç”¨æˆ·ç™»å½•ä¹‹åæ‰å…è®¸è®¿é—®ã€‚</p><p>æ€è€ƒï¼šæ ¹æ®ä¹‹å‰æˆ‘ä»¬å­¦è¿‡å†…å®¹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç”¨æˆ·ç™»å½•ä¹‹åéƒ½ä¼šæŠŠç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ä¿å­˜åˆ° Session åŸŸä¸­ã€‚æ‰€ä»¥è¦æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ ç™»å½•ï¼Œå¯ä»¥åˆ¤æ–­ Session ä¸­å¦åŒ…å«æœ‰ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯å³å¯ï¼ï¼ï¼</p><p>Filter çš„å·¥ä½œæµç¨‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130150125522.png" alt="image-20211130150125522"></p><p>Filter çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* doFilter æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºæ‹¦æˆªè¯·æ±‚ã€‚å¯ä»¥åšæƒé™æ£€æŸ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain</span></span><br><span class="line"><span class="params">filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"><span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpServletRequest.getSession();</span><br><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="comment">// å¦‚æœç­‰äº nullï¼Œè¯´æ˜è¿˜æ²¡æœ‰ç™»å½•</span></span><br><span class="line"><span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">servletRequest.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(servletRequest,servletResponse);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// è®©ç¨‹åºç»§ç»­å¾€ä¸‹è®¿é—®ç”¨æˆ·çš„ç›®æ ‡èµ„æº</span></span><br><span class="line">filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>web.xml ä¸­çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--filter æ ‡ç­¾ç”¨äºé…ç½®ä¸€ä¸ª Filter è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»™ filter èµ·ä¸€ä¸ªåˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AdminFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½® filter çš„å…¨ç±»å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--filter-mapping é…ç½® Filter è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--filter-name è¡¨ç¤ºå½“å‰çš„æ‹¦æˆªè·¯å¾„ç»™å“ªä¸ª filter ä½¿ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AdminFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--url-pattern é…ç½®æ‹¦æˆªè·¯å¾„</span></span><br><span class="line"><span class="comment">/ è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºï¼šhttp://ip:port/å·¥ç¨‹è·¯å¾„/ æ˜ å°„åˆ° IDEA çš„ web ç›®å½•</span></span><br><span class="line"><span class="comment">/admin/* è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºï¼šhttp://ip:port/å·¥ç¨‹è·¯å¾„/admin/*</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/admin/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Filter è¿‡æ»¤å™¨çš„ä½¿ç”¨æ­¥éª¤ï¼š</p><p>1ã€ç¼–å†™ä¸€ä¸ªç±»å»å®ç° Filter æ¥å£</p><p>2ã€å®ç°è¿‡æ»¤æ–¹æ³• doFilter()</p><p>3ã€åˆ° web.xml ä¸­å»é…ç½® Filter çš„æ‹¦æˆªè·¯</p><h3 id="3ã€Filter-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3ã€Filter-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3ã€Filter çš„ç”Ÿå‘½å‘¨æœŸ"></a>3ã€Filter çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>Filter çš„ç”Ÿå‘½å‘¨æœŸåŒ…å«å‡ ä¸ªæ–¹æ³•</p><p>1ã€æ„é€ å™¨æ–¹æ³•</p><p>2ã€init åˆå§‹åŒ–æ–¹æ³•</p><p>â€‹ç¬¬ 1ï¼Œ2 æ­¥ï¼Œåœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œï¼ˆFilter å·²ç»åˆ›å»ºï¼‰</p><p>3ã€doFilter è¿‡æ»¤æ–¹æ³•</p><p>â€‹ç¬¬ 3 æ­¥ï¼Œæ¯æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œå°±ä¼šæ‰§è¡Œ</p><p>4ã€destroy é”€æ¯</p><p>â€‹ç¬¬ 4 æ­¥ï¼Œåœæ­¢ web å·¥ç¨‹çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œï¼ˆåœæ­¢ web å·¥ç¨‹ï¼Œä¹Ÿä¼šé”€æ¯ Filter è¿‡æ»¤</p><h3 id="4ã€FilterConfig-ç±»"><a href="#4ã€FilterConfig-ç±»" class="headerlink" title="4ã€FilterConfig ç±»"></a>4ã€FilterConfig ç±»</h3><p>FilterConfig ç±»è§åçŸ¥ä¹‰ï¼Œå®ƒæ˜¯ Filter è¿‡æ»¤å™¨çš„é…ç½®æ–‡ä»¶ç±»ã€‚</p><p>Tomcat æ¯æ¬¡åˆ›å»º Filter çš„æ—¶å€™ï¼Œä¹Ÿä¼šåŒæ—¶åˆ›å»ºä¸€ä¸ª FilterConfig ç±»ï¼Œ</p><p>è¿™é‡ŒåŒ…å«äº† Filter é…ç½®æ–‡ä»¶çš„é…ç½®ä¿¡æ¯ã€‚</p><p>FilterConfig ç±»çš„ä½œç”¨æ˜¯è·å– filter è¿‡æ»¤å™¨çš„é…ç½®å†…å®¹</p><p>1ã€è·å– Filter çš„åç§° filter-name çš„å†…å®¹</p><p>2ã€è·å–åœ¨ Filter ä¸­é…ç½®çš„ init-param åˆå§‹åŒ–å‚æ•°</p><p>3ã€è·å– ServletContext å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;2.Filter çš„ init(FilterConfig filterConfig)åˆå§‹åŒ–&quot;</span>);</span><br><span class="line"><span class="comment">// 1ã€è·å– Filter çš„åç§° filter-name çš„å†…å®¹</span></span><br><span class="line">System.out.println(<span class="string">&quot;filter-name çš„å€¼æ˜¯ï¼š&quot;</span> + filterConfig.getFilterName());</span><br><span class="line"><span class="comment">// 2ã€è·å–åœ¨ web.xml ä¸­é…ç½®çš„ init-param åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">System.out.println(<span class="string">&quot;åˆå§‹åŒ–å‚æ•° username çš„å€¼æ˜¯ï¼š&quot;</span> + filterConfig.getInitParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;åˆå§‹åŒ–å‚æ•° url çš„å€¼æ˜¯ï¼š&quot;</span> + filterConfig.getInitParameter(<span class="string">&quot;url&quot;</span>));</span><br><span class="line"><span class="comment">// 3ã€è·å– ServletContext å¯¹è±¡</span></span><br><span class="line">System.out.println(filterConfig.getServletContext());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>web.xmlé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">web.xml é…ç½®ï¼š</span><br><span class="line"><span class="comment">&lt;!--filter æ ‡ç­¾ç”¨äºé…ç½®ä¸€ä¸ª Filter è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»™ filter èµ·ä¸€ä¸ªåˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AdminFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½® filter çš„å…¨ç±»å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filter.AdminFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost3306/test<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5ã€FilterChain-è¿‡æ»¤å™¨é“¾"><a href="#5ã€FilterChain-è¿‡æ»¤å™¨é“¾" class="headerlink" title="5ã€FilterChain è¿‡æ»¤å™¨é“¾"></a>5ã€FilterChain è¿‡æ»¤å™¨é“¾</h3><p>Filter è¿‡æ»¤å™¨</p><p>Chain é“¾ï¼Œé“¾æ¡</p><p>FilterChain å°±æ˜¯è¿‡æ»¤å™¨é“¾ï¼ˆå¤šä¸ªè¿‡æ»¤å™¨å¦‚ä½•ä¸€èµ·å·¥ä½œï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130191218830.png" alt="image-20211130191218830"></p><h3 id="6ã€Filter-çš„æ‹¦æˆªè·¯å¾„"><a href="#6ã€Filter-çš„æ‹¦æˆªè·¯å¾„" class="headerlink" title="6ã€Filter çš„æ‹¦æˆªè·¯å¾„"></a>6ã€Filter çš„æ‹¦æˆªè·¯å¾„</h3><h4 id="â€“ç²¾ç¡®åŒ¹é…"><a href="#â€“ç²¾ç¡®åŒ¹é…" class="headerlink" title="â€“ç²¾ç¡®åŒ¹é…"></a>â€“ç²¾ç¡®åŒ¹é…</h4><p><code>&lt;url-patter&gt;/target.jsp&lt;/url-pattern&gt;</code></p><p>ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä¸ºï¼š<a href="http://ip:port/å·¥ç¨‹è·¯å¾„/target.jsp">http://ip:port/å·¥ç¨‹è·¯å¾„/target.jsp</a></p><h4 id="â€“ç›®å½•åŒ¹é…"><a href="#â€“ç›®å½•åŒ¹é…" class="headerlink" title="â€“ç›®å½•åŒ¹é…"></a>â€“ç›®å½•åŒ¹é…</h4><p><code>&lt;url-patter&gt;/admin/*&lt;/url-pattern&gt;</code></p><p>ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä¸ºï¼š<a href="http://ip:port/å·¥ç¨‹è·¯å¾„/admin/">http://ip:port/å·¥ç¨‹è·¯å¾„/admin/</a>*</p><h4 id="â€“åç¼€ååŒ¹é…"><a href="#â€“åç¼€ååŒ¹é…" class="headerlink" title="â€“åç¼€ååŒ¹é…"></a>â€“åç¼€ååŒ¹é…</h4><p><code>&lt;url-patter&gt;*.html&lt;/url-pattern&gt;</code></p><p>ä»¥ä¸Šé…ç½®çš„è·¯å¾„ï¼Œè¡¨ç¤ºè¯·æ±‚åœ°å€å¿…é¡»ä»¥.html ç»“å°¾æ‰ä¼šæ‹¦æˆªåˆ°</p><p><strong>Filter è¿‡æ»¤å™¨å®ƒåªå…³å¿ƒè¯·æ±‚çš„åœ°å€æ˜¯å¦åŒ¹é…ï¼Œä¸å…³å¿ƒè¯·æ±‚çš„èµ„æºæ˜¯å¦å­˜åœ¨ï¼ï¼ï¼</strong></p><h2 id="7ã€ä¹¦åŸç¬¬å…«é˜¶æ®µï¼š"><a href="#7ã€ä¹¦åŸç¬¬å…«é˜¶æ®µï¼š" class="headerlink" title="7ã€ä¹¦åŸç¬¬å…«é˜¶æ®µï¼š"></a>7ã€ä¹¦åŸç¬¬å…«é˜¶æ®µï¼š</h2><h3 id="1ã€ä½¿ç”¨-Filter-è¿‡æ»¤å™¨æ‹¦æˆª-x2F-pages-x2F-manager-x2F-æ‰€æœ‰å†…å®¹ï¼Œå®-ç°æƒé™æ£€æŸ¥"><a href="#1ã€ä½¿ç”¨-Filter-è¿‡æ»¤å™¨æ‹¦æˆª-x2F-pages-x2F-manager-x2F-æ‰€æœ‰å†…å®¹ï¼Œå®-ç°æƒé™æ£€æŸ¥" class="headerlink" title="1ã€ä½¿ç”¨ Filter è¿‡æ»¤å™¨æ‹¦æˆª&#x2F;pages&#x2F;manager&#x2F;æ‰€æœ‰å†…å®¹ï¼Œå® ç°æƒé™æ£€æŸ¥"></a>1ã€ä½¿ç”¨ Filter è¿‡æ»¤å™¨æ‹¦æˆª&#x2F;pages&#x2F;manager&#x2F;æ‰€æœ‰å†…å®¹ï¼Œå® ç°æƒé™æ£€æŸ¥</h3><p>Filterä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManagerFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> httpServletRequest.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">httpServletRequest.getRequestDispatcher(<span class="string">&quot;/pages/user/login.jsp&quot;</span>).forward(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>web.xml ä¸­çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ManagerFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.izumi.filter.ManagerFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ManagerFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/pages/manager/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/manager/bookServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€ThreadLocal-çš„ä½¿ç”¨"><a href="#2ã€ThreadLocal-çš„ä½¿ç”¨" class="headerlink" title="2ã€ThreadLocal çš„ä½¿ç”¨"></a>2ã€ThreadLocal çš„ä½¿ç”¨</h3><p>ThreadLocal çš„ä½œç”¨ï¼Œå®ƒå¯ä»¥è§£å†³å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜ã€‚</p><p>ThreadLocal å®ƒå¯ä»¥ç»™å½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®ï¼ˆå¯ä»¥æ˜¯æ™®é€šå˜é‡ï¼Œå¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œé›†åˆï¼‰</p><p>ThreadLocal çš„ç‰¹ç‚¹ï¼š</p><p>1ã€ThreadLocal å¯ä»¥ä¸ºå½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®ã€‚ï¼ˆå®ƒå¯ä»¥åƒ Map ä¸€æ ·å­˜å–æ•°æ®ï¼Œkey ä¸ºå½“å‰çº¿ç¨‹ï¼‰</p><p>2ã€æ¯ä¸€ä¸ª ThreadLocal å¯¹è±¡ï¼Œåªèƒ½ä¸ºå½“å‰çº¿ç¨‹å…³è”ä¸€ä¸ªæ•°æ®ï¼Œå¦‚æœè¦ä¸ºå½“å‰çº¿ç¨‹å…³è”å¤šä¸ªæ•°æ®ï¼Œ</p><p>å°±éœ€è¦ä½¿ç”¨å¤šä¸ª ThreadLocal å¯¹è±¡å®ä¾‹ã€‚</p><p>3ã€æ¯ä¸ª ThreadLocal å¯¹è±¡å®ä¾‹å®šä¹‰çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯ static ç±»å‹ 4ã€ThreadLocal ä¸­ä¿å­˜æ•°æ®ï¼Œ</p><p>åœ¨çº¿ç¨‹é”€æ¯åã€‚ä¼šç”± JVM è™šæ‹Ÿè‡ªåŠ¨é‡Šæ”¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createOrder</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">System.out.println(<span class="string">&quot;OrderService å½“å‰çº¿ç¨‹[&quot;</span> + name + <span class="string">&quot;]ä¸­ä¿å­˜çš„æ•°æ®æ˜¯ï¼š&quot;</span> +</span><br><span class="line">ThreadLocalTest.threadLocal.get());</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">OrderDao</span>().saveOrder();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveOrder</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">System.out.println(<span class="string">&quot;OrderDao å½“å‰çº¿ç¨‹[&quot;</span> + name + <span class="string">&quot;]ä¸­ä¿å­˜çš„æ•°æ®æ˜¯ï¼š&quot;</span> +</span><br><span class="line">ThreadLocalTest.threadLocal.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadLocalTest</span> &#123;</span><br><span class="line"><span class="comment">// public static Map&lt;String,Object&gt; data = new Hashtable&lt;String,Object&gt;();</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;Object&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;Object&gt;();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// åœ¨ Run æ–¹æ³•ä¸­ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªå˜é‡ï¼ˆçº¿ç¨‹è¦å…³è”çš„æ•°æ®ï¼‰ï¼Œç„¶åä»¥å½“å‰çº¿ç¨‹åä¸º key ä¿å­˜åˆ° map ä¸­</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> random.nextInt(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">// è·å–å½“å‰çº¿ç¨‹å</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">System.out.println(<span class="string">&quot;çº¿ç¨‹[&quot;</span>+name+<span class="string">&quot;]ç”Ÿæˆçš„éšæœºæ•°æ˜¯ï¼š&quot;</span> + i);</span><br><span class="line"><span class="comment">// data.put(name,i);</span></span><br><span class="line">threadLocal.set(i);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">OrderService</span>().createOrder();</span><br><span class="line"><span class="comment">// åœ¨ Run æ–¹æ³•ç»“æŸä¹‹å‰ï¼Œä»¥å½“å‰çº¿ç¨‹åè·å–å‡ºæ•°æ®å¹¶æ‰“å°ã€‚æŸ¥çœ‹æ˜¯å¦å¯ä»¥å–å‡ºæ“ä½œ</span></span><br><span class="line"><span class="comment">// Object o = data.get(name);</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">System.out.println(<span class="string">&quot;åœ¨çº¿ç¨‹[&quot;</span>+name+<span class="string">&quot;]å¿«ç»“æŸæ—¶å–å‡ºå…³è”çš„æ•°æ®æ˜¯ï¼š&quot;</span> + o);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Task</span>()).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€ä½¿ç”¨-Filter-å’Œ-ThreadLocal-ç»„åˆç®¡ç†äº‹åŠ¡"><a href="#3ã€ä½¿ç”¨-Filter-å’Œ-ThreadLocal-ç»„åˆç®¡ç†äº‹åŠ¡" class="headerlink" title="3ã€ä½¿ç”¨ Filter å’Œ ThreadLocal ç»„åˆç®¡ç†äº‹åŠ¡"></a>3ã€ä½¿ç”¨ Filter å’Œ ThreadLocal ç»„åˆç®¡ç†äº‹åŠ¡</h3><h4 id="3-1ã€ä½¿ç”¨-ThreadLocal-æ¥ç¡®ä¿æ‰€æœ‰-dao-æ“ä½œéƒ½åœ¨åŒä¸€ä¸ª-Connection-è¿æ¥å¯¹è±¡ä¸­å®Œ-æˆ"><a href="#3-1ã€ä½¿ç”¨-ThreadLocal-æ¥ç¡®ä¿æ‰€æœ‰-dao-æ“ä½œéƒ½åœ¨åŒä¸€ä¸ª-Connection-è¿æ¥å¯¹è±¡ä¸­å®Œ-æˆ" class="headerlink" title="3.1ã€ä½¿ç”¨ ThreadLocal æ¥ç¡®ä¿æ‰€æœ‰ dao æ“ä½œéƒ½åœ¨åŒä¸€ä¸ª Connection è¿æ¥å¯¹è±¡ä¸­å®Œ æˆ"></a>3.1ã€ä½¿ç”¨ ThreadLocal æ¥ç¡®ä¿æ‰€æœ‰ dao æ“ä½œéƒ½åœ¨åŒä¸€ä¸ª Connection è¿æ¥å¯¹è±¡ä¸­å®Œ æˆ</h4><p>åŸç†åˆ†æå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130221720112.png" alt="image-20211130221720112"></p><p>JdbcUtils å·¥å…·ç±»çš„ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtils</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DruidDataSource dataSource;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Connection&gt; conns = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;Connection&gt;();</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"><span class="comment">// è¯»å– jdbc.properties å±æ€§é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span></span><br><span class="line">JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line"><span class="comment">// ä»æµä¸­åŠ è½½æ•°æ®</span></span><br><span class="line">properties.load(inputStream);</span><br><span class="line"><span class="comment">// åˆ›å»º æ•°æ®åº“è¿æ¥ æ± </span></span><br><span class="line">dataSource = (DruidDataSource) DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è·å–æ•°æ®åº“è¿æ¥æ± ä¸­çš„è¿æ¥</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> å¦‚æœè¿”å› null,è¯´æ˜è·å–è¿æ¥å¤±è´¥&lt;br/&gt;æœ‰å€¼å°±æ˜¯è·å–è¿æ¥æˆåŠŸ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> conns.get();</span><br><span class="line"><span class="keyword">if</span> (conn == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = dataSource.getConnection();<span class="comment">//ä»æ•°æ®åº“è¿æ¥æ± ä¸­è·å–è¿æ¥</span></span><br><span class="line">conns.set(conn); <span class="comment">// ä¿å­˜åˆ° ThreadLocal å¯¹è±¡ä¸­ï¼Œä¾›åé¢çš„ jdbc æ“ä½œä½¿ç”¨</span></span><br><span class="line">conn.setAutoCommit(<span class="literal">false</span>); <span class="comment">// è®¾ç½®ä¸ºæ‰‹åŠ¨ç®¡ç†äº‹åŠ¡</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æäº¤äº‹åŠ¡ï¼Œå¹¶å…³é—­é‡Šæ”¾è¿æ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">commitAndClose</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> conns.get();</span><br><span class="line"><span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123; <span class="comment">// å¦‚æœä¸ç­‰äº nullï¼Œè¯´æ˜ ä¹‹å‰ä½¿ç”¨è¿‡è¿æ¥ï¼Œæ“ä½œè¿‡æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">connection.commit(); <span class="comment">// æäº¤ äº‹åŠ¡</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">connection.close(); <span class="comment">// å…³é—­è¿æ¥ï¼Œèµ„æºèµ„æº</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸€å®šè¦æ‰§è¡Œ remove æ“ä½œï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ã€‚ï¼ˆå› ä¸º Tomcat æœåŠ¡å™¨åº•å±‚ä½¿ç”¨äº†çº¿ç¨‹æ± æŠ€æœ¯ï¼‰</span></span><br><span class="line">conns.remove();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å›æ»šäº‹åŠ¡ï¼Œå¹¶å…³é—­é‡Šæ”¾è¿æ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">rollbackAndClose</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> conns.get();</span><br><span class="line"><span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123; <span class="comment">// å¦‚æœä¸ç­‰äº nullï¼Œè¯´æ˜ ä¹‹å‰ä½¿ç”¨è¿‡è¿æ¥ï¼Œæ“ä½œè¿‡æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">connection.rollback();<span class="comment">//å›æ»šäº‹åŠ¡</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">connection.close(); <span class="comment">// å…³é—­è¿æ¥ï¼Œèµ„æºèµ„æº</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸€å®šè¦æ‰§è¡Œ remove æ“ä½œï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ã€‚ï¼ˆå› ä¸º Tomcat æœåŠ¡å™¨åº•å±‚ä½¿ç”¨äº†çº¿ç¨‹æ± æŠ€æœ¯ï¼‰</span></span><br><span class="line">conns.remove();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å…³é—­è¿æ¥ï¼Œæ”¾å›æ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">public static void close(Connection conn)&#123;</span></span><br><span class="line"><span class="comment">if (conn != null) &#123;</span></span><br><span class="line"><span class="comment">try &#123;</span></span><br><span class="line"><span class="comment">conn.close();</span></span><br><span class="line"><span class="comment">&#125; catch (SQLException e) &#123;</span></span><br><span class="line"><span class="comment">e.printStackTrace();</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ BaseDao</p><p>&#x2F;&#x2F;å°† æ¯ä¸ª catchæŠ›å‡ºå»ï¼Œ</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> queryRunner.update(connection, sql, args);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2ã€ä½¿ç”¨-Filter-è¿‡æ»¤å™¨ç»Ÿä¸€ç»™æ‰€æœ‰çš„-Service-æ–¹æ³•éƒ½åŠ ä¸Š-try-catchã€‚æ¥è¿›è¡Œå®ç°çš„-ç®¡ç†ã€‚"><a href="#3-2ã€ä½¿ç”¨-Filter-è¿‡æ»¤å™¨ç»Ÿä¸€ç»™æ‰€æœ‰çš„-Service-æ–¹æ³•éƒ½åŠ ä¸Š-try-catchã€‚æ¥è¿›è¡Œå®ç°çš„-ç®¡ç†ã€‚" class="headerlink" title="3.2ã€ä½¿ç”¨ Filter è¿‡æ»¤å™¨ç»Ÿä¸€ç»™æ‰€æœ‰çš„ Service æ–¹æ³•éƒ½åŠ ä¸Š try-catchã€‚æ¥è¿›è¡Œå®ç°çš„ ç®¡ç†ã€‚"></a>3.2ã€ä½¿ç”¨ Filter è¿‡æ»¤å™¨ç»Ÿä¸€ç»™æ‰€æœ‰çš„ Service æ–¹æ³•éƒ½åŠ ä¸Š try-catchã€‚æ¥è¿›è¡Œå®ç°çš„ ç®¡ç†ã€‚</h4><p>åŸç†åˆ†æå›¾</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211130224808210.png" alt="image-20211130224808210"></p><p>Filter ç±»ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain</span></span><br><span class="line"><span class="params">filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">JdbcUtils.commitAndClose();<span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">JdbcUtils.rollbackAndClose();<span class="comment">//å›æ»šäº‹åŠ¡</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">åœ¨ web.xml ä¸­çš„é…ç½®ï¼š</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;TransactionFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;com.atguigu.filter.TransactionFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;TransactionFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;!-- <span class="comment">/* è¡¨ç¤ºå½“å‰å·¥ç¨‹ä¸‹æ‰€æœ‰è¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="comment">&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">&lt;/filter-mapping&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€å®šè¦è®°å¾—æŠŠ BaseServlet ä¸­çš„å¼‚å¸¸å¾€å¤–æŠ›ç»™ Filter è¿‡æ»¤å™¨</p><h4 id="3-3ã€å°†æ‰€æœ‰å¼‚å¸¸éƒ½ç»Ÿä¸€äº¤ç»™-Tomcatï¼Œè®©-Tomcat-å±•ç¤ºå‹å¥½çš„é”™è¯¯"><a href="#3-3ã€å°†æ‰€æœ‰å¼‚å¸¸éƒ½ç»Ÿä¸€äº¤ç»™-Tomcatï¼Œè®©-Tomcat-å±•ç¤ºå‹å¥½çš„é”™è¯¯" class="headerlink" title="3.3ã€å°†æ‰€æœ‰å¼‚å¸¸éƒ½ç»Ÿä¸€äº¤ç»™ Tomcatï¼Œè®© Tomcat å±•ç¤ºå‹å¥½çš„é”™è¯¯"></a>3.3ã€å°†æ‰€æœ‰å¼‚å¸¸éƒ½ç»Ÿä¸€äº¤ç»™ Tomcatï¼Œè®© Tomcat å±•ç¤ºå‹å¥½çš„é”™è¯¯</h4><p>web.xmlé…ç½®é¡µé¢</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--error-page æ ‡ç­¾é…ç½®ï¼ŒæœåŠ¡å™¨å‡ºé”™ä¹‹åï¼Œè‡ªåŠ¨è·³è½¬çš„é¡µé¢--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--error-code æ˜¯é”™è¯¯ç±»å‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-code</span>&gt;</span>500<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--location æ ‡ç­¾è¡¨ç¤ºã€‚è¦è·³è½¬å»çš„é¡µé¢è·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">location</span>&gt;</span>/pages/error/error500.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--error-page æ ‡ç­¾é…ç½®ï¼ŒæœåŠ¡å™¨å‡ºé”™ä¹‹åï¼Œè‡ªåŠ¨è·³è½¬çš„é¡µé¢--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--error-code æ˜¯é”™è¯¯ç±»å‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--location æ ‡ç­¾è¡¨ç¤ºã€‚è¦è·³è½¬å»çš„é¡µé¢è·¯å¾„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">location</span>&gt;</span>/pages/error/error404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JSONã€AJAXã€i18n"><a href="#JSONã€AJAXã€i18n" class="headerlink" title="JSONã€AJAXã€i18n"></a>JSONã€AJAXã€i18n</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯-JSON"><a href="#1ã€ä»€ä¹ˆæ˜¯-JSON" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ JSON?"></a>1ã€ä»€ä¹ˆæ˜¯ JSON?</h3><p>JSON (JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p><p>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚åŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚</p><p>JSON é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œè€Œä¸”å¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†å¯¹ json çš„æ”¯æŒï¼ˆåŒ…æ‹¬ C, C++, C#, Java, JavaScript, Perl, Python ç­‰ï¼‰ã€‚</p><p>è¿™æ ·å°±ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p><p>json æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p><p>è½»é‡çº§æŒ‡çš„æ˜¯è·Ÿ xml åšæ¯”è¾ƒã€‚ æ•°æ®äº¤æ¢æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸šåŠ¡æ•°æ®çš„ä¼ é€’æ ¼å¼ã€‚</p><h3 id="1-1ã€JSON-åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨ã€‚"><a href="#1-1ã€JSON-åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨ã€‚" class="headerlink" title="1.1ã€JSON åœ¨ JavaScript ä¸­çš„ä½¿ç”¨ã€‚"></a>1.1ã€JSON åœ¨ JavaScript ä¸­çš„ä½¿ç”¨ã€‚</h3><p>1.1.1ã€json çš„å®šä¹‰ json æ˜¯ç”±é”®å€¼å¯¹ç»„æˆï¼Œå¹¶ä¸”ç”±èŠ±æ‹¬å·ï¼ˆå¤§æ‹¬å·ï¼‰åŒ…å›´ã€‚</p><p>æ¯ä¸ªé”®ç”±å¼•å·å¼•èµ·æ¥ï¼Œé”®å’Œå€¼ä¹‹é—´ä½¿ç”¨å†’å·è¿›è¡Œåˆ†éš”ï¼Œ å¤šç»„é”®å€¼å¯¹ä¹‹é—´è¿›è¡Œé€—å·è¿›è¡Œåˆ†éš”ã€‚</p><h4 id="json-å®šä¹‰ç¤ºä¾‹"><a href="#json-å®šä¹‰ç¤ºä¾‹" class="headerlink" title="json å®šä¹‰ç¤ºä¾‹"></a>json å®šä¹‰ç¤ºä¾‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonçš„å®šä¹‰</span></span><br><span class="line">        <span class="keyword">var</span> jsonObj = &#123;</span><br><span class="line">            <span class="string">&quot;key1&quot;</span>: <span class="number">12</span>,</span><br><span class="line">            <span class="string">&quot;key2&quot;</span>: <span class="string">&quot;value2&quot;</span>,</span><br><span class="line">            <span class="string">&quot;key3&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&quot;key4&quot;</span>: [<span class="number">11</span>, <span class="string">&quot;fsf&quot;</span>, <span class="literal">false</span>],</span><br><span class="line">            <span class="string">&quot;key5&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;key551&quot;</span>: <span class="number">551</span>,</span><br><span class="line">                <span class="string">&quot;key_value88&quot;</span>: <span class="string">&quot;value88&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;key6&quot;</span>: [</span><br><span class="line">                &#123;<span class="string">&quot;key6_1&quot;</span>: <span class="number">889</span>, <span class="string">&quot;key6_1_2&quot;</span>: <span class="number">612</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;key6_2&quot;</span>: <span class="number">62</span>, <span class="string">&quot;key6_2_2&quot;</span>: <span class="number">622</span>&#125;</span><br><span class="line">            ]</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure><h4 id="1-1-2ã€json-çš„è®¿é—®"><a href="#1-1-2ã€json-çš„è®¿é—®" class="headerlink" title="1.1.2ã€json çš„è®¿é—®"></a>1.1.2ã€json çš„è®¿é—®</h4><p>json æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>json ä¸­çš„ key æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ˜¯å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚</p><p>json ä¸­çš„ key è®¿é—®å°±è·Ÿè®¿é—®å¯¹è±¡çš„å±æ€§ä¸€æ ·ï¼š</p><p>json å¯¹è±¡.key json è®¿é—®ç¤ºä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonçš„è®¿é—®</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key1)</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key2)</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key3)</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key4)</span></span><br><span class="line"><span class="comment">// for (var i = 0; i&lt;jsonObj.key4.length;i++)&#123;</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key4[i])</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key5.key551)</span></span><br><span class="line"><span class="comment">// alert(jsonObj.key5.key_value88)</span></span><br><span class="line"><span class="comment">/* å–å‡ºçš„ æ¯ä¸€ä¸ªjsonIteméƒ½æ˜¯ jsonå¯¹è±¡</span></span><br><span class="line"><span class="comment">var jsonItem = jsonObj.key6[0]</span></span><br><span class="line"><span class="comment">// alert(jsonItem.key6_1)</span></span><br><span class="line"><span class="comment">alert(jsonItem.key6_1_2)*/</span></span><br><span class="line"><span class="keyword">var</span> jsonItem2 = jsonObj.<span class="property">key6</span>[<span class="number">1</span>];</span><br><span class="line"><span class="title function_">alert</span>(jsonItem2.<span class="property">key6_2_2</span>)</span><br></pre></td></tr></table></figure><h4 id="1-1-3ã€json-çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•"><a href="#1-1-3ã€json-çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•" class="headerlink" title="1.1.3ã€json çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•"></a>1.1.3ã€json çš„ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•</h4><p>json çš„å­˜åœ¨æœ‰ä¸¤ç§å½¢å¼ã€‚</p><p>ä¸€ç§æ˜¯ï¼šå¯¹è±¡çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬å«å®ƒ json å¯¹è±¡ã€‚</p><p>ä¸€ç§æ˜¯ï¼šå­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬å«å®ƒ json å­—ç¬¦ä¸²ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬è¦æ“ä½œ json ä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦ json å¯¹è±¡çš„æ ¼å¼ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„æ—¶å€™ï¼Œä½¿ç”¨ json å­—ç¬¦ä¸²ã€‚</p><p>JSON.stringify() æŠŠ json å¯¹è±¡è½¬æ¢æˆä¸º json å­—ç¬¦ä¸²</p><p>JSON.parse() æŠŠ json å­—ç¬¦ä¸²è½¬æ¢æˆä¸º json å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonå¯¹è±¡è½¬å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> jsonObjString = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(jsonObj);</span><br><span class="line"><span class="title function_">alert</span>(jsonObjString)</span><br><span class="line">       <span class="comment">// jsonå­—ç¬¦ä¸²è½¬jsonå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> jsonObj2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonObjString);</span><br><span class="line"><span class="title function_">alert</span>(jsonObj2.<span class="property">key1</span>)</span><br></pre></td></tr></table></figure><h3 id="1-2ã€JSON-åœ¨-java-ä¸­çš„ä½¿ç”¨"><a href="#1-2ã€JSON-åœ¨-java-ä¸­çš„ä½¿ç”¨" class="headerlink" title="1.2ã€JSON åœ¨ java ä¸­çš„ä½¿ç”¨"></a>1.2ã€JSON åœ¨ java ä¸­çš„ä½¿ç”¨</h3><h4 id="1-2-1ã€javaBean-å’Œ-json-çš„äº’è½¬"><a href="#1-2-1ã€javaBean-å’Œ-json-çš„äº’è½¬" class="headerlink" title="1.2.1ã€javaBean å’Œ json çš„äº’è½¬"></a>1.2.1ã€javaBean å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//javaBean å’Œ Jsonçš„è½¬æ¢</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">1</span>, <span class="string">&quot;å¤©å¹²ç‰©ç‡¥&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»º Gsonå¯¹è±¡ç¤ºä¾‹</span></span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="comment">//è°ƒç”¨ gson å¯¹è±¡çš„ æ–¹æ³• toJson å°† javaBeanå¯¹è±¡è½¬æ¢æˆ json å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> gson.toJson(person);</span><br><span class="line">    System.out.println(jsonString);</span><br><span class="line">    <span class="comment">//è°ƒç”¨ gsonå¯¹è±¡ çš„ fromJsonæ–¹æ³• å¯ä»¥å°† jsonå¯¹è±¡è½¬æ¢å› JavaBeanå¯¹è±¡</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">person1</span> <span class="operator">=</span> gson.fromJson(jsonString, Person.class);</span><br><span class="line">    System.out.println(person1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-2ã€List-å’Œ-json-çš„äº’è½¬"><a href="#1-2-2ã€List-å’Œ-json-çš„äº’è½¬" class="headerlink" title="1.2.2ã€List å’Œ json çš„äº’è½¬"></a>1.2.2ã€List å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonListType</span> <span class="keyword">extends</span> <span class="title class_">TypeToken</span>&lt;List&lt;Person&gt;&gt; &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ª ç±»ç»§æ‰¿ com.google.gson.reflect.TypeTokenç±»ï¼Œæ³›å‹å†™ä¸Šjsonè½¬å› é›†åˆçš„ç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//json å’Œ list å¯¹è±¡ çš„äº’è½¬</span></span><br><span class="line">        List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">1</span>,<span class="string">&quot;steve&quot;</span>));</span><br><span class="line">        personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">2</span>,<span class="string">&quot;niko&quot;</span>));</span><br><span class="line">        <span class="comment">//åˆ›å»º Gsonå¯¹è±¡ç¤ºä¾‹</span></span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">toJson</span> <span class="operator">=</span> gson.toJson(personList);</span><br><span class="line">        System.out.println(toJson);</span><br><span class="line">        <span class="comment">//-------------------------</span></span><br><span class="line">        <span class="comment">//jsonè½¬ listé›†åˆ</span></span><br><span class="line">       List&lt;Person&gt; personList1 = gson.fromJson(toJson, <span class="keyword">new</span> <span class="title class_">PersonListType</span>().getType());</span><br><span class="line">        System.out.println( personList1.get(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-3ã€map-å’Œ-json-çš„äº’è½¬"><a href="#1-2-3ã€map-å’Œ-json-çš„äº’è½¬" class="headerlink" title="1.2.3ã€map å’Œ json çš„äº’è½¬"></a>1.2.3ã€map å’Œ json çš„äº’è½¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//json å’Œ map çš„ç›¸äº’è½¬æ¢</span></span><br><span class="line">    Map&lt;Integer,Person&gt; personMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    personMap.put(<span class="number">1</span>,<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">1</span>,<span class="string">&quot;ä¹”å¸ƒæ–¯&quot;</span>));</span><br><span class="line">    personMap.put(<span class="number">2</span>,<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">2</span>,<span class="string">&quot;å›¾çµ&quot;</span>));</span><br><span class="line">    <span class="comment">//åˆ›å»º Gson å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">toJson</span> <span class="operator">=</span> gson.toJson(personMap);</span><br><span class="line">    System.out.println(toJson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†json è½¬æ¢å› mapé›†åˆï¼Œè¿™é‡Œä½¿ç”¨åˆ°åŒ¿åå†…éƒ¨ç±»</span></span><br><span class="line">    Map&lt;Integer,Person&gt; personMap2 = gson.fromJson(toJson, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;HashMap&lt;Integer, Person&gt;&gt;()&#123;&#125;.getType());</span><br><span class="line">    System.out.println(personMap2.getClass());</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€AJAX-è¯·æ±‚"><a href="#2ã€AJAX-è¯·æ±‚" class="headerlink" title="2ã€AJAX è¯·æ±‚"></a>2ã€AJAX è¯·æ±‚</h3><h4 id="2-1ã€ä»€ä¹ˆæ˜¯-AJAX-è¯·æ±‚"><a href="#2-1ã€ä»€ä¹ˆæ˜¯-AJAX-è¯·æ±‚" class="headerlink" title="2.1ã€ä»€ä¹ˆæ˜¯ AJAX è¯·æ±‚"></a>2.1ã€ä»€ä¹ˆæ˜¯ AJAX è¯·æ±‚</h4><p>AJAX å³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥ JavaScript å’Œ XMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘ æŠ€æœ¯ã€‚</p><blockquote><p>ajax æ˜¯ä¸€ç§æµè§ˆå™¨é€šè¿‡ js å¼‚æ­¥å‘èµ·è¯·æ±‚ï¼Œå±€éƒ¨æ›´æ–°é¡µé¢çš„æŠ€æœ¯ã€‚ Ajax è¯·æ±‚çš„å±€éƒ¨æ›´æ–°ï¼Œæµè§ˆå™¨åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ– å±€éƒ¨æ›´æ–°ä¸ä¼šèˆå¼ƒåŸæ¥é¡µé¢çš„å†…å®¹</p></blockquote><h4 id="2-2ã€åŸç”Ÿ-AJAX-è¯·æ±‚çš„ç¤ºä¾‹ï¼š"><a href="#2-2ã€åŸç”Ÿ-AJAX-è¯·æ±‚çš„ç¤ºä¾‹ï¼š" class="headerlink" title="2.2ã€åŸç”Ÿ AJAX è¯·æ±‚çš„ç¤ºä¾‹ï¼š"></a>2.2ã€åŸç”Ÿ AJAX è¯·æ±‚çš„ç¤ºä¾‹ï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ajaxRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">//              1ã€æˆ‘ä»¬é¦–å…ˆè¦åˆ›å»ºXMLHttpRequest </span></span><br><span class="line">            <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="comment">//              2ã€è°ƒç”¨openæ–¹æ³•è®¾ç½®è¯·æ±‚å‚æ•° trueè¡¨ç¤ºå¼‚æ­¥ï¼Œfalseè¡¨ç¤ºåŒæ­¥</span></span><br><span class="line">            xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>,<span class="string">&quot;http://localhost:8080/json_ajax_i18n/ajaxServlet?action=javaScriptAjax&quot;</span>,<span class="literal">true</span>)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//              4ã€åœ¨sendæ–¹æ³•å‰ç»‘å®šonreadystatechangeäº‹ä»¶ï¼Œå¤„ç†è¯·æ±‚å®Œæˆåçš„æ“ä½œã€‚</span></span><br><span class="line">            xmlHttpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">               <span class="keyword">if</span> (xmlHttpRequest.<span class="property">readyState</span>==<span class="number">4</span> &amp;&amp;xmlHttpRequest.<span class="property">status</span>==<span class="number">200</span>)&#123;</span><br><span class="line">                  <span class="keyword">var</span> jsonObj =<span class="title class_">JSON</span>.<span class="title function_">parse</span>(xmlHttpRequest.<span class="property">responseText</span>);</span><br><span class="line">                  <span class="comment">//æŠŠå“åº”çš„æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span></span><br><span class="line">                  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div01&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;id:&quot;</span>+jsonObj.<span class="property">id</span>+<span class="string">&quot;  å§“åï¼š&quot;</span>+jsonObj.<span class="property">name</span></span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//              3ã€è°ƒç”¨sendæ–¹æ³•å‘é€è¯·æ±‚</span></span><br><span class="line">            xmlHttpRequest.<span class="title function_">send</span>();</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure><h4 id="2-3ã€jQuery-ä¸­çš„-AJAX-è¯·æ±‚"><a href="#2-3ã€jQuery-ä¸­çš„-AJAX-è¯·æ±‚" class="headerlink" title="2.3ã€jQuery ä¸­çš„ AJAX è¯·æ±‚"></a>2.3ã€jQuery ä¸­çš„ AJAX è¯·æ±‚</h4><p><strong>$.ajax æ–¹æ³•</strong><br>url è¡¨ç¤ºè¯·æ±‚çš„åœ°å€<br>type è¡¨ç¤ºè¯·æ±‚çš„ç±»å‹ GET æˆ– POST è¯·æ±‚<br>data è¡¨ç¤ºå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®<br>æ ¼å¼æœ‰ä¸¤ç§ï¼š<br>ä¸€ï¼šname&#x3D;value&amp;name&#x3D;value<br>äºŒï¼š{key:value}<br>success è¯·æ±‚æˆåŠŸï¼Œå“åº”çš„å›è°ƒå‡½æ•°<br>dataType å“åº”çš„æ•°æ®ç±»å‹<br>å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰ï¼š<br>text è¡¨ç¤ºçº¯æ–‡æœ¬<br>xml è¡¨ç¤º xml æ•°æ®<br>json è¡¨ç¤º json å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#ajaxBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,</span><br><span class="line"><span class="comment">// data:&quot;action=jQueryAjax&quot;,</span></span><br><span class="line"><span class="attr">data</span>:&#123;<span class="attr">action</span>:<span class="string">&quot;jQueryAjax&quot;</span>&#125;,</span><br><span class="line"><span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    </span><br><span class="line"><span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line"><span class="comment">// alert(&quot;æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ˜¯ï¼š&quot; + data);</span></span><br><span class="line"><span class="comment">// var jsonObj = JSON.parse(data);</span></span><br><span class="line">$(<span class="string">&quot;#msg&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;ç¼–å·ï¼š&quot;</span> + data.<span class="property">id</span> + <span class="string">&quot; , å§“åï¼š&quot;</span> + data.<span class="property">name</span>);&#125;,</span><br><span class="line"></span><br><span class="line">dataType : <span class="string">&quot;json&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>**$.get  æ–¹æ³•å’Œ $.post  æ–¹æ³• **</p><p>url    è¯·æ±‚çš„ url åœ°å€</p><p>data  å‘é€çš„æ•°æ®</p><p>callback æˆåŠŸçš„å›è°ƒå‡½æ•°</p><p>type è¿”å›çš„æ•°æ®ç±»å‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ajax--get è¯·æ±‚</span></span><br><span class="line">$(<span class="string">&quot;#getBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<span class="string">&quot;action=jQueryGet&quot;</span>,</span><br><span class="line">      <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">$(<span class="string">&quot;#msg&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot; get ç¼–å·ï¼š&quot;</span> + data.<span class="property">id</span> + <span class="string">&quot; , å§“åï¼š&quot;</span> + data.<span class="property">name</span>);</span><br><span class="line">&#125;,<span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ajax--post è¯·æ±‚</span></span><br><span class="line">$(<span class="string">&quot;#postBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">$.<span class="title function_">post</span>(<span class="string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<span class="string">&quot;action=jQueryPost&quot;</span>,</span><br><span class="line">       <span class="keyword">function</span> (<span class="params">data</span>)&#123;</span><br><span class="line">$(<span class="string">&quot;#msg&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot; post ç¼–å·ï¼š&quot;</span> + data.<span class="property">id</span> + <span class="string">&quot; , å§“åï¼š&quot;</span> + data.<span class="property">name</span>);</span><br><span class="line">    &#125;,<span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>**$.getJSON æ–¹æ³• **</p><p>url è¯·æ±‚çš„ url åœ°å€</p><p>data å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</p><p>callback æˆåŠŸçš„å›è°ƒå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ajax--getJson è¯·æ±‚</span></span><br><span class="line">$(<span class="string">&quot;#getJSONBtn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> $.<span class="title function_">getJSON</span>(<span class="string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<span class="string">&quot;action=jQueryGetJSON&quot;</span>,</span><br><span class="line">          <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">$(<span class="string">&quot;#msg&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot; getJSON ç¼–å·ï¼š&quot;</span> + data.<span class="property">id</span> + <span class="string">&quot; , å§“åï¼š&quot;</span> + data.<span class="property">name</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>**è¡¨å•åºåˆ—åŒ– serialize() **</p><p>serialize()å¯ä»¥æŠŠè¡¨å•ä¸­æ‰€æœ‰è¡¨å•é¡¹çš„å†…å®¹éƒ½è·å–åˆ°ï¼Œå¹¶ä»¥ name&#x3D;value&amp;name&#x3D;value çš„å½¢å¼è¿›è¡Œæ‹¼æ¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ajax è¯·æ±‚</span></span><br><span class="line">$(<span class="string">&quot;#submit&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">// æŠŠå‚æ•°åºåˆ—åŒ–</span></span><br><span class="line">$.<span class="title function_">getJSON</span>(<span class="string">&quot;http://localhost:8080/16_json_ajax_i18n/ajaxServlet&quot;</span>,<span class="string">&quot;action=jQuerySerialize&amp;&quot;</span> +$(<span class="string">&quot;#form01&quot;</span>).<span class="title function_">serialize</span>(),<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">$(<span class="string">&quot;#msg&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot; Serialize ç¼–å·ï¼š&quot;</span> + data.<span class="property">id</span> + <span class="string">&quot; , å§“åï¼š&quot;</span> + data.<span class="property">name</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="3ã€ä¹¦åŸé¡¹ç›®ç¬¬ä¹é˜¶æ®µ"><a href="#3ã€ä¹¦åŸé¡¹ç›®ç¬¬ä¹é˜¶æ®µ" class="headerlink" title="3ã€ä¹¦åŸé¡¹ç›®ç¬¬ä¹é˜¶æ®µ"></a>3ã€ä¹¦åŸé¡¹ç›®ç¬¬ä¹é˜¶æ®µ</h2><h3 id="3-1ã€ä½¿ç”¨-AJAX-éªŒè¯ç”¨æˆ·åæ˜¯å¦å¯ç”¨"><a href="#3-1ã€ä½¿ç”¨-AJAX-éªŒè¯ç”¨æˆ·åæ˜¯å¦å¯ç”¨" class="headerlink" title="3.1ã€ä½¿ç”¨ AJAX éªŒè¯ç”¨æˆ·åæ˜¯å¦å¯ç”¨"></a>3.1ã€ä½¿ç”¨ AJAX éªŒè¯ç”¨æˆ·åæ˜¯å¦å¯ç”¨</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211201201524384.png" alt="image-20211201201524384"></p><p>UserServlet ç¨‹åºä¸­ ajaxExistsUsername æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">ajaxExistsUsername</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span></span><br><span class="line">ServletException, IOException &#123;</span><br><span class="line"><span class="comment">// è·å–è¯·æ±‚çš„å‚æ•° username</span></span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"><span class="comment">// è°ƒç”¨ userService.existsUsername();</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">existsUsername</span> <span class="operator">=</span> userService.existsUsername(username);</span><br><span class="line"><span class="comment">// æŠŠè¿”å›çš„ç»“æœå°è£…æˆä¸º map å¯¹è±¡</span></span><br><span class="line">Map&lt;String,Object&gt; resultMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">resultMap.put(<span class="string">&quot;existsUsername&quot;</span>,existsUsername);</span><br><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> gson.toJson(resultMap);</span><br><span class="line">resp.getWriter().write(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>regist.jsp é¡µé¢ä¸­çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#username&quot;</span>).<span class="title function_">blur</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">//1 è·å–ç”¨æˆ·å</span></span><br><span class="line"><span class="keyword">var</span> username = <span class="variable language_">this</span>.<span class="property">value</span>;</span><br><span class="line">$.<span class="title function_">getJSON</span>(<span class="string">&quot;http://localhost:8080/book/userServlet&quot;</span>,<span class="string">&quot;action=ajaxExistsUsername&amp;username=&quot;</span> +username,<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (data.<span class="property">existsUsername</span>) &#123;</span><br><span class="line">$(<span class="string">&quot;span.errorMsg&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;ç”¨æˆ·åå·²å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">$(<span class="string">&quot;span.errorMsg&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;ç”¨æˆ·åå¯ç”¨ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-2ã€ä½¿ç”¨-AJAX-ä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦"><a href="#3-2ã€ä½¿ç”¨-AJAX-ä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦" class="headerlink" title="3.2ã€ä½¿ç”¨ AJAX ä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦"></a>3.2ã€ä½¿ç”¨ AJAX ä¿®æ”¹æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211201202055848.png" alt="image-20211201202055848"></p><p>CartServlet ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">ajaxAddItem</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;è°ƒç”¨ addItemæ–¹æ³•&quot;);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;å•†å“ç¼–å·ä¸ºï¼š&quot;+req.getParameter(&quot;id&quot;));</span></span><br><span class="line">        <span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> (Cart) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (cart == <span class="literal">null</span>) &#123;</span><br><span class="line">            cart = <span class="keyword">new</span> <span class="title class_">Cart</span>();</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;cart&quot;</span>, cart);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">id</span> <span class="operator">=</span> WebUtils.StringtoInteger(req.getParameter(<span class="string">&quot;id&quot;</span>), -<span class="number">1</span>);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.queryBookById(id);</span><br><span class="line">        <span class="type">CartItem</span> <span class="variable">cartItem</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CartItem</span>(book.getId(), book.getName(), <span class="number">1</span>, book.getPrice(), book.getPrice());</span><br><span class="line">        cart.addItem(cartItem);</span><br><span class="line">        <span class="comment">//ä¿å­˜æœ€åä¸€ä¸ª æ·»åŠ çš„å•†å“é¡¹åˆ° sessionåŸŸä¸­</span></span><br><span class="line">        req.getSession().setAttribute(<span class="string">&quot;lastName&quot;</span>,cartItem.getName());</span><br><span class="line">        <span class="comment">//è¿”å›è´­ç‰©è½¦æ€»çš„å•†å“æ•°é‡å’Œ æ·»åŠ çš„æœ€åä¸€ä¸ªå•†å“é¡¹</span></span><br><span class="line">        Map&lt;String,Object&gt; resultMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        resultMap.put(<span class="string">&quot;totalCount&quot;</span>,cart.getTotalCount());</span><br><span class="line">        resultMap.put(<span class="string">&quot;lastName&quot;</span>,cartItem.getName());</span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> gson.toJson(resultMap);</span><br><span class="line">        resp.getWriter().write(json);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>pages&#x2F;client&#x2F;index.jsp é¡µé¢ html ä»£ç </p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;empty sessionScope.cart.items&#125;&quot;</span>&gt;</span><br><span class="line">&lt;%--            è´­ç‰©è½¦ä¸ºç©º ä¸æ˜¾ç¤º--%&gt;</span><br><span class="line">            &lt;div style=<span class="string">&quot;text-align: center&quot;</span>&gt;</span><br><span class="line">               &lt;span class=<span class="string">&quot;cartTotalCount&quot;</span>&gt;&amp;nbsp;&lt;/span&gt;</span><br><span class="line">               &lt;div class=<span class="string">&quot;cartLastName&quot;</span>&gt;</span><br><span class="line">                  &lt;span style=<span class="string">&quot;color: red&quot;</span> &gt;&amp;nbsp;&lt;/span&gt;</span><br><span class="line">               &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">         &lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">         &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;not empty sessionScope.cart.items&#125;&quot;</span>&gt;</span><br><span class="line">            &lt;%--            è´­ç‰©è½¦éç©º--%&gt;</span><br><span class="line">            &lt;div style=<span class="string">&quot;text-align: center&quot;</span>&gt;</span><br><span class="line">&lt;%--               &lt;span class=<span class="string">&quot;cartTotalCount&quot;</span>&gt;æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰$&#123;sessionScope.cart.totalCount&#125;ä»¶å•†å“&lt;/span&gt;--%&gt;</span><br><span class="line">               &lt;span class=<span class="string">&quot;cartTotalCount&quot;</span>&gt;&lt;/span&gt;</span><br><span class="line">               &lt;div class=<span class="string">&quot;cartLastName&quot;</span>&gt;</span><br><span class="line">&lt;%--                  æ‚¨åˆšåˆšå°†&lt;span style=<span class="string">&quot;color: red&quot;</span> &gt;$&#123;sessionScope.lastName&#125;&lt;/span&gt;åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­--%&gt;</span><br><span class="line">               &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">         &lt;/c:<span class="keyword">if</span>&gt;</span><br></pre></td></tr></table></figure><p>jsä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»™åŠ å…¥è´­ç‰©è½¦æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">$(<span class="string">&quot;button.addToCart&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> bookId = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;bookId&quot;</span>);</span><br><span class="line">   <span class="comment">// location.href=&quot;cartServlet?action=addItem&amp;id=&quot; + bookId;</span></span><br><span class="line">   <span class="comment">//å‘ ajax è¯·æ±‚ï¼Œæ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span></span><br><span class="line">   $.<span class="title function_">getJSON</span>(<span class="string">&quot;cartServlet&quot;</span>,<span class="string">&quot;action=ajaxAddItem&amp;id=&quot;</span>+bookId,<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">      $(<span class="string">&quot;.cartTotalCount&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;æ‚¨çš„è´­ç‰©è½¦ä¸­æœ‰&quot;</span>+data.<span class="property">totalCount</span>+<span class="string">&quot;ä»¶å•†å“&quot;</span>);</span><br><span class="line">      <span class="comment">// $(&quot;.cartLastName&quot;).text(data.lastName);</span></span><br><span class="line">      $(<span class="string">&quot;.cartLastName&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;æ‚¨åˆšåˆšå°†&lt;span style=&#x27;color: red&#x27; &gt; &quot;</span>+data.<span class="property">lastName</span>+<span class="string">&quot; &lt;/span&gt;åŠ å…¥åˆ°äº†è´­ç‰©è½¦ä¸­&quot;</span>)</span><br><span class="line"></span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="4ã€i18n-å›½é™…åŒ–ï¼ˆäº†è§£å†…å®¹ï¼‰"><a href="#4ã€i18n-å›½é™…åŒ–ï¼ˆäº†è§£å†…å®¹ï¼‰" class="headerlink" title="4ã€i18n å›½é™…åŒ–ï¼ˆäº†è§£å†…å®¹ï¼‰"></a>4ã€i18n å›½é™…åŒ–ï¼ˆäº†è§£å†…å®¹ï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯-i18n-å›½é™…åŒ–"><a href="#ä»€ä¹ˆæ˜¯-i18n-å›½é™…åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯ i18n å›½é™…åŒ–"></a>ä»€ä¹ˆæ˜¯ i18n å›½é™…åŒ–</h3><p>ïƒ˜ å›½é™…åŒ–ï¼ˆInternationalizationï¼‰æŒ‡çš„æ˜¯åŒä¸€ä¸ªç½‘ç«™å¯ä»¥æ”¯æŒå¤šç§ä¸åŒçš„è¯­è¨€ï¼Œä»¥æ–¹ä¾¿ä¸åŒå›½å®¶ï¼Œä¸åŒè¯­ç§çš„ç”¨æˆ·è®¿é—®ã€‚ ïƒ˜ å…³äºå›½é™…åŒ–æˆ‘ä»¬æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯ä¸ºä¸åŒçš„å›½å®¶åˆ›å»ºä¸åŒçš„ç½‘ç«™ï¼Œæ¯”å¦‚è‹¹æœå…¬å¸ï¼Œä»–çš„è‹±æ–‡å®˜ç½‘æ˜¯ï¼š <a href="http://www.apple.com/">http://www.apple.com</a> è€Œä¸­å›½å®˜ç½‘æ˜¯ <a href="http://www.apple.com/cn">http://www.apple.com/cn</a> ïƒ˜ è‹¹æœå…¬å¸è¿™ç§æ–¹æ¡ˆå¹¶ä¸é€‚åˆå…¨éƒ¨å…¬å¸ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›ç›¸åŒçš„ä¸€ä¸ªç½‘ç«™ï¼Œè€Œä¸åŒäººè®¿é—®çš„æ—¶å€™å¯ä»¥æ ¹æ®ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸæ˜¾ç¤º ä¸åŒçš„è¯­è¨€æ–‡å­—ï¼Œè€Œç½‘ç«™çš„å¸ƒå±€æ ·å¼ç­‰ä¸å‘ç”Ÿæ”¹å˜ã€‚ ïƒ˜ äºæ˜¯å°±æœ‰äº†æˆ‘ä»¬è¯´çš„å›½é™…åŒ–ï¼Œå›½é™…åŒ–æ€»çš„æ¥è¯´å°±æ˜¯åŒä¸€ä¸ªç½‘ç«™ä¸åŒå›½å®¶çš„äººæ¥è®¿é—®å¯ä»¥æ˜¾ç¤ºå‡ºä¸åŒçš„è¯­è¨€ã€‚ä½†å®é™…ä¸Šè¿™ ç§éœ€æ±‚å¹¶ä¸å¼ºçƒˆï¼Œä¸€èˆ¬çœŸçš„æœ‰å›½é™…åŒ–éœ€æ±‚çš„å…¬å¸ï¼Œä¸»æµé‡‡ç”¨çš„ä¾ç„¶æ˜¯è‹¹æœå…¬å¸çš„é‚£ç§æ–¹æ¡ˆï¼Œä¸ºä¸åŒçš„å›½å®¶åˆ›å»ºä¸åŒçš„é¡µ é¢ã€‚æ‰€ä»¥å›½é™…åŒ–çš„å†…å®¹æˆ‘ä»¬äº†è§£ä¸€ä¸‹å³å¯ã€‚ ïƒ˜ å›½é™…åŒ–çš„è‹±æ–‡ Internationalizationï¼Œä½†æ˜¯ç”±äºæ‹¼å†™è¿‡é•¿ï¼Œè€å¤–æƒ³äº†ä¸€ä¸ªç®€å•çš„å†™æ³•å«åš I18Nï¼Œä»£è¡¨çš„æ˜¯ Internationalization è¿™ä¸ªå•è¯ï¼Œä»¥ I å¼€å¤´ï¼Œä»¥ N ç»“å°¾ï¼Œè€Œä¸­é—´æ˜¯ 18 ä¸ªå­—æ¯ï¼Œæ‰€ä»¥ç®€å†™ä¸º I18Nã€‚ä»¥åæˆ‘ä»¬è¯´ I18N å’Œå›½é™…åŒ–æ˜¯ä¸€ä¸ªæ„æ€ã€‚</p><h3 id="4-2ã€å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»"><a href="#4-2ã€å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»" class="headerlink" title="4.2ã€å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»"></a>4.2ã€å›½é™…åŒ–ç›¸å…³è¦ç´ ä»‹ç»</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211201212824688.png" alt="image-20211201212824688"></p>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
            <tag> Java </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurityå¿«é€Ÿå…¥é—¨</title>
      <link href="//posts/850c6616.html"/>
      <url>//posts/850c6616.html</url>
      
        <content type="html"><![CDATA[<h1 id="SpringSecurityå¿«é€Ÿå…¥é—¨"><a href="#SpringSecurityå¿«é€Ÿå…¥é—¨" class="headerlink" title="SpringSecurityå¿«é€Ÿå…¥é—¨"></a>SpringSecurityå¿«é€Ÿå…¥é—¨</h1><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p>Spring Security æ˜¯Spring å®¶æ—ä¸­çš„ä¸€ä¸ªå®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œç¤¾åŒºèµ„æºä¹Ÿæ¯”Shiroä¸°å¯Œã€‚<br>ä¸€èˆ¬æ¥è¯´ä¸­å¤§å‹çš„é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨SpringSecurityæ¥åšå®‰å…¨æ¡†æ¶ã€‚å°é¡¹ç›®æœ‰Shiroçš„æ¯”è¾ƒå¤šï¼Œå› ä¸ºç›¸æ¯”ä¸SpringSecurityï¼Œ Shiroçš„ä¸Šæ‰‹æ›´åŠ çš„ç®€å•ã€‚<br>ä¸€èˆ¬Webåº”ç”¨çš„éœ€è¦è¿›è¡Œè®¤è¯å’Œæˆæƒã€‚<br>è®¤è¯ï¼šéªŒè¯å½“å‰è®¿é—®ç³»ç»Ÿçš„æ˜¯ä¸æ˜¯æœ¬ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå¹¶ä¸”è¦ç¡®è®¤å…·ä½“æ˜¯å“ªä¸ªç”¨æˆ·<br>æˆæƒï¼šç»è¿‡è®¤è¯ååˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡ŒæŸä¸ªæ“ä½œ<br>è€Œè®¤è¯å’Œæˆæƒä¹Ÿæ˜¯SpringSecurityä½œä¸ºå®‰å…¨æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p><h2 id="2-å¿«é€Ÿä¸Šæ‰‹"><a href="#2-å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="2.å¿«é€Ÿä¸Šæ‰‹"></a>2.å¿«é€Ÿä¸Šæ‰‹</h2><p>pom.xml ä¸­çš„ Spring Security ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åªè¦åŠ å…¥ä¾èµ–ï¼Œé¡¹ç›®çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«è‡ªåŠ¨ä¿æŠ¤èµ·æ¥ã€‚</p><p>å¼•å…¥ä¾èµ–åæˆ‘ä»¬åœ¨å°è¯•å»è®¿é—®ä¹‹å‰çš„æ¥å£å°±ä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªSpringSecurityçš„é»˜è®¤ç™»é™†é¡µé¢ï¼Œé»˜è®¤ç”¨æˆ·åæ˜¯user,å¯†ç ä¼šåœ¨æ§åˆ¶å°è¾“å‡º</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426164336477.png" alt="image-20220426164336477" style="zoom: 50%;" /><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426164244721.png" alt="image-20220426164244721" style="zoom:50%;" /><h2 id="3-è®¤è¯"><a href="#3-è®¤è¯" class="headerlink" title="3.è®¤è¯"></a>3.è®¤è¯</h2><h3 id="3-1-ç™»å½•æ ¡éªŒè¿‡ç¨‹"><a href="#3-1-ç™»å½•æ ¡éªŒè¿‡ç¨‹" class="headerlink" title="3.1 ç™»å½•æ ¡éªŒè¿‡ç¨‹"></a>3.1 ç™»å½•æ ¡éªŒè¿‡ç¨‹</h3><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426164457347.png" alt="image-20220426164457347" style="zoom:50%;" /><h3 id="3-2-SpringSecurity-è®¤è¯æµç¨‹"><a href="#3-2-SpringSecurity-è®¤è¯æµç¨‹" class="headerlink" title="3.2 SpringSecurity è®¤è¯æµç¨‹"></a>3.2 SpringSecurity è®¤è¯æµç¨‹</h3><p>SpringSecurityçš„åŸç†å…¶å®å°±æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼Œå†…éƒ¨åŒ…å«äº†æä¾›å„ç§åŠŸèƒ½çš„è¿‡æ»¤å™¨ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…¥é—¨æ¡ˆä¾‹ä¸­çš„è¿‡æ»¤å™¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426164827799.png" alt="image-20220426164827799" style="zoom: 50%;" /><p>UsernamePasswordAuthenticationFilterï¼šè´Ÿè´£å¤„ç†æˆ‘ä»¬åœ¨ç™»é™†é¡µé¢å¡«å†™äº†ç”¨æˆ·åå¯†ç åçš„ç™»é™†è¯·æ±‚ã€‚å…¥é—¨æ¡ˆä¾‹çš„è®¤è¯å·¥ä½œä¸»è¦ç”±å®ƒè´Ÿè´£ã€‚</p><p>ExceptionTranslationFilterï¼š å¤„ç†è¿‡å™¨é“¾ä¸­æŠ›å‡ºçš„ä»»ä½•AccessDeniedExceptionå’ŒAuthenticationExceptionã€‚</p><p>FilterSecuritylnterceptorï¼šè´Ÿè´£æƒé™æ ¡éªŒçš„è¿‡æ»¤å™¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡DebugæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­SpringSecurityè¿‡æ»¤å™¨é“¾ä¸­æœ‰å“ªäº›è¿‡æ»¤å™¨åŠå®ƒä»¬çš„é¡ºåºã€‚</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426165455297.png" alt="image-20220426165455297" style="zoom: 50%;" /><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426165234537.png" alt="image-20220426165234537" style="zoom: 50%;" /><p>è®¤è¯æµç¨‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426170002862.png" alt="image-20220426170002862"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220426170119740.png" alt="image-20220426170119740"></p><h3 id="3-3-æ€è·¯"><a href="#3-3-æ€è·¯" class="headerlink" title="3.3 æ€è·¯"></a>3.3 æ€è·¯</h3><p>ç™»å½•<br>â‘ è‡ªå®šä¹‰ç™»å½•æ¥å£<br>è°ƒç”¨ProviderManagerçš„æ–¹æ³•è¿›è¡Œè®¤è¯å¦‚æœè®¤è¯é€šè¿‡ç”Ÿæˆjwt<br>æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥redisä¸­<br>â‘¡è‡ªå®šä¹‰UserDetailsService<br>åœ¨è¿™ä¸ªå®ç°åˆ—ä¸­å»æŸ¥è¯¢æ•°æ®åº“</p><p>æ ¡éªŒï¼š<br>â‘ å®šä¹‰Jwtè®¤è¯è¿‡æ»¤å™¨<br>è·å–token<br>è§£ætokenè·å–å…¶ä¸­çš„userid<br>ä»redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯<br>å­˜å…¥SecurityContextHolder</p><blockquote><p>1ã€ä¸¥æ ¼æ¥è¯´ï¼Œä½¿ç”¨jwtæ˜¯ä¸ç”¨redisçš„ï¼Œå› ä¸ºjwtåˆè¡·å°±æ˜¯ä¸ºäº†æ— çŠ¶æ€ï¼Œä½ åŠ ä¸Šredisï¼Œå°±è¿èƒŒäº†åˆè¡·ï¼Œè¿™ä¹Ÿæ˜¯ç½‘ä¸Šå¯¹jwtæœ€ä¸ºè¯Ÿç—…çš„ä¸€ä¸ªåœ°æ–¹ã€‚<br>2ã€ä½¿ç”¨rediså¹¶ä¸æ˜¯ä¸ºäº†å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œå› ä¸ºjwtæœ¬èº«æ˜¯å¯ä»¥åœ¨payloadä¸­æ”¾å…¥ä¸€äº›ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„ï¼Œåœ¨å‰ç«¯æºå¸¦tokenè®¿é—®æ—¶ï¼Œå¯¹tokenè¿›è¡Œè§£æï¼Œå¯ä»¥è·å–åˆ°è¿™äº›æ•°æ®å¹¶å†™å…¥SecurityContextHolderå½“ä¸­ï¼Œè¿™æ ·åœ¨åé¢çš„å¤„ç†å½“ä¸­ï¼Œéƒ½å¯ä»¥è·å–åˆ°å½“å‰ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚<br>3ã€ç”±äºjwtçš„æ— çŠ¶æ€ï¼Œåç«¯æ˜¯æ²¡æ³•æ„ŸçŸ¥å’Œæ§åˆ¶ç”¨æˆ·çš„åœ¨çº¿çŠ¶æ€çš„ï¼Œæ‰€ä»¥åŠ å…¥äº†redisè¿™ä¸€å±‚ï¼Œåœ¨æ ¡éªŒtokençš„åŒæ—¶æ£€æŸ¥redisç›¸å…³çŠ¶æ€ä»è€Œå®ç°åç«¯å¯¹ç”¨æˆ·çŠ¶æ€çš„æ§åˆ¶ã€‚<br>4ã€æ‰€ä»¥å¯¹äºæ— çŠ¶æ€åº”ç”¨ï¼Œjwtæ˜¯å†å¥½ä¸è¿‡çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬å¸¸è§çš„æœ‰çŠ¶æ€åº”ç”¨ï¼Œä½¿ç”¨ä¸€ä¸ªuuidä¹Ÿæ˜¯èƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœçš„ã€‚</p></blockquote><p>è‡ªå®šä¹‰UserDetailsService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isBlank(username)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServeException</span>(<span class="string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è´¦å·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="type">UserAuth</span> <span class="variable">user</span> <span class="operator">=</span> userAuthDao.selectOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;UserAuth&gt;()</span><br><span class="line">            .select(UserAuth::getId, UserAuth::getUserInfoId, UserAuth::getUsername, UserAuth::getPassword, UserAuth::getLoginType)</span><br><span class="line">            .eq(UserAuth::getUsername, username));</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(user)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServeException</span>(<span class="string">&quot;ç”¨æˆ·åä¸å­˜åœ¨!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è´¦å·ä¿¡æ¯</span></span><br><span class="line">    <span class="type">UserInfo</span> <span class="variable">userInfo</span> <span class="operator">=</span> userInfoDao.selectOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;UserInfo&gt;()</span><br><span class="line">            .select(UserInfo::getId, UserInfo::getEmail, UserInfo::getNickname, UserInfo::getAvatar, UserInfo::getIntro, UserInfo::getWebSite, UserInfo::getIsDisable)</span><br><span class="line">            .eq(UserInfo::getId, user.getUserInfoId()));</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è´¦å·è§’è‰²</span></span><br><span class="line">    List&lt;String&gt; roleList = roleDao.listRolesByUserInfoId(userInfo.getId());</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è´¦å·ç‚¹èµä¿¡æ¯</span></span><br><span class="line">    Set&lt;Integer&gt; articleLikeSet = (Set&lt;Integer&gt;) redisTemplate.boundHashOps(ARTICLE_USER_LIKE).get(userInfo.getId().toString());</span><br><span class="line">    Set&lt;Integer&gt; commentLikeSet = (Set&lt;Integer&gt;) redisTemplate.boundHashOps(COMMENT_USER_LIKE).get(userInfo.getId().toString());</span><br><span class="line">    <span class="comment">// å°è£…ç™»å½•ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> convertLoginUser(user, userInfo, roleList, articleLikeSet, commentLikeSet, request);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4å¯†ç åŠ å¯†å­˜å‚¨"><a href="#3-4å¯†ç åŠ å¯†å­˜å‚¨" class="headerlink" title="3.4å¯†ç åŠ å¯†å­˜å‚¨"></a>3.4å¯†ç åŠ å¯†å­˜å‚¨</h3><p>å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ä¸ä¼šæŠŠå¯†ç æ˜æ–‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚<br>é»˜è®¤ä½¿ç”¨çš„PasswordEncoderè¦æ±‚æ•°æ®åº“ä¸­çš„å¯†ç æ ¼å¼ä¸ºï¼šï¼ˆidypasswordã€‚å®ƒä¼šæ ¹æ®idå»åˆ¤æ–­å¯†ç çš„åŠ å¯†æ–¹å¼ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚æ‰€ä»¥å°±éœ€è¦æ›¿æ¢PasswordEncoderã€‚|<br>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨SpringSecurityä¸ºæˆ‘ä»¬æä¾›çš„BCryptPasswordEncoder.<br>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æŠŠBCryptPasswordEncoderå¯¹è±¡æ³¨å…¥Springå®¹å™¨ä¸­ï¼ŒSpringSecurityå°±ä¼šä½¿ç”¨è¯¥PasswordEncoderæ¥è¿›è¡Œå¯†ç æ ¡éªŒã€‚<br>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªSpringSecurityçš„é…ç½®ç±»ï¼Œ SpringSecurityè¦æ±‚è¿™ä¸ªé…ç½®ç±»è¦ç»§æ‰¿WebSecurityConfigurerAdapterã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯†ç åŠ å¯†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ Test</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">TestBCryptPasswordEncoder</span> <span class="params">()</span> &#123;</span><br><span class="line"><span class="type">BCryptPasswordEncoder</span> <span class="variable">passwordEncoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span> ();</span><br><span class="line"><span class="type">String</span> <span class="variable">encode</span> <span class="operator">=</span> passwordEncoder. encode (rawPassword: <span class="string">&quot;1234&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">encode2</span> <span class="operator">=</span> passwordEncoder. encode (rawPassword: <span class="string">&quot;1234&quot;</span>);</span><br><span class="line">System. out. println (encode);</span><br><span class="line">System. out. println (encode2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$2a$10<span class="variable">$bFOw3cFWQ93RDQo</span>.hODJL.sgYMXRMRdQk5u2bCDf4xItNz/1Y jFn6</span><br><span class="line">$2a$10<span class="variable">$npv5JSeFR6</span>/wLz8BBMmSBOMb8byg2eyfK4/vvoBk3RKtTLBhIhcpy</span><br></pre></td></tr></table></figure><p><code>$2a$10$ + ç›(22ä½) + å¯†æ–‡</code></p>]]></content>
      
      
      <categories>
          
          <category> Springå®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringSecurity </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring5ç¬”è®°</title>
      <link href="//posts/70b6ad8d.html"/>
      <url>//posts/70b6ad8d.html</url>
      
        <content type="html"><![CDATA[<h2 id="å†…å®¹ä»‹ç»"><a href="#å†…å®¹ä»‹ç»" class="headerlink" title="å†…å®¹ä»‹ç»"></a>å†…å®¹ä»‹ç»</h2><p>1ã€Spring æ¡†æ¶æ¦‚è¿°</p><p>2ã€IOC å®¹å™¨</p><p>â€‹ï¼ˆ1ï¼‰IOC åº•å±‚åŸç†</p><p>â€‹ï¼ˆ2ï¼‰IOC æ¥å£ï¼ˆBeanFactoryï¼‰</p><p>â€‹ï¼ˆ3ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäº xmlï¼‰</p><p>â€‹ï¼ˆ4ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäºæ³¨è§£ï¼‰</p><p>3ã€Aop</p><p>4ã€JdbcTemplate</p><p>5ã€äº‹åŠ¡ç®¡ç†</p><p>6ã€Spring5 æ–°ç‰¹æ€§</p><h2 id="springæ¡†æ¶æ¦‚è¿°"><a href="#springæ¡†æ¶æ¦‚è¿°" class="headerlink" title="springæ¡†æ¶æ¦‚è¿°"></a>springæ¡†æ¶æ¦‚è¿°</h2><ol><li>springæ¡†æ¶æ˜¯ è½»é‡çº§çš„ å¼€æºçš„ javaEEæ¡†æ¶</li><li>springå¯ä»¥è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§</li><li>springæœ‰ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ† ioc å’Œ aop<ul><li>ioc ï¼šæ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡è¿‡ç¨‹äº¤ç»™spring è¿›è¡Œç®¡ç†</li><li>aop: é¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼º</li></ul></li><li>spring çš„ç‰¹ç‚¹<ul><li>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘</li><li>aopç¼–ç¨‹æ”¯æŒ</li><li>æ–¹ä¾¿ç¨‹åºæµ‹è¯•</li><li>æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ</li><li>æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ</li><li>é™ä½apiå¼€å‘éš¾åº¦</li></ul></li></ol><h2 id="spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹"><a href="#spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹"></a>spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹</h2><p>å‰å¾€springå®˜ç½‘ä¸‹è½½ spring5  <a href="https://spring.io/">https://spring.io</a></p><p>spring æ¨¡å—å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206195132559.png" alt="image-20211206195132559" style="zoom: 67%;" /><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¼•å…¥ spring çš„åŸºç¡€jaråŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206195556241.png" alt="image-20211206195556241"></p><p>ç¼–å†™ä¸€ä¸ªç±» User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addæ–¹æ³•....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨srcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªspring é…ç½®æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206200223578.png" alt="image-20211206200223578"></p><p>é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®userå¯¹è±¡åˆ›å»º--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±» test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line"><span class="comment">//        è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        user.add();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><h3 id="IOCæ¦‚å¿µå’Œåº•å±‚åŸç†"><a href="#IOCæ¦‚å¿µå’Œåº•å±‚åŸç†" class="headerlink" title="IOCæ¦‚å¿µå’Œåº•å±‚åŸç†"></a>IOCæ¦‚å¿µå’Œåº•å±‚åŸç†</h3><h4 id="ä»€ä¹ˆæ˜¯IOC"><a href="#ä»€ä¹ˆæ˜¯IOC" class="headerlink" title="ä»€ä¹ˆæ˜¯IOC"></a>ä»€ä¹ˆæ˜¯IOC</h4><p>ï¼ˆInversion of Control&#x2F;DependencyInjection(Ioc&#x2F;DI)ï¼‰<br>æ˜¯æ§åˆ¶åè½¬ï¼Œå³å°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨äº¤ç»™ spring ç®¡ç†</p><p>IOCçš„ä½œç”¨æ˜¯é™ä½è€¦åˆåº¦</p><p>spring5å…¥é—¨æ¡ˆä¾‹å°±æ˜¯å¯¹IOCçš„ä½¿ç”¨</p><h4 id="IOCçš„åº•å±‚åŸç†"><a href="#IOCçš„åº•å±‚åŸç†" class="headerlink" title="IOCçš„åº•å±‚åŸç†"></a>IOCçš„åº•å±‚åŸç†</h4><p>1ã€ç”¨åˆ°çš„æŠ€æœ¯ï¼šxmlè§£æï¼Œå·¥å‚æ¨¡å¼ï¼Œåå°„</p><p>2ã€ç”»å›¾è®²è§£IOCåº•å±‚åŸç†</p><p>å·¥å‚æ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206203743410.png" alt="image-20211206203743410"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206204212635.png" alt="image-20211206204212635"></p><p>3ã€IOCå®¹å™¨æ¥å£</p><ul><li><p>IOCæ€æƒ³åŸºäºIOCå®¹å™¨å®Œæˆï¼ŒIOCå®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚</p></li><li><p>springæä¾›IOCå®¹å™¨å®ç°ä¸¤ç§æ–¹å¼ï¼ˆä¸¤ä¸ªæ¥å£ï¼‰</p><p>BeanFactory ï¼šIOCå®¹å™¨åŸºæœ¬å®ç°ï¼Œä¾›springå†…éƒ¨ä½¿ç”¨ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨</p><p>*ç‰¹ç‚¹ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–ï¼ˆä½¿ç”¨ï¼‰å¯¹è±¡æ—¶å€™æ‰å»åˆ›å»º</p><p>ApplicationContextï¼šBeanFactoryæ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¾›å¼€å‘äººå‘˜ä½¿ç”¨</p><p>*ç‰¹ç‚¹ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠé…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º</p></li></ul><h2 id="IOCæ“ä½œBeanç®¡ç†"><a href="#IOCæ“ä½œBeanç®¡ç†" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†"></a>IOCæ“ä½œBeanç®¡ç†</h2><h3 id="ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰"><a href="#ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰"></a>ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰</h3><p>1ã€Beanç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ</p><ul><li>springåˆ›å»ºå¯¹è±¡</li><li>springå±æ€§æ³¨å…¥å±æ€§</li></ul><p>2ã€Beanç®¡ç†æ“ä½œçš„ä¸¤ç§æ–¹å¼</p><ul><li>åŸºäºxmlæ–¹å¼</li><li>åŸºäºæ³¨è§£æ–¹å¼</li></ul><h3 id="åŸºäºxmlæ–¹å¼çš„beanç®¡ç†"><a href="#åŸºäºxmlæ–¹å¼çš„beanç®¡ç†" class="headerlink" title="åŸºäºxmlæ–¹å¼çš„beanç®¡ç†"></a>åŸºäºxmlæ–¹å¼çš„beanç®¡ç†</h3><h4 id="1ã€springå¯¹è±¡åˆ›å»º"><a href="#1ã€springå¯¹è±¡åˆ›å»º" class="headerlink" title="1ã€springå¯¹è±¡åˆ›å»º"></a>1ã€springå¯¹è±¡åˆ›å»º</h4><ul><li><p>xmlé…ç½®ï¼š</p><p>ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨beanæ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”çš„å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»º</p><p>ï¼ˆ2ï¼‰åœ¨ beanæ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œä»‹ç»å¸¸ç”¨çš„å±æ€§ï¼š</p><p>â€‹idï¼šå”¯ä¸€æ ‡è¯†ç¬¦</p><p>â€‹class: ç±»çš„å…¨ç±»åï¼ˆåŒ…ç±»è·¯å¾„ï¼‰</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--é…ç½®userå¯¹è±¡åˆ›å»º--&gt;</span><br><span class="line">    &lt;bean id=&quot;user&quot; class=&quot;com.izumi.spring5.User&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure><p>â€‹ï¼ˆ3ï¼‰åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ•°æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»º</p><h4 id="2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§"><a href="#2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§" class="headerlink" title="2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§"></a>2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§</h4><p>ï¼ˆ1ï¼‰DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§</p><p>â€‹å®ƒå’ŒIOCæ˜¯ä»€ä¹ˆå…³ç³»ï¼ŸDIæ˜¯IOCå®¹å™¨æ“ä½œBeanç®¡ç†å±æ€§æ³¨å…¥çš„å…·ä½“å®ç°</p><p>â€‹å…ˆåˆ›å»ºå¯¹è±¡ï¼Œå†æ³¨å…¥å±æ€§</p><h5 id="ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡-set-æ–¹æ³•æ³¨å…¥"><a href="#ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡-set-æ–¹æ³•æ³¨å…¥" class="headerlink" title="ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ set æ–¹æ³•æ³¨å…¥"></a>ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ set æ–¹æ³•æ³¨å…¥</h5><p>â€‹é€šè¿‡ set æ–¹æ³•æ³¨å…¥</p><p>ï¼ˆ1ï¼‰åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„ set æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸¤ç§æ–¹å¼å®ç° å±æ€§ æ³¨å…¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">setAuthor</span><span class="params">(String author)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p><p>åœ¨springé…ç½®æ–‡ä»¶é…ç½®å¯¹è±¡ï¼Œé…ç½®å±æ€§æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Book&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åŸºäºxmlæ–¹å¼çš„å±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">            property å®Œæˆå±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">            name ç±»é‡Œé¢ å±æ€§åç§°</span></span><br><span class="line"><span class="comment">            value :ä¸ºè¯¥å±æ€§èµ‹çš„å€¼</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™½å¤œè¡Œ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸œé‡åœ­å¾&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒç§æ³¨å…¥æ–¹å¼-é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥"><a href="#ç¬¬äºŒç§æ³¨å…¥æ–¹å¼-é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥" class="headerlink" title="ç¬¬äºŒç§æ³¨å…¥æ–¹å¼  é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥"></a>ç¬¬äºŒç§æ³¨å…¥æ–¹å¼  é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥</h5><p>åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥å±æ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String name, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ springé…ç½®æ–‡ä»¶ä¸­é…ç½® æœ‰å‚æ„é€ æ³¨å…¥å±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”µè„‘&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;USA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="påç§°ç©ºé—´æ³¨å…¥-äº†è§£-ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥"><a href="#påç§°ç©ºé—´æ³¨å…¥-äº†è§£-ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥" class="headerlink" title="påç§°ç©ºé—´æ³¨å…¥(äº†è§£ ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥)"></a>påç§°ç©ºé—´æ³¨å…¥(äº†è§£ ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥)</h5><p>ä¸»è¦æ˜¯ç®€åŒ–åŸºäº xmlé…ç½®æ–¹å¼æ³¨å…¥</p><p>â€‹1ã€åœ¨xmlé…ç½®ä¸­åŠ å…¥påç§°ç©ºé—´</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211207213643088.png" alt="image-20211207213643088" style="zoom: 80%;" /><p>â€‹2ã€è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨beanæ ‡ç­¾é‡Œé¢æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ä½¿ç”¨påç§°ç©ºé—´æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Dog&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;å°å½©&quot;</span> <span class="attr">p:color</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§"><a href="#æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§" class="headerlink" title="æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§"></a>æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§</h5><ul><li><p>nullå€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        ä¸ºå±æ€§èµ‹ç©ºå€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ2ï¼‰å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</span><br><span class="line"><span class="comment">&lt;!--å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</span></span><br><span class="line"><span class="comment"> 1 æŠŠ&lt;&gt;è¿›è¡Œè½¬ä¹‰ &amp;lt; &amp;gt;</span></span><br><span class="line"><span class="comment"> 2 æŠŠå¸¦ç‰¹æ®Šç¬¦å·å†…å®¹å†™åˆ° CDATA</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;å—äº¬&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h5 id="å¤–éƒ¨bean"><a href="#å¤–éƒ¨bean" class="headerlink" title="å¤–éƒ¨bean"></a>å¤–éƒ¨bean</h5><p>åˆ›å»ºä¸¤ä¸ªç±»serviec å’Œ dao</p><p>åœ¨serviceè°ƒç”¨daoé‡Œé¢çš„æ–¹æ³•</p><p>åœ¨springä¸­è¿›è¡Œé…ç½®</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»º dao å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="comment">//æä¾›setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service addæ–¹æ³•....&quot;</span>);</span><br><span class="line">        userDao.daoTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xmlé…ç½®</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åŸºäºxmlæ³¨å…¥å±æ€§-å¤–éƒ¨bean--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æŠŠ serviceå¯¹è±¡å’Œ daoå¯¹è±¡ éƒ½åˆ›å»ºå¥½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨å…¥ userDao å¯¹è±¡</span></span><br><span class="line"><span class="comment">        name å±æ€§ï¼šç±»é‡Œé¢å±æ€§åç§°</span></span><br><span class="line"><span class="comment">        ref å±æ€§ï¼šåˆ›å»º userDao å¯¹è±¡ bean æ ‡ç­¾ id å€¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;UserDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å†…éƒ¨bean"><a href="#å†…éƒ¨bean" class="headerlink" title="å†…éƒ¨bean"></a>å†…éƒ¨bean</h5><p>å†…éƒ¨beanï¼š å¦‚ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨å’Œå‘˜å·¥</p><pre><code>  ä¸€ä¸ªéƒ¨é—¨æœ‰å¤šåå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨                      éƒ¨é—¨æ˜¯ä¸€ï¼Œå‘˜å·¥æ˜¯å¤š  </code></pre><p>æ–°å»ºEmpç±»å’ŒDeptç±»</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘˜å·¥ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šå±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="comment">//å¯¹è±¡å±æ€§,ä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨</span></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEname</span><span class="params">(String ename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éƒ¨é—¨ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  String dname;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ å†…éƒ¨beanæ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="çº§è”èµ‹å€¼"><a href="#çº§è”èµ‹å€¼" class="headerlink" title="çº§è”èµ‹å€¼"></a>çº§è”èµ‹å€¼</h5><p>ç¬¬ä¸€ç§å†™æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³•ï¼š(å’Œæ³¨å…¥å¤–éƒ¨beanç±»ä¼¼)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿæˆdeptçš„getæ–¹æ³• </span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">getDept</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dept;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>xmlé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³•ï¼š(å’Œæ³¨å…¥å¤–éƒ¨beanç±»ä¼¼)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬äºŒç§å†™æ³•ï¼š--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æŠ€æœ¯éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯UserServiceä¸­è°ƒç”¨UserDaoçš„setæ³¨å…¥è¦†ç›–æ‰UserDaoä¹‹å‰è°ƒç”¨setæ³¨å…¥çš„ç»“æœã€‚</p><h5 id="æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§"><a href="#æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§" class="headerlink" title="æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§"></a>æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§</h5><p>1ã€æ³¨å…¥æ•°ç»„ç±»å‹å±æ€§</p><p>2ã€æ³¨å…¥Listç±»å‹å±æ€§</p><p>3ã€æ³¨å…¥Mapç±»å‹å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span> &#123;</span><br><span class="line">    <span class="comment">//æ•°ç»„ç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String[] courses;</span><br><span class="line">    <span class="comment">//Listç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; lists;</span><br><span class="line">    <span class="comment">//Mapç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; maps;</span><br><span class="line">    <span class="comment">//Setç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sets;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(String[] courses)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lists = list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSet</span><span class="params">(Set&lt;String&gt; set)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sets = set;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Stu&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;courses=&quot;</span> + Arrays.toString(courses) +</span><br><span class="line">                <span class="string">&quot;, lists=&quot;</span> + lists +</span><br><span class="line">                <span class="string">&quot;, maps=&quot;</span> + maps +</span><br><span class="line">                <span class="string">&quot;, sets=&quot;</span> + sets +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springé…ç½®æ–‡ä»¶é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>javaåŸºç¡€<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>javaWeb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        listå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¹¿å·<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ·±åœ³<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        mapå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;CPP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    setå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Mysql<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Oracle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Tomcat<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€åœ¨é›†åˆé‡Œé¢è®¾ç½®å¯¹è±¡ç±»å‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        é›†åˆå­˜æ”¾å¯¹è±¡çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;courese1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;courese2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å¤–éƒ¨beanå®šä¹‰å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;courese1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring5æ¡†æ¶è¯¾ç¨‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;courese2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;MyBatisæ¡†æ¶è¯¾ç¨‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5ã€æŠŠé›†åˆæ³¨å…¥éƒ¨åˆ†æå–å‡ºæ¥</p><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥utilåç§°ç©ºé—´</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211208202204135.png" alt="image-20211208202204135" style="zoom:80%;" /><p>ä½¿ç”¨utilæ ‡ç­¾å®Œæˆlisté›†åˆæ³¨å…¥æå–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä½¿ç”¨utilæ ‡ç­¾å®Œæˆ    æå–listé›†åˆå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>ç™½å¤œè¡Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>å«Œç–‘äººxçš„çŒ®èº«<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>è§£å¿§æ‚è´§åº—<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æå–listé›†åˆç±»å‹æ³¨å…¥å±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æå–listé›†åˆç±»å‹æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h4><h5 id="åŸºæœ¬ä»‹ç»ï¼š"><a href="#åŸºæœ¬ä»‹ç»ï¼š" class="headerlink" title="åŸºæœ¬ä»‹ç»ï¼š"></a>åŸºæœ¬ä»‹ç»ï¼š</h5><p>spring æœ‰ä¸¤ç§ç±»å‹beanï¼Œä¸€ç§æ˜¯æ™®é€šbeanï¼Œå¦ä¸€ç§æ˜¯å·¥å‚beanï¼ˆFactoryBeanï¼‰</p><p>æ™®é€šbeanï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»å‹å°±æ˜¯è¿”å›ç±»å‹</p><p>å·¥å‚beanï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»å‹å¯ä»¥å’Œè¿”å›çš„ç±»å‹ä¸ä¸€è‡´</p><h5 id="å¦‚ä½•å®ç°-åˆ›å»ºå·¥å‚bean"><a href="#å¦‚ä½•å®ç°-åˆ›å»ºå·¥å‚bean" class="headerlink" title="å¦‚ä½•å®ç° åˆ›å»ºå·¥å‚bean"></a>å¦‚ä½•å®ç° åˆ›å»ºå·¥å‚bean</h5><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä½œä¸ºå·¥å‚beanï¼Œå®ç°æ¥å£ FactoryBeanã€‚</p><p>ç¬¬äºŒéƒ¨ï¼šå®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•å®šä¹‰è¿”å›çš„beanç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Course&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Course <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Course</span>();</span><br><span class="line">        course.setCname(<span class="string">&quot;kksk&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        é…ç½®å·¥å‚bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.factorybean.MyFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æ­¤æ—¶è¿”å›çš„ç±»å‹æ˜¯ Course</p><h4 id="beanä½œç”¨åŸŸ"><a href="#beanä½œç”¨åŸŸ" class="headerlink" title="beanä½œç”¨åŸŸ"></a>beanä½œç”¨åŸŸ</h4><p>1ã€åœ¨springé‡Œé¢ï¼Œè®¾ç½®åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p><p>2ã€<strong>åœ¨springé‡Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å•å®ä¾‹</strong></p><h5 id="å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹"><a href="#å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹" class="headerlink" title="å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹"></a>å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹</h5><p>åœ¨springé…ç½®æ–‡ä»¶ beanæ ‡ç­¾é‡Œé¢æœ‰å±æ€§ scope å¯ä»¥è®¾ç½®å•å®ä¾‹æˆ–å¤šå®ä¾‹</p><p>scope&#x3D;â€singletonâ€ è¡¨ç¤ºå•å®ä¾‹ï¼ˆé»˜è®¤å€¼ï¼‰ scope &#x3D;â€prototypeâ€ è¡¨ç¤ºå¤šå®ä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    scopeå±æ€§è®¾ç½® åˆ›å»ºçš„å¯¹è±¡æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹    singletonè¡¨ç¤ºå•å®ä¾‹  prototypeè¡¨ç¤ºå¤šå®ä¾‹--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Book&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="singletonå’Œ-prototypeçš„åŒºåˆ«"><a href="#singletonå’Œ-prototypeçš„åŒºåˆ«" class="headerlink" title="singletonå’Œ prototypeçš„åŒºåˆ«"></a>singletonå’Œ prototypeçš„åŒºåˆ«</h5><p>ç¬¬ä¸€ï¼šsingleton å•å®ä¾‹ï¼Œprototype å¤šå®ä¾‹</p><p>ç¬¬äºŒï¼šè®¾ç½®scope å€¼æ˜¯singleton çš„æ—¶å€™ï¼ŒåŠ è½½springé…ç½®æ–‡ä»¶æ—¶å°±åˆ›å»ºå¯¹è±¡</p><p>â€‹è®¾ç½® scopeå€¼æ—¶prototypeçš„æ—¶å€™ï¼Œä¸æ˜¯åœ¨åŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™åˆ›å»º å¯¹è±¡,</p><p>â€‹<u>å¯¹è±¡åœ¨è°ƒç”¨ getBean æ–¹æ³•æ—¶æ‰åˆ›å»º</u></p><h4 id="beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beançš„ç”Ÿå‘½å‘¨æœŸ"></a>beançš„ç”Ÿå‘½å‘¨æœŸ</h4><h5 id="ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ"><a href="#ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ"></a>ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ</h5><p>ä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹</p><h5 id="beanç”Ÿå‘½å‘¨æœŸ"><a href="#beanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beanç”Ÿå‘½å‘¨æœŸ"></a>beanç”Ÿå‘½å‘¨æœŸ</h5><p>1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹ï¼ˆæ— å‚æ„é€ ï¼‰</p><p>2ï¼‰ä¸ºbeançš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»–bean çš„å¼•ç”¨ ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰</p><p>3ï¼‰è°ƒç”¨beançš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p>4ï¼‰beanå°±å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>5ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨bean çš„é”€æ¯æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><h5 id="æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ"><a href="#æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ"></a>æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line"> <span class="comment">//æ— å‚æ•°æ„é€ </span></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ•°æ„é€ åˆ›å»º bean å®ä¾‹&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">private</span> String oname;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOname</span><span class="params">(String oname)</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>.oname = oname;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬äºŒæ­¥ è°ƒç”¨ set æ–¹æ³•è®¾ç½®å±æ€§å€¼&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–çš„æ–¹æ³•</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–çš„æ–¹æ³•&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//åˆ›å»ºæ‰§è¡Œçš„é”€æ¯çš„æ–¹æ³•</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯çš„æ–¹æ³•&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;bean id=<span class="string">&quot;orders&quot;</span> class=<span class="string">&quot;com.atguigu.spring5.bean.Orders&quot;</span> initmethod=<span class="string">&quot;initMethod&quot;</span> destroy-method=<span class="string">&quot;destroyMethod&quot;</span>&gt;</span><br><span class="line"> &lt;property name=<span class="string">&quot;oname&quot;</span> value=<span class="string">&quot;æ‰‹æœº&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">    </span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBean4</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// ApplicationContext context =</span></span><br><span class="line"><span class="comment">// new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);</span></span><br><span class="line">    <span class="comment">//ClassPathXmlApplicationContextæ˜¯ ApplicationContextæ¥å£çš„å®ç°ç±»</span></span><br><span class="line"> <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line"> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line"> <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬å››æ­¥ è·å–åˆ›å»º bean å®ä¾‹å¯¹è±¡&quot;</span>);</span><br><span class="line"> System.out.println(orders);</span><br><span class="line"> <span class="comment">//æ‰‹åŠ¨è®© bean å®ä¾‹é”€æ¯</span></span><br><span class="line"> context.close();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211221095515906.png" alt="image-20211221095515906" style="zoom:67%;" />-</p><h5 id="4ã€bean-çš„åç½®å¤„ç†å™¨ï¼Œbean-ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥"><a href="#4ã€bean-çš„åç½®å¤„ç†å™¨ï¼Œbean-ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥" class="headerlink" title="4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥"></a>4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥</h5><p>ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰</p><p>ï¼ˆ2ï¼‰ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰</p><p><u>ï¼ˆ3ï¼‰æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessBeforeInitialization</u></p><p>ï¼ˆ4ï¼‰è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p><u>ï¼ˆ5ï¼‰æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessAfterInitialization</u></p><p>ï¼ˆ6ï¼‰bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>ï¼ˆ7ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><p>åˆ›å»ºç±» å®ç° æ¥å£BeanPostProcessorï¼Œåˆ›å»ºåç½®å¤„ç†å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPost</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®åç½®å¤„ç†å™¨</p><p><code>&lt;bean id=&quot;myBeanPost&quot; class=&quot;com.izumi.spring5.bean.MyBeanPost&quot;&gt;&lt;/bean&gt;</code></p><h4 id="xmlè‡ªåŠ¨è£…é…"><a href="#xmlè‡ªåŠ¨è£…é…" class="headerlink" title="xmlè‡ªåŠ¨è£…é…"></a>xmlè‡ªåŠ¨è£…é…</h4><p>å®é™…å¼€å‘ä¸­ä¸»è¦ä½¿ç”¨æ³¨è§£æ–¹æ³•ï¼Œxmlæ–¹å¼ä½¿ç”¨è¾ƒå°‘</p><h5 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><a href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"></a>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</h5><p>ï¼ˆ1ï¼‰æ ¹æ®æŒ‡å®šè£…é…è§„åˆ™ï¼ˆå±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹ï¼‰ï¼ŒSpring è‡ªåŠ¨å°†åŒ¹é…çš„å±æ€§å€¼è¿›è¡Œæ³¨å…¥</p><h5 id="æ¼”ç¤ºè‡ªåŠ¨è£…é…"><a href="#æ¼”ç¤ºè‡ªåŠ¨è£…é…" class="headerlink" title="æ¼”ç¤ºè‡ªåŠ¨è£…é…"></a>æ¼”ç¤ºè‡ªåŠ¨è£…é…</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰æ ¹æ®å±æ€§åç§°è‡ªåŠ¨æ³¨å…¥</span><br><span class="line"><span class="comment">&lt;!--å®ç°è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> bean æ ‡ç­¾å±æ€§ autowireï¼Œé…ç½®è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment"> byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼ bean çš„ id å€¼å’Œç±»å±æ€§åç§°ä¸€æ ·</span></span><br><span class="line"><span class="comment"> byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">ï¼ˆ2ï¼‰æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨æ³¨å…¥</span><br><span class="line"><span class="comment">&lt;!--å®ç°è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> bean æ ‡ç­¾å±æ€§ autowireï¼Œé…ç½®è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment"> byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼ bean çš„ id å€¼å’Œç±»å±æ€§åç§°ä¸€æ ·</span></span><br><span class="line"><span class="comment"> byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶"><a href="#xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶" class="headerlink" title="xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶"></a>xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶</h4><h5 id="1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯"><a href="#1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯" class="headerlink" title="1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯"></a>1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯</h5><p>1ï¼‰é…ç½®å¾·é²ä¼Šè¿æ¥æ± </p><p>2ï¼‰å¼•å…¥å¾·é²ä¼ŠjaråŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zzt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± "><a href="#å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± "></a>å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± </h5><p>1ï¼‰åˆ›å»º å¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œpropertiesæ ¼å¼ï¼Œå†™å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><p>æ³¨æ„ï¼šåç§°æœ€å¥½ä½¿ç”¨ prop. è¿™æ ·çš„æ ¼å¼ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å†²çª</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prop.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">prop.url</span>=<span class="string">jdbc:mysql://localhost:3306/userDb</span></span><br><span class="line"><span class="attr">prop.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">prop.passowrd</span>=<span class="string">zzt</span></span><br></pre></td></tr></table></figure><p>2)æŠŠå¤–éƒ¨çš„propertieså±æ€§æ–‡ä»¶å¼•å…¥åˆ°springé…ç½®æ–‡ä»¶ä¸­</p><p>*å¼•å…¥ contextåç§°ç©ºé—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=</span></span><br><span class="line"><span class="tag">               <span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">               http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æ ‡ç­¾å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    classpathå°±æ˜¯é¡¹ç›®çš„srcæ–‡ä»¶å¤¹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®è¿æ¥æ± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†"><a href="#åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†"></a>åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†</h3><h4 id="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</h4><p>1ï¼‰æ³¨è§£æ˜¯ä»£ç ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°ï¼ˆå±æ€§å&#x3D;å±æ€§ï¼Œå±æ€§å&#x3D;å±æ€§â€¦ï¼‰</p><p>2ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£å¯ä»¥åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢</p><p>3ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œå¯ä»¥ç®€åŒ–xmlé…ç½®</p><h4 id="springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£"><a href="#springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£" class="headerlink" title="springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£"></a>springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£</h4><p>@Componenté€šç”¨</p><p>@Serviceä¸€èˆ¬ç”¨åœ¨ serviceå±‚</p><p>@Controllerä¸€èˆ¬ç”¨åœ¨webå±‚</p><p>@Repositoryä¸€èˆ¬ç”¨åœ¨daoå±‚</p><p>ä»¥ä¸Šå››ç§æ³¨è§£åŠŸèƒ½éƒ½ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºbeanå®ä¾‹</p><h4 id="åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹"><a href="#åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹"></a>åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹</h4><p>1)å¼•å…¥ä¾èµ–</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211221193003113.png" alt="image-20211221193003113">-</p><p>2)å¼€å¯ç»„ä»¶æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  1.å®šä¹‰contextåç§°ç©ºé—´</span></span><br><span class="line"><span class="comment">      2.é…ç½®springç»„ä»¶æ‰«æï¼Œ</span></span><br><span class="line"><span class="comment">        base-package å±æ€§å€¼ä¸ºæ‰«æçš„åŒ…åï¼Œè‹¥æœ‰å¤šä¸ªåŒ…å¯ä»¥ä½¿ç”¨é€—å·é—´éš”æˆ–è€…æ‰«æå®ƒä»¬çš„ä¸Šå±‚åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5.dao,com.izumi.spring5.service&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨æ³¨è§£é‡Œé¢ value å±æ€§å€¼å¯ä»¥çœç•¥ä¸å†™</span></span><br><span class="line"><span class="comment">//é»˜è®¤å€¼æ˜¯ç±»åç§°ï¼Œé¦–å­—æ¯å°å†™</span></span><br><span class="line"><span class="comment">//UserService --userService</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">m1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m1æ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚"><a href="#ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚" class="headerlink" title="ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚"></a>ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--  å¼€å¯ç»„ä»¶æ‰«æçš„ç»†èŠ‚ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç¤ºä¾‹1</span></span><br><span class="line"><span class="comment">        use-default-filters=&quot;false&quot;è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤filterï¼Œè‡ªå·±é…ç½®filter</span></span><br><span class="line"><span class="comment">        context:include-filterè®¾ç½®æ‰«æå“ªäº›å†…å®¹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ç¤ºä¾‹2</span></span><br><span class="line"><span class="comment">       context:exclude-filter è¡¨ç¤ºè®¾ç½®å“ªäº›å†…å®¹ä¸æ‰«æ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span>  <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥"><a href="#åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥"></a>åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥</h4><ol><li><p>@Autowired : æ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…</p><p>ç¬¬ä¸€æ­¥ æŠŠ service å’Œ dao å¯¹è±¡åˆ›å»ºï¼Œåœ¨ service å’Œ dao ç±»æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£</p><p>ç¬¬äºŒæ­¥ åœ¨ service æ³¨å…¥ dao å¯¹è±¡ï¼Œåœ¨ service ç±»æ·»åŠ  dao ç±»å‹å±æ€§ï¼Œåœ¨å±æ€§ä¸Šé¢ä½¿ç”¨æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span>  <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰daoç±»å‹å±æ€§</span></span><br><span class="line">    <span class="comment">//ä¸éœ€è¦è®¾ç½® setæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">m1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m1æ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m2æ–¹æ³•&quot;</span>+userDao);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>@Qualifier : æ ¹æ®å±æ€§åç§°è¿›è¡Œæ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰daoç±»å‹å±æ€§</span></span><br><span class="line">    <span class="comment">//ä¸éœ€è¦è®¾ç½® setæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥</span></span><br><span class="line">    <span class="comment">//æ­¤æ—¶UserDaoå®ç°ç±»æœ‰ä¸¤ä¸ªï¼Œæ‰€ä»¥ä»…æ ¹æ®ç±»å‹æ³¨å…¥ä¸çŸ¥é“æ‰¾å“ªä¸ªå®ç°ç±»è€ŒæŠ¥é”™</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;userDaoImpl02&quot;)</span>     <span class="comment">//è¯¥æ³¨è§£å¿…é¡»å’Œ @Autowiredç»‘å®šä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure></li><li><p>@Resourse : å¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œä¹Ÿå¯ä»¥æ ¹æ®åç§°æ³¨å…¥</p><p>ä½†è¯¥æ³¨è§£ä¸æ˜¯springé‡Œé¢æä¾›çš„ï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//@Resourseæ³¨è§£æ¼”ç¤º</span></span><br><span class="line"><span class="comment">// @Resource //æ³¨å…¥æ ¹æ®ç±»å‹</span></span><br><span class="line"> <span class="meta">@Resource(name = &quot;userDaoImpl02&quot;)</span> <span class="comment">//æ ¹æ®åç§°æ³¨å…¥</span></span><br><span class="line"> <span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure></li><li><p>@Value : æ³¨å…¥æ™®é€šç±»å‹å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¼”ç¤º @Valueçš„ä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Value(value = &quot;ä½ çš„åå­—&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure></li></ol><h4 id="å®Œå…¨æ³¨è§£å¼€å‘"><a href="#å®Œå…¨æ³¨è§£å¼€å‘" class="headerlink" title="å®Œå…¨æ³¨è§£å¼€å‘"></a>å®Œå…¨æ³¨è§£å¼€å‘</h4><p>1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£xmlé…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£ xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.izumi.spring5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ï¼‰æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDemo2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">        System.out.println(userService);</span><br><span class="line">        userService.m1();</span><br><span class="line">        userService.m2();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Aop"><a href="#Aop" class="headerlink" title="Aop"></a>Aop</h2><h3 id="ä»€ä¹ˆæ˜¯aop"><a href="#ä»€ä¹ˆæ˜¯aop" class="headerlink" title="ä»€ä¹ˆæ˜¯aop"></a>ä»€ä¹ˆæ˜¯aop</h3><p>1ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆæ–¹é¢ï¼‰ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾— ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p>2ã€é€šä¿—æè¿°ï¼Œä¸é€šè¿‡ä¿®æ”¹æºä»£ç çš„æ–¹å¼ï¼Œåœ¨ç¨‹åºä¸»å¹²åŠŸèƒ½ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½</p><p>3ã€ä½¿ç”¨ç™»å½•ä¾‹å­è¯´æ˜aop</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222103911387.png" alt="image-20211222103911387"></p><h3 id="aopåº•å±‚åŸç†"><a href="#aopåº•å±‚åŸç†" class="headerlink" title="aopåº•å±‚åŸç†"></a>aopåº•å±‚åŸç†</h3><p>1ï¼‰æœ‰ä¸¤ç§æƒ…å†µåŠ¨æ€ä»£ç†</p><ul><li><p>ç¬¬ä¸€ç§ï¼Œæœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨jdkåŠ¨æ€ä»£ç†</p><p><strong>å®ç°ï¼šåˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</strong></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222110406990.png" alt="image-20211222110406990"></p><ul><li><p>ç¬¬äºŒç§ï¼Œæ²¡æœ‰æ¥å£çš„æƒ…å†µï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†</p><p><strong>å®ç°ï¼šåˆ›å»ºå­ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</strong></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222110627667.png" alt="image-20211222110627667"></p><h3 id="AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰"><a href="#AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰" class="headerlink" title="AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰"></a>AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰</h3><ul><li><p>ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨ Proxy ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222111453446.png" alt="image-20211222111453446"></p><p>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><p>ç¬¬ä¸€å‚æ•°ï¼Œç±»åŠ è½½å™¨</p><p>ç¬¬äºŒå‚æ•°ï¼Œå¢å¼ºæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œè¿™ä¸ªç±»å®ç°çš„æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæ¥å£</p><p>ç¬¬ä¸‰å‚æ•°ï¼Œå®ç°è¿™ä¸ªæ¥å£ InvocationHandlerï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå†™å¢å¼ºçš„éƒ¨åˆ†</p></li><li><p>ç¼–å†™jdkåŠ¨æ€ä»£ç†ä»£ç </p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jdkçš„åŠ¨æ€ä»£ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¢«ä»£ç†ç±»</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDaoProxy</span> <span class="operator">=</span>(UserDao) Proxy.newProxyInstance(UserProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="type">int</span> <span class="variable">add</span> <span class="operator">=</span> userDaoProxy.add(<span class="number">10</span>, <span class="number">12</span>);</span><br><span class="line">        System.out.println(add);</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> userDaoProxy.id(<span class="string">&quot;1002&quot;</span>);</span><br><span class="line">        System.out.println(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä»£ç†å¯¹è±¡ä»£ç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¢å¼ºçš„åŠŸèƒ½é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> method.getName();</span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;æ–¹æ³•è°ƒç”¨å‰...&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">methodInvoke</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;æ–¹æ³•è°ƒç”¨å...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> methodInvoke;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Aopçš„æœ¯è¯­"><a href="#Aopçš„æœ¯è¯­" class="headerlink" title="Aopçš„æœ¯è¯­"></a>Aopçš„æœ¯è¯­</h3><p>1ã€è¿æ¥ç‚¹</p><p>â€‹ç±»å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±ç§°ä¸ºè¿æ¥ç‚¹</p><p>2ã€åˆ‡å…¥ç‚¹</p><p>â€‹å®é™…è¢«çœŸæ­£å¢å¼ºçš„æ–¹æ³•ï¼Œç§°ä¸ºåˆ‡å…¥ç‚¹</p><p>3ã€é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</p><p>â€‹ï¼ˆ1ï¼‰å®ç°å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥&#x2F;å¢å¼º</p><p>â€‹ï¼ˆ2ï¼‰é€šçŸ¥æœ‰å¤šç§ç±»å‹</p><p>â€‹å‰ç½®é€šçŸ¥</p><p>â€‹åç½®é€šçŸ¥</p><p>â€‹ç¯ç»•é€šçŸ¥</p><p>â€‹å¼‚å¸¸é€šçŸ¥</p><p>â€‹æœ€ç»ˆé€šçŸ¥ï¼ˆç±»ä¼¼äº tryâ€”catchâ€”finallyçš„finallyï¼‰</p><p>4ã€åˆ‡é¢</p><p>â€‹æŠŠé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹</p><h3 id="AOPæ“ä½œå‡†å¤‡ï¼š"><a href="#AOPæ“ä½œå‡†å¤‡ï¼š" class="headerlink" title="AOPæ“ä½œå‡†å¤‡ï¼š"></a>AOPæ“ä½œå‡†å¤‡ï¼š</h3><p>1ã€springæ¡†æ¶ä¸€èˆ¬æ˜¯åŸºäº<strong>AspectJ</strong>æ¥å®ç°AOPæ“ä½œ</p><p>â€‹é‚£ä¹ˆ ä»€ä¹ˆæ˜¯ AspectJï¼Ÿ</p><p>â€‹AspectJä¸æ˜¯springæ¡†æ¶çš„ç»„æˆéƒ¨åˆ†ï¼Œè€Œæ˜¯ç‹¬ç«‹çš„aopæ¡†æ¶ï¼Œä¸€èˆ¬æŠŠspringå’ŒAspectJä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡Œaopæ“ä½œã€‚</p><p>2ã€åŸºäºAspectJæ“ä½œAop</p><ul><li>åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼å®ç°</li><li>åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä¸€èˆ¬ä½¿ç”¨æ³¨è§£æ–¹å¼ï¼‰</li></ul><p>3ã€å¼•å…¥ç›¸å…³jaråŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220103185843893.png" alt="image-20220103185843893"></p><p>4ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p><p>â€‹1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹2ï¼‰è¯­æ³•ç»“æ„ï¼š<code>excution([æƒé™ä¿®é¥°ç¬¦][è¿”å›ç±»å‹][ç±»å…¨è·¯å¾„][æ–¹æ³•å][å‚æ•°åˆ—è¡¨])</code></p><p>â€‹ä¸¾ä¾‹1ï¼š com.izumi.spring5.dao.BookDaoçš„addæ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹<code>excution(* com.izumi.spring5.dao.BookDao.add(..))</code> è¿™é‡Œè¿”å›ç±»å‹çœç•¥äº†</p><p>â€‹ä¸¾ä¾‹2ï¼š com.izumi.spring5.dao.BookDaoçš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹<code>excution(* com.izumi.spring5.dao.BookDao.*(..))</code></p><p>â€‹ä¸¾ä¾‹3ï¼š com.izumi.spring5.daoçš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹<code>excution(* com.izumi.spring5.dao.*.*(..))</code></p><h3 id="Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼"><a href="#Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼" class="headerlink" title="Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼"></a>Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼</h3><ol><li><p>åˆ›å»ºè¢«å¢å¼ºç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¢«å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addæ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¢å¼ºç±»ï¼Œåœ¨å¢å¼ºç±»é‡Œé¢ç¼–å†™ä¸åŒæ–¹æ³•ï¼Œä¸åŒçš„æ–¹æ³•ä»£è¡¨ä¸åŒçš„é€šçŸ¥ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿›è¡Œé€šçŸ¥çš„é…ç½®</p><ol><li><p>åœ¨springæ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¯¹åº”çš„åç§°ç©ºé—´ï¼Œå¹¶å¼€å¯æ³¨è§£æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯springæ³¨è§£æ‰«æ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5.aopannotation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>ä½¿ç”¨æ³¨è§£åˆ›å»ºè¢«å¢å¼ºç±»å’Œå¢å¼ºç±»çš„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ  @Aspect</p></li><li><p>åœ¨springé…ç½®æ–‡ä»¶å¼€å¯ç”Ÿæˆä»£ç†å¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯aspectç”Ÿæˆä»£ç†å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ä¸åŒç±»å‹çš„é€šçŸ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥  å‡ºç°å¼‚å¸¸å°±ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after()..............&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€ç»ˆé€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰    ä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•ä¹‹å‰....&quot;</span>);</span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•ä¹‹å....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥  å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–</span></span><br><span class="line">    <span class="meta">@Pointcut(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;pointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>æœ‰å¤šä¸ªå¢å¼ºç±»å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºä¼˜å…ˆçº§</p><p>ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Order(æ•°å­—ç±»å‹å€¼)ï¼Œï¼ˆä»0å¼€å§‹ï¼‰æ•°å­—ç±»å‹å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span> &#123;</span><br></pre></td></tr></table></figure></li><li><p>å®Œå…¨æ³¨è§£å¼€å‘</p><p>åˆ›å»ºé…ç½®ç±»ï¼Œä¸éœ€è¦åˆ›å»ºé…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.izumi.spring5&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAop</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶-ç”¨çš„è¾ƒå°‘"><a href="#Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶-ç”¨çš„è¾ƒå°‘" class="headerlink" title="Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶(ç”¨çš„è¾ƒå°‘)"></a>Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶(ç”¨çš„è¾ƒå°‘)</h3><p>(äº†è§£)</p><ol><li><p>åˆ›å»ºå¢å¼ºç±»å’Œè¢«å¢å¼ºç±»ï¼Œç¼–å†™å¯¹åº”çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¢«å¢å¼ºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;buy().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookProxy</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before()....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®springé…ç½®æ–‡ä»¶</p><ol><li>åˆ›å»ºå¢å¼ºç±»å’Œè¢«å¢å¼ºç±»å¯¹è±¡</li><li>åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ‡å…¥ç‚¹</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åˆ›å»ºå¯¹è±¡--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookproxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®aopå¢å¼º--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.izumi.spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡é¢--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookproxy&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--        å¢å¼ºä½œç”¨åœ¨å…·ä½“æ–¹æ³•ä¸Š--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h2><h3 id="æ¦‚å¿µå’Œå‡†å¤‡"><a href="#æ¦‚å¿µå’Œå‡†å¤‡" class="headerlink" title="æ¦‚å¿µå’Œå‡†å¤‡"></a>æ¦‚å¿µå’Œå‡†å¤‡</h3><p>1ã€ä»€ä¹ˆæ˜¯ JdbcTemplate</p><p>â€‹ï¼ˆ1ï¼‰Spring æ¡†æ¶å¯¹ JDBC è¿›è¡Œå°è£…ï¼Œä½¿ç”¨ JdbcTemplate æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ</p><p>2ã€å‡†å¤‡å·¥ä½œ</p><p>â€‹ï¼ˆ1ï¼‰å¼•å…¥ç›¸å…³ jar åŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104200355015.png" alt="image-20220104200355015"></p><p>ï¼ˆ2ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®å¾·é²ä¼Šè¿æ¥æ± ä¿¡æ¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zzt&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­åˆ›å»ºJdbcTemplateå¯¹è±¡ï¼Œæ³¨å…¥DataSourceå±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºJDBCtemplateå¯¹è±¡ï¼Œæ³¨å…¥å±æ€§DataSource--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4) åˆ›å»ºserviceç±»ï¼Œåˆ›å»ºdaoç±»ï¼Œåœ¨daoç±»æ³¨å…¥JdbcTemplateå¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯ç»„ä»¶æ‰«æ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p>serviceç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>daoç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoIml</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span>&#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥jdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰</h3><p>1ã€åˆ›å»ºæ•°æ®åº“è¡¨å¯¹åº”çš„å®ä½“ç±»</p><p>2ã€ç¼–å†™serviceå’Œdao</p><p>ï¼ˆ1ï¼‰åœ¨ dao è¿›è¡Œæ•°æ®åº“æ·»åŠ æ“ä½œ</p><p>ï¼ˆ2ï¼‰è°ƒç”¨ JdbcTemplate å¯¹è±¡é‡Œé¢ update æ–¹æ³•å®ç°æ·»åŠ æ“ä½œ</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104204559938.png" alt="image-20220104204559938"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š ç¼–å†™çš„sqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯å˜å‚æ•°ï¼Œè®¾ç½®sqlè¯­å¥</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//æ·»åŠ ä¹¦æœ¬çš„æ–¹æ³•å¢</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,book.getBookId(), book.getBookName(), book.getBookStatus());</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBook</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set book_name=?,book_status=? where book_id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, book.getBookName(), book.getBookStatus(), book.getBookId());</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBook</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span><span class="string">&quot;delete from t_book where book_id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3ã€æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">       <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(BookService.class);</span><br><span class="line">       <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">       book.setBookId(<span class="number">1</span>);</span><br><span class="line">       book.setBookName(<span class="string">&quot;ä¸‰ä½“&quot;</span>);</span><br><span class="line">       book.setBookStatus(<span class="string">&quot;ç•…é”€&quot;</span>);</span><br><span class="line">       bookService.add(book);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰</h3><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªå€¼"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªå€¼" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªå€¼"></a>æŸ¥è¯¢è¿”å›æŸä¸ªå€¼</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢è¡¨é‡Œè¿”å›å¤šå°‘æ¡è®°å½•ï¼Œè¿”å›çš„æ˜¯æŸä¸ªå€¼</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104213313170.png" alt="image-20220104213313170"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š è¿”å›å€¼çš„ç±»å‹çš„class</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›æŸä¸ªå€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡"></a>æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦è¯¦æƒ…</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104214811949.png" alt="image-20220104214811949"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š RowMapperæ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨æ”¹æ¥å£çš„å®ç°ç±»( <code>BeanPropertyRowMapper&lt; &gt;</code>)å®ç°å¯¹æ•°æ®çš„å°è£…</li><li>sqlè¯­å¥å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="comment">/*BeanPropertyRowMapper&lt;Book&gt;(Book.class)</span></span><br><span class="line"><span class="comment">    æ˜¯RowMapperæ¥å£çš„å®ç°ç±»ï¼Œæ³›å‹é‡Œå¡«å…¥è¿”å›çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨å¡«è¿”å›å‚æ•°ç±»å‹çš„classç±»å‹*/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">findBookInfo</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where book_id=?&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.queryForObject(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class),id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ"></a>æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨åˆ†é¡µ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104220142485.png" alt="image-20220104220142485"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š RowMapperæ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨æ”¹æ¥å£çš„å®ç°ç±»( <code>BeanPropertyRowMapper&lt; &gt;</code>)å®ç°å¯¹æ•°æ®çš„å°è£…</li><li>sqlè¯­å¥å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›é›†åˆ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">        List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line">        <span class="keyword">return</span> bookList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰</h3><p>æ‰¹é‡æ“ä½œï¼šæ“ä½œè¡¨é‡Œå¤šæ¡è®°å½•</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104221924484.png" alt="image-20220104221924484"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šLIsté›†åˆï¼Œæ·»åŠ å¤šæ¡è®°å½•æ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰¹é‡æ·»åŠ å¤šæ¡è®°å½•åˆ é™¤ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBooks</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">        System.out.println(Arrays.toString(ints));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBatchAddBooks</span><span class="params">()</span>&#123;</span><br><span class="line">       List&lt;Object[]&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">       Object[] objects1 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">3</span>,<span class="string">&quot;php&quot;</span>,<span class="string">&quot;fjlsjf&quot;</span>&#125;;</span><br><span class="line">       Object[] objects2 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">4</span>,<span class="string">&quot;c#&quot;</span>,<span class="string">&quot;sfsf&quot;</span>&#125;;</span><br><span class="line">       Object[] objects3 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">5</span>,<span class="string">&quot;python&quot;</span>,<span class="string">&quot;lghf&quot;</span>&#125;;</span><br><span class="line">       list.add(objects1);</span><br><span class="line">       list.add(objects2);</span><br><span class="line">       list.add(objects3);</span><br><span class="line">       bookService.batchAddBooks(list);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="springæ“ä½œäº‹åŠ¡"><a href="#springæ“ä½œäº‹åŠ¡" class="headerlink" title="springæ“ä½œäº‹åŠ¡"></a>springæ“ä½œäº‹åŠ¡</h2><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><h4 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</h4><p>äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šï¼Œä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ä½œéƒ½å¤±è´¥ã€‚</p><p>å…¸å‹åº”ç”¨åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦</p><h4 id="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID"><a href="#äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID" class="headerlink" title="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ (ACID)"></a>äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ (ACID)</h4><ol><li>åŸå­æ€§ï¼šè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</li><li>ä¸€è‡´æ€§   ï¼šäº‹åŠ¡æäº¤å‰åçš„å®Œæ•´æ€§å’ŒçŠ¶æ€ä¿æŒä¸€è‡´</li><li>éš”ç¦»æ€§    ï¼šæ˜¯å¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´æ˜¯éš”ç¦»çš„</li><li>æŒä¹…æ€§    ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤äº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„</li></ol><h3 id="äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º"><a href="#äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º" class="headerlink" title="äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º"></a>äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º</h3><p>ç•¥</p><h3 id="springäº‹åŠ¡ç®¡ç†ä»‹ç»"><a href="#springäº‹åŠ¡ç®¡ç†ä»‹ç»" class="headerlink" title="springäº‹åŠ¡ç®¡ç†ä»‹ç»"></a>springäº‹åŠ¡ç®¡ç†ä»‹ç»</h3><p>1ã€äº‹åŠ¡ä¸€èˆ¬æ·»åŠ åˆ°javaeeä¸‰å±‚æ¡†æ¶çš„serviceå±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ã€‚</p><p>2ã€springè¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>â€‹ç¼–ç¨‹å¼å®åŠ¡æ“ä½œã€å£°æ˜å¼å®åŠ¡æ“ä½œï¼ˆä½¿ç”¨ï¼‰</p><p>3ã€å£°æ˜å¼å®åŠ¡ç®¡ç†ï¼š</p><p>â€‹åŸºäºxmlæ–¹å¼åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰</p><p><strong>4ã€åœ¨springè¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨AOPåŸç†ã€‚</strong></p><p>5ã€springäº‹åŠ¡ç®¡ç†api</p><p>ï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»</p><p>JDBCäº‹åŠ¡ï¼šä½¿ç”¨<code> DataSourceTranscationManager</code></p><p>Hibernateäº‹åŠ¡:ä½¿ç”¨<code>HibernateTransactionManager</code></p><p>JPAäº‹åŠ¡ï¼šä½¿ç”¨<code>JpaTranscationManager</code></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220105190923865.png" alt="image-20220105190923865"></p><h3 id="æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€åœ¨springé…ç½®æ–‡ä»¶æ–‡ä»¶ä¸­é…ç½® txåç§°ç©ºé—´ï¼Œå¹¶å¼€å¯äº‹åŠ¡ç®¡ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯äº‹åŠ¡ç®¡ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€åœ¨serviceç±»ä¸Šé¢ï¼ˆæˆ–è€…serviceç±»æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£</p><p>1ï¼‰@Transcational</p><p>å°†è¯¥æ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªç±»å¼€å¯äº‹åŠ¡ç®¡ç†</p><p>å°†è¯¥æ³¨è§£æ·»åŠ åˆ°æ–¹æ³•ä¸Šé¢ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªæ–¹æ³•å¼€å¯äº‹åŠ¡ç®¡ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®"><a href="#å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®"></a>å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®</h3><p>1ã€åœ¨ service ç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Transactionalï¼Œåœ¨è¿™ä¸ªæ³¨è§£é‡Œé¢å¯ä»¥é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108100304391.png" alt="image-20220108100304391"></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108100445151.png" alt="image-20220108100445151"></p><h3 id="propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º-ï¼ˆé¢è¯•ä¼šè€ƒï¼‰"><a href="#propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º-ï¼ˆé¢è¯•ä¼šè€ƒï¼‰" class="headerlink" title="propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º ï¼ˆé¢è¯•ä¼šè€ƒï¼‰"></a>propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º ï¼ˆé¢è¯•ä¼šè€ƒï¼‰</h3><p>äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ä¾‹å¦‚æ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡è¿è¡Œã€‚springä¸­çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¯ä»¥ç”±ä¼ æ’­å±æ€§æŒ‡å®šã€‚springæŒ‡å®šäº†7ç§ç±»ä¼ æ’­è¡Œä¸ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation=Propagation.REQUIRED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><p><strong>é‡ç‚¹æŒæ¡å‰ä¸¤ä¸ª</strong></p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108101114201.png" alt="image-20220108101114201"></p><p>REQUIREDä¸¾ä¾‹ï¼š</p><p>é€šä¿—æ¥è¯´å°±æ˜¯ï¼šæ–¹æ³•ä¸€è°ƒç”¨æ–¹æ³•äºŒï¼Œæ–¹æ³•äºŒä¼šçœ‹å¦‚æœæ–¹æ³•ä¸€æœ‰äº‹åŠ¡ï¼Œå°±ç›´æ¥ç”¨æ–¹æ³•ä¸€çš„äº‹åŠ¡å°±è¡Œï¼Œå’Œè°ƒç”¨å‡ æ¬¡æ— å…³ï¼›å¦‚æœæ–¹æ³•ä¸€æ²¡æœ‰äº‹åŠ¡ï¼Œæˆ‘æ–¹æ³•äºŒå°±è‡ªå·±åˆ›å»ºä¸ªäº‹åŠ¡ï¼Œè°ƒç”¨æˆ‘å‡ æ¬¡ æˆ‘åˆ›å»ºå‡ æ¬¡ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108102000743.png" alt="image-20220108102000743"></p><p>REQUIRES_NEWä¸¾ä¾‹ï¼š</p><p>å®ƒè¡¨ç¤ºè¯¥æ–¹æ³•å¿…é¡»å¯åŠ¨ä¸€ä¸ªæ–°äº‹åŠ¡, å¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ. å¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œ, å°±åº”è¯¥å…ˆæŒ‚èµ·å®ƒ.ï¼ˆè¿™ä¸ªæ­£å¥½ç›¸åå°±æ˜¯ï¼Œæˆ‘æ–¹æ³•äºŒä¸ç®¡ä½ æ–¹æ³•ä¸€æœ‰æ²¡æœ‰äº‹åŠ¡ï¼Œæˆ‘éƒ½è‡ªå·±åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œä½ è°ƒç”¨æˆ‘å‡ æ¬¡æˆ‘åˆ›å»ºå‡ æ¬¡ï¼</p><p>æ–¹æ³•Aè°ƒç”¨æ–¹æ³•Bçš„æ—¶å€™ï¼Œå¦‚æœæ–¹æ³•Aä¹Ÿæœ‰äº‹åŠ¡ï¼Œåˆ™å…ˆå°†æ–¹æ³•Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œå¼€å¯æ–¹æ³•Bçš„äº‹åŠ¡ï¼Œå¾…æ–¹æ³•Bæ‰§è¡Œå®Œæ¯•æäº¤ï¼Œå†æ¢å¤æ–¹æ³•Açš„äº‹åŠ¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108103211551.png" alt="image-20220108103211551"></p><h3 id="isolation-äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#isolation-äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="isolation:äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>isolation:äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><p>ï¼ˆ1ï¼‰äº‹åŠ¡æœ‰ç‰¹æ€§æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜</p><p>ï¼ˆ2ï¼‰æœ‰ä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯»</p><p>ï¼ˆ3ï¼‰è„è¯»ï¼ˆDirty Readï¼‰ï¼šAäº‹åŠ¡è¯»å–Bäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ“ä½œï¼Œè€ŒBäº‹åŠ¡æ‰§è¡Œå›æ»šï¼Œé‚£ä¹ˆAè¯»å–åˆ°çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong>å¦‚æœåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤å‰ï¼Œä»»ä½•å…¶ä»–äº‹åŠ¡ä¸å¯è¯»å–å…¶ä¿®æ”¹è¿‡çš„å€¼ï¼Œåˆ™å¯ä»¥é¿å…è¯¥é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205136175.png" alt="image-20220109205136175"></p><p>ï¼ˆ4ï¼‰ä¸å¯é‡å¤è¯»: ä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡çš„æ•°æ®</p><p>ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readsï¼‰<br>ä¸€ä¸ªäº‹åŠ¡å¯¹åŒä¸€è¡Œæ•°æ®é‡å¤è¯»å–ä¸¤æ¬¡ï¼Œä½†æ˜¯å´å¾—åˆ°äº†ä¸åŒçš„ç»“æœã€‚äº‹åŠ¡T1è¯»å–æŸä¸€æ•°æ®åï¼Œäº‹åŠ¡T2å¯¹å…¶åšäº†ä¿®æ”¹ï¼Œå½“äº‹åŠ¡T1å†æ¬¡è¯»è¯¥æ•°æ®æ—¶å¾—åˆ°ä¸å‰ä¸€æ¬¡ä¸åŒçš„å€¼ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong>å¦‚æœåªæœ‰åœ¨ä¿®æ”¹äº‹åŠ¡å®Œå…¨æäº¤ä¹‹åæ‰å¯ä»¥è¯»å–æ•°æ®ï¼Œåˆ™å¯ä»¥é¿å…è¯¥é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205521052.png" alt="image-20220109205521052"></p><p>ï¼ˆ5ï¼‰è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡æ·»åŠ æ•°æ®</p><p>â€‹æŒ‡ä¸¤æ¬¡æ‰§è¡ŒåŒä¸€æ¡ select è¯­å¥ä¼šå‡ºç°ä¸åŒçš„ç»“æœï¼Œç¬¬äºŒæ¬¡è¯»ä¼šå¢åŠ ä¸€æ•°æ®è¡Œï¼Œå¹¶æ²¡æœ‰è¯´è¿™ä¸¤æ¬¡æ‰§è¡Œæ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¹»è±¡è¯»åº”è¯¥æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ä½†æœ‰æ—¶å€™å´ä¸æ˜¯ï¼Œå¦‚æœæ‰“å¼€çš„æ¸¸æ ‡ï¼Œåœ¨å¯¹æ¸¸æ ‡è¿›è¡Œæ“ä½œæ—¶ï¼Œå¹¶ä¸å¸Œæœ›æ–°å¢çš„è®°å½•åŠ åˆ°æ¸¸æ ‡å‘½ä¸­çš„æ•°æ®é›†ä¸­æ¥ã€‚éš”ç¦»çº§åˆ«ä¸º æ¸¸æ ‡ç¨³å®šæ€§ çš„ï¼Œå¯ä»¥é˜»æ­¢å¹»è±¡è¯»ã€‚ä¾‹å¦‚ï¼šç›®å‰å·¥èµ„ä¸º1000çš„å‘˜å·¥æœ‰10äººã€‚é‚£ä¹ˆäº‹åŠ¡1ä¸­è¯»å–æ‰€æœ‰å·¥èµ„ä¸º1000çš„å‘˜å·¥ï¼Œå¾—åˆ°äº†10æ¡è®°å½•ï¼›è¿™æ—¶äº‹åŠ¡2å‘å‘˜å·¥è¡¨æ’å…¥äº†ä¸€æ¡å‘˜å·¥è®°å½•ï¼Œå·¥èµ„ä¹Ÿä¸º1000ï¼›é‚£ä¹ˆäº‹åŠ¡1å†æ¬¡è¯»å–æ‰€æœ‰å·¥èµ„ä¸º1000çš„å‘˜å·¥å…±è¯»å–åˆ°äº†11æ¡è®°å½•ã€‚</p><p>ï¼ˆ6ï¼‰è§£å†³ï¼šé€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè§£å†³è¯»é—®é¢˜(mysqlé»˜è®¤å¯é‡å¤è¯»)</p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205948180.png" alt="image-20220109205948180" style="zoom: 67%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation=Propagation.REQUIRED,isolation = Isolation.REPEATABLE_READ)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><p><strong>4ã€timeoutï¼šè¶…æ—¶æ—¶é—´</strong><br>ï¼ˆ1ï¼‰äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»š<br>ï¼ˆ2ï¼‰é»˜è®¤å€¼æ˜¯ -1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®—</p><p><strong>5ã€readOnlyï¼šæ˜¯å¦åªè¯»</strong><br>ï¼ˆ1ï¼‰è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ<br>ï¼ˆ2ï¼‰readOnly é»˜è®¤å€¼ falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ<br>ï¼ˆ3ï¼‰è®¾ç½® readOnly å€¼æ˜¯ trueï¼Œè®¾ç½®æˆ true ä¹‹åï¼Œåªèƒ½æŸ¥è¯¢</p><p><strong>6ã€rollbackForï¼šå›æ»š</strong><br>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><p><strong>7ã€noRollbackForï¼šä¸å›æ»š</strong><br>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><h3 id="åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><p>2ã€é…ç½®é€šçŸ¥</p><p>3ã€é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®é€šçŸ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®äº‹åŠ¡å‚æ•°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            åˆ¶å®šå“ªç§è§„åˆ™ä¸Šé¢æ·»åŠ äº‹åŠ¡--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">timeout</span>=<span class="string">&quot;-1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.izumi.spring5.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>åˆ›å»ºé…ç½®ç±»ï¼Œä½¿ç”¨é…ç½®ç±»æ›¿ä»£é…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.izumi.spring5&quot;)</span> <span class="comment">//ç»„ä»¶æ‰«æ</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>    <span class="comment">//å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Txconfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//åˆ›å»ºæ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        druidDataSource.setUrl(<span class="string">&quot;jdbc:mysql:///user_db&quot;</span>);</span><br><span class="line">        druidDataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        druidDataSource.setPassword(<span class="string">&quot;zzt&quot;</span>);</span><br><span class="line">        druidDataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//åˆ›å»ºjdbcTemplate            //å‚æ•°ï¼šåˆ°iocå®¹å™¨ä¸­æ ¹æ®å‚æ•°ç±»å‹æ‰¾åˆ°dataSource</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//æ³¨å…¥DataSource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">dataSourceTransactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        dataSourceTransactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dataSourceTransactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="spring5æ–°ç‰¹æ€§"><a href="#spring5æ–°ç‰¹æ€§" class="headerlink" title="spring5æ–°ç‰¹æ€§"></a>spring5æ–°ç‰¹æ€§</h2><h3 id="1ã€ç‰¹ç‚¹"><a href="#1ã€ç‰¹ç‚¹" class="headerlink" title="1ã€ç‰¹ç‚¹"></a>1ã€ç‰¹ç‚¹</h3><p>1ã€æ•´ä¸ª Spring5 æ¡†æ¶çš„ä»£ç åŸºäº Java8ï¼Œè¿è¡Œæ—¶å…¼å®¹ JDK9ï¼Œè®¸å¤šä¸å»ºè®®ä½¿ç”¨çš„ç±»å’Œæ–¹ æ³•åœ¨ä»£ç åº“ä¸­åˆ é™¤</p><h3 id="2ã€Spring-5-0-æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…"><a href="#2ã€Spring-5-0-æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…" class="headerlink" title="2ã€Spring 5.0 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…"></a>2ã€Spring 5.0 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…</h3><p>ï¼ˆ1ï¼‰Spring5 å·²ç»ç§»é™¤ Log4jConfigListenerï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ Log4j2</p><p>ï¼ˆ2ï¼‰Spring5 æ¡†æ¶æ•´åˆ Log4j2</p><ul><li>ç¬¬ä¸€æ­¥ å¼•å…¥ jar åŒ…</li></ul><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220111223741453.png" alt="image-20220111223741453"></p><ul><li>ç¬¬äºŒæ­¥ åˆ›å»º log4j2.xml é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ—¥å¿—çº§åˆ«ä»¥åŠä¼˜å…ˆçº§æ’åº: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configurationåé¢çš„statusç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œå¯ä»¥çœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…ˆå®šä¹‰æ‰€æœ‰çš„appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¾“å‡ºæ—¥å¿—ä¿¡æ¯åˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç„¶åå®šä¹‰loggerï¼Œåªæœ‰å®šä¹‰äº†loggerå¹¶å¼•å…¥çš„appenderï¼Œappenderæ‰ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--rootï¼šç”¨äºæŒ‡å®šé¡¹ç›®çš„æ ¹æ—¥å¿—ï¼Œå¦‚æœæ²¡æœ‰å•ç‹¬æŒ‡å®šLoggerï¼Œåˆ™ä¼šä½¿ç”¨rootä½œä¸ºé»˜è®¤çš„æ—¥å¿—è¾“å‡º--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3ã€Spring5-æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ-Nullable-æ³¨è§£"><a href="#3ã€Spring5-æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ-Nullable-æ³¨è§£" class="headerlink" title="3ã€Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullable æ³¨è§£"></a>3ã€Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullable æ³¨è§£</h3><p>ï¼ˆ1ï¼‰@Nullable æ³¨è§£å¯ä»¥ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ï¼Œå‚æ•°ä¸Šé¢ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›å¯ä»¥ä¸ºç©ºï¼Œ</p><p>â€‹å±æ€§å€¼å¯ä»¥ ä¸ºç©ºï¼Œå‚æ•°å€¼å¯ä»¥ä¸ºç©º</p><p>ï¼ˆ2ï¼‰æ³¨è§£ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œæ–¹æ³•è¿”å›å€¼å¯ä»¥ä¸ºç©º</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180601855.png" alt="image-20220114180601855"></p><p>ï¼ˆ3ï¼‰æ³¨è§£ä½¿ç”¨åœ¨æ–¹æ³•å‚æ•°é‡Œé¢ï¼Œæ–¹æ³•å‚æ•°å¯ä»¥ä¸ºç©º</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180641739.png" alt="image-20220114180641739"></p><p>ï¼ˆ4ï¼‰æ³¨è§£ä½¿ç”¨åœ¨å±æ€§ä¸Šé¢ï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©º</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180710661.png" alt="image-20220114180710661"></p><h3 id="4ã€Spring5-æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼-GenericApplicationContext"><a href="#4ã€Spring5-æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼-GenericApplicationContext" class="headerlink" title="4ã€Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext"></a>4ã€Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¼”ç¤ºspring5æ–°ç‰¹æ€§ æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenericApplicationContext</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»º GenericApplicationContext å¯¹è±¡</span></span><br><span class="line">        <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line">        <span class="comment">//è°ƒç”¨context çš„æ–¹æ³•æ³¨å†Œï¼ˆåœ¨springå®¹å™¨é‡Œæ³¨å†Œï¼Œè¿™æ ·æ‰èƒ½è®©springç®¡ç†è¯¥å¯¹è±¡ï¼‰</span></span><br><span class="line">        context.refresh();</span><br><span class="line">        <span class="comment">//()-&gt;new User() : javaå››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£çš„ä¾›ç»™å‹æ¥å£ï¼Œé‡‡ç”¨lambdaè¡¨è¾¾å¼å®ç°</span></span><br><span class="line">        context.registerBean(<span class="string">&quot;user&quot;</span>,User.class,()-&gt;<span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">        <span class="comment">//è·å–åœ¨springæ³¨å†Œçš„å¯¹è±¡</span></span><br><span class="line">      <span class="comment">//  User user =(User) context.getBean(&quot;com.izumi.spring5.entity.User&quot;);</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span>(User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="5ã€Spring5-æ”¯æŒæ•´åˆ-JUnit5"><a href="#5ã€Spring5-æ”¯æŒæ•´åˆ-JUnit5" class="headerlink" title="5ã€Spring5 æ”¯æŒæ•´åˆ JUnit5"></a>5ã€Spring5 æ”¯æŒæ•´åˆ JUnit5</h3><h4 id="ï¼ˆ1ï¼‰æ•´åˆ-JUnit4"><a href="#ï¼ˆ1ï¼‰æ•´åˆ-JUnit4" class="headerlink" title="ï¼ˆ1ï¼‰æ•´åˆ JUnit4"></a>ï¼ˆ1ï¼‰æ•´åˆ JUnit4</h4><p>ç¬¬ä¸€æ­¥ å¼•å…¥ Spring ç›¸å…³é’ˆå¯¹æµ‹è¯•ä¾èµ–</p><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114183520116.png" alt="image-20220114183520116"></p><p>ç¬¬äºŒæ­¥åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£å®Œæˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//spring5 æ”¯æŒæ•´åˆjunit4æµ‹è¯•</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span> <span class="comment">//å•å…ƒæµ‹è¯•æ¡†æ¶</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span>    <span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUnit4Test</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    userService.account(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>),<span class="string">&quot;lucy&quot;</span>,<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰Spring5-æ•´åˆ-JUnit5"><a href="#ï¼ˆ2ï¼‰Spring5-æ•´åˆ-JUnit5" class="headerlink" title="ï¼ˆ2ï¼‰Spring5 æ•´åˆ JUnit5"></a>ï¼ˆ2ï¼‰Spring5 æ•´åˆ JUnit5</h4><p>ç¬¬ä¸€æ­¥ å¼•å…¥ JUnit5 çš„ jar åŒ…</p><p><code>import org.junit.jupiter.api.Test;//å¯¼å…¥Junit5çš„åŒ…</code></p><p>ç¬¬äºŒæ­¥åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£å®Œæˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¼”ç¤ºspring5æ•´åˆjunit5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*@ExtendWith(SpringExtension.class)</span></span><br><span class="line"><span class="comment">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨ä¸€ä¸ªå¤åˆæ³¨è§£(SpringJUnitConfig)æ›¿ä»£ä¸Šé¢ä¸¤ä¸ªæ³¨è§£å®Œæˆæ•´åˆ</span></span><br><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Junit5Test</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.account(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>), <span class="string">&quot;lucy&quot;</span>, <span class="string">&quot;mary&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SpringWebflux"><a href="#SpringWebflux" class="headerlink" title="SpringWebflux"></a>SpringWebflux</h3><p>åŸºäº springMVC springboot maven java8æ–°ç‰¹æ€§</p><h4 id="1ã€SpringWebfluxä»‹ç»"><a href="#1ã€SpringWebfluxä»‹ç»" class="headerlink" title="1ã€SpringWebfluxä»‹ç»"></a>1ã€SpringWebfluxä»‹ç»</h4><h4 id="2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰"><a href="#2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰" class="headerlink" title="2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰"></a>2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰</h4>]]></content>
      
      
      <categories>
          
          <category> Springå®¶æ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Spring5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java8æ–°ç‰¹æ€§</title>
      <link href="//posts/397c083a.html"/>
      <url>//posts/397c083a.html</url>
      
        <content type="html"><![CDATA[<h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><h3 id="ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†"><a href="#ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†" class="headerlink" title="ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†"></a>ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†</h3><ul><li><p>ä½¿ç”¨ä¸€ä¸ªä»£ç†å°†å¯¹è±¡åŒ…è£…èµ·æ¥ï¼Œç„¶åç”¨è¯¥ä»£ç†å¯¹è±¡å–ä»£åŸå§‹å¯¹è±¡ã€‚</p><p>ä»»ä½•å¯¹åŸå§‹å¯¹è±¡çš„è°ƒç”¨éƒ½è¦é€šè¿‡ä»£ç†ã€‚ä»£ç†å¯¹è±¡å†³å®šæ˜¯å¦ä»¥åŠä½•æ—¶å°†æ–¹æ³•è°ƒç”¨è½¬åˆ°åŸå§‹å¯¹è±¡ä¸Šã€‚</p></li><li><p>ä¹‹å‰ä¸ºå¤§å®¶è®²è§£è¿‡ä»£ç†æœºåˆ¶çš„æ“ä½œï¼Œå±äºé™æ€ä»£ç†ï¼Œç‰¹å¾æ˜¯ä»£ç†ç±»å’Œç›®æ ‡<br>å¯¹è±¡çš„ç±»éƒ½æ˜¯åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šä¸‹æ¥ï¼Œä¸åˆ©äºç¨‹åºçš„æ‰©å±•ã€‚åŒæ—¶ï¼Œæ¯ä¸€ä¸ªä»£<br>ç†ç±»åªèƒ½ä¸ºä¸€ä¸ªæ¥å£æœåŠ¡ï¼Œè¿™æ ·ä¸€æ¥ç¨‹åºå¼€å‘ä¸­å¿…ç„¶äº§ç”Ÿè¿‡å¤šçš„ä»£ç†ã€‚æœ€<br>å¥½å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†ç±»å®Œæˆå…¨éƒ¨çš„ä»£ç†åŠŸèƒ½ã€‚</p></li></ul><h3 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"></a>ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†</h3><ul><li>åŠ¨æ€ä»£ç†æ˜¯æŒ‡å®¢æˆ·é€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨å…¶å®ƒå¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶<br>æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚</li></ul><h3 id="åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹"><a href="#åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹" class="headerlink" title="åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹"></a>åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹</h3><p>åŠ¨æ€ä»£ç†ç›¸æ¯”é™æ€ä»£ç†ï¼ŒæŠ½è±¡è§’è‰²ä¸­ï¼ˆæŒ‰æ¥å£ï¼‰å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨</p><p>ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ çµæ´»å’Œç»Ÿä¸€çš„å¤„ç†ä¼—å¤šçš„æ–¹æ³•ã€‚</p><h3 id="æ¼”ç¤ºé™æ€ä»£ç†"><a href="#æ¼”ç¤ºé™æ€ä»£ç†" class="headerlink" title="æ¼”ç¤ºé™æ€ä»£ç†"></a>æ¼”ç¤ºé™æ€ä»£ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¼”ç¤ºé™æ€ä»£ç†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ClothFactory</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">produceCloth</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProxyCloth</span> <span class="keyword">implements</span> <span class="title class_">ClothFactory</span>&#123;</span><br><span class="line"><span class="keyword">private</span> ClothFactory clothFactory;<span class="comment">//ç”¨è¢«ä»£ç†ç±»å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProxyCloth</span><span class="params">(ClothFactory clothFactory)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.clothFactory = clothFactory;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produceCloth</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»£ç†å·¥å‚åšä¸€äº›å‡†å¤‡å·¥ä½œ...&quot;</span>);</span><br><span class="line">        clothFactory.produceCloth();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»£ç†å·¥å‚åšä¸€äº›æ”¶å°¾å·¥ä½œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¢«ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NikeClothFactory</span> <span class="keyword">implements</span> <span class="title class_">ClothFactory</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produceCloth</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;nikeå·¥å‚æ­£åœ¨ç”Ÿäº§ä¸€æ‰¹è¡£æœ.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¢«ä»£ç†ç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">ClothFactory</span> <span class="variable">nikeClothFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NikeClothFactory</span>();</span><br><span class="line">        <span class="comment">//ä»£ç†ç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">ClothFactory</span> <span class="variable">proxyCloth</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyCloth</span>(nikeClothFactory);</span><br><span class="line">        proxyCloth.produceCloth();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¼”ç¤ºåŠ¨æ€ä»£ç†"><a href="#æ¼”ç¤ºåŠ¨æ€ä»£ç†" class="headerlink" title="æ¼”ç¤ºåŠ¨æ€ä»£ç†"></a>æ¼”ç¤ºåŠ¨æ€ä»£ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åŠ¨æ€ä»£ç†ä¸¾ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Human</span> &#123;</span><br><span class="line">    String <span class="title function_">getBelief</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">(String food)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¢«ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SuperMan</span> <span class="keyword">implements</span> <span class="title class_">Human</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBelief</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I am superMan!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">(String food)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘å–œæ¬¢åƒ&quot;</span> + food);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¦æƒ³å®ç°åŠ¨æ€ä»£ç†ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜ï¼Ÿ</span></span><br><span class="line"><span class="comment">é—®é¢˜ä¸€ï¼šå¦‚ä½•æ ¹æ®åŠ è½½åˆ°å†…å­˜ä¸­çš„è¢«ä»£ç†ç±»ï¼ŒåŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªä»£ç†ç±»åŠå…¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">é—®é¢˜äºŒï¼šå½“é€šè¿‡ä»£ç†ç±»çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå¦‚ä½•åŠ¨æ€çš„å»è°ƒç”¨è¢«ä»£ç†ç±»çš„åŒåæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªä»£ç†ç±»å·¥å‚ï¼ŒåŠ¨æ€çš„åˆ›å»ºä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProxyFactory</span> &#123;</span><br><span class="line">    <span class="comment">//è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä»£ç†ç±»å¯¹è±¡ï¼Œè§£å†³é—®é¢˜ä¸€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getProxyInstance</span><span class="params">(Object obj)</span> &#123;<span class="comment">//obj å°±æ˜¯è¢«ä»£ç†ç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyInvocationHandler</span> <span class="variable">myInvocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyInvocationHandler</span>(obj);</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(), obj.getClass().getInterfaces(), myInvocationHandler);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºè¢«ä»£ç†ç±»å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyInvocationHandler</span><span class="params">(Object obj)</span> &#123; <span class="comment">//ä½¿ç”¨æ„é€ å‡½æ•°ä¸º è¢«ä»£ç†ç±»å¯¹è±¡èµ‹å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“æˆ‘ä»¬é€šè¿‡ä»£ç†ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•aæ—¶ï¼Œå°±ä¼šè‡ªåŠ¨çš„è°ƒç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼šinvokeï¼ˆï¼‰</span></span><br><span class="line">    <span class="comment">//å°†è¢«ä»£ç†ç±»è¦æ‰§è¡Œçš„æ–¹æ³•açš„åŠŸèƒ½å°±å£°æ˜åœ¨invokeï¼ˆï¼‰ä¸­</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//method å³ä¸ºä»£ç†ç±»å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¹Ÿä½œä¸ºäº†è¢«ä»£ç†ç±»å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//objå°±æ˜¯è¢«ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">returnValue</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line">        <span class="comment">//ä¸Šè¿°æ–¹æ³•çš„è¿”å›å€¼å°±ä½œä¸ºå½“å‰ç±»ä¸­çš„invokeï¼ˆï¼‰æ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> returnValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SuperMan</span> <span class="variable">superMan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuperMan</span>();</span><br><span class="line">        <span class="comment">//åŠ¨æ€çš„åˆ›å»ºä»£ç†ç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">Human</span> <span class="variable">proxyInstance</span> <span class="operator">=</span> (Human) ProxyFactory.getProxyInstance(superMan);</span><br><span class="line">        <span class="comment">//é€šè¿‡ä»£ç†ç±»å¯¹è±¡è°ƒç”¨è¢«ä»£ç†ç±»çš„æ–¹æ³•</span></span><br><span class="line">        System.out.println(proxyInstance.getBelief());</span><br><span class="line">        proxyInstance.eat(<span class="string">&quot;è‰è“ä»™è‰å†»&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€ä»£ç†ä¸aop"><a href="#åŠ¨æ€ä»£ç†ä¸aop" class="headerlink" title="åŠ¨æ€ä»£ç†ä¸aop"></a>åŠ¨æ€ä»£ç†ä¸aop</h3><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211224171255662.png" alt="image-20211224171255662"></p><h2 id="Java8æ–°ç‰¹æ€§"><a href="#Java8æ–°ç‰¹æ€§" class="headerlink" title="Java8æ–°ç‰¹æ€§"></a>Java8æ–°ç‰¹æ€§</h2><ul><li>é€Ÿåº¦æ›´å¿«</li><li>ä»£ç æ›´å°‘(å¢åŠ äº†æ–°çš„è¯­æ³•ï¼šLambadaè¡¨è¾¾å¼)</li><li>å¼ºå¤§çš„Stream API</li><li>ä¾¿äºå¹¶è¡Œ</li><li>æœ€å¤§åŒ–å‡å°‘ç©ºæŒ‡é’ˆå¼‚å¸¸ ï¼š Optional</li><li>Nashornå¼•æ“ï¼Œå…è®¸åœ¨JVMä¸Šè¿è¡ŒJSåº”ç”¨</li></ul><h3 id="1ã€Lambdaè¡¨è¾¾å¼"><a href="#1ã€Lambdaè¡¨è¾¾å¼" class="headerlink" title="1ã€Lambdaè¡¨è¾¾å¼"></a>1ã€Lambdaè¡¨è¾¾å¼</h3><h4 id="ä»€ä¹ˆæ˜¯Lambadaè¡¨è¾¾å¼"><a href="#ä»€ä¹ˆæ˜¯Lambadaè¡¨è¾¾å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯Lambadaè¡¨è¾¾å¼"></a>ä»€ä¹ˆæ˜¯Lambadaè¡¨è¾¾å¼</h4><p>Lambdaæ˜¯ä¸€ä¸ª<strong>åŒ¿åå‡½æ•°</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠLambdaè¡¨è¾¾å¼ç†è§£ä¸ºæ˜¯ä¸€æ®µ<strong>å¯ä»¥</strong><br><strong>ä¼ é€’çš„ä»£ç ï¼ˆå°†ä»£ç åƒæ•°æ®ä¸€æ ·è¿›è¡Œä¼ é€’ï¼‰</strong>ã€‚ä½¿ç”¨å®ƒå¯ä»¥å†™å‡ºæ›´ç®€æ´ã€æ›´<br>çµæ´»çš„ä»£ç ã€‚ä½œä¸ºä¸€ç§æ›´ç´§å‡‘çš„ä»£ç é£æ ¼ï¼Œä½¿Javaçš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†<br>æå‡ã€‚</p><h4 id="lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"><a href="#lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨" class="headerlink" title="lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"></a>lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨</h4><h5 id="æ ¼å¼ï¼š"><a href="#æ ¼å¼ï¼š" class="headerlink" title="æ ¼å¼ï¼š"></a>æ ¼å¼ï¼š</h5><p><code>(o1,o2) -&gt; Integer.compare(o1,o2);</code></p><p>-&gt;: Lambdaæ“ä½œç¬¦ æˆ– ç®­å¤´æ“ä½œç¬¦</p><p>-&gt;å·¦è¾¹ï¼šLambdaå½¢å‚åˆ—è¡¨ ï¼ˆå…¶å®å°±æ˜¯æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ï¼‰</p><p>-&gt;å³è¾¹ï¼š Lambda ä½“ ï¼ˆå…¶å®å°±æ˜¯é‡å†™çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“ï¼‰</p><h5 id="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"><a href="#Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"></a>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨</h5><p>æ€»ç»“ï¼š</p><p>-&gt; å·¦è¾¹ï¼šlambdaå½¢å‚åˆ—è¡¨çš„å‚æ•°å¯ä»¥çœç•¥ï¼ˆç±»å‹æ¨æ–­ï¼‰ï¼›å¦‚æœå½¢å‚åˆ—è¡¨åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·</p><p>-&gt; å³è¾¹ï¼šlambdaä½“åº”è¯¥ä½¿ç”¨ä¸€å¯¹{}åŒ…è£¹ï¼Œå¦‚æœlambdaä½“åªæœ‰ä¸€æ¡æ‰§è¡Œè¯­å¥ï¼ˆå¯èƒ½æ˜¯returnè¯­å¥ï¼‰ï¼Œåˆ™å¯ä»¥çœç•¥{}å’Œreturn</p><h5 id="Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼š"><a href="#Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼š" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼š"></a>Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼š</h5><p>ä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹</p><h5 id="æ¼”ç¤ºï¼š"><a href="#æ¼”ç¤ºï¼š" class="headerlink" title="æ¼”ç¤ºï¼š"></a>æ¼”ç¤ºï¼š</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaTest</span> &#123;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼ä¸€ï¼šæ— å‚æ— è¿”å›å€¼</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        runnable.run();</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Lambdaè¡¨è¾¾å¼å†™æ³•</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨.&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        r2.run();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼2ï¼šLambdaéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä½†æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">        Consumer&lt;String&gt; con = <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        con.accept(<span class="string">&quot;è°è¨€å’Œèª“è¨€çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;-------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼å†™æ³•</span></span><br><span class="line">        Consumer&lt;String&gt; con2 = (String s) -&gt; &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;;</span><br><span class="line">        con2.accept(<span class="string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼ä¸‰ï¼šæ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ä»¥ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºï¼Œæˆä¸ºâ€œç±»å‹æ¨æ–­â€</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> &#123;</span><br><span class="line">        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;;</span><br><span class="line">        con1.accept(<span class="string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line">        <span class="comment">//çœç•¥ç±»å‹</span></span><br><span class="line">        Consumer&lt;String&gt; con2 = (s) -&gt; &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;;</span><br><span class="line">        con2.accept(<span class="string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼å››ï¼šlambdaè‹¥åªéœ€è¦ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//çœç•¥å°æ‹¬å·</span></span><br><span class="line">        Consumer&lt;String&gt; con2 = s -&gt; &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;;</span><br><span class="line">        con2.accept(<span class="string">&quot;ä¸€ä¸ªæ˜¯å¬çš„äººä¿¡äº†ï¼Œä¸€ä¸ªæ˜¯è¯´çš„äººä¿¡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼äº”ï¼šlambdaéœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œå¤šæ¡æ‰§è¡Œè¯­å¥ï¼Œå¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> &#123;</span><br><span class="line">        Comparator&lt;Integer&gt; com = <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                System.out.println(o1);</span><br><span class="line">                System.out.println(o2);</span><br><span class="line">                <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(com.compare(<span class="number">12</span>, <span class="number">21</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaå†™æ³•</span></span><br><span class="line">        Comparator&lt;Integer&gt; com2 = (o1, o2) -&gt; &#123;</span><br><span class="line">            System.out.println(o1);</span><br><span class="line">            System.out.println(o2);</span><br><span class="line">            <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(com2.compare(<span class="number">12</span>,<span class="number">6</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯­æ³•æ ¼å¼å…­ï¼šå½“lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œè‹¥æœ‰returnå’Œå¤§æ‹¬å·ï¼Œå¯ä»¥è€ƒè™‘çœç•¥</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">        Comparator&lt;Integer&gt; com = (o1, o2) -&gt; o1.compareTo(o2);</span><br><span class="line">        System.out.println(com.compare(<span class="number">12</span>,<span class="number">21</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€å‡½æ•°å¼ï¼ˆFunctionalï¼‰æ¥å£"><a href="#2ã€å‡½æ•°å¼ï¼ˆFunctionalï¼‰æ¥å£" class="headerlink" title="2ã€å‡½æ•°å¼ï¼ˆFunctionalï¼‰æ¥å£"></a>2ã€å‡½æ•°å¼ï¼ˆFunctionalï¼‰æ¥å£</h3><h4 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£"></a>ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£</h4><p><font>åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå°±æ˜¯å‡½æ•°å¼æ¥å£</font></p><p>æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨ <code>@Functionallnterface</code> æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€<br>æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚åŒæ—¶ <code>javadoc </code>ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ª<br>æ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p><p>åœ¨<code>java.util.function</code>åŒ…ä¸‹å®šä¹‰äº†Java 8çš„ä¸°å¯Œçš„å‡½æ•°å¼æ¥å£</p><p><strong>ä»¥å‰ç”¨åŒ¿åå®ç°ç±»è¡¨ç¤ºçš„ç°åœ¨éƒ½å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ¥å†™ã€‚</strong></p><h4 id="javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£"><a href="#javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£" class="headerlink" title="javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£"></a>javaå†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£</h4><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211225194046180.png" alt="image-20211225194046180"></p><h5 id="å…¶ä»–æ¥å£"><a href="#å…¶ä»–æ¥å£" class="headerlink" title="å…¶ä»–æ¥å£"></a>å…¶ä»–æ¥å£</h5><p><img src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211225210013763.png" alt="image-20211225210013763"></p><h4 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * java å†…ç½®çš„4å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * æ¶ˆè´¹å‹ æ¥å£ Consumer&lt;T&gt;   void accept(T t)</span></span><br><span class="line"><span class="comment"> * ä¾›ç»™å‹æ¥å£ Supplier&lt;T&gt;    T get()</span></span><br><span class="line"><span class="comment"> * å‡½æ•°å‹æ¥å£ Function&lt;T,R&gt;  R apply(T t)</span></span><br><span class="line"><span class="comment"> * æ–­å®šå‹æ¥å£ Predicate&lt;T&gt;   boolean test(T t)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CentralFunctionalInterfaces</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        happyTime(<span class="number">500.0</span>, <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;Double&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Double aDouble)</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;åœ¨å¤©å®ˆé˜æ¶ˆè´¹&quot;</span>+aDouble);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;========================&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaå†™æ³•</span></span><br><span class="line">        happyTime(<span class="number">400.0</span>,money -&gt; System.out.println(<span class="string">&quot;åœ¨æœ›èˆ’å®¢æ ˆæ¶ˆè´¹&quot;</span>+money));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">happyTime</span><span class="params">(Double money, Consumer&lt;Double&gt; con)</span>&#123;</span><br><span class="line">       con.accept(money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;åŒ—äº¬&quot;</span>,<span class="string">&quot;å—äº¬&quot;</span>,<span class="string">&quot;ä¸œäº¬&quot;</span>,<span class="string">&quot;å¤©æ´¥&quot;</span>,<span class="string">&quot;è¥¿äº¬&quot;</span>);</span><br><span class="line">       List&lt;String&gt; filterString= filterString(list, <span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> s.contains(<span class="string">&quot;äº¬&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(filterString);</span><br><span class="line">        System.out.println(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaæ–¹æ³•</span></span><br><span class="line">        List&lt;String&gt; list1 = filterString(list, s -&gt; s.contains(<span class="string">&quot;äº¬&quot;</span>));</span><br><span class="line">        System.out.println(list1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ ¹æ®ç»™å®šçš„è§„åˆ™ï¼Œè¿‡æ»¤é›†åˆä¸­çš„å­—ç¬¦ä¸²ï¼Œæ­¤è§„åˆ™ç”±Predicateçš„æ–¹æ³•å†³å®š</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">filterString</span><span class="params">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; filterList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String s: list)&#123;</span><br><span class="line">            <span class="keyword">if</span> (pre.test(s))</span><br><span class="line">                filterList.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filterList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨"><a href="#3ã€æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨" class="headerlink" title="3ã€æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨"></a>3ã€æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨</h3><h4 id="æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»"><a href="#æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»" class="headerlink" title="æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»"></a>æ–¹æ³•å¼•ç”¨åŸºæœ¬ä»‹ç»</h4><p><strong>å½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼</strong><br>æ–¹æ³•å¼•ç”¨å¯ä»¥çœ‹åšæ˜¯Lambdaè¡¨è¾¾å¼æ·±å±‚æ¬¡çš„è¡¨è¾¾ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæ–¹æ³•å¼•ç”¨å°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹<br>ï¼Œé€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ä¸ªè¯­æ³•ç³–</p><p>è¦æ±‚ï¼šå®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„<br>æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ï¼(ä»…ä½¿ç”¨äº å¯¹è±¡ï¼šï¼šå®ä¾‹æ–¹æ³•å å’Œ ç±»ï¼šï¼šé™æ€æ–¹æ³•å)</p><p>æ ¼å¼ï¼šä½¿ç”¨æ“ä½œç¬¦â€ï¼šâ€å°†ç±»ï¼ˆæˆ–å¯¹è±¡ï¼‰ä¸æ–¹æ³•ååˆ†éš”å¼€æ¥ã€‚<br>å¦‚ä¸‹ä¸‰ç§ä¸»è¦ä½¿ç”¨æƒ…å†µï¼š<br>ã€‹å¯¹è±¡ : : å®ä¾‹æ–¹æ³•å<br>ã€‹ç±» : : é™æ€æ–¹æ³•å<br>ã€‹ç±» : : å®ä¾‹æ–¹æ³•å</p><h4 id="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨"><a href="#æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨"></a>æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨</h4><ul><li><p>1.ä½¿ç”¨æƒ…å¢ƒï¼šå½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼</p></li><li><p>2.æ–¹æ³•å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œè€ŒLambdaè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚æ‰€ä»¥</p><p>æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚</p></li><li><p>ä½¿ç”¨æ ¼å¼ï¼š  ç±»(æˆ–å¯¹è±¡) :: æ–¹æ³•å</p></li><li><p>å…·ä½“åˆ†ä¸ºå¦‚ä¸‹çš„ä¸‰ç§æƒ…å†µï¼š</p><ul><li>æƒ…å†µ1     å¯¹è±¡ :: éé™æ€æ–¹æ³•</li><li>æƒ…å†µ2     ç±» :: é™æ€æ–¹æ³•</li><li>æƒ…å†µ3     ç±» :: éé™æ€æ–¹æ³•</li></ul></li><li><p>æ–¹æ³•å¼•ç”¨ä½¿ç”¨çš„è¦æ±‚ï¼šè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„</p><p>å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ç›¸åŒï¼ï¼ˆé’ˆå¯¹äºæƒ…å†µ1å’Œæƒ…å†µ2ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–¹æ³•å¼•ç”¨çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 1.ä½¿ç”¨æƒ…å¢ƒï¼šå½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 2.æ–¹æ³•å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œè€ŒLambdaè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚æ‰€ä»¥</span></span><br><span class="line"><span class="comment"> * æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 3. ä½¿ç”¨æ ¼å¼ï¼š  ç±»(æˆ–å¯¹è±¡) :: æ–¹æ³•å</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 4. å…·ä½“åˆ†ä¸ºå¦‚ä¸‹çš„ä¸‰ç§æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment"> * æƒ…å†µ1     å¯¹è±¡ :: éé™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * æƒ…å†µ2     ç±» :: é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * æƒ…å†µ3     ç±» :: éé™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 5. æ–¹æ³•å¼•ç”¨ä½¿ç”¨çš„è¦æ±‚ï¼šè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„</span></span><br><span class="line"><span class="comment"> * å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ç›¸åŒï¼ï¼ˆé’ˆå¯¹äºæƒ…å†µ1å’Œæƒ…å†µ2ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodRefTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æƒ…å†µä¸€ï¼šå¯¹è±¡ :: å®ä¾‹æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//Consumerä¸­çš„void accept(T t)</span></span><br><span class="line">    <span class="comment">//PrintStreamä¸­çš„void println(T t)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        Consumer&lt;String&gt; con = s -&gt; System.out.println(s);</span><br><span class="line">        con.accept(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;********************&quot;</span>);</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> System.out;</span><br><span class="line">        Consumer&lt;String&gt; con2 = ps::println;</span><br><span class="line">        con.accept(<span class="string">&quot;ä¸Šæµ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Supplierä¸­çš„T get()</span></span><br><span class="line">    <span class="comment">//Employeeä¸­çš„String getName()</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;Tom&quot;</span>, <span class="number">22</span>, <span class="number">12104</span>);</span><br><span class="line">        Supplier&lt;String&gt; supplier = () -&gt; emp.getName();</span><br><span class="line">        System.out.println(supplier.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        Supplier&lt;String&gt; supplier2 = emp::getName;</span><br><span class="line">        System.out.println(supplier2.get());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æƒ…å†µäºŒï¼šç±» :: é™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//Comparatorä¸­çš„int compare(T t1,T t2)</span></span><br><span class="line">    <span class="comment">//Integerä¸­çš„int compare(T t1,T t2)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> &#123;</span><br><span class="line">        Comparator&lt;Integer&gt; com1 = (t1, t2) -&gt; Integer.compare(t1, t2);</span><br><span class="line">        System.out.println(com1.compare(<span class="number">12</span>, <span class="number">21</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        Comparator&lt;Integer&gt; com2 = Integer::compare;</span><br><span class="line">        System.out.println(com2.compare(<span class="number">12</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Functionä¸­çš„R apply(T t)</span></span><br><span class="line">    <span class="comment">//Mathä¸­çš„Long round(Double d)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> &#123;</span><br><span class="line">        Function&lt;Double, Long&gt; fun = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Double, Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Long <span class="title function_">apply</span><span class="params">(Double aDouble)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Math.round(aDouble);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾</span></span><br><span class="line">        Function&lt;Double, Long&gt; fun1 = d -&gt; Math.round(d);</span><br><span class="line">        System.out.println(fun1.apply(<span class="number">13.5</span>));</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        Function&lt;Double, Long&gt; fun2 = Math::round;</span><br><span class="line">        System.out.println(fun2.apply(<span class="number">11.2</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æƒ…å†µä¸‰ï¼šç±» :: å®ä¾‹æ–¹æ³•  (æœ‰éš¾åº¦)</span></span><br><span class="line">    <span class="comment">// Comparatorä¸­çš„int comapre(T t1,T t2)</span></span><br><span class="line">    <span class="comment">// Stringä¸­çš„int t1.compareTo(t2)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> &#123;</span><br><span class="line">        Comparator&lt;String&gt; com1 = (s1, s2) -&gt; s1.compareTo(s2);</span><br><span class="line">        System.out.println(com1.compare(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abd&quot;</span>));</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        Comparator&lt;String&gt; com2 = String::compareTo;</span><br><span class="line">        System.out.println(com2.compare(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;a&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//BiPredicateä¸­çš„boolean test(T t1, T t2);</span></span><br><span class="line">    <span class="comment">//Stringä¸­çš„boolean t1.equals(t2)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span> &#123;</span><br><span class="line">        BiPredicate&lt;String, String&gt; b1 = (t1, t2) -&gt; t1.equals(t2);</span><br><span class="line">        System.out.println(b1.test(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abc&quot;</span>));</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        BiPredicate&lt;String, String&gt; b2 = String::equals;</span><br><span class="line">        System.out.println(b2.test(<span class="string">&quot;abd&quot;</span>,<span class="string">&quot;acf&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Functionä¸­çš„R apply(T t)</span></span><br><span class="line">    <span class="comment">// Employeeä¸­çš„String getName();</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">()</span> &#123;</span><br><span class="line">       Function&lt;Employee,String&gt; f1 = n-&gt;n.getName();</span><br><span class="line">        System.out.println(f1.apply(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">03</span>,<span class="string">&quot;jerry&quot;</span>,<span class="number">10</span>,<span class="number">1231321</span>)));</span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------åˆ†å‰²çº¿------------&quot;</span>);</span><br><span class="line">        Function&lt;Employee,String&gt; f2 = Employee::getName;</span><br><span class="line">        System.out.println(f2.apply(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">06</span>,<span class="string">&quot;tim&quot;</span>,<span class="number">21</span>,<span class="number">132131</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ„é€ å™¨å¼•ç”¨"><a href="#æ„é€ å™¨å¼•ç”¨" class="headerlink" title="æ„é€ å™¨å¼•ç”¨"></a>æ„é€ å™¨å¼•ç”¨</h4><p>ä¸€ã€æ„é€ å™¨å¼•ç”¨</p><ul><li><p>å’Œæ–¹æ³•å¼•ç”¨ç±»ä¼¼ï¼Œå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œæ„é€ å™¨çš„å½¢å‚åˆ—è¡¨ä¸€è‡´ã€‚</p><p>æŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å³ä¸ºæ„é€ å™¨æ‰€å±çš„ç±»çš„ç±»å‹</p></li></ul><p>äºŒã€æ•°ç»„å¼•ç”¨</p><ul><li><pre><code>å¤§å®¶å¯ä»¥æŠŠæ•°ç»„çœ‹åšæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œåˆ™å†™æ³•ä¸æ„é€ å™¨å¼•ç”¨ä¸€è‡´ã€‚</code></pre></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorRefTest</span> &#123;</span><br><span class="line">   <span class="comment">//æ„é€ å™¨å¼•ç”¨</span></span><br><span class="line">    <span class="comment">//Supplierä¸­çš„T get()</span></span><br><span class="line">    <span class="comment">//Employeeçš„ç©ºå‚æ„é€ å™¨ï¼šEmployee()</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        Supplier&lt;Employee&gt; supplier1 = () -&gt; <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">        System.out.println(supplier1.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//æ¼”ç¤ºä½¿ç”¨æ„é€ å™¨å¼•ç”¨</span></span><br><span class="line">        Supplier&lt;Employee&gt; supplier2 = Employee::<span class="keyword">new</span>;</span><br><span class="line">        System.out.println(supplier2.get());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//Functionä¸­çš„R apply(T t)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        Function&lt;Integer,Employee&gt; function = <span class="keyword">new</span> <span class="title class_">Function</span>&lt;Integer, Employee&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Employee <span class="title function_">apply</span><span class="params">(Integer integer)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        Function&lt;Integer,Employee&gt; function1 = id -&gt; <span class="keyword">new</span> <span class="title class_">Employee</span>(id);</span><br><span class="line">        <span class="comment">//æ„é€ å™¨å¼•ç”¨</span></span><br><span class="line">        Function&lt;Integer,Employee&gt; function2 = Employee::<span class="keyword">new</span>;</span><br><span class="line">        System.out.println(function2.apply(<span class="number">1003</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//BiFunctionä¸­çš„R apply(T t,U u)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ„é€ å™¨å¼•ç”¨</span></span><br><span class="line">        BiFunction&lt;Integer,String,Employee&gt; biFunction = Employee::<span class="keyword">new</span>;</span><br><span class="line">        System.out.println( biFunction.apply(<span class="number">3306</span>,<span class="string">&quot;Steve&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æ•°ç»„å¼•ç”¨</span></span><br><span class="line">    <span class="comment">//Functionä¸­çš„R apply(T t)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        Function&lt;Integer,String[]&gt; function = length -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[length];</span><br><span class="line">        String[] arr1 = function.apply(<span class="number">5</span>);</span><br><span class="line">        System.out.println(Arrays.toString(arr1));</span><br><span class="line">    <span class="comment">//æ„é€ å™¨å¼•ç”¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;==========================&quot;</span>);</span><br><span class="line">        Function&lt;Integer,String[]&gt; fun2 = String[]::<span class="keyword">new</span>;</span><br><span class="line">        System.out.println(Arrays.toString(fun2.apply(<span class="number">8</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€å¼ºå¤§çš„Stream-API"><a href="#4ã€å¼ºå¤§çš„Stream-API" class="headerlink" title="4ã€å¼ºå¤§çš„Stream API"></a>4ã€å¼ºå¤§çš„Stream API</h3><h4 id="äº†è§£Stream"><a href="#äº†è§£Stream" class="headerlink" title="äº†è§£Stream"></a>äº†è§£Stream</h4><p>Stream æ˜¯ Java8 ä¸­å¤„ç†é›†åˆçš„å…³é”®æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå¯ä»¥æŒ‡å®šä½ å¸Œæœ›å¯¹ é›†åˆè¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥æ‰§è¡Œéå¸¸å¤æ‚çš„æŸ¥æ‰¾ã€è¿‡æ»¤å’Œæ˜ å°„æ•°æ®ç­‰æ“ä½œã€‚ ä½¿ç”¨Stream API å¯¹é›†åˆæ•°æ®è¿›è¡Œæ“ä½œï¼Œå°±ç±»ä¼¼äºä½¿ç”¨ SQL æ‰§è¡Œçš„æ•° æ®åº“æŸ¥è¯¢ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Stream API æ¥å¹¶è¡Œæ‰§è¡Œæ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œ Stream API æä¾›äº†ä¸€ç§é«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„å¤„ç†æ•°æ®çš„æ–¹å¼ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯Stream"><a href="#ä»€ä¹ˆæ˜¯Stream" class="headerlink" title="ä»€ä¹ˆæ˜¯Stream"></a>ä»€ä¹ˆæ˜¯Stream</h4><p>æµ(Stream) åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æ˜¯æ•°æ®æ¸ é“ï¼Œç”¨äºæ“ä½œæ•°æ®æºï¼ˆé›†åˆã€æ•°ç»„ç­‰ï¼‰æ‰€ç”Ÿæˆçš„å…ƒç´ åºåˆ—ã€‚</p><p><strong>â€œé›†åˆè®²çš„æ˜¯æ•°æ®ï¼Œæµè®²çš„æ˜¯è®¡ç®—ï¼â€</strong></p><p><strong>æ³¨æ„ï¼š</strong></p><p>â‘ Stream è‡ªå·±ä¸ä¼šå­˜å‚¨å…ƒç´ ã€‚</p><p>â‘¡Stream ä¸ä¼šæ”¹å˜æºå¯¹è±¡ã€‚ç›¸åï¼Œä»–ä»¬ä¼šè¿”å›ä¸€ä¸ªæŒæœ‰ç»“æœçš„æ–°Streamã€‚</p><p>â‘¢Stream æ“ä½œæ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ã€‚è¿™æ„å‘³ç€ä»–ä»¬ä¼šç­‰åˆ°éœ€è¦ç»“æœçš„æ—¶å€™æ‰æ‰§è¡Œã€‚</p><h4 id="Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤"><a href="#Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤" class="headerlink" title="Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤"></a>Streamæ“ä½œçš„ä¸‰ä¸ªæ­¥éª¤</h4><p>âš«åˆ›å»º Stream ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰ï¼Œè·å–ä¸€ä¸ªæµ</p><p>âš« ä¸­é—´æ“ä½œ ä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç†</p><p>å¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæµæ°´çº¿ï¼Œé™¤éæµæ°´ çº¿ä¸Šè§¦å‘ç»ˆæ­¢æ“ä½œï¼Œå¦åˆ™ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•çš„å¤„ç†ï¼ è€Œåœ¨ç»ˆæ­¢æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œç§°ä¸ºâ€œæƒ°æ€§æ±‚å€¼â€</p><p>âš« ç»ˆæ­¢æ“ä½œ(ç»ˆç«¯æ“ä½œ) ä¸€ä¸ªç»ˆæ­¢æ“ä½œï¼Œæ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœ</p><h4 id="åˆ›å»ºStreamæ•°æ®æº"><a href="#åˆ›å»ºStreamæ•°æ®æº" class="headerlink" title="åˆ›å»ºStreamæ•°æ®æº"></a>åˆ›å»ºStreamæ•°æ®æº</h4><p>æ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆçš„streamï¼ˆï¼‰æ–¹æ³•åˆ›å»º</p><p>æ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„ Arrays.stream(object[])åˆ›å»º</p><p>æ–¹å¼ä¸‰ï¼šé€šè¿‡Streamçš„ Ofï¼ˆï¼‰åˆ›å»º</p><p>æ–¹å¼å››ï¼šé€šè¿‡Stream çš„ iterate() å’Œ generate()åˆ›å»ºæ— é™æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamAPITest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»º Streamæ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆ</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line"><span class="comment">//        default Stream&lt;E&gt; stream() : è¿”å›ä¸€ä¸ªé¡ºåºæµ</span></span><br><span class="line">        Stream&lt;Employee&gt; stream = employees.stream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        default Stream&lt;E&gt; parallelStream() : è¿”å›ä¸€ä¸ªå¹¶è¡Œæµ</span></span><br><span class="line">        Stream&lt;Employee&gt; parallelStream = employees.parallelStream();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»º Streamæ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">10</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">78</span>&#125;;</span><br><span class="line">        <span class="comment">//è°ƒç”¨Arraysç±»çš„static &lt;T&gt; Stream&lt;T&gt; stream(T[] array): è¿”å›ä¸€ä¸ªæµ</span></span><br><span class="line">        <span class="type">IntStream</span> <span class="variable">intStream</span> <span class="operator">=</span> Arrays.stream(arr);</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰æ•°ç»„ç±» åˆ›å»º Stream</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>,<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>,<span class="string">&quot;Jerry&quot;</span>);</span><br><span class="line">        Employee[] employees = <span class="keyword">new</span> <span class="title class_">Employee</span>[]&#123;employee,employee2&#125;;</span><br><span class="line">        Stream&lt;Employee&gt; stream = Arrays.stream(employees);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ›å»º Streamæ–¹å¼ä¸‰ï¼šé€šè¿‡Streamçš„of()</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»º Streamæ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµ</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//      è¿­ä»£</span></span><br><span class="line"><span class="comment">//      public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</span></span><br><span class="line">        <span class="comment">//éå†å‰10ä¸ªå¶æ•°</span></span><br><span class="line"><span class="comment">//     Stream.iterate(0,t -&gt; t+2).limit(10).forEach(System.out::println);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//      ç”Ÿæˆ</span></span><br><span class="line"><span class="comment">//      public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</span></span><br><span class="line">        Stream.generate(Math::random).limit(<span class="number">5</span>).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸­é—´æ“ä½œ"><a href="#ä¸­é—´æ“ä½œ" class="headerlink" title="ä¸­é—´æ“ä½œ"></a>ä¸­é—´æ“ä½œ</h4><h5 id="ç­›é€‰ä¸åˆ‡ç‰‡"><a href="#ç­›é€‰ä¸åˆ‡ç‰‡" class="headerlink" title="ç­›é€‰ä¸åˆ‡ç‰‡"></a>ç­›é€‰ä¸åˆ‡ç‰‡</h5><p>filterï¼ˆPredicate pï¼‰ æ¥å—lambdaï¼Œä»æµä¸­æ’é™¤æŸäº›å…ƒç´ ã€‚</p><p>limit(long maxSize)æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡</p><p>skip(long n) è·³è¿‡æŸå…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰nä¸ªå…ƒç´ çš„æµï¼Œè‹¥æµä¸­å…ƒç´ ä¸è¶³nä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸limitï¼ˆnï¼‰äº’è¡¥</p><p>distinct()ç­›é€‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„ hashCode() å’Œ  equals()  å»é™¤é‡å¤å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//ç­›é€‰ä¸åˆ‡ç‰‡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">        Stream&lt;Employee&gt; stream = employees.stream();</span><br><span class="line"><span class="comment">//        filter(Predicate p) æ¥æ”¶ Lambda ï¼Œ ä»æµä¸­æ’é™¤æŸäº›å…ƒç´ ã€‚</span></span><br><span class="line">        <span class="comment">//è¿‡æ»¤å¾—åˆ°å·¥èµ„å¤§äºä¸ƒåƒçš„çš„å‘˜å·¥ forEachç»ˆæ­¢æ“ä½œï¼Œå†æ¬¡ä½¿ç”¨streamçš„æ–¹æ³•æ—¶éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„stream</span></span><br><span class="line">        stream.filter( employee -&gt; employee.getSalary()&gt;<span class="number">7000</span>).forEach(System.out::println);</span><br><span class="line">        System.out.println(<span class="string">&quot;================&quot;</span>);</span><br><span class="line">        <span class="comment">//        limit(long maxSize) æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡ã€‚</span></span><br><span class="line">        employees.stream().limit(<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line"><span class="comment">//        skip(long n) è·³è¿‡å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰ n ä¸ªå…ƒç´ çš„æµã€‚è‹¥æµä¸­å…ƒç´ ä¸è¶³ n ä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸ limit(n) äº’è¡¥</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">        employees.stream().skip(<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line">        System.out.println(<span class="string">&quot;======================&quot;</span>);</span><br><span class="line">        <span class="comment">//        distinct() ç­›é€‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„ hashCode() å’Œ equals() å»é™¤é‡å¤å…ƒç´ </span></span><br><span class="line">        <span class="comment">//æ‰‹åŠ¨æ·»åŠ é‡å¤æ•°æ®</span></span><br><span class="line">        employees.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1200</span>,<span class="string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="number">41</span>,<span class="number">23131</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1200</span>,<span class="string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="number">45</span>,<span class="number">23131</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1200</span>,<span class="string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="number">41</span>,<span class="number">23131</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1200</span>,<span class="string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="number">41</span>,<span class="number">23131</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1200</span>,<span class="string">&quot;åˆ˜å¼ºä¸œ&quot;</span>,<span class="number">41</span>,<span class="number">23131</span>));</span><br><span class="line">        employees.stream().distinct().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h5><ul><li><p><code>map(Function f)</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒ ç´ ä¸Šï¼Œ</p><p>å¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚</p></li><li><p><code>mapToDouble(ToDoubleFunction f)</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒ ç´ ä¸Šï¼Œ</p><p>äº§ç”Ÿä¸€ä¸ªæ–°çš„ <code>DoubleStream</code>ã€‚</p></li><li><p><code> mapToInt(ToIntFunction f)</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒ ç´ ä¸Šï¼Œ</p><p>äº§ç”Ÿä¸€ä¸ªæ–°çš„ <code>IntStream</code>ã€‚</p></li><li><p><code>mapToLong(ToLongFunction f)</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒ ç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ <code>LongStream</code>ã€‚</p></li><li><p><code>flatMap(Function f)</code>æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ˜ å°„</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">/*map(Function f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚*/</span></span><br><span class="line">       List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;aa&quot;</span>, <span class="string">&quot;bb&quot;</span>, <span class="string">&quot;cc&quot;</span>, <span class="string">&quot;dd&quot;</span>);</span><br><span class="line">       Stream&lt;String&gt; stream = list.stream();</span><br><span class="line">       stream.map(str-&gt;str.toUpperCase()).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ç»ƒä¹ 1ï¼šè·å–å‘˜å·¥å§“åé•¿åº¦å¤§äº3çš„å‘˜å·¥å§“å</span></span><br><span class="line">       List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">       Stream&lt;Employee&gt; employeeStream = employees.stream();</span><br><span class="line">       Stream&lt;String&gt; stringStream = employeeStream.map(Employee::getName);</span><br><span class="line">       stringStream.filter(name-&gt;name.length()&gt;<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line">       System.out.println();</span><br><span class="line">       <span class="comment">//ç»ƒä¹ 2</span></span><br><span class="line">       Stream&lt;Stream&lt;Character&gt;&gt; streamStream = list.stream().map(StreamTest2::StringToStream);</span><br><span class="line">       <span class="comment">/*streamStream.forEach(new Consumer&lt;Stream&lt;Character&gt;&gt;() &#123;</span></span><br><span class="line"><span class="comment">           @Override</span></span><br><span class="line"><span class="comment">           public void accept(Stream&lt;Character&gt; characterStream) &#123;</span></span><br><span class="line"><span class="comment">               characterStream.forEach(new Consumer&lt;Character&gt;() &#123;</span></span><br><span class="line"><span class="comment">                   @Override</span></span><br><span class="line"><span class="comment">                   public void accept(Character character) &#123;</span></span><br><span class="line"><span class="comment">                       System.out.println(character);</span></span><br><span class="line"><span class="comment">                   &#125;</span></span><br><span class="line"><span class="comment">               &#125;);</span></span><br><span class="line"><span class="comment">           &#125;</span></span><br><span class="line"><span class="comment">       &#125;);*/</span></span><br><span class="line">       streamStream.forEach(characterStream -&gt; &#123;characterStream.forEach(System.out::println);&#125;);</span><br><span class="line">       System.out.println(<span class="string">&quot;åˆ†å‰²çº¿---------&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* flatMap(Function f) æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œ</span></span><br><span class="line"><span class="comment">       ç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµ ç±»ä¼¼äºé›†åˆListçš„addAllï¼ˆï¼‰æ–¹æ³•ã€‚  */</span></span><br><span class="line">       Stream&lt;Character&gt; characterStream = list.stream().flatMap(StreamTest2::StringToStream);</span><br><span class="line">       characterStream.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> Stream&lt;Character&gt; <span class="title function_">StringToStream</span><span class="params">(String str)</span>&#123;</span><br><span class="line">       ArrayList&lt;Character&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span> (Character c : str.toCharArray())&#123;</span><br><span class="line">           list.add(c);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> list.stream();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p><code>sorted() </code>äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰è‡ªç„¶é¡ºåºæ’åº</p><p><code>sorted(Comparator comp)</code>äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰æ¯”è¾ƒå™¨é¡ºåºæ’åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’åº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">11</span>, <span class="number">66</span>, <span class="number">3</span>, -<span class="number">9</span>, <span class="number">6</span>, <span class="number">55</span>, <span class="number">21</span>, <span class="number">33</span>);</span><br><span class="line">        <span class="comment">//è‡ªç„¶æ’åº  æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åº</span></span><br><span class="line">        list.stream().sorted().forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">        List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line"><span class="comment">//        employees.stream().sorted().forEach(System.out::println); æŠ¥é”™ï¼ŒåŸå› æ˜¯ EmployeeDataæ²¡æœ‰å®ç°Comparableæ¥å£</span></span><br><span class="line">        employees.stream().sorted((e1,e2)-&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">compare</span> <span class="operator">=</span> Integer.compare(e1.getAge(), e2.getAge());</span><br><span class="line">            <span class="comment">//å¦‚æœå¹´é¾„ç›¸åŒï¼Œå°±æŒ‰ç…§å·¥èµ„æ’åº</span></span><br><span class="line">            <span class="keyword">if</span> (compare !=<span class="number">0</span>)</span><br><span class="line">                 <span class="keyword">return</span> compare;</span><br><span class="line">                 <span class="keyword">else</span></span><br><span class="line">                     <span class="keyword">return</span> (<span class="type">int</span>) (e1.getSalary()-e2.getSalary());</span><br><span class="line">                &#125;</span><br><span class="line">        ).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Streamçš„ç»ˆæ­¢æ“ä½œ"><a href="#Streamçš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="Streamçš„ç»ˆæ­¢æ“ä½œ"></a>Streamçš„ç»ˆæ­¢æ“ä½œ</h4><p>ç»ˆç«¯æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœå¯ä»¥æ˜¯ä»»ä½•ä¸æ˜¯æµçš„ å€¼ï¼Œ</p><p>ä¾‹å¦‚ï¼šListã€Integerï¼Œç”šè‡³æ˜¯ void</p><h5 id="åŒ¹é…ä¸æŸ¥æ‰¾"><a href="#åŒ¹é…ä¸æŸ¥æ‰¾" class="headerlink" title="åŒ¹é…ä¸æŸ¥æ‰¾"></a>åŒ¹é…ä¸æŸ¥æ‰¾</h5><p><code>allMatch(Predicate p) </code>æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ </p><p><code>anyMatch(Predicate p)</code>æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ </p><p><code>noneMatch(Predicate p)</code> æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´ </p><p><code>findFirst() </code>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </p><p><code>findAny()</code>è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ </p><p><code>count()</code> è¿”å›æµä¸­å…ƒç´ æ€»æ•°</p><p><code>max(Comparator c) </code>è¿”å›æµä¸­æœ€å¤§å€¼</p><p><code>min(Comparator c)</code> è¿”å›æµä¸­æœ€å°å€¼</p><p><code>forEach(Consumer c) </code>å†…éƒ¨è¿­ä»£(ä½¿ç”¨ Collection æ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ ä»£ï¼Œç§°ä¸ºå¤–éƒ¨è¿­ä»£ã€‚</p><p>â€‹ç›¸åï¼ŒStream API ä½¿ç”¨å†…éƒ¨ è¿­ä»£â€”â€”å®ƒå¸®ä½ æŠŠè¿­ä»£åšäº†)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//        allMatch(Predicate p) æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´  ç»ƒä¹ ï¼šæ˜¯å¦æ‰€æœ‰çš„å‘˜å·¥çš„å¹´é¾„éƒ½å¤§äº18</span></span><br><span class="line">        List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">allMatch</span> <span class="operator">=</span> employees.stream().allMatch(e -&gt; e.getAge() &gt; <span class="number">18</span>);</span><br><span class="line">        System.out.println(allMatch);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        anyMatch(Predicate p) æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´  ç»ƒä¹ ï¼šæ˜¯å¦æœ‰å‘˜å·¥å·¥èµ„å¤§äºä¸€ä¸‡</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">anyMatch</span> <span class="operator">=</span> employees.stream().anyMatch(e -&gt; e.getSalary() &gt; <span class="number">10000</span>);</span><br><span class="line">        System.out.println(anyMatch);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        noneMatch(Predicate p) æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´  ç»ƒä¹ ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å‘˜å·¥å§“é›·</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">noneMatch</span> <span class="operator">=</span> employees.stream().noneMatch(employee -&gt; employee.getName().startsWith(<span class="string">&quot;é›·&quot;</span>));</span><br><span class="line">        System.out.println(noneMatch);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        findFirst() è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        Optional&lt;Employee&gt; first = employees.stream().findFirst();</span><br><span class="line">        System.out.println(first);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        findAny() è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ </span></span><br><span class="line">        Optional&lt;Employee&gt; any = employees.parallelStream().findAny();</span><br><span class="line">        System.out.println(any);</span><br><span class="line"><span class="comment">//        count()`è¿”å›æµä¸­å…ƒç´ æ€»æ•°</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> employees.stream().filter(employee -&gt; employee.getSalary() &gt; <span class="number">3000</span>).count();</span><br><span class="line">        System.out.println(count);</span><br><span class="line"><span class="comment">//        max(Comparator c) è¿”å›æµä¸­æœ€å¤§å€¼ ç»ƒä¹ ï¼šè¿”å›æœ€é«˜çš„å·¥èµ„</span></span><br><span class="line">        Stream&lt;Double&gt; salaryStream = employees.stream().map(Employee::getSalary);</span><br><span class="line">        Optional&lt;Double&gt; maxSalary = salaryStream.max(Double::compare);</span><br><span class="line">        System.out.println(maxSalary);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        min(Comparator c) è¿”å›æµä¸­æœ€å°å€¼ ç»ƒä¹ ï¼šè¿”å›å·¥èµ„æœ€å°çš„å‘˜å·¥</span></span><br><span class="line">        Optional&lt;Employee&gt; employee = employees.stream().min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));</span><br><span class="line">        System.out.println(employee);</span><br><span class="line"><span class="comment">//        forEach(Consumer c) å†…éƒ¨è¿­ä»£</span></span><br><span class="line"><span class="comment">//            (ä½¿ç”¨ Collection æ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ ä»£ï¼Œç§°ä¸ºå¤–éƒ¨è¿­ä»£ã€‚ç›¸åï¼ŒStream API ä½¿ç”¨å†…éƒ¨ è¿­ä»£â€”â€”å®ƒå¸®ä½ æŠŠè¿­ä»£åšäº†)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ†å‰²çº¿================&quot;</span>);</span><br><span class="line">        employees.stream().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="å½’çº¦"><a href="#å½’çº¦" class="headerlink" title="å½’çº¦"></a>å½’çº¦</h5><p><code>reduce(T iden, BinaryOperator b)</code>å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚ è¿”å› T</p><p><code>reduce(BinaryOperator b) </code>å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚ è¿”å› Optional<T></p><p>å¤‡æ³¨ï¼šmap å’Œ reduce çš„è¿æ¥é€šå¸¸ç§°ä¸ºmap-reduce æ¨¡å¼ï¼Œå›  Google ç”¨å®ƒ æ¥è¿›è¡Œç½‘ç»œæœç´¢è€Œå‡ºåã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        `reduce(T iden, BinaryOperator b)`å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› T</span></span><br><span class="line">        <span class="comment">//ç»ƒä¹ ï¼šè®¡ç®—1-10çš„å’Œ</span></span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> list.stream().reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">        System.out.println(integer);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        `reduce(BinaryOperator b) `å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Optional&lt;T &gt;</span></span><br><span class="line">        <span class="comment">//ç»ƒä¹ ï¼šæ±‚å…¬å¸å‘˜å·¥çš„å·¥èµ„æ€»å’Œ</span></span><br><span class="line">        List&lt;Employee&gt; employees = EmployeeData.getEmployees();</span><br><span class="line">        Optional&lt;Double&gt; sumMoney = employees.stream().map(Employee::getSalary).reduce(<span class="comment">/*new BinaryOperator&lt;Double&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public Double apply(Double aDouble, Double aDouble2) &#123;</span></span><br><span class="line"><span class="comment">                return aDouble + aDouble2;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        Double::sum);</span><br><span class="line">        System.out.println(sumMoney);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="æ”¶é›†"><a href="#æ”¶é›†" class="headerlink" title="æ”¶é›†"></a>æ”¶é›†</h5><p><code>collect(Collector c) </code></p><p>å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ª Collectoræ¥å£çš„ å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        collect(Collector c) å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ª Collectoræ¥å£çš„</span></span><br><span class="line"><span class="comment">//        å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³• ç»ƒä¹ ï¼šåŒ¹é…å·¥èµ„å¤§äºå…­åƒçš„å‘˜å·¥ï¼Œå¹¶ä»¥é›†åˆå½¢å¼è¾“å‡º</span></span><br><span class="line">        List&lt;Employee&gt; employeeList = EmployeeData.getEmployees().stream().filter(e -&gt; e.getSalary() &gt; <span class="number">6000</span>).collect(Collectors.toList());</span><br><span class="line">        employeeList.forEach(System.out::println);</span><br><span class="line">        System.out.println();</span><br><span class="line">        Set&lt;Employee&gt; employeeSet = EmployeeData.getEmployees().stream().filter(e -&gt; e.getSalary() &gt; <span class="number">6000</span>).collect(Collectors.toSet());</span><br><span class="line">        employeeSet.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="5ã€Optionalç±»"><a href="#5ã€Optionalç±»" class="headerlink" title="5ã€Optionalç±»"></a>5ã€Optionalç±»</h3><p>Optional ç±»(java.util.Optional) æ˜¯ä¸€ä¸ªå®¹å™¨ç±»ï¼Œä»£è¡¨ä¸€ä¸ªå€¼å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œ åŸæ¥ç”¨ null è¡¨ç¤ºä¸€ä¸ªå€¼ä¸å­˜åœ¨ï¼Œç°åœ¨ Optional å¯ä»¥æ›´å¥½çš„è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µã€‚å¹¶ä¸” å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p><strong>å¸¸ç”¨æ–¹æ³•ï¼š</strong><br><code>Optional.of(T t) </code>: åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹<br><code>Optional.empty()</code> : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹<br><code>Optional.ofNullable(T t)</code>è‹¥ t ä¸ä¸º null,åˆ›å»º Optional å®ä¾‹,å¦åˆ™åˆ›å»ºç©ºå®ä¾‹<br><code>isPresent() </code>: åˆ¤æ–­æ˜¯å¦åŒ…å«å€¼<br><code>orElse(T t)</code> : å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›t<br><code>orElseGet(Supplier s)</code> :å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å› s è·å–çš„å€¼<br><code>map(Function f)</code>: å¦‚æœæœ‰å€¼å¯¹å…¶å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„Optionalï¼Œå¦åˆ™è¿”å› Optional.empty()<br><code>flatMap(Function mapper)</code>:ä¸ map ç±»ä¼¼ï¼Œè¦æ±‚è¿”å›å€¼å¿…é¡»æ˜¯Optional</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Optionalç±»ï¼šä¸ºäº†åœ¨ç¨‹åºä¸­é¿å…å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸è€Œåˆ›å»ºçš„ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å¸¸ç”¨çš„æ–¹æ³•ï¼šofNullable(T t)</span></span><br><span class="line"><span class="comment"> *            orElse(T t)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionalTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Optional.of(T t) : åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ï¼Œtå¿…é¡»éç©ºï¼›</span></span><br><span class="line"><span class="comment">Optional.empty() : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹</span></span><br><span class="line"><span class="comment">Optional.ofNullable(T t)ï¼štå¯ä»¥ä¸ºnull</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Girl</span> <span class="variable">girl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Girl</span>();</span><br><span class="line"><span class="comment">//        girl = null;</span></span><br><span class="line">        <span class="comment">//of(T t):ä¿è¯tæ˜¯éç©ºçš„</span></span><br><span class="line">        Optional&lt;Girl&gt; optionalGirl = Optional.of(girl);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Girl</span> <span class="variable">girl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Girl</span>();</span><br><span class="line"><span class="comment">//        girl = null;</span></span><br><span class="line">        <span class="comment">//ofNullable(T t)ï¼štå¯ä»¥ä¸ºnull</span></span><br><span class="line">        Optional&lt;Girl&gt; optionalGirl = Optional.ofNullable(girl);</span><br><span class="line">        System.out.println(optionalGirl);</span><br><span class="line">        <span class="comment">//orElse(T t1):å¦‚æœå•å‰çš„Optionalå†…éƒ¨å°è£…çš„tæ˜¯éç©ºçš„ï¼Œåˆ™è¿”å›å†…éƒ¨çš„t.</span></span><br><span class="line">        <span class="comment">//å¦‚æœå†…éƒ¨çš„tæ˜¯ç©ºçš„ï¼Œåˆ™è¿”å›orElse()æ–¹æ³•ä¸­çš„å‚æ•°t1.</span></span><br><span class="line">        <span class="type">Girl</span> <span class="variable">girl1</span> <span class="operator">=</span> optionalGirl.orElse(<span class="keyword">new</span> <span class="title class_">Girl</span>(<span class="string">&quot;èµµä¸½é¢–&quot;</span>));</span><br><span class="line">        System.out.println(girl1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGirlName</span><span class="params">(Boy boy)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> boy.getGirl().getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Boy</span> <span class="variable">boy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boy</span>();</span><br><span class="line">        boy = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">girlName</span> <span class="operator">=</span> getGirlName(boy);</span><br><span class="line">        System.out.println(girlName);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¼˜åŒ–ä»¥åçš„getGirlName():</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGirlName1</span><span class="params">(Boy boy)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(boy != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">Girl</span> <span class="variable">girl</span> <span class="operator">=</span> boy.getGirl();</span><br><span class="line">            <span class="keyword">if</span>(girl != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> girl.getName();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Boy</span> <span class="variable">boy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boy</span>();</span><br><span class="line">        boy = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">girlName</span> <span class="operator">=</span> getGirlName1(boy);</span><br><span class="line">        System.out.println(girlName);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨Optionalç±»çš„getGirlName():</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGirlName2</span><span class="params">(Boy boy)</span>&#123;</span><br><span class="line"></span><br><span class="line">        Optional&lt;Boy&gt; boyOptional = Optional.ofNullable(boy);</span><br><span class="line">        <span class="comment">//æ­¤æ—¶çš„boy1ä¸€å®šéç©º</span></span><br><span class="line">        <span class="type">Boy</span> <span class="variable">boy1</span> <span class="operator">=</span> boyOptional.orElse(<span class="keyword">new</span> <span class="title class_">Boy</span>(<span class="keyword">new</span> <span class="title class_">Girl</span>(<span class="string">&quot;è¿ªä¸½çƒ­å·´&quot;</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="type">Girl</span> <span class="variable">girl</span> <span class="operator">=</span> boy1.getGirl();</span><br><span class="line"></span><br><span class="line">        Optional&lt;Girl&gt; girlOptional = Optional.ofNullable(girl);</span><br><span class="line">        <span class="comment">//girl1ä¸€å®šéç©º</span></span><br><span class="line">        <span class="type">Girl</span> <span class="variable">girl1</span> <span class="operator">=</span> girlOptional.orElse(<span class="keyword">new</span> <span class="title class_">Girl</span>(<span class="string">&quot;å¤åŠ›å¨œæ‰&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> girl1.getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Boy</span> <span class="variable">boy</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        boy = <span class="keyword">new</span> <span class="title class_">Boy</span>();</span><br><span class="line">        boy = <span class="keyword">new</span> <span class="title class_">Boy</span>(<span class="keyword">new</span> <span class="title class_">Girl</span>(<span class="string">&quot;ikura&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">girlName</span> <span class="operator">=</span> getGirlName2(boy);</span><br><span class="line">        System.out.println(girlName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Java8 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>

<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Spring5ç¬”è®° | twintea's blogğŸ£</title><meta name="author" content="ğŸ¤twinteağŸ¥"><meta name="copyright" content="ğŸ¤twinteağŸ¥"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å†…å®¹ä»‹ç»1ã€Spring æ¡†æ¶æ¦‚è¿° 2ã€IOC å®¹å™¨ â€‹	ï¼ˆ1ï¼‰IOC åº•å±‚åŸç† â€‹	ï¼ˆ2ï¼‰IOC æ¥å£ï¼ˆBeanFactoryï¼‰ â€‹	ï¼ˆ3ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäº xmlï¼‰ â€‹	ï¼ˆ4ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäºæ³¨è§£ï¼‰ 3ã€Aop 4ã€JdbcTemplate 5ã€äº‹åŠ¡ç®¡ç† 6ã€Spring5 æ–°ç‰¹æ€§ springæ¡†æ¶æ¦‚è¿° springæ¡†æ¶æ˜¯ è½»é‡çº§çš„ å¼€æºçš„ javaEEæ¡†æ¶"><meta property="og:type" content="article"><meta property="og:title" content="Spring5ç¬”è®°"><meta property="og:url" content="https://blog.twintea.top/posts/70b6ad8d.html"><meta property="og:site_name" content="twintea&#39;s blogğŸ£"><meta property="og:description" content="å†…å®¹ä»‹ç»1ã€Spring æ¡†æ¶æ¦‚è¿° 2ã€IOC å®¹å™¨ â€‹	ï¼ˆ1ï¼‰IOC åº•å±‚åŸç† â€‹	ï¼ˆ2ï¼‰IOC æ¥å£ï¼ˆBeanFactoryï¼‰ â€‹	ï¼ˆ3ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäº xmlï¼‰ â€‹	ï¼ˆ4ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäºæ³¨è§£ï¼‰ 3ã€Aop 4ã€JdbcTemplate 5ã€äº‹åŠ¡ç®¡ç† 6ã€Spring5 æ–°ç‰¹æ€§ springæ¡†æ¶æ¦‚è¿° springæ¡†æ¶æ˜¯ è½»é‡çº§çš„ å¼€æºçš„ javaEEæ¡†æ¶"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://static-bed.twintea.top/wallpaper/TIM%E5%9B%BE%E7%89%8720181208144407.jpg"><meta property="article:published_time" content="2022-01-23T22:00:00.000Z"><meta property="article:modified_time" content="2023-03-12T22:00:00.000Z"><meta property="article:author" content="ğŸ¤twinteağŸ¥"><meta property="article:tag" content="Spring"><meta property="article:tag" content="Spring5"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://static-bed.twintea.top/wallpaper/TIM%E5%9B%BE%E7%89%8720181208144407.jpg"><link rel="shortcut icon" href="https://www.emojiall.com/en/header-svg/%F0%9F%90%A3.svg"><link rel="canonical" href="https://blog.twintea.top/posts/70b6ad8d.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç°¡"},noticeOutdate:{limitDay:500,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:50,languages:{author:"ä½œè€…: ğŸ¤twinteağŸ¥",link:"é“¾æ¥: ",source:"æ¥æº: twintea's blogğŸ£",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",cht_to_chs:"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",day_to_night:"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js",css:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Spring5ç¬”è®°",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-03-12 22:00:00"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const n=saveToLocal.get("aside-status");void 0!==n&&("hide"===n?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"></head><body><link rel="stylesheet" href="/css/progress_bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/avatar.jfif" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://static-bed.twintea.top/wallpaper/TIM%E5%9B%BE%E7%89%8720181208144407.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="twintea's blogğŸ£"><span class="site-name">twintea's blogğŸ£</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i> <span>ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Spring5ç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-01-23T22:00:00.000Z" title="å‘è¡¨äº 2022-01-23 22:00:00">2022-01-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-03-12T22:00:00.000Z" title="æ›´æ–°äº 2023-03-12 22:00:00">2023-03-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Spring%E5%AE%B6%E6%97%8F/">Springå®¶æ—</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">11.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>48åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Spring5ç¬”è®°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="å†…å®¹ä»‹ç»"><a href="#å†…å®¹ä»‹ç»" class="headerlink" title="å†…å®¹ä»‹ç»"></a>å†…å®¹ä»‹ç»</h2><p>1ã€Spring æ¡†æ¶æ¦‚è¿°</p><p>2ã€IOC å®¹å™¨</p><p>â€‹ ï¼ˆ1ï¼‰IOC åº•å±‚åŸç†</p><p>â€‹ ï¼ˆ2ï¼‰IOC æ¥å£ï¼ˆBeanFactoryï¼‰</p><p>â€‹ ï¼ˆ3ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäº xmlï¼‰</p><p>â€‹ ï¼ˆ4ï¼‰IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäºæ³¨è§£ï¼‰</p><p>3ã€Aop</p><p>4ã€JdbcTemplate</p><p>5ã€äº‹åŠ¡ç®¡ç†</p><p>6ã€Spring5 æ–°ç‰¹æ€§</p><h2 id="springæ¡†æ¶æ¦‚è¿°"><a href="#springæ¡†æ¶æ¦‚è¿°" class="headerlink" title="springæ¡†æ¶æ¦‚è¿°"></a>springæ¡†æ¶æ¦‚è¿°</h2><ol><li>springæ¡†æ¶æ˜¯ è½»é‡çº§çš„ å¼€æºçš„ javaEEæ¡†æ¶</li><li>springå¯ä»¥è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§</li><li>springæœ‰ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ† ioc å’Œ aop<ul><li>ioc ï¼šæ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡è¿‡ç¨‹äº¤ç»™spring è¿›è¡Œç®¡ç†</li><li>aop: é¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼º</li></ul></li><li>spring çš„ç‰¹ç‚¹<ul><li>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘</li><li>aopç¼–ç¨‹æ”¯æŒ</li><li>æ–¹ä¾¿ç¨‹åºæµ‹è¯•</li><li>æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ</li><li>æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ</li><li>é™ä½apiå¼€å‘éš¾åº¦</li></ul></li></ol><h2 id="spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹"><a href="#spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹"></a>spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹</h2><p>å‰å¾€springå®˜ç½‘ä¸‹è½½ spring5 <a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io</a></p><p>spring æ¨¡å—å›¾ï¼š</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206195132559.png" alt="image-20211206195132559" style="zoom:67%"><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¼•å…¥ spring çš„åŸºç¡€jaråŒ…</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206195556241.png" alt="image-20211206195556241"></p><p>ç¼–å†™ä¸€ä¸ªç±» User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addæ–¹æ³•....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨srcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªspring é…ç½®æ–‡ä»¶</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206200223578.png" alt="image-20211206200223578"></p><p>é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®userå¯¹è±¡åˆ›å»º--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±» test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line"><span class="comment">//        è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        user.add();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><h3 id="IOCæ¦‚å¿µå’Œåº•å±‚åŸç†"><a href="#IOCæ¦‚å¿µå’Œåº•å±‚åŸç†" class="headerlink" title="IOCæ¦‚å¿µå’Œåº•å±‚åŸç†"></a>IOCæ¦‚å¿µå’Œåº•å±‚åŸç†</h3><h4 id="ä»€ä¹ˆæ˜¯IOC"><a href="#ä»€ä¹ˆæ˜¯IOC" class="headerlink" title="ä»€ä¹ˆæ˜¯IOC"></a>ä»€ä¹ˆæ˜¯IOC</h4><p>ï¼ˆInversion of Control&#x2F;DependencyInjection(Ioc&#x2F;DI)ï¼‰<br>æ˜¯æ§åˆ¶åè½¬ï¼Œå³å°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨äº¤ç»™ spring ç®¡ç†</p><p>IOCçš„ä½œç”¨æ˜¯é™ä½è€¦åˆåº¦</p><p>spring5å…¥é—¨æ¡ˆä¾‹å°±æ˜¯å¯¹IOCçš„ä½¿ç”¨</p><h4 id="IOCçš„åº•å±‚åŸç†"><a href="#IOCçš„åº•å±‚åŸç†" class="headerlink" title="IOCçš„åº•å±‚åŸç†"></a>IOCçš„åº•å±‚åŸç†</h4><p>1ã€ç”¨åˆ°çš„æŠ€æœ¯ï¼šxmlè§£æï¼Œå·¥å‚æ¨¡å¼ï¼Œåå°„</p><p>2ã€ç”»å›¾è®²è§£IOCåº•å±‚åŸç†</p><p>å·¥å‚æ¨¡å¼</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206203743410.png" alt="image-20211206203743410"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211206204212635.png" alt="image-20211206204212635"></p><p>3ã€IOCå®¹å™¨æ¥å£</p><ul><li><p>IOCæ€æƒ³åŸºäºIOCå®¹å™¨å®Œæˆï¼ŒIOCå®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚</p></li><li><p>springæä¾›IOCå®¹å™¨å®ç°ä¸¤ç§æ–¹å¼ï¼ˆä¸¤ä¸ªæ¥å£ï¼‰</p><p>BeanFactory ï¼šIOCå®¹å™¨åŸºæœ¬å®ç°ï¼Œä¾›springå†…éƒ¨ä½¿ç”¨ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨</p><p>*ç‰¹ç‚¹ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–ï¼ˆä½¿ç”¨ï¼‰å¯¹è±¡æ—¶å€™æ‰å»åˆ›å»º</p><p>ApplicationContextï¼šBeanFactoryæ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¾›å¼€å‘äººå‘˜ä½¿ç”¨</p><p>*ç‰¹ç‚¹ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠé…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º</p></li></ul><h2 id="IOCæ“ä½œBeanç®¡ç†"><a href="#IOCæ“ä½œBeanç®¡ç†" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†"></a>IOCæ“ä½œBeanç®¡ç†</h2><h3 id="ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰"><a href="#ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰"></a>ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰</h3><p>1ã€Beanç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ</p><ul><li>springåˆ›å»ºå¯¹è±¡</li><li>springå±æ€§æ³¨å…¥å±æ€§</li></ul><p>2ã€Beanç®¡ç†æ“ä½œçš„ä¸¤ç§æ–¹å¼</p><ul><li>åŸºäºxmlæ–¹å¼</li><li>åŸºäºæ³¨è§£æ–¹å¼</li></ul><h3 id="åŸºäºxmlæ–¹å¼çš„beanç®¡ç†"><a href="#åŸºäºxmlæ–¹å¼çš„beanç®¡ç†" class="headerlink" title="åŸºäºxmlæ–¹å¼çš„beanç®¡ç†"></a>åŸºäºxmlæ–¹å¼çš„beanç®¡ç†</h3><h4 id="1ã€springå¯¹è±¡åˆ›å»º"><a href="#1ã€springå¯¹è±¡åˆ›å»º" class="headerlink" title="1ã€springå¯¹è±¡åˆ›å»º"></a>1ã€springå¯¹è±¡åˆ›å»º</h4><ul><li><p>xmlé…ç½®ï¼š</p><p>ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨beanæ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”çš„å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»º</p><p>ï¼ˆ2ï¼‰åœ¨ beanæ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œä»‹ç»å¸¸ç”¨çš„å±æ€§ï¼š</p><p>â€‹ idï¼šå”¯ä¸€æ ‡è¯†ç¬¦</p><p>â€‹ class: ç±»çš„å…¨ç±»åï¼ˆåŒ…ç±»è·¯å¾„ï¼‰</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--é…ç½®userå¯¹è±¡åˆ›å»º--&gt;</span><br><span class="line">    &lt;bean id=&quot;user&quot; class=&quot;com.izumi.spring5.User&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure><p>â€‹ ï¼ˆ3ï¼‰åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ•°æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»º</p><h4 id="2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§"><a href="#2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§" class="headerlink" title="2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§"></a>2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§</h4><p>ï¼ˆ1ï¼‰DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§</p><p>â€‹ å®ƒå’ŒIOCæ˜¯ä»€ä¹ˆå…³ç³»ï¼ŸDIæ˜¯IOCå®¹å™¨æ“ä½œBeanç®¡ç†å±æ€§æ³¨å…¥çš„å…·ä½“å®ç°</p><p>â€‹ å…ˆåˆ›å»ºå¯¹è±¡ï¼Œå†æ³¨å…¥å±æ€§</p><h5 id="ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡-set-æ–¹æ³•æ³¨å…¥"><a href="#ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡-set-æ–¹æ³•æ³¨å…¥" class="headerlink" title="ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ set æ–¹æ³•æ³¨å…¥"></a>ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ set æ–¹æ³•æ³¨å…¥</h5><p>â€‹ é€šè¿‡ set æ–¹æ³•æ³¨å…¥</p><p>ï¼ˆ1ï¼‰åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„ set æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸¤ç§æ–¹å¼å®ç° å±æ€§ æ³¨å…¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">setAuthor</span><span class="params">(String author)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p><p>åœ¨springé…ç½®æ–‡ä»¶é…ç½®å¯¹è±¡ï¼Œé…ç½®å±æ€§æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Book&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åŸºäºxmlæ–¹å¼çš„å±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">            property å®Œæˆå±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">            name ç±»é‡Œé¢ å±æ€§åç§°</span></span><br><span class="line"><span class="comment">            value :ä¸ºè¯¥å±æ€§èµ‹çš„å€¼</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™½å¤œè¡Œ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸œé‡åœ­å¾&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒç§æ³¨å…¥æ–¹å¼-é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥"><a href="#ç¬¬äºŒç§æ³¨å…¥æ–¹å¼-é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥" class="headerlink" title="ç¬¬äºŒç§æ³¨å…¥æ–¹å¼  	é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥"></a>ç¬¬äºŒç§æ³¨å…¥æ–¹å¼ é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥</h5><p>åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥å±æ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String name, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ springé…ç½®æ–‡ä»¶ä¸­é…ç½® æœ‰å‚æ„é€ æ³¨å…¥å±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”µè„‘&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;USA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="påç§°ç©ºé—´æ³¨å…¥-äº†è§£-ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥"><a href="#påç§°ç©ºé—´æ³¨å…¥-äº†è§£-ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥" class="headerlink" title="påç§°ç©ºé—´æ³¨å…¥(äº†è§£ ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥)"></a>påç§°ç©ºé—´æ³¨å…¥(äº†è§£ ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥)</h5><p>ä¸»è¦æ˜¯ç®€åŒ–åŸºäº xmlé…ç½®æ–¹å¼æ³¨å…¥</p><p>â€‹ 1ã€åœ¨xmlé…ç½®ä¸­åŠ å…¥påç§°ç©ºé—´</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211207213643088.png" alt="image-20211207213643088" style="zoom:80%"><p>â€‹ 2ã€è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨beanæ ‡ç­¾é‡Œé¢æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ä½¿ç”¨påç§°ç©ºé—´æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.Dog&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;å°å½©&quot;</span> <span class="attr">p:color</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§"><a href="#æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§" class="headerlink" title="æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§"></a>æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§</h5><ul><li><p>nullå€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        ä¸ºå±æ€§èµ‹ç©ºå€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ2ï¼‰å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</span><br><span class="line"><span class="comment">&lt;!--å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</span></span><br><span class="line"><span class="comment"> 1 æŠŠ&lt;&gt;è¿›è¡Œè½¬ä¹‰ &amp;lt; &amp;gt;</span></span><br><span class="line"><span class="comment"> 2 æŠŠå¸¦ç‰¹æ®Šç¬¦å·å†…å®¹å†™åˆ° CDATA</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;å—äº¬&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h5 id="å¤–éƒ¨bean"><a href="#å¤–éƒ¨bean" class="headerlink" title="å¤–éƒ¨bean"></a>å¤–éƒ¨bean</h5><p>åˆ›å»ºä¸¤ä¸ªç±»serviec å’Œ dao</p><p>åœ¨serviceè°ƒç”¨daoé‡Œé¢çš„æ–¹æ³•</p><p>åœ¨springä¸­è¿›è¡Œé…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»º dao å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="comment">//æä¾›setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service addæ–¹æ³•....&quot;</span>);</span><br><span class="line">        userDao.daoTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xmlé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åŸºäºxmlæ³¨å…¥å±æ€§-å¤–éƒ¨bean--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æŠŠ serviceå¯¹è±¡å’Œ daoå¯¹è±¡ éƒ½åˆ›å»ºå¥½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨å…¥ userDao å¯¹è±¡</span></span><br><span class="line"><span class="comment">        name å±æ€§ï¼šç±»é‡Œé¢å±æ€§åç§°</span></span><br><span class="line"><span class="comment">        ref å±æ€§ï¼šåˆ›å»º userDao å¯¹è±¡ bean æ ‡ç­¾ id å€¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;UserDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å†…éƒ¨bean"><a href="#å†…éƒ¨bean" class="headerlink" title="å†…éƒ¨bean"></a>å†…éƒ¨bean</h5><p>å†…éƒ¨beanï¼š å¦‚ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨å’Œå‘˜å·¥</p><pre><code>  					ä¸€ä¸ªéƒ¨é—¨æœ‰å¤šåå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨

                      éƒ¨é—¨æ˜¯ä¸€ï¼Œå‘˜å·¥æ˜¯å¤š  
</code></pre><p>æ–°å»ºEmpç±»å’ŒDeptç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘˜å·¥ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šå±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="comment">//å¯¹è±¡å±æ€§,ä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨</span></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEname</span><span class="params">(String ename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éƒ¨é—¨ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  String dname;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ å†…éƒ¨beanæ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="çº§è”èµ‹å€¼"><a href="#çº§è”èµ‹å€¼" class="headerlink" title="çº§è”èµ‹å€¼"></a>çº§è”èµ‹å€¼</h5><p>ç¬¬ä¸€ç§å†™æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³•ï¼š(å’Œæ³¨å…¥å¤–éƒ¨beanç±»ä¼¼)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿæˆdeptçš„getæ–¹æ³• </span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">getDept</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dept;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>xmlé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºempå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥ä¸¤ä¸ªæ™®é€šå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³•ï¼š(å’Œæ³¨å…¥å¤–éƒ¨beanç±»ä¼¼)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æ³¨å…¥å¯¹è±¡å±æ€§ çº§è”èµ‹å€¼ ç¬¬äºŒç§å†™æ³•ï¼š--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æŠ€æœ¯éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å®‰ä¿éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯UserServiceä¸­è°ƒç”¨UserDaoçš„setæ³¨å…¥è¦†ç›–æ‰UserDaoä¹‹å‰è°ƒç”¨setæ³¨å…¥çš„ç»“æœã€‚</p><h5 id="æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§"><a href="#æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§" class="headerlink" title="æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§"></a>æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§</h5><p>1ã€æ³¨å…¥æ•°ç»„ç±»å‹å±æ€§</p><p>2ã€æ³¨å…¥Listç±»å‹å±æ€§</p><p>3ã€æ³¨å…¥Mapç±»å‹å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span> &#123;</span><br><span class="line">    <span class="comment">//æ•°ç»„ç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String[] courses;</span><br><span class="line">    <span class="comment">//Listç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; lists;</span><br><span class="line">    <span class="comment">//Mapç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; maps;</span><br><span class="line">    <span class="comment">//Setç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sets;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(String[] courses)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lists = list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSet</span><span class="params">(Set&lt;String&gt; set)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sets = set;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Stu&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;courses=&quot;</span> + Arrays.toString(courses) +</span><br><span class="line">                <span class="string">&quot;, lists=&quot;</span> + lists +</span><br><span class="line">                <span class="string">&quot;, maps=&quot;</span> + maps +</span><br><span class="line">                <span class="string">&quot;, sets=&quot;</span> + sets +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springé…ç½®æ–‡ä»¶é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>javaåŸºç¡€<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>javaWeb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        listå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¹¿å·<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ·±åœ³<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        mapå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;CPP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    setå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Mysql<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Oracle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>Tomcat<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€åœ¨é›†åˆé‡Œé¢è®¾ç½®å¯¹è±¡ç±»å‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        é›†åˆå­˜æ”¾å¯¹è±¡çš„å±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;courese1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;courese2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å¤–éƒ¨beanå®šä¹‰å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;courese1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring5æ¡†æ¶è¯¾ç¨‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;courese2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;MyBatisæ¡†æ¶è¯¾ç¨‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5ã€æŠŠé›†åˆæ³¨å…¥éƒ¨åˆ†æå–å‡ºæ¥</p><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥utilåç§°ç©ºé—´</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211208202204135.png" alt="image-20211208202204135" style="zoom:80%"><p>ä½¿ç”¨utilæ ‡ç­¾å®Œæˆlisté›†åˆæ³¨å…¥æå–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä½¿ç”¨utilæ ‡ç­¾å®Œæˆ    æå–listé›†åˆå±æ€§æ³¨å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>ç™½å¤œè¡Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>å«Œç–‘äººxçš„çŒ®èº«<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>è§£å¿§æ‚è´§åº—<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æå–listé›†åˆç±»å‹æ³¨å…¥å±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æå–listé›†åˆç±»å‹æ³¨å…¥å±æ€§--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h4><h5 id="åŸºæœ¬ä»‹ç»ï¼š"><a href="#åŸºæœ¬ä»‹ç»ï¼š" class="headerlink" title="åŸºæœ¬ä»‹ç»ï¼š"></a>åŸºæœ¬ä»‹ç»ï¼š</h5><p>spring æœ‰ä¸¤ç§ç±»å‹beanï¼Œä¸€ç§æ˜¯æ™®é€šbeanï¼Œå¦ä¸€ç§æ˜¯å·¥å‚beanï¼ˆFactoryBeanï¼‰</p><p>æ™®é€šbeanï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»å‹å°±æ˜¯è¿”å›ç±»å‹</p><p>å·¥å‚beanï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»å‹å¯ä»¥å’Œè¿”å›çš„ç±»å‹ä¸ä¸€è‡´</p><h5 id="å¦‚ä½•å®ç°-åˆ›å»ºå·¥å‚bean"><a href="#å¦‚ä½•å®ç°-åˆ›å»ºå·¥å‚bean" class="headerlink" title="å¦‚ä½•å®ç° åˆ›å»ºå·¥å‚bean"></a>å¦‚ä½•å®ç° åˆ›å»ºå·¥å‚bean</h5><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä½œä¸ºå·¥å‚beanï¼Œå®ç°æ¥å£ FactoryBeanã€‚</p><p>ç¬¬äºŒéƒ¨ï¼šå®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•å®šä¹‰è¿”å›çš„beanç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Course&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Course <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Course</span>();</span><br><span class="line">        course.setCname(<span class="string">&quot;kksk&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        é…ç½®å·¥å‚bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.factorybean.MyFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æ­¤æ—¶è¿”å›çš„ç±»å‹æ˜¯ Course</p><h4 id="beanä½œç”¨åŸŸ"><a href="#beanä½œç”¨åŸŸ" class="headerlink" title="beanä½œç”¨åŸŸ"></a>beanä½œç”¨åŸŸ</h4><p>1ã€åœ¨springé‡Œé¢ï¼Œè®¾ç½®åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p><p>2ã€<strong>åœ¨springé‡Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å•å®ä¾‹</strong></p><h5 id="å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹"><a href="#å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹" class="headerlink" title="å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹"></a>å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹</h5><p>åœ¨springé…ç½®æ–‡ä»¶ beanæ ‡ç­¾é‡Œé¢æœ‰å±æ€§ scope å¯ä»¥è®¾ç½®å•å®ä¾‹æˆ–å¤šå®ä¾‹</p><p>scope&#x3D;â€singletonâ€ è¡¨ç¤ºå•å®ä¾‹ï¼ˆé»˜è®¤å€¼ï¼‰ scope &#x3D;â€prototypeâ€ è¡¨ç¤ºå¤šå®ä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    scopeå±æ€§è®¾ç½® åˆ›å»ºçš„å¯¹è±¡æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹    singletonè¡¨ç¤ºå•å®ä¾‹  prototypeè¡¨ç¤ºå¤šå®ä¾‹--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.collectiontype.Book&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="singletonå’Œ-prototypeçš„åŒºåˆ«"><a href="#singletonå’Œ-prototypeçš„åŒºåˆ«" class="headerlink" title="singletonå’Œ prototypeçš„åŒºåˆ«"></a>singletonå’Œ prototypeçš„åŒºåˆ«</h5><p>ç¬¬ä¸€ï¼šsingleton å•å®ä¾‹ï¼Œprototype å¤šå®ä¾‹</p><p>ç¬¬äºŒï¼šè®¾ç½®scope å€¼æ˜¯singleton çš„æ—¶å€™ï¼ŒåŠ è½½springé…ç½®æ–‡ä»¶æ—¶å°±åˆ›å»ºå¯¹è±¡</p><p>â€‹ è®¾ç½® scopeå€¼æ—¶prototypeçš„æ—¶å€™ï¼Œä¸æ˜¯åœ¨åŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™åˆ›å»º å¯¹è±¡,</p><p>â€‹ <u>å¯¹è±¡åœ¨è°ƒç”¨ getBean æ–¹æ³•æ—¶æ‰åˆ›å»º</u></p><h4 id="beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beançš„ç”Ÿå‘½å‘¨æœŸ"></a>beançš„ç”Ÿå‘½å‘¨æœŸ</h4><h5 id="ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ"><a href="#ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ"></a>ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ</h5><p>ä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹</p><h5 id="beanç”Ÿå‘½å‘¨æœŸ"><a href="#beanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beanç”Ÿå‘½å‘¨æœŸ"></a>beanç”Ÿå‘½å‘¨æœŸ</h5><p>1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹ï¼ˆæ— å‚æ„é€ ï¼‰</p><p>2ï¼‰ä¸ºbeançš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»–bean çš„å¼•ç”¨ ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰</p><p>3ï¼‰è°ƒç”¨beançš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p>4ï¼‰beanå°±å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>5ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨bean çš„é”€æ¯æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><h5 id="æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ"><a href="#æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ"></a>æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line"> <span class="comment">//æ— å‚æ•°æ„é€ </span></span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ•°æ„é€ åˆ›å»º bean å®ä¾‹&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">private</span> String oname;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOname</span><span class="params">(String oname)</span> &#123;</span><br><span class="line"> <span class="built_in">this</span>.oname = oname;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬äºŒæ­¥ è°ƒç”¨ set æ–¹æ³•è®¾ç½®å±æ€§å€¼&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–çš„æ–¹æ³•</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–çš„æ–¹æ³•&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//åˆ›å»ºæ‰§è¡Œçš„é”€æ¯çš„æ–¹æ³•</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯çš„æ–¹æ³•&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;bean id=<span class="string">&quot;orders&quot;</span> class=<span class="string">&quot;com.atguigu.spring5.bean.Orders&quot;</span> initmethod=<span class="string">&quot;initMethod&quot;</span> destroy-method=<span class="string">&quot;destroyMethod&quot;</span>&gt;</span><br><span class="line"> &lt;property name=<span class="string">&quot;oname&quot;</span> value=<span class="string">&quot;æ‰‹æœº&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">    </span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBean4</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// ApplicationContext context =</span></span><br><span class="line"><span class="comment">// new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);</span></span><br><span class="line">    <span class="comment">//ClassPathXmlApplicationContextæ˜¯ ApplicationContextæ¥å£çš„å®ç°ç±»</span></span><br><span class="line"> <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line"> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line"> <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line"> System.out.println(<span class="string">&quot;ç¬¬å››æ­¥ è·å–åˆ›å»º bean å®ä¾‹å¯¹è±¡&quot;</span>);</span><br><span class="line"> System.out.println(orders);</span><br><span class="line"> <span class="comment">//æ‰‹åŠ¨è®© bean å®ä¾‹é”€æ¯</span></span><br><span class="line"> context.close();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211221095515906.png" alt="image-20211221095515906" style="zoom:67%">-</p><h5 id="4ã€bean-çš„åç½®å¤„ç†å™¨ï¼Œbean-ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥"><a href="#4ã€bean-çš„åç½®å¤„ç†å™¨ï¼Œbean-ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥" class="headerlink" title="4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥"></a>4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥</h5><p>ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰</p><p>ï¼ˆ2ï¼‰ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰</p><p><u>ï¼ˆ3ï¼‰æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessBeforeInitialization</u></p><p>ï¼ˆ4ï¼‰è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p><u>ï¼ˆ5ï¼‰æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessAfterInitialization</u></p><p>ï¼ˆ6ï¼‰bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>ï¼ˆ7ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><p>åˆ›å»ºç±» å®ç° æ¥å£BeanPostProcessorï¼Œåˆ›å»ºåç½®å¤„ç†å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPost</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®åç½®å¤„ç†å™¨</p><p><code>&lt;bean id=&quot;myBeanPost&quot; class=&quot;com.izumi.spring5.bean.MyBeanPost&quot;&gt;&lt;/bean&gt;</code></p><h4 id="xmlè‡ªåŠ¨è£…é…"><a href="#xmlè‡ªåŠ¨è£…é…" class="headerlink" title="xmlè‡ªåŠ¨è£…é…"></a>xmlè‡ªåŠ¨è£…é…</h4><p>å®é™…å¼€å‘ä¸­ä¸»è¦ä½¿ç”¨æ³¨è§£æ–¹æ³•ï¼Œxmlæ–¹å¼ä½¿ç”¨è¾ƒå°‘</p><h5 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><a href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"></a>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</h5><p>ï¼ˆ1ï¼‰æ ¹æ®æŒ‡å®šè£…é…è§„åˆ™ï¼ˆå±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹ï¼‰ï¼ŒSpring è‡ªåŠ¨å°†åŒ¹é…çš„å±æ€§å€¼è¿›è¡Œæ³¨å…¥</p><h5 id="æ¼”ç¤ºè‡ªåŠ¨è£…é…"><a href="#æ¼”ç¤ºè‡ªåŠ¨è£…é…" class="headerlink" title="æ¼”ç¤ºè‡ªåŠ¨è£…é…"></a>æ¼”ç¤ºè‡ªåŠ¨è£…é…</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰æ ¹æ®å±æ€§åç§°è‡ªåŠ¨æ³¨å…¥</span><br><span class="line"><span class="comment">&lt;!--å®ç°è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> bean æ ‡ç­¾å±æ€§ autowireï¼Œé…ç½®è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment"> byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼ bean çš„ id å€¼å’Œç±»å±æ€§åç§°ä¸€æ ·</span></span><br><span class="line"><span class="comment"> byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">ï¼ˆ2ï¼‰æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨æ³¨å…¥</span><br><span class="line"><span class="comment">&lt;!--å®ç°è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> bean æ ‡ç­¾å±æ€§ autowireï¼Œé…ç½®è‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment"> byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼ bean çš„ id å€¼å’Œç±»å±æ€§åç§°ä¸€æ ·</span></span><br><span class="line"><span class="comment"> byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶"><a href="#xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶" class="headerlink" title="xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶"></a>xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶</h4><h5 id="1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯"><a href="#1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯" class="headerlink" title="1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯"></a>1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯</h5><p>1ï¼‰é…ç½®å¾·é²ä¼Šè¿æ¥æ± </p><p>2ï¼‰å¼•å…¥å¾·é²ä¼ŠjaråŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zzt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± "><a href="#å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± "></a>å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± </h5><p>1ï¼‰åˆ›å»º å¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œpropertiesæ ¼å¼ï¼Œå†™å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><p>æ³¨æ„ï¼šåç§°æœ€å¥½ä½¿ç”¨ prop. è¿™æ ·çš„æ ¼å¼ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å†²çª</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prop.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">prop.url</span>=<span class="string">jdbc:mysql://localhost:3306/userDb</span></span><br><span class="line"><span class="attr">prop.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">prop.passowrd</span>=<span class="string">zzt</span></span><br></pre></td></tr></table></figure><p>2)æŠŠå¤–éƒ¨çš„propertieså±æ€§æ–‡ä»¶å¼•å…¥åˆ°springé…ç½®æ–‡ä»¶ä¸­</p><p>*å¼•å…¥ contextåç§°ç©ºé—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=</span></span><br><span class="line"><span class="tag">               <span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">               http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æ ‡ç­¾å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    classpathå°±æ˜¯é¡¹ç›®çš„srcæ–‡ä»¶å¤¹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®è¿æ¥æ± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†"><a href="#åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†"></a>åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†</h3><h4 id="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</h4><p>1ï¼‰æ³¨è§£æ˜¯ä»£ç ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°ï¼ˆå±æ€§å&#x3D;å±æ€§ï¼Œå±æ€§å&#x3D;å±æ€§â€¦ï¼‰</p><p>2ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£å¯ä»¥åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢</p><p>3ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œå¯ä»¥ç®€åŒ–xmlé…ç½®</p><h4 id="springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£"><a href="#springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£" class="headerlink" title="springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£"></a>springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£</h4><p>@Component é€šç”¨</p><p>@Service ä¸€èˆ¬ç”¨åœ¨ serviceå±‚</p><p>@Controller ä¸€èˆ¬ç”¨åœ¨webå±‚</p><p>@Repository ä¸€èˆ¬ç”¨åœ¨daoå±‚</p><p>ä»¥ä¸Šå››ç§æ³¨è§£åŠŸèƒ½éƒ½ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºbeanå®ä¾‹</p><h4 id="åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹"><a href="#åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹"></a>åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹</h4><p>1)å¼•å…¥ä¾èµ–</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211221193003113.png" alt="image-20211221193003113">-</p><p>2)å¼€å¯ç»„ä»¶æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  1.å®šä¹‰contextåç§°ç©ºé—´</span></span><br><span class="line"><span class="comment">      2.é…ç½®springç»„ä»¶æ‰«æï¼Œ</span></span><br><span class="line"><span class="comment">        base-package å±æ€§å€¼ä¸ºæ‰«æçš„åŒ…åï¼Œè‹¥æœ‰å¤šä¸ªåŒ…å¯ä»¥ä½¿ç”¨é€—å·é—´éš”æˆ–è€…æ‰«æå®ƒä»¬çš„ä¸Šå±‚åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5.dao,com.izumi.spring5.service&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨æ³¨è§£é‡Œé¢ value å±æ€§å€¼å¯ä»¥çœç•¥ä¸å†™</span></span><br><span class="line"><span class="comment">//é»˜è®¤å€¼æ˜¯ç±»åç§°ï¼Œé¦–å­—æ¯å°å†™</span></span><br><span class="line"><span class="comment">//UserService --userService</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">m1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m1æ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚"><a href="#ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚" class="headerlink" title="ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚"></a>ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--  å¼€å¯ç»„ä»¶æ‰«æçš„ç»†èŠ‚ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç¤ºä¾‹1</span></span><br><span class="line"><span class="comment">        use-default-filters=&quot;false&quot;è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤filterï¼Œè‡ªå·±é…ç½®filter</span></span><br><span class="line"><span class="comment">        context:include-filterè®¾ç½®æ‰«æå“ªäº›å†…å®¹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ç¤ºä¾‹2</span></span><br><span class="line"><span class="comment">       context:exclude-filter è¡¨ç¤ºè®¾ç½®å“ªäº›å†…å®¹ä¸æ‰«æ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span>  <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥"><a href="#åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥" class="headerlink" title="åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥"></a>åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥</h4><ol><li><p>@Autowired : æ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…</p><p>ç¬¬ä¸€æ­¥ æŠŠ service å’Œ dao å¯¹è±¡åˆ›å»ºï¼Œåœ¨ service å’Œ dao ç±»æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£</p><p>ç¬¬äºŒæ­¥ åœ¨ service æ³¨å…¥ dao å¯¹è±¡ï¼Œåœ¨ service ç±»æ·»åŠ  dao ç±»å‹å±æ€§ï¼Œåœ¨å±æ€§ä¸Šé¢ä½¿ç”¨æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span>  <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰daoç±»å‹å±æ€§</span></span><br><span class="line">    <span class="comment">//ä¸éœ€è¦è®¾ç½® setæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">m1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m1æ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨m2æ–¹æ³•&quot;</span>+userDao);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>@Qualifier : æ ¹æ®å±æ€§åç§°è¿›è¡Œæ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰daoç±»å‹å±æ€§</span></span><br><span class="line">    <span class="comment">//ä¸éœ€è¦è®¾ç½® setæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥</span></span><br><span class="line">    <span class="comment">//æ­¤æ—¶UserDaoå®ç°ç±»æœ‰ä¸¤ä¸ªï¼Œæ‰€ä»¥ä»…æ ¹æ®ç±»å‹æ³¨å…¥ä¸çŸ¥é“æ‰¾å“ªä¸ªå®ç°ç±»è€ŒæŠ¥é”™</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;userDaoImpl02&quot;)</span>     <span class="comment">//è¯¥æ³¨è§£å¿…é¡»å’Œ @Autowiredç»‘å®šä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure></li><li><p>@Resourse : å¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œä¹Ÿå¯ä»¥æ ¹æ®åç§°æ³¨å…¥</p><p>ä½†è¯¥æ³¨è§£ä¸æ˜¯springé‡Œé¢æä¾›çš„ï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//@Resourseæ³¨è§£æ¼”ç¤º</span></span><br><span class="line"><span class="comment">// @Resource //æ³¨å…¥æ ¹æ®ç±»å‹</span></span><br><span class="line"> <span class="meta">@Resource(name = &quot;userDaoImpl02&quot;)</span> <span class="comment">//æ ¹æ®åç§°æ³¨å…¥</span></span><br><span class="line"> <span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure></li><li><p>@Value : æ³¨å…¥æ™®é€šç±»å‹å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¼”ç¤º @Valueçš„ä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Value(value = &quot;ä½ çš„åå­—&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure></li></ol><h4 id="å®Œå…¨æ³¨è§£å¼€å‘"><a href="#å®Œå…¨æ³¨è§£å¼€å‘" class="headerlink" title="å®Œå…¨æ³¨è§£å¼€å‘"></a>å®Œå…¨æ³¨è§£å¼€å‘</h4><p>1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£xmlé…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£ xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.izumi.spring5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ï¼‰æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDemo2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">        System.out.println(userService);</span><br><span class="line">        userService.m1();</span><br><span class="line">        userService.m2();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Aop"><a href="#Aop" class="headerlink" title="Aop"></a>Aop</h2><h3 id="ä»€ä¹ˆæ˜¯aop"><a href="#ä»€ä¹ˆæ˜¯aop" class="headerlink" title="ä»€ä¹ˆæ˜¯aop"></a>ä»€ä¹ˆæ˜¯aop</h3><p>1ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆæ–¹é¢ï¼‰ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾— ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p>2ã€é€šä¿—æè¿°ï¼Œä¸é€šè¿‡ä¿®æ”¹æºä»£ç çš„æ–¹å¼ï¼Œåœ¨ç¨‹åºä¸»å¹²åŠŸèƒ½ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½</p><p>3ã€ä½¿ç”¨ç™»å½•ä¾‹å­è¯´æ˜aop</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222103911387.png" alt="image-20211222103911387"></p><h3 id="aopåº•å±‚åŸç†"><a href="#aopåº•å±‚åŸç†" class="headerlink" title="aopåº•å±‚åŸç†"></a>aopåº•å±‚åŸç†</h3><p>1ï¼‰æœ‰ä¸¤ç§æƒ…å†µåŠ¨æ€ä»£ç†</p><ul><li><p>ç¬¬ä¸€ç§ï¼Œæœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨jdkåŠ¨æ€ä»£ç†</p><p><strong>å®ç°ï¼šåˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</strong></p></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222110406990.png" alt="image-20211222110406990"></p><ul><li><p>ç¬¬äºŒç§ï¼Œæ²¡æœ‰æ¥å£çš„æƒ…å†µï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†</p><p><strong>å®ç°ï¼šåˆ›å»ºå­ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</strong></p></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222110627667.png" alt="image-20211222110627667"></p><h3 id="AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰"><a href="#AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰" class="headerlink" title="AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰"></a>AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰</h3><ul><li><p>ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨ Proxy ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20211222111453446.png" alt="image-20211222111453446"></p><p>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><p>ç¬¬ä¸€å‚æ•°ï¼Œç±»åŠ è½½å™¨</p><p>ç¬¬äºŒå‚æ•°ï¼Œå¢å¼ºæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œè¿™ä¸ªç±»å®ç°çš„æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæ¥å£</p><p>ç¬¬ä¸‰å‚æ•°ï¼Œå®ç°è¿™ä¸ªæ¥å£ InvocationHandlerï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå†™å¢å¼ºçš„éƒ¨åˆ†</p></li><li><p>ç¼–å†™jdkåŠ¨æ€ä»£ç†ä»£ç </p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jdkçš„åŠ¨æ€ä»£ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¢«ä»£ç†ç±»</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDaoProxy</span> <span class="operator">=</span>(UserDao) Proxy.newProxyInstance(UserProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="type">int</span> <span class="variable">add</span> <span class="operator">=</span> userDaoProxy.add(<span class="number">10</span>, <span class="number">12</span>);</span><br><span class="line">        System.out.println(add);</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> userDaoProxy.id(<span class="string">&quot;1002&quot;</span>);</span><br><span class="line">        System.out.println(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä»£ç†å¯¹è±¡ä»£ç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¢å¼ºçš„åŠŸèƒ½é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> method.getName();</span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;æ–¹æ³•è°ƒç”¨å‰...&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">methodInvoke</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line">            System.out.println(methodName+<span class="string">&quot;æ–¹æ³•è°ƒç”¨å...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> methodInvoke;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Aopçš„æœ¯è¯­"><a href="#Aopçš„æœ¯è¯­" class="headerlink" title="Aopçš„æœ¯è¯­"></a>Aopçš„æœ¯è¯­</h3><p>1ã€è¿æ¥ç‚¹</p><p>â€‹ ç±»å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±ç§°ä¸ºè¿æ¥ç‚¹</p><p>2ã€åˆ‡å…¥ç‚¹</p><p>â€‹ å®é™…è¢«çœŸæ­£å¢å¼ºçš„æ–¹æ³•ï¼Œç§°ä¸ºåˆ‡å…¥ç‚¹</p><p>3ã€é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</p><p>â€‹ ï¼ˆ1ï¼‰å®ç°å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥&#x2F;å¢å¼º</p><p>â€‹ ï¼ˆ2ï¼‰é€šçŸ¥æœ‰å¤šç§ç±»å‹</p><p>â€‹ å‰ç½®é€šçŸ¥</p><p>â€‹ åç½®é€šçŸ¥</p><p>â€‹ ç¯ç»•é€šçŸ¥</p><p>â€‹ å¼‚å¸¸é€šçŸ¥</p><p>â€‹ æœ€ç»ˆé€šçŸ¥ï¼ˆç±»ä¼¼äº tryâ€”catchâ€”finallyçš„finallyï¼‰</p><p>4ã€åˆ‡é¢</p><p>â€‹ æŠŠé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹</p><h3 id="AOPæ“ä½œå‡†å¤‡ï¼š"><a href="#AOPæ“ä½œå‡†å¤‡ï¼š" class="headerlink" title="AOPæ“ä½œå‡†å¤‡ï¼š"></a>AOPæ“ä½œå‡†å¤‡ï¼š</h3><p>1ã€springæ¡†æ¶ä¸€èˆ¬æ˜¯åŸºäº<strong>AspectJ</strong>æ¥å®ç°AOPæ“ä½œ</p><p>â€‹ é‚£ä¹ˆ ä»€ä¹ˆæ˜¯ AspectJï¼Ÿ</p><p>â€‹ AspectJä¸æ˜¯springæ¡†æ¶çš„ç»„æˆéƒ¨åˆ†ï¼Œè€Œæ˜¯ç‹¬ç«‹çš„aopæ¡†æ¶ï¼Œä¸€èˆ¬æŠŠspringå’ŒAspectJä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡Œaopæ“ ä½œã€‚</p><p>2ã€åŸºäºAspectJæ“ä½œAop</p><ul><li>åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼å®ç°</li><li>åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä¸€èˆ¬ä½¿ç”¨æ³¨è§£æ–¹å¼ï¼‰</li></ul><p>3ã€å¼•å…¥ç›¸å…³jaråŒ…</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220103185843893.png" alt="image-20220103185843893"></p><p>4ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p><p>â€‹ 1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹ 2ï¼‰è¯­æ³•ç»“æ„ï¼š<code>excution([æƒé™ä¿®é¥°ç¬¦][è¿”å›ç±»å‹][ç±»å…¨è·¯å¾„][æ–¹æ³•å][å‚æ•°åˆ—è¡¨])</code></p><p>â€‹ ä¸¾ä¾‹1ï¼š com.izumi.spring5.dao.BookDaoçš„addæ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹ <code>excution(* com.izumi.spring5.dao.BookDao.add(..))</code> è¿™é‡Œè¿”å›ç±»å‹çœç•¥äº†</p><p>â€‹ ä¸¾ä¾‹2ï¼š com.izumi.spring5.dao.BookDaoçš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹ <code>excution(* com.izumi.spring5.dao.BookDao.*(..))</code></p><p>â€‹ ä¸¾ä¾‹3ï¼š com.izumi.spring5.daoçš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>â€‹ <code>excution(* com.izumi.spring5.dao.*.*(..))</code></p><h3 id="Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼"><a href="#Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼" class="headerlink" title="Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼"></a>Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼</h3><ol><li><p>åˆ›å»ºè¢«å¢å¼ºç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¢«å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addæ–¹æ³•.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¢å¼ºç±»ï¼Œåœ¨å¢å¼ºç±»é‡Œé¢ç¼–å†™ä¸åŒæ–¹æ³•ï¼Œä¸åŒçš„æ–¹æ³•ä»£è¡¨ä¸åŒçš„é€šçŸ¥ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿›è¡Œé€šçŸ¥çš„é…ç½®</p><ol><li><p>åœ¨springæ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¯¹åº”çš„åç§°ç©ºé—´ï¼Œå¹¶å¼€å¯æ³¨è§£æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯springæ³¨è§£æ‰«æ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5.aopannotation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>ä½¿ç”¨æ³¨è§£åˆ›å»ºè¢«å¢å¼ºç±»å’Œå¢å¼ºç±»çš„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ  @Aspect</p></li><li><p>åœ¨springé…ç½®æ–‡ä»¶å¼€å¯ç”Ÿæˆä»£ç†å¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯aspectç”Ÿæˆä»£ç†å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ä¸åŒç±»å‹çš„é€šçŸ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥  å‡ºç°å¼‚å¸¸å°±ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after()..............&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€ç»ˆé€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰    ä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•ä¹‹å‰....&quot;</span>);</span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•ä¹‹å....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥  å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–</span></span><br><span class="line">    <span class="meta">@Pointcut(value = &quot;execution(* com.izumi.spring5.aopannotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">//ç¼–å†™å¢å¼ºæ–¹æ³•-é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;pointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before().....&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>æœ‰å¤šä¸ªå¢å¼ºç±»å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºä¼˜å…ˆçº§</p><p>ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Order(æ•°å­—ç±»å‹å€¼)ï¼Œï¼ˆä»0å¼€å§‹ï¼‰æ•°å­—ç±»å‹å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span> &#123;</span><br></pre></td></tr></table></figure></li><li><p>å®Œå…¨æ³¨è§£å¼€å‘</p><p>åˆ›å»ºé…ç½®ç±»ï¼Œä¸éœ€è¦åˆ›å»ºé…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.izumi.spring5&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAop</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶-ç”¨çš„è¾ƒå°‘"><a href="#Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶-ç”¨çš„è¾ƒå°‘" class="headerlink" title="Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶(ç”¨çš„è¾ƒå°‘)"></a>Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶(ç”¨çš„è¾ƒå°‘)</h3><p>(äº†è§£)</p><ol><li><p>åˆ›å»ºå¢å¼ºç±»å’Œè¢«å¢å¼ºç±»ï¼Œç¼–å†™å¯¹åº”çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¢«å¢å¼ºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;buy().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¢å¼ºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookProxy</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before()....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®springé…ç½®æ–‡ä»¶</p><ol><li>åˆ›å»ºå¢å¼ºç±»å’Œè¢«å¢å¼ºç±»å¯¹è±¡</li><li>åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ‡å…¥ç‚¹</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åˆ›å»ºå¯¹è±¡--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookproxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.izumi.spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®aopå¢å¼º--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.izumi.spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡é¢--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookproxy&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--        å¢å¼ºä½œç”¨åœ¨å…·ä½“æ–¹æ³•ä¸Š--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h2><h3 id="æ¦‚å¿µå’Œå‡†å¤‡"><a href="#æ¦‚å¿µå’Œå‡†å¤‡" class="headerlink" title="æ¦‚å¿µå’Œå‡†å¤‡"></a>æ¦‚å¿µå’Œå‡†å¤‡</h3><p>1ã€ä»€ä¹ˆæ˜¯ JdbcTemplate</p><p>â€‹ ï¼ˆ1ï¼‰Spring æ¡†æ¶å¯¹ JDBC è¿›è¡Œå°è£…ï¼Œä½¿ç”¨ JdbcTemplate æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ</p><p>2ã€å‡†å¤‡å·¥ä½œ</p><p>â€‹ ï¼ˆ1ï¼‰å¼•å…¥ç›¸å…³ jar åŒ…</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104200355015.png" alt="image-20220104200355015"></p><p>ï¼ˆ2ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®å¾·é²ä¼Šè¿æ¥æ± ä¿¡æ¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zzt&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­åˆ›å»ºJdbcTemplateå¯¹è±¡ï¼Œæ³¨å…¥DataSourceå±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ›å»ºJDBCtemplateå¯¹è±¡ï¼Œæ³¨å…¥å±æ€§DataSource--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4) åˆ›å»ºserviceç±»ï¼Œåˆ›å»ºdaoç±»ï¼Œåœ¨daoç±»æ³¨å…¥JdbcTemplateå¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯ç»„ä»¶æ‰«æ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.izumi.spring5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p>serviceç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>daoç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoIml</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span>&#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥jdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰</h3><p>1ã€åˆ›å»ºæ•°æ®åº“è¡¨å¯¹åº”çš„å®ä½“ç±»</p><p>2ã€ç¼–å†™serviceå’Œdao</p><p>ï¼ˆ1ï¼‰åœ¨ dao è¿›è¡Œæ•°æ®åº“æ·»åŠ æ“ä½œ</p><p>ï¼ˆ2ï¼‰è°ƒç”¨ JdbcTemplate å¯¹è±¡é‡Œé¢ update æ–¹æ³•å®ç°æ·»åŠ æ“ä½œ</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104204559938.png" alt="image-20220104204559938"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š ç¼–å†™çš„sqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯å˜å‚æ•°ï¼Œè®¾ç½®sqlè¯­å¥</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//æ·»åŠ ä¹¦æœ¬çš„æ–¹æ³•	å¢</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,book.getBookId(), book.getBookName(), book.getBookStatus());</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBook</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set book_name=?,book_status=? where book_id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, book.getBookName(), book.getBookStatus(), book.getBookId());</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBook</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span><span class="string">&quot;delete from t_book where book_id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3ã€æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">       <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(BookService.class);</span><br><span class="line">       <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">       book.setBookId(<span class="number">1</span>);</span><br><span class="line">       book.setBookName(<span class="string">&quot;ä¸‰ä½“&quot;</span>);</span><br><span class="line">       book.setBookStatus(<span class="string">&quot;ç•…é”€&quot;</span>);</span><br><span class="line">       bookService.add(book);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰</h3><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªå€¼"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªå€¼" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªå€¼"></a>æŸ¥è¯¢è¿”å›æŸä¸ªå€¼</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢è¡¨é‡Œè¿”å›å¤šå°‘æ¡è®°å½•ï¼Œè¿”å›çš„æ˜¯æŸä¸ªå€¼</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104213313170.png" alt="image-20220104213313170"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š è¿”å›å€¼çš„ç±»å‹çš„class</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›æŸä¸ªå€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡"></a>æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦è¯¦æƒ…</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104214811949.png" alt="image-20220104214811949"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š RowMapperæ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨æ”¹æ¥å£çš„å®ç°ç±»( <code>BeanPropertyRowMapper&lt; &gt;</code>)å®ç°å¯¹æ•°æ®çš„å°è£…</li><li>sqlè¯­å¥å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="comment">/*BeanPropertyRowMapper&lt;Book&gt;(Book.class)</span></span><br><span class="line"><span class="comment">    æ˜¯RowMapperæ¥å£çš„å®ç°ç±»ï¼Œæ³›å‹é‡Œå¡«å…¥è¿”å›çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨å¡«è¿”å›å‚æ•°ç±»å‹çš„classç±»å‹*/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">findBookInfo</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where book_id=?&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.queryForObject(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class),id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ"><a href="#æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ" class="headerlink" title="æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ"></a>æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ</h4><p><strong>åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨åˆ†é¡µ</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104220142485.png" alt="image-20220104220142485"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š RowMapperæ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨æ”¹æ¥å£çš„å®ç°ç±»( <code>BeanPropertyRowMapper&lt; &gt;</code>)å®ç°å¯¹æ•°æ®çš„å°è£…</li><li>sqlè¯­å¥å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢è¿”å›é›†åˆ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">        List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line">        <span class="keyword">return</span> bookList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰"><a href="#jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰" class="headerlink" title="jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰"></a>jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰</h3><p>æ‰¹é‡æ“ä½œï¼šæ“ä½œè¡¨é‡Œå¤šæ¡è®°å½•</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220104221924484.png" alt="image-20220104221924484"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šLIsté›†åˆï¼Œæ·»åŠ å¤šæ¡è®°å½•æ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰¹é‡æ·»åŠ å¤šæ¡è®°å½•	åˆ é™¤ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBooks</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">        System.out.println(Arrays.toString(ints));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBatchAddBooks</span><span class="params">()</span>&#123;</span><br><span class="line">       List&lt;Object[]&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">       Object[] objects1 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">3</span>,<span class="string">&quot;php&quot;</span>,<span class="string">&quot;fjlsjf&quot;</span>&#125;;</span><br><span class="line">       Object[] objects2 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">4</span>,<span class="string">&quot;c#&quot;</span>,<span class="string">&quot;sfsf&quot;</span>&#125;;</span><br><span class="line">       Object[] objects3 = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">5</span>,<span class="string">&quot;python&quot;</span>,<span class="string">&quot;lghf&quot;</span>&#125;;</span><br><span class="line">       list.add(objects1);</span><br><span class="line">       list.add(objects2);</span><br><span class="line">       list.add(objects3);</span><br><span class="line">       bookService.batchAddBooks(list);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="springæ“ä½œäº‹åŠ¡"><a href="#springæ“ä½œäº‹åŠ¡" class="headerlink" title="springæ“ä½œäº‹åŠ¡"></a>springæ“ä½œäº‹åŠ¡</h2><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><h4 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</h4><p>äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šï¼Œä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ä½œéƒ½å¤±è´¥ã€‚</p><p>å…¸å‹åº”ç”¨åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦</p><h4 id="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID"><a href="#äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§-ACID" class="headerlink" title="äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ (ACID)"></a>äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ (ACID)</h4><ol><li>åŸå­æ€§ ï¼šè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</li><li>ä¸€è‡´æ€§ ï¼šäº‹åŠ¡æäº¤å‰åçš„å®Œæ•´æ€§å’ŒçŠ¶æ€ä¿æŒä¸€è‡´</li><li>éš”ç¦»æ€§ ï¼šæ˜¯å¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´æ˜¯éš”ç¦»çš„</li><li>æŒä¹…æ€§ ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤äº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„</li></ol><h3 id="äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º"><a href="#äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º" class="headerlink" title="äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º"></a>äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º</h3><p>ç•¥</p><h3 id="springäº‹åŠ¡ç®¡ç†ä»‹ç»"><a href="#springäº‹åŠ¡ç®¡ç†ä»‹ç»" class="headerlink" title="springäº‹åŠ¡ç®¡ç†ä»‹ç»"></a>springäº‹åŠ¡ç®¡ç†ä»‹ç»</h3><p>1ã€äº‹åŠ¡ä¸€èˆ¬æ·»åŠ åˆ°javaeeä¸‰å±‚æ¡†æ¶çš„serviceå±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ã€‚</p><p>2ã€springè¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>â€‹ ç¼–ç¨‹å¼å®åŠ¡æ“ä½œã€å£°æ˜å¼å®åŠ¡æ“ä½œï¼ˆä½¿ç”¨ï¼‰</p><p>3ã€å£°æ˜å¼å®åŠ¡ç®¡ç†ï¼š</p><p>â€‹ åŸºäºxmlæ–¹å¼ åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰</p><p><strong>4ã€åœ¨springè¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨AOPåŸç†ã€‚</strong></p><p>5ã€springäº‹åŠ¡ç®¡ç†api</p><p>ï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»</p><p>JDBCäº‹åŠ¡ï¼šä½¿ç”¨ <code>DataSourceTranscationManager</code></p><p>Hibernateäº‹åŠ¡:ä½¿ç”¨<code>HibernateTransactionManager</code></p><p>JPAäº‹åŠ¡ï¼šä½¿ç”¨<code>JpaTranscationManager</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220105190923865.png" alt="image-20220105190923865"></p><h3 id="æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€åœ¨springé…ç½®æ–‡ä»¶æ–‡ä»¶ä¸­é…ç½® txåç§°ç©ºé—´ï¼Œå¹¶å¼€å¯äº‹åŠ¡ç®¡ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯äº‹åŠ¡ç®¡ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€åœ¨serviceç±»ä¸Šé¢ï¼ˆæˆ–è€…serviceç±»æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£</p><p>1ï¼‰@Transcational</p><p>å°†è¯¥æ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªç±»å¼€å¯äº‹åŠ¡ç®¡ç†</p><p>å°†è¯¥æ³¨è§£æ·»åŠ åˆ°æ–¹æ³•ä¸Šé¢ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªæ–¹æ³•å¼€å¯äº‹åŠ¡ç®¡ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®"><a href="#å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®"></a>å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®</h3><p>1ã€åœ¨ service ç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Transactionalï¼Œåœ¨è¿™ä¸ªæ³¨è§£é‡Œé¢å¯ä»¥é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•°</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108100304391.png" alt="image-20220108100304391"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108100445151.png" alt="image-20220108100445151"></p><h3 id="propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º-ï¼ˆé¢è¯•ä¼šè€ƒï¼‰"><a href="#propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º-ï¼ˆé¢è¯•ä¼šè€ƒï¼‰" class="headerlink" title="propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º ï¼ˆé¢è¯•ä¼šè€ƒï¼‰"></a>propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º ï¼ˆé¢è¯•ä¼šè€ƒï¼‰</h3><p>äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ä¾‹å¦‚æ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡è¿è¡Œã€‚springä¸­çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¯ä»¥ç”±ä¼ æ’­å±æ€§æŒ‡å®šã€‚springæŒ‡å®šäº†7ç§ç±»ä¼ æ’­è¡Œä¸ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation=Propagation.REQUIRED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><p><strong>é‡ç‚¹æŒæ¡å‰ä¸¤ä¸ª</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108101114201.png" alt="image-20220108101114201"></p><p>REQUIREDä¸¾ä¾‹ï¼š</p><p>é€šä¿—æ¥è¯´å°±æ˜¯ï¼šæ–¹æ³•ä¸€è°ƒç”¨æ–¹æ³•äºŒï¼Œæ–¹æ³•äºŒä¼šçœ‹å¦‚æœæ–¹æ³•ä¸€æœ‰äº‹åŠ¡ï¼Œå°±ç›´æ¥ç”¨æ–¹æ³•ä¸€çš„äº‹åŠ¡å°±è¡Œï¼Œå’Œè°ƒç”¨å‡ æ¬¡æ— å…³ï¼›å¦‚æœæ–¹æ³•ä¸€æ²¡æœ‰äº‹åŠ¡ï¼Œæˆ‘æ–¹æ³•äºŒå°±è‡ªå·±åˆ›å»ºä¸ªäº‹åŠ¡ï¼Œè°ƒç”¨æˆ‘å‡ æ¬¡ æˆ‘åˆ›å»ºå‡ æ¬¡ï¼</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108102000743.png" alt="image-20220108102000743"></p><p>REQUIRES_NEWä¸¾ä¾‹ï¼š</p><p>å®ƒè¡¨ç¤ºè¯¥æ–¹æ³•å¿…é¡»å¯åŠ¨ä¸€ä¸ªæ–°äº‹åŠ¡, å¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ. å¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œ, å°±åº”è¯¥å…ˆæŒ‚èµ·å®ƒ.ï¼ˆè¿™ä¸ªæ­£å¥½ç›¸åå°±æ˜¯ï¼Œæˆ‘æ–¹æ³•äºŒä¸ç®¡ä½ æ–¹æ³•ä¸€æœ‰æ²¡æœ‰äº‹åŠ¡ï¼Œæˆ‘éƒ½è‡ªå·±åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œä½ è°ƒç”¨æˆ‘å‡ æ¬¡æˆ‘åˆ›å»ºå‡ æ¬¡ï¼</p><p>æ–¹æ³•Aè°ƒç”¨æ–¹æ³•Bçš„æ—¶å€™ï¼Œå¦‚æœæ–¹æ³•Aä¹Ÿæœ‰äº‹åŠ¡ï¼Œåˆ™å…ˆå°†æ–¹æ³•Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œå¼€å¯æ–¹æ³•Bçš„äº‹åŠ¡ï¼Œå¾…æ–¹æ³•Bæ‰§è¡Œå®Œæ¯•æäº¤ï¼Œå†æ¢å¤æ–¹æ³•Açš„äº‹åŠ¡ã€‚</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220108103211551.png" alt="image-20220108103211551"></p><h3 id="isolation-äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#isolation-äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="isolation:äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>isolation:äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><p>ï¼ˆ1ï¼‰äº‹åŠ¡æœ‰ç‰¹æ€§æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜</p><p>ï¼ˆ2ï¼‰æœ‰ä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯»</p><p>ï¼ˆ3ï¼‰è„è¯»ï¼ˆDirty Readï¼‰ï¼šAäº‹åŠ¡è¯»å–Bäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ“ä½œï¼Œè€ŒBäº‹åŠ¡æ‰§è¡Œå›æ»šï¼Œé‚£ä¹ˆAè¯»å–åˆ°çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong>å¦‚æœåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤å‰ï¼Œä»»ä½•å…¶ä»–äº‹åŠ¡ä¸å¯è¯»å–å…¶ä¿®æ”¹è¿‡çš„å€¼ï¼Œåˆ™å¯ä»¥é¿å…è¯¥é—®é¢˜ã€‚</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205136175.png" alt="image-20220109205136175"></p><p>ï¼ˆ4ï¼‰ä¸å¯é‡å¤è¯»: ä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡çš„æ•°æ®</p><p>ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readsï¼‰<br>ä¸€ä¸ªäº‹åŠ¡å¯¹åŒä¸€è¡Œæ•°æ®é‡å¤è¯»å–ä¸¤æ¬¡ï¼Œä½†æ˜¯å´å¾—åˆ°äº†ä¸åŒçš„ç»“æœã€‚äº‹åŠ¡T1è¯»å–æŸä¸€æ•°æ®åï¼Œäº‹åŠ¡T2å¯¹å…¶åšäº†ä¿®æ”¹ï¼Œå½“äº‹åŠ¡T1å†æ¬¡è¯»è¯¥æ•°æ®æ—¶å¾—åˆ°ä¸å‰ä¸€æ¬¡ä¸åŒçš„å€¼ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong>å¦‚æœåªæœ‰åœ¨ä¿®æ”¹äº‹åŠ¡å®Œå…¨æäº¤ä¹‹åæ‰å¯ä»¥è¯»å–æ•°æ®ï¼Œåˆ™å¯ä»¥é¿å…è¯¥é—®é¢˜ã€‚</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205521052.png" alt="image-20220109205521052"></p><p>ï¼ˆ5ï¼‰è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡æ·»åŠ æ•°æ®</p><p>â€‹ æŒ‡ä¸¤æ¬¡æ‰§è¡ŒåŒä¸€æ¡ select è¯­å¥ä¼šå‡ºç°ä¸åŒçš„ç»“æœï¼Œç¬¬äºŒæ¬¡è¯»ä¼šå¢åŠ ä¸€æ•°æ®è¡Œï¼Œå¹¶æ²¡æœ‰è¯´è¿™ä¸¤æ¬¡æ‰§è¡Œæ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¹»è±¡è¯»åº”è¯¥æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ä½†æœ‰æ—¶å€™å´ä¸æ˜¯ï¼Œå¦‚æœæ‰“å¼€çš„æ¸¸æ ‡ï¼Œåœ¨å¯¹æ¸¸æ ‡è¿›è¡Œæ“ä½œæ—¶ï¼Œå¹¶ä¸å¸Œæœ›æ–°å¢çš„è®°å½•åŠ åˆ°æ¸¸æ ‡å‘½ä¸­çš„æ•°æ®é›†ä¸­æ¥ã€‚éš”ç¦»çº§åˆ«ä¸º æ¸¸æ ‡ç¨³å®šæ€§ çš„ï¼Œå¯ä»¥é˜»æ­¢å¹»è±¡è¯»ã€‚ä¾‹å¦‚ï¼šç›®å‰å·¥èµ„ä¸º1000çš„å‘˜å·¥æœ‰10äººã€‚é‚£ä¹ˆäº‹åŠ¡1ä¸­è¯»å–æ‰€æœ‰å·¥èµ„ä¸º1000çš„å‘˜å·¥ï¼Œå¾—åˆ°äº†10æ¡è®°å½•ï¼›è¿™æ—¶äº‹åŠ¡2å‘å‘˜å·¥è¡¨æ’å…¥äº†ä¸€æ¡å‘˜å·¥è®°å½•ï¼Œå·¥èµ„ä¹Ÿä¸º1000ï¼›é‚£ä¹ˆäº‹åŠ¡1å†æ¬¡è¯»å–æ‰€æœ‰å·¥èµ„ä¸º1000çš„å‘˜å·¥å…±è¯»å–åˆ°äº†11æ¡è®°å½•ã€‚</p><p>ï¼ˆ6ï¼‰è§£å†³ï¼šé€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè§£å†³è¯»é—®é¢˜(mysqlé»˜è®¤å¯é‡å¤è¯»)</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220109205948180.png" alt="image-20220109205948180" style="zoom:67%"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation=Propagation.REQUIRED,isolation = Isolation.REPEATABLE_READ)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br></pre></td></tr></table></figure><p><strong>4ã€timeoutï¼šè¶…æ—¶æ—¶é—´</strong><br>ï¼ˆ1ï¼‰äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»š<br>ï¼ˆ2ï¼‰é»˜è®¤å€¼æ˜¯ -1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®—</p><p><strong>5ã€readOnlyï¼šæ˜¯å¦åªè¯»</strong><br>ï¼ˆ1ï¼‰è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ<br>ï¼ˆ2ï¼‰readOnly é»˜è®¤å€¼ falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ<br>ï¼ˆ3ï¼‰è®¾ç½® readOnly å€¼æ˜¯ trueï¼Œè®¾ç½®æˆ true ä¹‹åï¼Œåªèƒ½æŸ¥è¯¢</p><p><strong>6ã€rollbackForï¼šå›æ»š</strong><br>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><p><strong>7ã€noRollbackForï¼šä¸å›æ»š</strong><br>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><h3 id="åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p><p>2ã€é…ç½®é€šçŸ¥</p><p>3ã€é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®é€šçŸ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®äº‹åŠ¡å‚æ•°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            åˆ¶å®šå“ªç§è§„åˆ™ä¸Šé¢æ·»åŠ äº‹åŠ¡--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">timeout</span>=<span class="string">&quot;-1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.izumi.spring5.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>åˆ›å»ºé…ç½®ç±»ï¼Œä½¿ç”¨é…ç½®ç±»æ›¿ä»£é…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.izumi.spring5&quot;)</span> <span class="comment">//ç»„ä»¶æ‰«æ</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>    <span class="comment">//å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Txconfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//åˆ›å»ºæ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        druidDataSource.setUrl(<span class="string">&quot;jdbc:mysql:///user_db&quot;</span>);</span><br><span class="line">        druidDataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        druidDataSource.setPassword(<span class="string">&quot;zzt&quot;</span>);</span><br><span class="line">        druidDataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//åˆ›å»ºjdbcTemplate            //å‚æ•°ï¼šåˆ°iocå®¹å™¨ä¸­æ ¹æ®å‚æ•°ç±»å‹æ‰¾åˆ°dataSource</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//æ³¨å…¥DataSource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">dataSourceTransactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        dataSourceTransactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dataSourceTransactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="spring5æ–°ç‰¹æ€§"><a href="#spring5æ–°ç‰¹æ€§" class="headerlink" title="spring5æ–°ç‰¹æ€§"></a>spring5æ–°ç‰¹æ€§</h2><h3 id="1ã€ç‰¹ç‚¹"><a href="#1ã€ç‰¹ç‚¹" class="headerlink" title="1ã€ç‰¹ç‚¹"></a>1ã€ç‰¹ç‚¹</h3><p>1ã€æ•´ä¸ª Spring5 æ¡†æ¶çš„ä»£ç åŸºäº Java8ï¼Œè¿è¡Œæ—¶å…¼å®¹ JDK9ï¼Œè®¸å¤šä¸å»ºè®®ä½¿ç”¨çš„ç±»å’Œæ–¹ æ³•åœ¨ä»£ç åº“ä¸­åˆ é™¤</p><h3 id="2ã€Spring-5-0-æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…"><a href="#2ã€Spring-5-0-æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…" class="headerlink" title="2ã€Spring 5.0 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…"></a>2ã€Spring 5.0 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…</h3><p>ï¼ˆ1ï¼‰Spring5 å·²ç»ç§»é™¤ Log4jConfigListenerï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ Log4j2</p><p>ï¼ˆ2ï¼‰Spring5 æ¡†æ¶æ•´åˆ Log4j2</p><ul><li>ç¬¬ä¸€æ­¥ å¼•å…¥ jar åŒ…</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220111223741453.png" alt="image-20220111223741453"></p><ul><li>ç¬¬äºŒæ­¥ åˆ›å»º log4j2.xml é…ç½®æ–‡ä»¶</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ—¥å¿—çº§åˆ«ä»¥åŠä¼˜å…ˆçº§æ’åº: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configurationåé¢çš„statusç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œå¯ä»¥çœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…ˆå®šä¹‰æ‰€æœ‰çš„appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¾“å‡ºæ—¥å¿—ä¿¡æ¯åˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç„¶åå®šä¹‰loggerï¼Œåªæœ‰å®šä¹‰äº†loggerå¹¶å¼•å…¥çš„appenderï¼Œappenderæ‰ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--rootï¼šç”¨äºæŒ‡å®šé¡¹ç›®çš„æ ¹æ—¥å¿—ï¼Œå¦‚æœæ²¡æœ‰å•ç‹¬æŒ‡å®šLoggerï¼Œåˆ™ä¼šä½¿ç”¨rootä½œä¸ºé»˜è®¤çš„æ—¥å¿—è¾“å‡º--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3ã€Spring5-æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ-Nullable-æ³¨è§£"><a href="#3ã€Spring5-æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ-Nullable-æ³¨è§£" class="headerlink" title="3ã€Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullable æ³¨è§£"></a>3ã€Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullable æ³¨è§£</h3><p>ï¼ˆ1ï¼‰@Nullable æ³¨è§£å¯ä»¥ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ï¼Œå‚æ•°ä¸Šé¢ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›å¯ä»¥ä¸ºç©ºï¼Œ</p><p>â€‹ å±æ€§å€¼å¯ä»¥ ä¸ºç©ºï¼Œå‚æ•°å€¼å¯ä»¥ä¸ºç©º</p><p>ï¼ˆ2ï¼‰æ³¨è§£ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œæ–¹æ³•è¿”å›å€¼å¯ä»¥ä¸ºç©º</p><p>â€‹ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180601855.png" alt="image-20220114180601855"></p><p>ï¼ˆ3ï¼‰æ³¨è§£ä½¿ç”¨åœ¨æ–¹æ³•å‚æ•°é‡Œé¢ï¼Œæ–¹æ³•å‚æ•°å¯ä»¥ä¸ºç©º</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180641739.png" alt="image-20220114180641739"></p><p>ï¼ˆ4ï¼‰æ³¨è§£ä½¿ç”¨åœ¨å±æ€§ä¸Šé¢ï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©º</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114180710661.png" alt="image-20220114180710661"></p><h3 id="4ã€Spring5-æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼-GenericApplicationContext"><a href="#4ã€Spring5-æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼-GenericApplicationContext" class="headerlink" title="4ã€Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext"></a>4ã€Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¼”ç¤ºspring5æ–°ç‰¹æ€§ æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenericApplicationContext</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»º GenericApplicationContext å¯¹è±¡</span></span><br><span class="line">        <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line">        <span class="comment">//è°ƒç”¨context çš„æ–¹æ³•æ³¨å†Œï¼ˆåœ¨springå®¹å™¨é‡Œæ³¨å†Œï¼Œè¿™æ ·æ‰èƒ½è®©springç®¡ç†è¯¥å¯¹è±¡ï¼‰</span></span><br><span class="line">        context.refresh();</span><br><span class="line">        <span class="comment">//()-&gt;new User() : javaå››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£çš„ä¾›ç»™å‹æ¥å£ï¼Œé‡‡ç”¨lambdaè¡¨è¾¾å¼å®ç°</span></span><br><span class="line">        context.registerBean(<span class="string">&quot;user&quot;</span>,User.class,()-&gt;<span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">        <span class="comment">//è·å–åœ¨springæ³¨å†Œçš„å¯¹è±¡</span></span><br><span class="line">      <span class="comment">//  User user =(User) context.getBean(&quot;com.izumi.spring5.entity.User&quot;);</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span>(User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="5ã€Spring5-æ”¯æŒæ•´åˆ-JUnit5"><a href="#5ã€Spring5-æ”¯æŒæ•´åˆ-JUnit5" class="headerlink" title="5ã€Spring5 æ”¯æŒæ•´åˆ JUnit5"></a>5ã€Spring5 æ”¯æŒæ•´åˆ JUnit5</h3><h4 id="ï¼ˆ1ï¼‰æ•´åˆ-JUnit4"><a href="#ï¼ˆ1ï¼‰æ•´åˆ-JUnit4" class="headerlink" title="ï¼ˆ1ï¼‰æ•´åˆ JUnit4"></a>ï¼ˆ1ï¼‰æ•´åˆ JUnit4</h4><p>ç¬¬ä¸€æ­¥ å¼•å…¥ Spring ç›¸å…³é’ˆå¯¹æµ‹è¯•ä¾èµ–</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/twintea/pic-notes1/img/image-20220114183520116.png" alt="image-20220114183520116"></p><p>ç¬¬äºŒæ­¥ åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£å®Œæˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//spring5 æ”¯æŒæ•´åˆjunit4æµ‹è¯•</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span> <span class="comment">//å•å…ƒæµ‹è¯•æ¡†æ¶</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span>    <span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUnit4Test</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    userService.account(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>),<span class="string">&quot;lucy&quot;</span>,<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰Spring5-æ•´åˆ-JUnit5"><a href="#ï¼ˆ2ï¼‰Spring5-æ•´åˆ-JUnit5" class="headerlink" title="ï¼ˆ2ï¼‰Spring5 æ•´åˆ JUnit5"></a>ï¼ˆ2ï¼‰Spring5 æ•´åˆ JUnit5</h4><p>ç¬¬ä¸€æ­¥ å¼•å…¥ JUnit5 çš„ jar åŒ…</p><p><code>import org.junit.jupiter.api.Test;//å¯¼å…¥Junit5çš„åŒ…</code></p><p>ç¬¬äºŒæ­¥ åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£å®Œæˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¼”ç¤ºspring5æ•´åˆjunit5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*@ExtendWith(SpringExtension.class)</span></span><br><span class="line"><span class="comment">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨ä¸€ä¸ªå¤åˆæ³¨è§£(SpringJUnitConfig)æ›¿ä»£ä¸Šé¢ä¸¤ä¸ªæ³¨è§£å®Œæˆæ•´åˆ</span></span><br><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Junit5Test</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.account(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>), <span class="string">&quot;lucy&quot;</span>, <span class="string">&quot;mary&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SpringWebflux"><a href="#SpringWebflux" class="headerlink" title="SpringWebflux"></a>SpringWebflux</h3><p>åŸºäº springMVC springboot maven java8æ–°ç‰¹æ€§</p><h4 id="1ã€SpringWebfluxä»‹ç»"><a href="#1ã€SpringWebfluxä»‹ç»" class="headerlink" title="1ã€SpringWebfluxä»‹ç»"></a>1ã€SpringWebfluxä»‹ç»</h4><h4 id="2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰"><a href="#2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰" class="headerlink" title="2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰"></a>2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰</h4></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Spring5ç¬”è®°</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.twintea.top/posts/70b6ad8d.html">https://blog.twintea.top/posts/70b6ad8d.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>ğŸ¤twinteağŸ¥</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2022-01-23</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2023-03-12</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring/">Spring</a><a class="post-meta__tags" href="/tags/Spring5/">Spring5</a></div><div class="post_share"><div class="social-share" data-image="https://static-bed.twintea.top/wallpaper/TIM%E5%9B%BE%E7%89%8720181208144407.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/850c6616.html" title="SpringSecurityå¿«é€Ÿå…¥é—¨"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/wallhaven-l3xk6q.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">SpringSecurityå¿«é€Ÿå…¥é—¨</div></div></a></div><div class="next-post pull-right"><a href="/posts/397c083a.html" title="Java8æ–°ç‰¹æ€§"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/å£çº¸ç”µè„‘7.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Java8æ–°ç‰¹æ€§</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/850c6616.html" title="SpringSecurityå¿«é€Ÿå…¥é—¨"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/wallhaven-l3xk6q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-23</div><div class="title">SpringSecurityå¿«é€Ÿå…¥é—¨</div></div></a></div><div><a href="/posts/e545fed0.html" title="SpringMVCç¬”è®°"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/wallhaven-p9ozm9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-26</div><div class="title">SpringMVCç¬”è®°</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"></div><div class="author_top is-center"><div class="card-info-avatar"></div><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/avatar.jfif" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">ğŸ¤twinteağŸ¥</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/twintea"><i class="fab fa-github"></i><span>ğŸ±â€ğŸFollow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/twintea" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:beyond2galaxy@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">Welcome to my BlogğŸ¥‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">å†…å®¹ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">springæ¡†æ¶æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring5%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">spring5æ¡†æ¶å…¥é—¨æ¡ˆä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC"><span class="toc-number">4.</span> <span class="toc-text">IOC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">4.1.</span> <span class="toc-text">IOCæ¦‚å¿µå’Œåº•å±‚åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFIOC"><span class="toc-number">4.1.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯IOC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IOC%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">4.1.2.</span> <span class="toc-text">IOCçš„åº•å±‚åŸç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC%E6%93%8D%E4%BD%9CBean%E7%AE%A1%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">IOCæ“ä½œBeanç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFBean%E7%AE%A1%E7%90%86%EF%BC%88%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="toc-number">5.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼ˆæ¦‚å¿µï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Exml%E6%96%B9%E5%BC%8F%E7%9A%84bean%E7%AE%A1%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">åŸºäºxmlæ–¹å¼çš„beanç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81spring%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-number">5.2.1.</span> <span class="toc-text">1ã€springå¯¹è±¡åˆ›å»º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E4%BA%8Exml%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="toc-number">5.2.2.</span> <span class="toc-text">2ã€åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A%E9%80%9A%E8%BF%87-set-%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šé€šè¿‡ set æ–¹æ³•æ³¨å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F-%E9%80%9A%E8%BF%87%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">ç¬¬äºŒç§æ³¨å…¥æ–¹å¼ é€šè¿‡æœ‰å‚æ„é€ æ³¨å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5-%E4%BA%86%E8%A7%A3-%EF%BC%8C%E5%BA%95%E5%B1%82%E5%85%B6%E5%AE%9E%E6%98%AFset%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">påç§°ç©ºé—´æ³¨å…¥(äº†è§£ ï¼Œåº•å±‚å…¶å®æ˜¯setæ–¹æ³•æ³¨å…¥)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">5.2.2.4.</span> <span class="toc-text">æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%96%E9%83%A8bean"><span class="toc-number">5.2.2.5.</span> <span class="toc-text">å¤–éƒ¨bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E9%83%A8bean"><span class="toc-number">5.2.2.6.</span> <span class="toc-text">å†…éƒ¨bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="toc-number">5.2.2.7.</span> <span class="toc-text">çº§è”èµ‹å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">5.2.2.8.</span> <span class="toc-text">æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FactoryBean"><span class="toc-number">5.2.3.</span> <span class="toc-text">FactoryBean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">åŸºæœ¬ä»‹ç»ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0-%E5%88%9B%E5%BB%BA%E5%B7%A5%E5%8E%82bean"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">å¦‚ä½•å®ç° åˆ›å»ºå·¥å‚bean</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">5.2.4.</span> <span class="toc-text">beanä½œç”¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8D%95%E5%AE%9E%E4%BE%8B%E5%92%8C%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">å¦‚ä½•è®¾ç½®å•å®ä¾‹å’Œå¤šå®ä¾‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#singleton%E5%92%8C-prototype%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">singletonå’Œ prototypeçš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.5.</span> <span class="toc-text">beançš„ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.5.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.5.2.</span> <span class="toc-text">beanç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAbean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.5.3.</span> <span class="toc-text">æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81bean-%E7%9A%84%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%8Cbean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%9C%89%E4%B8%83%E6%AD%A5"><span class="toc-number">5.2.5.4.</span> <span class="toc-text">4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xml%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.2.6.</span> <span class="toc-text">xmlè‡ªåŠ¨è£…é…</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.2.6.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.2.6.2.</span> <span class="toc-text">æ¼”ç¤ºè‡ªåŠ¨è£…é…</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xml%E9%85%8D%E7%BD%AE%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-number">5.2.7.</span> <span class="toc-text">xmlé…ç½®å¤–éƒ¨å±æ€§æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="toc-number">5.2.7.1.</span> <span class="toc-text">1ã€ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">5.2.7.2.</span> <span class="toc-text">å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± </span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E7%9A%84bean%E7%AE%A1%E7%90%86"><span class="toc-number">5.3.</span> <span class="toc-text">åŸºäºæ³¨è§£æ–¹å¼çš„beanç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3%EF%BC%9F"><span class="toc-number">5.3.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spring%E9%92%88%E5%AF%B9bean%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="toc-number">5.3.2.</span> <span class="toc-text">springé’ˆå¯¹beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0bean%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-number">5.3.3.</span> <span class="toc-text">åŸºäºæ³¨è§£æ–¹å¼å®ç°beanå¯¹è±¡åˆ›å»ºå®ä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E9%85%8D%E7%BD%AE%E7%9A%84%E7%BB%86%E8%8A%82"><span class="toc-number">5.3.4.</span> <span class="toc-text">ç»„ä»¶æ‰«æé…ç½®çš„ç»†èŠ‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-number">5.3.5.</span> <span class="toc-text">åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">5.3.6.</span> <span class="toc-text">å®Œå…¨æ³¨è§£å¼€å‘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aop"><span class="toc-number">6.</span> <span class="toc-text">Aop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFaop"><span class="toc-number">6.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯aop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aop%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">aopåº•å±‚åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%EF%BC%88JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-number">6.3.</span> <span class="toc-text">AOPï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aop%E7%9A%84%E6%9C%AF%E8%AF%AD"><span class="toc-number">6.4.</span> <span class="toc-text">Aopçš„æœ¯è¯­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%E6%93%8D%E4%BD%9C%E5%87%86%E5%A4%87%EF%BC%9A"><span class="toc-number">6.5.</span> <span class="toc-text">AOPæ“ä½œå‡†å¤‡ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aop%E6%93%8D%E4%BD%9C-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-number">6.6.</span> <span class="toc-text">Aopæ“ä½œ-åŸºäºæ³¨è§£æ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aop%E6%93%8D%E4%BD%9C-%E5%9F%BA%E4%BA%8EAspectJ%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E7%94%A8%E7%9A%84%E8%BE%83%E5%B0%91"><span class="toc-number">6.7.</span> <span class="toc-text">Aopæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶(ç”¨çš„è¾ƒå°‘)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate"><span class="toc-number">7.</span> <span class="toc-text">JdbcTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E5%92%8C%E5%87%86%E5%A4%87"><span class="toc-number">7.1.</span> <span class="toc-text">æ¦‚å¿µå’Œå‡†å¤‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbcTemplate%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%A2%9E%E6%94%B9%E5%88%A0%EF%BC%89"><span class="toc-number">7.2.</span> <span class="toc-text">jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆå¢æ”¹åˆ ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbcTemplate%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%EF%BC%89"><span class="toc-number">7.3.</span> <span class="toc-text">jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC"><span class="toc-number">7.3.1.</span> <span class="toc-text">æŸ¥è¯¢è¿”å›æŸä¸ªå€¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.3.2.</span> <span class="toc-text">æŸ¥è¯¢è¿”å›æŸä¸ªå¯¹è±¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E9%9B%86%E5%90%88"><span class="toc-number">7.3.3.</span> <span class="toc-text">æŸ¥è¯¢è¿”å›æŸä¸ªé›†åˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbcTemplate%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-number">7.4.</span> <span class="toc-text">jdbcTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring%E6%93%8D%E4%BD%9C%E4%BA%8B%E5%8A%A1"><span class="toc-number">8.</span> <span class="toc-text">springæ“ä½œäº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">8.1.</span> <span class="toc-text">äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1%EF%BC%9F"><span class="toc-number">8.1.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7-ACID"><span class="toc-number">8.1.2.</span> <span class="toc-text">äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ (ACID)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">8.2.</span> <span class="toc-text">äº‹åŠ¡æ“ä½œç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spring%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="toc-number">8.3.</span> <span class="toc-text">springäº‹åŠ¡ç®¡ç†ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">8.4.</span> <span class="toc-text">æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">8.5.</span> <span class="toc-text">å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#propagation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA-%EF%BC%88%E9%9D%A2%E8%AF%95%E4%BC%9A%E8%80%83%EF%BC%89"><span class="toc-number">8.6.</span> <span class="toc-text">propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º ï¼ˆé¢è¯•ä¼šè€ƒï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isolation-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">8.7.</span> <span class="toc-text">isolation:äº‹åŠ¡éš”ç¦»çº§åˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Exml%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">8.8.</span> <span class="toc-text">åŸºäºxmlæ–¹å¼è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%9E%E7%8E%B0%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">8.9.</span> <span class="toc-text">åŸºäºå®Œå…¨æ³¨è§£å¼€å‘å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring5%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">9.</span> <span class="toc-text">spring5æ–°ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%89%B9%E7%82%B9"><span class="toc-number">9.1.</span> <span class="toc-text">1ã€ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Spring-5-0-%E6%A1%86%E6%9E%B6%E8%87%AA%E5%B8%A6%E4%BA%86%E9%80%9A%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97%E5%B0%81%E8%A3%85"><span class="toc-number">9.2.</span> <span class="toc-text">2ã€Spring 5.0 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Spring5-%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81-Nullable-%E6%B3%A8%E8%A7%A3"><span class="toc-number">9.3.</span> <span class="toc-text">3ã€Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ@Nullable æ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Spring5-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E5%BC%8F%E9%A3%8E%E6%A0%BC-GenericApplicationContext"><span class="toc-number">9.4.</span> <span class="toc-text">4ã€Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ GenericApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Spring5-%E6%94%AF%E6%8C%81%E6%95%B4%E5%90%88-JUnit5"><span class="toc-number">9.5.</span> <span class="toc-text">5ã€Spring5 æ”¯æŒæ•´åˆ JUnit5</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%95%B4%E5%90%88-JUnit4"><span class="toc-number">9.5.1.</span> <span class="toc-text">ï¼ˆ1ï¼‰æ•´åˆ JUnit4</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89Spring5-%E6%95%B4%E5%90%88-JUnit5"><span class="toc-number">9.5.2.</span> <span class="toc-text">ï¼ˆ2ï¼‰Spring5 æ•´åˆ JUnit5</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringWebflux"><span class="toc-number">9.6.</span> <span class="toc-text">SpringWebflux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81SpringWebflux%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.6.1.</span> <span class="toc-text">1ã€SpringWebfluxä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%88java%E5%AE%9E%E7%8E%B0%EF%BC%89"><span class="toc-number">9.6.2.</span> <span class="toc-text">2ã€å“åº”å¼ç¼–ç¨‹ï¼ˆjavaå®ç°ï¼‰</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c43bf339.html" title="Sky-User-Centeré¡¹ç›®ä»‹ç»"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/ç”µè„‘å£çº¸70.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Sky-User-Centeré¡¹ç›®ä»‹ç»"></a><div class="content"><a class="title" href="/posts/c43bf339.html" title="Sky-User-Centeré¡¹ç›®ä»‹ç»">Sky-User-Centeré¡¹ç›®ä»‹ç»</a><time datetime="2023-03-08T22:00:00.000Z" title="å‘è¡¨äº 2023-03-08 22:00:00">2023-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8036cfa7.html" title="Sky-User-Centerå¼€å‘ç¬”è®°"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/TIM%E5%9B%BE%E7%89%8720181208144407.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Sky-User-Centerå¼€å‘ç¬”è®°"></a><div class="content"><a class="title" href="/posts/8036cfa7.html" title="Sky-User-Centerå¼€å‘ç¬”è®°">Sky-User-Centerå¼€å‘ç¬”è®°</a><time datetime="2023-03-08T22:00:00.000Z" title="å‘è¡¨äº 2023-03-08 22:00:00">2023-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/41803b43.html" title="é‡ç½®æ•°æ®åº“"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static-bed.twintea.top/wallpaper/wallhaven-l3xk6q.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="é‡ç½®æ•°æ®åº“"></a><div class="content"><a class="title" href="/posts/41803b43.html" title="é‡ç½®æ•°æ®åº“">é‡ç½®æ•°æ®åº“</a><time datetime="2023-03-08T22:00:00.000Z" title="å‘è¡¨äº 2023-03-08 22:00:00">2023-03-08</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="ft"></div><div class="copyright"><span><b>&copy;2023 - 2024</b></span><span><b>&nbsp;&nbsp;By ğŸ¤twinteağŸ¥</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.7.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" title="æœ¬ç«™å·²åœ¨æ¡‚è¿›è¡Œå¤‡æ¡ˆ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E6%A1%82ICP%E5%A4%87-2022001032%E5%8F%B7-red?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAQjSURBVHjaVNNZbFRlGIDh95w525zpdGa6TVtbykBbyiICxQY0AhYTJUCiiYqGqEEiJhKQmBg0ESPeeCGRENEYb4jhBr0gNQrRlCBiSgyLaSlSaKEs3Wemy+xnzuqFYdD/6rt6ku/N9wue55EcPwWArCgIgkx5ZRuYVxsnJ801Z05f3jY1MRnb/HxHV+uSph9RKq4mhkdwbZVgdQ2SHkPTwgj/h1QUWWi8/tfg/hM/XN/Y2zfaZnkSnuRDtLMsXhBOvrJtya/LlrcdMs1Qb1lVRQmSAEDAsU1kxpgamXp3y+azu1esreK9dyRqs9PIjkW6OsLx7lTV1ld/237s8HRV57MbnvO8CA+e9GCQFTk6Mza+4/0P+t9a9VSEI3uyTH/eR27aB2Ed31Q/Hx1sI6BHOPT13c5Frd0HW9p3HPUQEwAigJW9RDp+bstrOy981nVGLN/7RpHUV70YfXnEAtjxFPasxPDBQXatjzNTdOQXtg983H/51AFFy1KCIg2bNIdC+8270NwmUmelsXqSqHkDK5PDl8iCW0QcnEW+lqCjvcjQuMZ4YnQRTkotQUZu4GkjcfZNv19G011kXw4vayNYNvqCCvSVTciOgABgeuhBGwhgz5zbkI2ff7HUqJiNR2QktbbSYnBYYqbMT/ilKI4SIbT/GcRylbnvLmJ2X8N7tJ7rR8OE/BbliqEYea81WIotmOs02WFpc55Lf0f5/mSI3dsamOgxSX7ZjaALuBmB6M6FnB+S+POCwmOLk1QFFAqZyQWl1YrpiRZJLvDkygyC5NJ1XCax7xYNiTQVEYVIuUulayIcGeLkpw6WK7GuPY/fb2CkhleXIFFe8XPGaKBj9QxLW1Ik0bg8EuT2zRCJYZvZIYepe0EGbvi4bQUJVZhs2phADFYj+df0lBqJUnaekS4SUHXe3jrOnoE2PhSewHfRpfZGgcryIvfHdQruQlLo7Ns6QizqkJ31CIUlqwQJXuWUpDXj6qOsW32HT3YNImll9FwJsb4jyaLmWQ4fa6a+2sQw0ry8YZSiHcPxxXBtMfCv4XkUCrfliWs/fTE31rtTVfv9vsIorvQIniMhqXM4popVcJFVMHMpfMEaLPdxR1Tnna1b1vl6tGntpAjgCTNWONZyIFBR8Ydtr6EgrCI3VySfzZPLBDHyIq5gkpmzcOUmTGMF+bh7M9LYulfWzMmHBzk7Fpq9deWEYxjrtaCMXjWfstp6BCGNXZzBdYqYhogWqkMum4+oBVD0YnP63u/fFqbv1D+M7VSlBbmmK5uYaLYLYwslfwFVAyXQiOfcx3XyyGIM8DDn0lgWyGokHogu/0UJxpL/+f2e569s/CZQZ53OpzJr0+NXludUfb5jVdf7VUGXJUPIZast1S9PeII6jFDT5xMjFwO1S4c8zwTgnwEAxufYSzA67PMAAAAASUVORK5CYII=" alt=""></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.1/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class="js-pjax"><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-vercel.twintea.top/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("https://lib.baomitu.com/twikoo/1.6.10/twikoo.all.min.js").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script defer src="/js/kslink.js"></script><script defer src="/js/runtime.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script data-pjax defer src="/js/emoji.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/fireworks.min.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="49" mobile="false" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-nest.min.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","750ms"),arr[i].setAttribute("data-wow-delay","600ms"),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html>